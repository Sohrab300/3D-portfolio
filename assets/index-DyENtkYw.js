(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();function Ug(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Lb={exports:{}},C0={};var pE;function SD(){if(pE)return C0;pE=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,i,r){var l=null;if(r!==void 0&&(l=""+r),i.key!==void 0&&(l=""+i.key),"key"in i){r={};for(var c in i)c!=="key"&&(r[c]=i[c])}else r=i;return i=r.ref,{$$typeof:a,type:n,key:l,ref:i!==void 0?i:null,props:r}}return C0.Fragment=e,C0.jsx=t,C0.jsxs=t,C0}var mE;function MD(){return mE||(mE=1,Lb.exports=SD()),Lb.exports}var Ke=MD(),Ib={exports:{}},Kt={};var gE;function ED(){if(gE)return Kt;gE=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),r=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),_=Symbol.iterator;function y(q){return q===null||typeof q!="object"?null:(q=_&&q[_]||q["@@iterator"],typeof q=="function"?q:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,C={};function M(q,se,Ce){this.props=q,this.context=se,this.refs=C,this.updater=Ce||S}M.prototype.isReactComponent={},M.prototype.setState=function(q,se){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,se,"setState")},M.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function B(){}B.prototype=M.prototype;function D(q,se,Ce){this.props=q,this.context=se,this.refs=C,this.updater=Ce||S}var w=D.prototype=new B;w.constructor=D,E(w,M.prototype),w.isPureReactComponent=!0;var z=Array.isArray;function O(){}var P={H:null,A:null,T:null,S:null},G=Object.prototype.hasOwnProperty;function L(q,se,Ce){var Ee=Ce.ref;return{$$typeof:a,type:q,key:se,ref:Ee!==void 0?Ee:null,props:Ce}}function I(q,se){return L(q.type,se,q.props)}function Y(q){return typeof q=="object"&&q!==null&&q.$$typeof===a}function ee(q){var se={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(Ce){return se[Ce]})}var te=/\/+/g;function le(q,se){return typeof q=="object"&&q!==null&&q.key!=null?ee(""+q.key):se.toString(36)}function re(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(O,O):(q.status="pending",q.then(function(se){q.status==="pending"&&(q.status="fulfilled",q.value=se)},function(se){q.status==="pending"&&(q.status="rejected",q.reason=se)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function F(q,se,Ce,Ee,Ye){var ge=typeof q;(ge==="undefined"||ge==="boolean")&&(q=null);var Re=!1;if(q===null)Re=!0;else switch(ge){case"bigint":case"string":case"number":Re=!0;break;case"object":switch(q.$$typeof){case a:case e:Re=!0;break;case g:return Re=q._init,F(Re(q._payload),se,Ce,Ee,Ye)}}if(Re)return Ye=Ye(q),Re=Ee===""?"."+le(q,0):Ee,z(Ye)?(Ce="",Re!=null&&(Ce=Re.replace(te,"$&/")+"/"),F(Ye,se,Ce,"",function(vt){return vt})):Ye!=null&&(Y(Ye)&&(Ye=I(Ye,Ce+(Ye.key==null||q&&q.key===Ye.key?"":(""+Ye.key).replace(te,"$&/")+"/")+Re)),se.push(Ye)),1;Re=0;var $e=Ee===""?".":Ee+":";if(z(q))for(var ut=0;ut<q.length;ut++)Ee=q[ut],ge=$e+le(Ee,ut),Re+=F(Ee,se,Ce,ge,Ye);else if(ut=y(q),typeof ut=="function")for(q=ut.call(q),ut=0;!(Ee=q.next()).done;)Ee=Ee.value,ge=$e+le(Ee,ut++),Re+=F(Ee,se,Ce,ge,Ye);else if(ge==="object"){if(typeof q.then=="function")return F(re(q),se,Ce,Ee,Ye);throw se=String(q),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Re}function J(q,se,Ce){if(q==null)return q;var Ee=[],Ye=0;return F(q,Ee,"","",function(ge){return se.call(Ce,ge,Ye++)}),Ee}function Z(q){if(q._status===-1){var se=q._result;se=se(),se.then(function(Ce){(q._status===0||q._status===-1)&&(q._status=1,q._result=Ce)},function(Ce){(q._status===0||q._status===-1)&&(q._status=2,q._result=Ce)}),q._status===-1&&(q._status=0,q._result=se)}if(q._status===1)return q._result.default;throw q._result}var oe=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},pe={map:J,forEach:function(q,se,Ce){J(q,function(){se.apply(this,arguments)},Ce)},count:function(q){var se=0;return J(q,function(){se++}),se},toArray:function(q){return J(q,function(se){return se})||[]},only:function(q){if(!Y(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Kt.Activity=v,Kt.Children=pe,Kt.Component=M,Kt.Fragment=t,Kt.Profiler=i,Kt.PureComponent=D,Kt.StrictMode=n,Kt.Suspense=d,Kt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=P,Kt.__COMPILER_RUNTIME={__proto__:null,c:function(q){return P.H.useMemoCache(q)}},Kt.cache=function(q){return function(){return q.apply(null,arguments)}},Kt.cacheSignal=function(){return null},Kt.cloneElement=function(q,se,Ce){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var Ee=E({},q.props),Ye=q.key;if(se!=null)for(ge in se.key!==void 0&&(Ye=""+se.key),se)!G.call(se,ge)||ge==="key"||ge==="__self"||ge==="__source"||ge==="ref"&&se.ref===void 0||(Ee[ge]=se[ge]);var ge=arguments.length-2;if(ge===1)Ee.children=Ce;else if(1<ge){for(var Re=Array(ge),$e=0;$e<ge;$e++)Re[$e]=arguments[$e+2];Ee.children=Re}return L(q.type,Ye,Ee)},Kt.createContext=function(q){return q={$$typeof:l,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:r,_context:q},q},Kt.createElement=function(q,se,Ce){var Ee,Ye={},ge=null;if(se!=null)for(Ee in se.key!==void 0&&(ge=""+se.key),se)G.call(se,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(Ye[Ee]=se[Ee]);var Re=arguments.length-2;if(Re===1)Ye.children=Ce;else if(1<Re){for(var $e=Array(Re),ut=0;ut<Re;ut++)$e[ut]=arguments[ut+2];Ye.children=$e}if(q&&q.defaultProps)for(Ee in Re=q.defaultProps,Re)Ye[Ee]===void 0&&(Ye[Ee]=Re[Ee]);return L(q,ge,Ye)},Kt.createRef=function(){return{current:null}},Kt.forwardRef=function(q){return{$$typeof:c,render:q}},Kt.isValidElement=Y,Kt.lazy=function(q){return{$$typeof:g,_payload:{_status:-1,_result:q},_init:Z}},Kt.memo=function(q,se){return{$$typeof:p,type:q,compare:se===void 0?null:se}},Kt.startTransition=function(q){var se=P.T,Ce={};P.T=Ce;try{var Ee=q(),Ye=P.S;Ye!==null&&Ye(Ce,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(O,oe)}catch(ge){oe(ge)}finally{se!==null&&Ce.types!==null&&(se.types=Ce.types),P.T=se}},Kt.unstable_useCacheRefresh=function(){return P.H.useCacheRefresh()},Kt.use=function(q){return P.H.use(q)},Kt.useActionState=function(q,se,Ce){return P.H.useActionState(q,se,Ce)},Kt.useCallback=function(q,se){return P.H.useCallback(q,se)},Kt.useContext=function(q){return P.H.useContext(q)},Kt.useDebugValue=function(){},Kt.useDeferredValue=function(q,se){return P.H.useDeferredValue(q,se)},Kt.useEffect=function(q,se){return P.H.useEffect(q,se)},Kt.useEffectEvent=function(q){return P.H.useEffectEvent(q)},Kt.useId=function(){return P.H.useId()},Kt.useImperativeHandle=function(q,se,Ce){return P.H.useImperativeHandle(q,se,Ce)},Kt.useInsertionEffect=function(q,se){return P.H.useInsertionEffect(q,se)},Kt.useLayoutEffect=function(q,se){return P.H.useLayoutEffect(q,se)},Kt.useMemo=function(q,se){return P.H.useMemo(q,se)},Kt.useOptimistic=function(q,se){return P.H.useOptimistic(q,se)},Kt.useReducer=function(q,se,Ce){return P.H.useReducer(q,se,Ce)},Kt.useRef=function(q){return P.H.useRef(q)},Kt.useState=function(q){return P.H.useState(q)},Kt.useSyncExternalStore=function(q,se,Ce){return P.H.useSyncExternalStore(q,se,Ce)},Kt.useTransition=function(){return P.H.useTransition()},Kt.version="19.2.0",Kt}var vE;function Kp(){return vE||(vE=1,Ib.exports=ED()),Ib.exports}var Qe=Kp();const TD=Ug(Qe);var zb={exports:{}},R0={},Pb={exports:{}},Fb={};var xE;function CD(){return xE||(xE=1,(function(a){function e(F,J){var Z=F.length;F.push(J);e:for(;0<Z;){var oe=Z-1>>>1,pe=F[oe];if(0<i(pe,J))F[oe]=J,F[Z]=pe,Z=oe;else break e}}function t(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var J=F[0],Z=F.pop();if(Z!==J){F[0]=Z;e:for(var oe=0,pe=F.length,q=pe>>>1;oe<q;){var se=2*(oe+1)-1,Ce=F[se],Ee=se+1,Ye=F[Ee];if(0>i(Ce,Z))Ee<pe&&0>i(Ye,Ce)?(F[oe]=Ye,F[Ee]=Z,oe=Ee):(F[oe]=Ce,F[se]=Z,oe=se);else if(Ee<pe&&0>i(Ye,Z))F[oe]=Ye,F[Ee]=Z,oe=Ee;else break e}}return J}function i(F,J){var Z=F.sortIndex-J.sortIndex;return Z!==0?Z:F.id-J.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;a.unstable_now=function(){return r.now()}}else{var l=Date,c=l.now();a.unstable_now=function(){return l.now()-c}}var d=[],p=[],g=1,v=null,_=3,y=!1,S=!1,E=!1,C=!1,M=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function w(F){for(var J=t(p);J!==null;){if(J.callback===null)n(p);else if(J.startTime<=F)n(p),J.sortIndex=J.expirationTime,e(d,J);else break;J=t(p)}}function z(F){if(E=!1,w(F),!S)if(t(d)!==null)S=!0,O||(O=!0,ee());else{var J=t(p);J!==null&&re(z,J.startTime-F)}}var O=!1,P=-1,G=5,L=-1;function I(){return C?!0:!(a.unstable_now()-L<G)}function Y(){if(C=!1,O){var F=a.unstable_now();L=F;var J=!0;try{e:{S=!1,E&&(E=!1,B(P),P=-1),y=!0;var Z=_;try{t:{for(w(F),v=t(d);v!==null&&!(v.expirationTime>F&&I());){var oe=v.callback;if(typeof oe=="function"){v.callback=null,_=v.priorityLevel;var pe=oe(v.expirationTime<=F);if(F=a.unstable_now(),typeof pe=="function"){v.callback=pe,w(F),J=!0;break t}v===t(d)&&n(d),w(F)}else n(d);v=t(d)}if(v!==null)J=!0;else{var q=t(p);q!==null&&re(z,q.startTime-F),J=!1}}break e}finally{v=null,_=Z,y=!1}J=void 0}}finally{J?ee():O=!1}}}var ee;if(typeof D=="function")ee=function(){D(Y)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,le=te.port2;te.port1.onmessage=Y,ee=function(){le.postMessage(null)}}else ee=function(){M(Y,0)};function re(F,J){P=M(function(){F(a.unstable_now())},J)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(F){F.callback=null},a.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<F?Math.floor(1e3/F):5},a.unstable_getCurrentPriorityLevel=function(){return _},a.unstable_next=function(F){switch(_){case 1:case 2:case 3:var J=3;break;default:J=_}var Z=_;_=J;try{return F()}finally{_=Z}},a.unstable_requestPaint=function(){C=!0},a.unstable_runWithPriority=function(F,J){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Z=_;_=F;try{return J()}finally{_=Z}},a.unstable_scheduleCallback=function(F,J,Z){var oe=a.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?oe+Z:oe):Z=oe,F){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=Z+pe,F={id:g++,callback:J,priorityLevel:F,startTime:Z,expirationTime:pe,sortIndex:-1},Z>oe?(F.sortIndex=Z,e(p,F),t(d)===null&&F===t(p)&&(E?(B(P),P=-1):E=!0,re(z,Z-oe))):(F.sortIndex=pe,e(d,F),S||y||(S=!0,O||(O=!0,ee()))),F},a.unstable_shouldYield=I,a.unstable_wrapCallback=function(F){var J=_;return function(){var Z=_;_=J;try{return F.apply(this,arguments)}finally{_=Z}}}})(Fb)),Fb}var _E;function RD(){return _E||(_E=1,Pb.exports=CD()),Pb.exports}var Hb={exports:{}},es={};var yE;function BD(){if(yE)return es;yE=1;var a=Kp();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)p+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},i=Symbol.for("react.portal");function r(d,p,g){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:v==null?null:""+v,children:d,containerInfo:p,implementation:g}}var l=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return es.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,es.createPortal=function(d,p){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return r(d,p,null,g)},es.flushSync=function(d){var p=l.T,g=n.p;try{if(l.T=null,n.p=2,d)return d()}finally{l.T=p,n.p=g,n.d.f()}},es.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,n.d.C(d,p))},es.prefetchDNS=function(d){typeof d=="string"&&n.d.D(d)},es.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var g=p.as,v=c(g,p.crossOrigin),_=typeof p.integrity=="string"?p.integrity:void 0,y=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;g==="style"?n.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:v,integrity:_,fetchPriority:y}):g==="script"&&n.d.X(d,{crossOrigin:v,integrity:_,fetchPriority:y,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},es.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var g=c(p.as,p.crossOrigin);n.d.M(d,{crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&n.d.M(d)},es.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var g=p.as,v=c(g,p.crossOrigin);n.d.L(d,g,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},es.preloadModule=function(d,p){if(typeof d=="string")if(p){var g=c(p.as,p.crossOrigin);n.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:g,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else n.d.m(d)},es.requestFormReset=function(d){n.d.r(d)},es.unstable_batchedUpdates=function(d,p){return d(p)},es.useFormState=function(d,p,g){return l.H.useFormState(d,p,g)},es.useFormStatus=function(){return l.H.useHostTransitionStatus()},es.version="19.2.0",es}var bE;function DD(){if(bE)return Hb.exports;bE=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),Hb.exports=BD(),Hb.exports}var AE;function wD(){if(AE)return R0;AE=1;var a=RD(),e=Kp(),t=DD();function n(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)o+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function r(s){var o=s,h=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(h=o.return),s=o.return;while(s)}return o.tag===3?h:null}function l(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function c(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function d(s){if(r(s)!==s)throw Error(n(188))}function p(s){var o=s.alternate;if(!o){if(o=r(s),o===null)throw Error(n(188));return o!==s?null:s}for(var h=s,m=o;;){var b=h.return;if(b===null)break;var T=b.alternate;if(T===null){if(m=b.return,m!==null){h=m;continue}break}if(b.child===T.child){for(T=b.child;T;){if(T===h)return d(b),s;if(T===m)return d(b),o;T=T.sibling}throw Error(n(188))}if(h.return!==m.return)h=b,m=T;else{for(var N=!1,X=b.child;X;){if(X===h){N=!0,h=b,m=T;break}if(X===m){N=!0,m=b,h=T;break}X=X.sibling}if(!N){for(X=T.child;X;){if(X===h){N=!0,h=T,m=b;break}if(X===m){N=!0,m=T,h=b;break}X=X.sibling}if(!N)throw Error(n(189))}}if(h.alternate!==m)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?s:o}function g(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=g(s),o!==null)return o;s=s.sibling}return null}var v=Object.assign,_=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),B=Symbol.for("react.consumer"),D=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function ee(s){return s===null||typeof s!="object"?null:(s=Y&&s[Y]||s["@@iterator"],typeof s=="function"?s:null)}var te=Symbol.for("react.client.reference");function le(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===te?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case E:return"Fragment";case M:return"Profiler";case C:return"StrictMode";case z:return"Suspense";case O:return"SuspenseList";case L:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case D:return s.displayName||"Context";case B:return(s._context.displayName||"Context")+".Consumer";case w:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case P:return o=s.displayName||null,o!==null?o:le(s.type)||"Memo";case G:o=s._payload,s=s._init;try{return le(s(o))}catch{}}return null}var re=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},oe=[],pe=-1;function q(s){return{current:s}}function se(s){0>pe||(s.current=oe[pe],oe[pe]=null,pe--)}function Ce(s,o){pe++,oe[pe]=s.current,s.current=o}var Ee=q(null),Ye=q(null),ge=q(null),Re=q(null);function $e(s,o){switch(Ce(ge,o),Ce(Ye,s),Ce(Ee,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?zM(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=zM(o),s=PM(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}se(Ee),Ce(Ee,s)}function ut(){se(Ee),se(Ye),se(ge)}function vt(s){s.memoizedState!==null&&Ce(Re,s);var o=Ee.current,h=PM(o,s.type);o!==h&&(Ce(Ye,s),Ce(Ee,h))}function Pt(s){Ye.current===s&&(se(Ee),se(Ye)),Re.current===s&&(se(Re),S0._currentValue=Z)}var sn,Ct;function ze(s){if(sn===void 0)try{throw Error()}catch(h){var o=h.stack.trim().match(/\n( *(at )?)/);sn=o&&o[1]||"",Ct=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+sn+s+Ct}var W=!1;function He(s,o){if(!s||W)return"";W=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var Pe=function(){throw Error()};if(Object.defineProperty(Pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Pe,[])}catch(Be){var Se=Be}Reflect.construct(s,[],Pe)}else{try{Pe.call()}catch(Be){Se=Be}s.call(Pe.prototype)}}else{try{throw Error()}catch(Be){Se=Be}(Pe=s())&&typeof Pe.catch=="function"&&Pe.catch(function(){})}}catch(Be){if(Be&&Se&&typeof Be.stack=="string")return[Be.stack,Se.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=m.DetermineComponentFrameRoot(),N=T[0],X=T[1];if(N&&X){var ie=N.split(`
`),_e=X.split(`
`);for(b=m=0;m<ie.length&&!ie[m].includes("DetermineComponentFrameRoot");)m++;for(;b<_e.length&&!_e[b].includes("DetermineComponentFrameRoot");)b++;if(m===ie.length||b===_e.length)for(m=ie.length-1,b=_e.length-1;1<=m&&0<=b&&ie[m]!==_e[b];)b--;for(;1<=m&&0<=b;m--,b--)if(ie[m]!==_e[b]){if(m!==1||b!==1)do if(m--,b--,0>b||ie[m]!==_e[b]){var Ue=`
`+ie[m].replace(" at new "," at ");return s.displayName&&Ue.includes("<anonymous>")&&(Ue=Ue.replace("<anonymous>",s.displayName)),Ue}while(1<=m&&0<=b);break}}}finally{W=!1,Error.prepareStackTrace=h}return(h=s?s.displayName||s.name:"")?ze(h):""}function ke(s,o){switch(s.tag){case 26:case 27:case 5:return ze(s.type);case 16:return ze("Lazy");case 13:return s.child!==o&&o!==null?ze("Suspense Fallback"):ze("Suspense");case 19:return ze("SuspenseList");case 0:case 15:return He(s.type,!1);case 11:return He(s.type.render,!1);case 1:return He(s.type,!0);case 31:return ze("Activity");default:return""}}function et(s){try{var o="",h=null;do o+=ke(s,h),h=s,s=s.return;while(s);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var Ve=Object.prototype.hasOwnProperty,ot=a.unstable_scheduleCallback,it=a.unstable_cancelCallback,dt=a.unstable_shouldYield,K=a.unstable_requestPaint,H=a.unstable_now,me=a.unstable_getCurrentPriorityLevel,we=a.unstable_ImmediatePriority,Fe=a.unstable_UserBlockingPriority,Te=a.unstable_NormalPriority,yt=a.unstable_LowPriority,at=a.unstable_IdlePriority,St=a.log,xt=a.unstable_setDisableYieldValue,Ie=null,Ge=null;function _t(s){if(typeof St=="function"&&xt(s),Ge&&typeof Ge.setStrictMode=="function")try{Ge.setStrictMode(Ie,s)}catch{}}var $=Math.clz32?Math.clz32:Q,ye=Math.log,qe=Math.LN2;function Q(s){return s>>>=0,s===0?32:31-(ye(s)/qe|0)|0}var Je=256,We=262144,Ze=4194304;function Xe(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ne(s,o,h){var m=s.pendingLanes;if(m===0)return 0;var b=0,T=s.suspendedLanes,N=s.pingedLanes;s=s.warmLanes;var X=m&134217727;return X!==0?(m=X&~T,m!==0?b=Xe(m):(N&=X,N!==0?b=Xe(N):h||(h=X&~s,h!==0&&(b=Xe(h))))):(X=m&~T,X!==0?b=Xe(X):N!==0?b=Xe(N):h||(h=m&~s,h!==0&&(b=Xe(h)))),b===0?0:o!==0&&o!==b&&(o&T)===0&&(T=b&-b,h=o&-o,T>=h||T===32&&(h&4194048)!==0)?o:b}function lt(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function Mt(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rn(){var s=Ze;return Ze<<=1,(Ze&62914560)===0&&(Ze=4194304),s}function Wt(s){for(var o=[],h=0;31>h;h++)o.push(s);return o}function li(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Fi(s,o,h,m,b,T){var N=s.pendingLanes;s.pendingLanes=h,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=h,s.entangledLanes&=h,s.errorRecoveryDisabledLanes&=h,s.shellSuspendCounter=0;var X=s.entanglements,ie=s.expirationTimes,_e=s.hiddenUpdates;for(h=N&~h;0<h;){var Ue=31-$(h),Pe=1<<Ue;X[Ue]=0,ie[Ue]=-1;var Se=_e[Ue];if(Se!==null)for(_e[Ue]=null,Ue=0;Ue<Se.length;Ue++){var Be=Se[Ue];Be!==null&&(Be.lane&=-536870913)}h&=~Pe}m!==0&&Wc(s,m,0),T!==0&&b===0&&s.tag!==0&&(s.suspendedLanes|=T&~(N&~o))}function Wc(s,o,h){s.pendingLanes|=o,s.suspendedLanes&=~o;var m=31-$(o);s.entangledLanes|=o,s.entanglements[m]=s.entanglements[m]|1073741824|h&261930}function Ul(s,o){var h=s.entangledLanes|=o;for(s=s.entanglements;h;){var m=31-$(h),b=1<<m;b&o|s[m]&o&&(s[m]|=o),h&=~b}}function Ol(s,o){var h=o&-o;return h=(h&42)!==0?1:Zi(h),(h&(s.suspendedLanes|o))!==0?0:h}function Zi(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Xo(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function zs(){var s=J.p;return s!==0?s:(s=window.event,s===void 0?32:oE(s.type))}function cs(s,o){var h=J.p;try{return J.p=s,o()}finally{J.p=h}}var xa=Math.random().toString(36).slice(2),$t="__reactFiber$"+xa,Ai="__reactProps$"+xa,tr="__reactContainer$"+xa,Nl="__reactEvents$"+xa,Hh="__reactListeners$"+xa,nm="__reactHandles$"+xa,Du="__reactResources$"+xa,ao="__reactMarker$"+xa;function Ll(s){delete s[$t],delete s[Ai],delete s[Nl],delete s[Hh],delete s[nm]}function Si(s){var o=s[$t];if(o)return o;for(var h=s.parentNode;h;){if(o=h[tr]||h[$t]){if(h=o.alternate,o.child!==null||h!==null&&h.child!==null)for(s=YM(s);s!==null;){if(h=s[$t])return h;s=YM(s)}return o}s=h,h=s.parentNode}return null}function V(s){if(s=s[$t]||s[tr]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function ue(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(n(33))}function Ae(s){var o=s[Du];return o||(o=s[Du]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function ve(s){s[ao]=!0}var ce=new Set,tt={};function st(s,o){mt(s,o),mt(s+"Capture",o)}function mt(s,o){for(tt[s]=o,s=0;s<o.length;s++)ce.add(o[s])}var gt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ut={},Nt={};function Rt(s){return Ve.call(Nt,s)?!0:Ve.call(Ut,s)?!1:gt.test(s)?Nt[s]=!0:(Ut[s]=!0,!1)}function Jt(s,o,h){if(Rt(o))if(h===null)s.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+h)}}function gn(s,o,h){if(h===null)s.removeAttribute(o);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+h)}}function vn(s,o,h,m){if(m===null)s.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(h);return}s.setAttributeNS(o,h,""+m)}}function un(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Nn(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function wt(s,o,h){var m=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var b=m.get,T=m.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return b.call(this)},set:function(N){h=""+N,T.call(this,N)}}),Object.defineProperty(s,o,{enumerable:m.enumerable}),{getValue:function(){return h},setValue:function(N){h=""+N},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Xn(s){if(!s._valueTracker){var o=Nn(s)?"checked":"value";s._valueTracker=wt(s,o,""+s[o])}}function cn(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var h=o.getValue(),m="";return s&&(m=Nn(s)?s.checked?"true":"false":s.value),s=m,s!==h?(o.setValue(s),!0):!1}function Ui(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var so=/[\n"\\]/g;function qn(s){return s.replace(so,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Rr(s,o,h,m,b,T,N,X){s.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?s.type=N:s.removeAttribute("type"),o!=null?N==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+un(o)):s.value!==""+un(o)&&(s.value=""+un(o)):N!=="submit"&&N!=="reset"||s.removeAttribute("value"),o!=null?Hi(s,N,un(o)):h!=null?Hi(s,N,un(h)):m!=null&&s.removeAttribute("value"),b==null&&T!=null&&(s.defaultChecked=!!T),b!=null&&(s.checked=b&&typeof b!="function"&&typeof b!="symbol"),X!=null&&typeof X!="function"&&typeof X!="symbol"&&typeof X!="boolean"?s.name=""+un(X):s.removeAttribute("name")}function Jn(s,o,h,m,b,T,N,X){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(s.type=T),o!=null||h!=null){if(!(T!=="submit"&&T!=="reset"||o!=null)){Xn(s);return}h=h!=null?""+un(h):"",o=o!=null?""+un(o):h,X||o===s.value||(s.value=o),s.defaultValue=o}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=X?s.checked:!!m,s.defaultChecked=!!m,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(s.name=N),Xn(s)}function Hi(s,o,h){o==="number"&&Ui(s.ownerDocument)===s||s.defaultValue===""+h||(s.defaultValue=""+h)}function Gi(s,o,h,m){if(s=s.options,o){o={};for(var b=0;b<h.length;b++)o["$"+h[b]]=!0;for(h=0;h<s.length;h++)b=o.hasOwnProperty("$"+s[h].value),s[h].selected!==b&&(s[h].selected=b),b&&m&&(s[h].defaultSelected=!0)}else{for(h=""+un(h),o=null,b=0;b<s.length;b++){if(s[b].value===h){s[b].selected=!0,m&&(s[b].defaultSelected=!0);return}o!==null||s[b].disabled||(o=s[b])}o!==null&&(o.selected=!0)}}function Vi(s,o,h){if(o!=null&&(o=""+un(o),o!==s.value&&(s.value=o),h==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=h!=null?""+un(h):""}function fi(s,o,h,m){if(o==null){if(m!=null){if(h!=null)throw Error(n(92));if(re(m)){if(1<m.length)throw Error(n(93));m=m[0]}h=m}h==null&&(h=""),o=h}h=un(o),s.defaultValue=h,m=s.textContent,m===h&&m!==""&&m!==null&&(s.value=m),Xn(s)}function nr(s,o){if(o){var h=s.firstChild;if(h&&h===s.lastChild&&h.nodeType===3){h.nodeValue=o;return}}s.textContent=o}var Ps=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function jc(s,o,h){var m=o.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?m?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":m?s.setProperty(o,h):typeof h!="number"||h===0||Ps.has(o)?o==="float"?s.cssFloat=h:s[o]=(""+h).trim():s[o]=h+"px"}function im(s,o,h){if(o!=null&&typeof o!="object")throw Error(n(62));if(s=s.style,h!=null){for(var m in h)!h.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var b in o)m=o[b],o.hasOwnProperty(b)&&h[b]!==m&&jc(s,b,m)}else for(var T in o)o.hasOwnProperty(T)&&jc(s,T,o[T])}function Zc(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Jg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qc(s){return Jg.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Br(){}var $c=null;function Gh(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Il=null,ko=null;function am(s){var o=V(s);if(o&&(s=o.stateNode)){var h=s[Ai]||null;e:switch(s=o.stateNode,o.type){case"input":if(Rr(s,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),o=h.name,h.type==="radio"&&o!=null){for(h=s;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+qn(""+o)+'"][type="radio"]'),o=0;o<h.length;o++){var m=h[o];if(m!==s&&m.form===s.form){var b=m[Ai]||null;if(!b)throw Error(n(90));Rr(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(o=0;o<h.length;o++)m=h[o],m.form===s.form&&cn(m)}break e;case"textarea":Vi(s,h.value,h.defaultValue);break e;case"select":o=h.value,o!=null&&Gi(s,!!h.multiple,o,!1)}}}var Vh=!1;function sm(s,o,h){if(Vh)return s(o,h);Vh=!0;try{var m=s(o);return m}finally{if(Vh=!1,(Il!==null||ko!==null)&&(k(),Il&&(o=Il,s=ko,ko=Il=null,am(o),s)))for(o=0;o<s.length;o++)am(s[o])}}function zl(s,o){var h=s.stateNode;if(h===null)return null;var m=h[Ai]||null;if(m===null)return null;h=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(h&&typeof h!="function")throw Error(n(231,o,typeof h));return h}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xh=!1;if(Dr)try{var ef={};Object.defineProperty(ef,"passive",{get:function(){Xh=!0}}),window.addEventListener("test",ef,ef),window.removeEventListener("test",ef,ef)}catch{Xh=!1}var Yo=null,kh=null,qo=null;function Yh(){if(qo)return qo;var s,o=kh,h=o.length,m,b="value"in Yo?Yo.value:Yo.textContent,T=b.length;for(s=0;s<h&&o[s]===b[s];s++);var N=h-s;for(m=1;m<=N&&o[h-m]===b[T-m];m++);return qo=b.slice(s,1<m?1-m:void 0)}function Pl(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function tf(){return!0}function rm(){return!1}function _a(s){function o(h,m,b,T,N){this._reactName=h,this._targetInst=b,this.type=m,this.nativeEvent=T,this.target=N,this.currentTarget=null;for(var X in s)s.hasOwnProperty(X)&&(h=s[X],this[X]=h?h(T):T[X]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?tf:rm,this.isPropagationStopped=rm,this}return v(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=tf)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=tf)},persist:function(){},isPersistent:tf}),o}var Jo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nf=_a(Jo),ir=v({},Jo,{view:0,detail:0}),qh=_a(ir),Jh,af,wu,sf=v({},ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:of,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==wu&&(wu&&s.type==="mousemove"?(Jh=s.screenX-wu.screenX,af=s.screenY-wu.screenY):af=Jh=0,wu=s),Jh)},movementY:function(s){return"movementY"in s?s.movementY:af}}),Kg=_a(sf),oa=v({},sf,{dataTransfer:0}),Wg=_a(oa),jg=v({},ir,{relatedTarget:0}),Kh=_a(jg),Zg=v({},Jo,{animationName:0,elapsedTime:0,pseudoElement:0}),Qg=_a(Zg),rf=v({},Jo,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),om=_a(rf),$g=v({},Jo,{data:0}),lm=_a($g),ev={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},um={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},cm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tv(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=cm[s])?!!o[s]:!1}function of(){return tv}var fm=v({},ir,{key:function(s){if(s.key){var o=ev[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Pl(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?um[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:of,charCode:function(s){return s.type==="keypress"?Pl(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Pl(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),hm=_a(fm),nv=v({},sf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wh=_a(nv),iv=v({},ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:of}),ro=_a(iv),dm=v({},Jo,{propertyName:0,elapsedTime:0,pseudoElement:0}),eb=_a(dm),av=v({},sf,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Ko=_a(av),oo=v({},Jo,{newState:0,oldState:0}),pm=_a(oo),mm=[9,13,27,32],Fl=Dr&&"CompositionEvent"in window,Wo=null;Dr&&"documentMode"in document&&(Wo=document.documentMode);var Hl=Dr&&"TextEvent"in window&&!Wo,la=Dr&&(!Fl||Wo&&8<Wo&&11>=Wo),lf=" ",gm=!1;function jh(s,o){switch(s){case"keyup":return mm.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Uu(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var jo=!1;function Zh(s,o){switch(s){case"compositionend":return Uu(o);case"keypress":return o.which!==32?null:(gm=!0,lf);case"textInput":return s=o.data,s===lf&&gm?null:s;default:return null}}function sv(s,o){if(jo)return s==="compositionend"||!Fl&&jh(s,o)?(s=Yh(),qo=kh=Yo=null,jo=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return la&&o.locale!=="ko"?null:o.data;default:return null}}var fs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vm(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!fs[s.type]:o==="textarea"}function Qh(s,o,h,m){Il?ko?ko.push(m):ko=[m]:Il=m,o=jv(o,"onChange"),0<o.length&&(h=new nf("onChange","change",null,h,m),s.push({event:h,listeners:o}))}var Ou=null,Nu=null;function xm(s){wM(s,0)}function Lu(s){var o=ue(s);if(cn(o))return s}function _m(s,o){if(s==="change")return o}var uf=!1;if(Dr){var Gl;if(Dr){var ti="oninput"in document;if(!ti){var rv=document.createElement("div");rv.setAttribute("oninput","return;"),ti=typeof rv.oninput=="function"}Gl=ti}else Gl=!1;uf=Gl&&(!document.documentMode||9<document.documentMode)}function ov(){Ou&&(Ou.detachEvent("onpropertychange",ym),Nu=Ou=null)}function ym(s){if(s.propertyName==="value"&&Lu(Nu)){var o=[];Qh(o,Nu,s,Gh(s)),sm(xm,o)}}function cf(s,o,h){s==="focusin"?(ov(),Ou=o,Nu=h,Ou.attachEvent("onpropertychange",ym)):s==="focusout"&&ov()}function Zo(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Lu(Nu)}function lv(s,o){if(s==="click")return Lu(o)}function uv(s,o){if(s==="input"||s==="change")return Lu(o)}function Vl(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var ni=typeof Object.is=="function"?Object.is:Vl;function Iu(s,o){if(ni(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var h=Object.keys(s),m=Object.keys(o);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var b=h[m];if(!Ve.call(o,b)||!ni(s[b],o[b]))return!1}return!0}function bm(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Am(s,o){var h=bm(s);s=0;for(var m;h;){if(h.nodeType===3){if(m=s+h.textContent.length,s<=o&&m>=o)return{node:h,offset:o-s};s=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=bm(h)}}function $h(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?$h(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function ed(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Ui(s.document);o instanceof s.HTMLIFrameElement;){try{var h=typeof o.contentWindow.location.href=="string"}catch{h=!1}if(h)s=o.contentWindow;else break;o=Ui(s.document)}return o}function zu(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var cv=Dr&&"documentMode"in document&&11>=document.documentMode,Pu=null,td=null,Fu=null,hs=!1;function nd(s,o,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;hs||Pu==null||Pu!==Ui(m)||(m=Pu,"selectionStart"in m&&zu(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Fu&&Iu(Fu,m)||(Fu=m,m=jv(td,"onSelect"),0<m.length&&(o=new nf("onSelect","select",null,o,h),s.push({event:o,listeners:m}),o.target=Pu)))}function Qo(s,o){var h={};return h[s.toLowerCase()]=o.toLowerCase(),h["Webkit"+s]="webkit"+o,h["Moz"+s]="moz"+o,h}var Hu={animationend:Qo("Animation","AnimationEnd"),animationiteration:Qo("Animation","AnimationIteration"),animationstart:Qo("Animation","AnimationStart"),transitionrun:Qo("Transition","TransitionRun"),transitionstart:Qo("Transition","TransitionStart"),transitioncancel:Qo("Transition","TransitionCancel"),transitionend:Qo("Transition","TransitionEnd")},ff={},Oa={};Dr&&(Oa=document.createElement("div").style,"AnimationEvent"in window||(delete Hu.animationend.animation,delete Hu.animationiteration.animation,delete Hu.animationstart.animation),"TransitionEvent"in window||delete Hu.transitionend.transition);function $o(s){if(ff[s])return ff[s];if(!Hu[s])return s;var o=Hu[s],h;for(h in o)if(o.hasOwnProperty(h)&&h in Oa)return ff[s]=o[h];return s}var Xa=$o("animationend"),Sm=$o("animationiteration"),wr=$o("animationstart"),Gu=$o("transitionrun"),el=$o("transitionstart"),Mm=$o("transitioncancel"),id=$o("transitionend"),lo=new Map,ad="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ad.push("scrollEnd");function ya(s,o){lo.set(s,o),st(o,[s])}var tl=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},Qi=[],Xl=0,sd=0;function nl(){for(var s=Xl,o=sd=Xl=0;o<s;){var h=Qi[o];Qi[o++]=null;var m=Qi[o];Qi[o++]=null;var b=Qi[o];Qi[o++]=null;var T=Qi[o];if(Qi[o++]=null,m!==null&&b!==null){var N=m.pending;N===null?b.next=b:(b.next=N.next,N.next=b),m.pending=b}T!==0&&rd(h,b,T)}}function hf(s,o,h,m){Qi[Xl++]=s,Qi[Xl++]=o,Qi[Xl++]=h,Qi[Xl++]=m,sd|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function Vu(s,o,h,m){return hf(s,o,h,m),Xu(s)}function il(s,o){return hf(s,null,null,o),Xu(s)}function rd(s,o,h){s.lanes|=h;var m=s.alternate;m!==null&&(m.lanes|=h);for(var b=!1,T=s.return;T!==null;)T.childLanes|=h,m=T.alternate,m!==null&&(m.childLanes|=h),T.tag===22&&(s=T.stateNode,s===null||s._visibility&1||(b=!0)),s=T,T=T.return;return s.tag===3?(T=s.stateNode,b&&o!==null&&(b=31-$(h),s=T.hiddenUpdates,m=s[b],m===null?s[b]=[o]:m.push(o),o.lane=h|536870912),T):null}function Xu(s){if(50<ru)throw ru=0,ou=null,Error(n(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var al={};function fv(s,o,h,m){this.tag=s,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Na(s,o,h,m){return new fv(s,o,h,m)}function La(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ur(s,o){var h=s.alternate;return h===null?(h=Na(s.tag,o,s.key,s.mode),h.elementType=s.elementType,h.type=s.type,h.stateNode=s.stateNode,h.alternate=s,s.alternate=h):(h.pendingProps=o,h.type=s.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=s.flags&65011712,h.childLanes=s.childLanes,h.lanes=s.lanes,h.child=s.child,h.memoizedProps=s.memoizedProps,h.memoizedState=s.memoizedState,h.updateQueue=s.updateQueue,o=s.dependencies,h.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},h.sibling=s.sibling,h.index=s.index,h.ref=s.ref,h.refCleanup=s.refCleanup,h}function ba(s,o){s.flags&=65011714;var h=s.alternate;return h===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=h.childLanes,s.lanes=h.lanes,s.child=h.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=h.memoizedProps,s.memoizedState=h.memoizedState,s.updateQueue=h.updateQueue,s.type=h.type,o=h.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function df(s,o,h,m,b,T){var N=0;if(m=s,typeof s=="function")La(s)&&(N=1);else if(typeof s=="string")N=fD(s,h,Ee.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case L:return s=Na(31,h,o,b),s.elementType=L,s.lanes=T,s;case E:return uo(h.children,b,T,o);case C:N=8,b|=24;break;case M:return s=Na(12,h,o,b|2),s.elementType=M,s.lanes=T,s;case z:return s=Na(13,h,o,b),s.elementType=z,s.lanes=T,s;case O:return s=Na(19,h,o,b),s.elementType=O,s.lanes=T,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case D:N=10;break e;case B:N=9;break e;case w:N=11;break e;case P:N=14;break e;case G:N=16,m=null;break e}N=29,h=Error(n(130,s===null?"null":typeof s,"")),m=null}return o=Na(N,h,o,b),o.elementType=s,o.type=m,o.lanes=T,o}function uo(s,o,h,m){return s=Na(7,s,m,o),s.lanes=h,s}function od(s,o,h){return s=Na(6,s,null,o),s.lanes=h,s}function hv(s){var o=Na(18,null,null,0);return o.stateNode=s,o}function ar(s,o,h){return o=Na(4,s.children!==null?s.children:[],s.key,o),o.lanes=h,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Em=new WeakMap;function ka(s,o){if(typeof s=="object"&&s!==null){var h=Em.get(s);return h!==void 0?h:(o={value:s,source:o,stack:et(o)},Em.set(s,o),o)}return{value:s,source:o,stack:et(o)}}var sr=[],kl=0,pf=null,ku=0,ds=[],Ya=0,Or=null,Nr=1,Lr="";function co(s,o){sr[kl++]=ku,sr[kl++]=pf,pf=s,ku=o}function Tm(s,o,h){ds[Ya++]=Nr,ds[Ya++]=Lr,ds[Ya++]=Or,Or=s;var m=Nr;s=Lr;var b=32-$(m)-1;m&=~(1<<b),h+=1;var T=32-$(o)+b;if(30<T){var N=b-b%5;T=(m&(1<<N)-1).toString(32),m>>=N,b-=N,Nr=1<<32-$(o)+b|h<<b|m,Lr=T+s}else Nr=1<<T|h<<b|m,Lr=s}function ld(s){s.return!==null&&(co(s,1),Tm(s,1,0))}function sl(s){for(;s===pf;)pf=sr[--kl],sr[kl]=null,ku=sr[--kl],sr[kl]=null;for(;s===Or;)Or=ds[--Ya],ds[Ya]=null,Lr=ds[--Ya],ds[Ya]=null,Nr=ds[--Ya],ds[Ya]=null}function mf(s,o){ds[Ya++]=Nr,ds[Ya++]=Lr,ds[Ya++]=Or,Nr=o.id,Lr=o.overflow,Or=s}var $i=null,jn=null,dn=!1,fo=null,ea=!1,ud=Error(n(519));function fn(s){var o=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw gf(ka(o,s)),ud}function cd(s){var o=s.stateNode,h=s.type,m=s.memoizedProps;switch(o[$t]=s,o[Ai]=m,h){case"dialog":pn("cancel",o),pn("close",o);break;case"iframe":case"object":case"embed":pn("load",o);break;case"video":case"audio":for(h=0;h<x0.length;h++)pn(x0[h],o);break;case"source":pn("error",o);break;case"img":case"image":case"link":pn("error",o),pn("load",o);break;case"details":pn("toggle",o);break;case"input":pn("invalid",o),Jn(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":pn("invalid",o);break;case"textarea":pn("invalid",o),fi(o,m.value,m.defaultValue,m.children)}h=m.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||o.textContent===""+h||m.suppressHydrationWarning===!0||LM(o.textContent,h)?(m.popover!=null&&(pn("beforetoggle",o),pn("toggle",o)),m.onScroll!=null&&pn("scroll",o),m.onScrollEnd!=null&&pn("scrollend",o),m.onClick!=null&&(o.onclick=Br),o=!0):o=!1,o||fn(s,!0)}function dv(s){for($i=s.return;$i;)switch($i.tag){case 5:case 31:case 13:ea=!1;return;case 27:case 3:ea=!0;return;default:$i=$i.return}}function Yl(s){if(s!==$i)return!1;if(!dn)return dv(s),dn=!0,!1;var o=s.tag,h;if((h=o!==3&&o!==27)&&((h=o===5)&&(h=s.type,h=!(h!=="form"&&h!=="button")||yb(s.type,s.memoizedProps)),h=!h),h&&jn&&fn(s),dv(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));jn=kM(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));jn=kM(s)}else o===27?(o=jn,uc(s.type)?(s=Eb,Eb=null,jn=s):jn=o):jn=$i?qr(s.stateNode.nextSibling):null;return!0}function ql(){jn=$i=null,dn=!1}function Cm(){var s=fo;return s!==null&&(Ca===null?Ca=s:Ca.push.apply(Ca,s),fo=null),s}function gf(s){fo===null?fo=[s]:fo.push(s)}var Rm=q(null),ho=null,Aa=null;function po(s,o,h){Ce(Rm,o._currentValue),o._currentValue=h}function Fs(s){s._currentValue=Rm.current,se(Rm)}function mo(s,o,h){for(;s!==null;){var m=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),s===h)break;s=s.return}}function fd(s,o,h,m){var b=s.child;for(b!==null&&(b.return=s);b!==null;){var T=b.dependencies;if(T!==null){var N=b.child;T=T.firstContext;e:for(;T!==null;){var X=T;T=b;for(var ie=0;ie<o.length;ie++)if(X.context===o[ie]){T.lanes|=h,X=T.alternate,X!==null&&(X.lanes|=h),mo(T.return,h,s),m||(N=null);break e}T=X.next}}else if(b.tag===18){if(N=b.return,N===null)throw Error(n(341));N.lanes|=h,T=N.alternate,T!==null&&(T.lanes|=h),mo(N,h,s),N=null}else N=b.child;if(N!==null)N.return=b;else for(N=b;N!==null;){if(N===s){N=null;break}if(b=N.sibling,b!==null){b.return=N.return,N=b;break}N=N.return}b=N}}function rl(s,o,h,m){s=null;for(var b=o,T=!1;b!==null;){if(!T){if((b.flags&524288)!==0)T=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var N=b.alternate;if(N===null)throw Error(n(387));if(N=N.memoizedProps,N!==null){var X=b.type;ni(b.pendingProps.value,N.value)||(s!==null?s.push(X):s=[X])}}else if(b===Re.current){if(N=b.alternate,N===null)throw Error(n(387));N.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(s!==null?s.push(S0):s=[S0])}b=b.return}s!==null&&fd(o,s,h,m),o.flags|=262144}function Yu(s){for(s=s.firstContext;s!==null;){if(!ni(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Jl(s){ho=s,Aa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ta(s){return Bm(ho,s)}function vf(s,o){return ho===null&&Jl(s),Bm(s,o)}function Bm(s,o){var h=o._currentValue;if(o={context:o,memoizedValue:h,next:null},Aa===null){if(s===null)throw Error(n(308));Aa=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Aa=Aa.next=o;return h}var pv=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(h,m){s.push(m)}};this.abort=function(){o.aborted=!0,s.forEach(function(h){return h()})}},mv=a.unstable_scheduleCallback,Dm=a.unstable_NormalPriority,Bt={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wm(){return{controller:new pv,data:new Map,refCount:0}}function ua(s){s.refCount--,s.refCount===0&&mv(Dm,function(){s.controller.abort()})}var Kl=null,Um=0,go=0,rr=null;function qu(s,o){if(Kl===null){var h=Kl=[];Um=0,go=fb(),rr={status:"pending",value:void 0,then:function(m){h.push(m)}}}return Um++,o.then(Om,Om),o}function Om(){if(--Um===0&&Kl!==null){rr!==null&&(rr.status="fulfilled");var s=Kl;Kl=null,go=0,rr=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function Nm(s,o){var h=[],m={status:"pending",value:null,reason:null,then:function(b){h.push(b)}};return s.then(function(){m.status="fulfilled",m.value=o;for(var b=0;b<h.length;b++)(0,h[b])(o)},function(b){for(m.status="rejected",m.reason=b,b=0;b<h.length;b++)(0,h[b])(void 0)}),m}var gv=F.S;F.S=function(s,o){rc=H(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&qu(s,o),gv!==null&&gv(s,o)};var ol=q(null);function Ir(){var s=ol.current;return s!==null?s:In.pooledCache}function Ju(s,o){o===null?Ce(ol,ol.current):Ce(ol,o.pool)}function hd(){var s=Ir();return s===null?null:{parent:Bt._currentValue,pool:s}}var ll=Error(n(460)),xf=Error(n(474)),or=Error(n(542)),_f={then:function(){}};function vv(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Lm(s,o,h){switch(h=s[h],h===void 0?s.push(o):h!==o&&(o.then(Br,Br),o=h),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Im(s),s;default:if(typeof o.status=="string")o.then(Br,Br);else{if(s=In,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=o,s.status="pending",s.then(function(m){if(o.status==="pending"){var b=o;b.status="fulfilled",b.value=m}},function(m){if(o.status==="pending"){var b=o;b.status="rejected",b.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Im(s),s}throw Lt=o,ll}}function Wl(s){try{var o=s._init;return o(s._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(Lt=h,ll):h}}var Lt=null;function dd(){if(Lt===null)throw Error(n(459));var s=Lt;return Lt=null,s}function Im(s){if(s===ll||s===or)throw Error(n(483))}var ul=null,cl=0;function pd(s){var o=cl;return cl+=1,ul===null&&(ul=[]),Lm(ul,s,o)}function yf(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function bf(s,o){throw o.$$typeof===_?Error(n(525)):(s=Object.prototype.toString.call(o),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function Ku(s){function o(he,ae){if(s){var xe=he.deletions;xe===null?(he.deletions=[ae],he.flags|=16):xe.push(ae)}}function h(he,ae){if(!s)return null;for(;ae!==null;)o(he,ae),ae=ae.sibling;return null}function m(he){for(var ae=new Map;he!==null;)he.key!==null?ae.set(he.key,he):ae.set(he.index,he),he=he.sibling;return ae}function b(he,ae){return he=Ur(he,ae),he.index=0,he.sibling=null,he}function T(he,ae,xe){return he.index=xe,s?(xe=he.alternate,xe!==null?(xe=xe.index,xe<ae?(he.flags|=67108866,ae):xe):(he.flags|=67108866,ae)):(he.flags|=1048576,ae)}function N(he){return s&&he.alternate===null&&(he.flags|=67108866),he}function X(he,ae,xe,Le){return ae===null||ae.tag!==6?(ae=od(xe,he.mode,Le),ae.return=he,ae):(ae=b(ae,xe),ae.return=he,ae)}function ie(he,ae,xe,Le){var Ot=xe.type;return Ot===E?Ue(he,ae,xe.props.children,Le,xe.key):ae!==null&&(ae.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===G&&Wl(Ot)===ae.type)?(ae=b(ae,xe.props),yf(ae,xe),ae.return=he,ae):(ae=df(xe.type,xe.key,xe.props,null,he.mode,Le),yf(ae,xe),ae.return=he,ae)}function _e(he,ae,xe,Le){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==xe.containerInfo||ae.stateNode.implementation!==xe.implementation?(ae=ar(xe,he.mode,Le),ae.return=he,ae):(ae=b(ae,xe.children||[]),ae.return=he,ae)}function Ue(he,ae,xe,Le,Ot){return ae===null||ae.tag!==7?(ae=uo(xe,he.mode,Le,Ot),ae.return=he,ae):(ae=b(ae,xe),ae.return=he,ae)}function Pe(he,ae,xe){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return ae=od(""+ae,he.mode,xe),ae.return=he,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case y:return xe=df(ae.type,ae.key,ae.props,null,he.mode,xe),yf(xe,ae),xe.return=he,xe;case S:return ae=ar(ae,he.mode,xe),ae.return=he,ae;case G:return ae=Wl(ae),Pe(he,ae,xe)}if(re(ae)||ee(ae))return ae=uo(ae,he.mode,xe,null),ae.return=he,ae;if(typeof ae.then=="function")return Pe(he,pd(ae),xe);if(ae.$$typeof===D)return Pe(he,vf(he,ae),xe);bf(he,ae)}return null}function Se(he,ae,xe,Le){var Ot=ae!==null?ae.key:null;if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return Ot!==null?null:X(he,ae,""+xe,Le);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case y:return xe.key===Ot?ie(he,ae,xe,Le):null;case S:return xe.key===Ot?_e(he,ae,xe,Le):null;case G:return xe=Wl(xe),Se(he,ae,xe,Le)}if(re(xe)||ee(xe))return Ot!==null?null:Ue(he,ae,xe,Le,null);if(typeof xe.then=="function")return Se(he,ae,pd(xe),Le);if(xe.$$typeof===D)return Se(he,ae,vf(he,xe),Le);bf(he,xe)}return null}function Be(he,ae,xe,Le,Ot){if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return he=he.get(xe)||null,X(ae,he,""+Le,Ot);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case y:return he=he.get(Le.key===null?xe:Le.key)||null,ie(ae,he,Le,Ot);case S:return he=he.get(Le.key===null?xe:Le.key)||null,_e(ae,he,Le,Ot);case G:return Le=Wl(Le),Be(he,ae,xe,Le,Ot)}if(re(Le)||ee(Le))return he=he.get(xe)||null,Ue(ae,he,Le,Ot,null);if(typeof Le.then=="function")return Be(he,ae,xe,pd(Le),Ot);if(Le.$$typeof===D)return Be(he,ae,xe,vf(ae,Le),Ot);bf(ae,Le)}return null}function bt(he,ae,xe,Le){for(var Ot=null,Pn=null,Et=ae,nn=ae=0,yn=null;Et!==null&&nn<xe.length;nn++){Et.index>nn?(yn=Et,Et=null):yn=Et.sibling;var Fn=Se(he,Et,xe[nn],Le);if(Fn===null){Et===null&&(Et=yn);break}s&&Et&&Fn.alternate===null&&o(he,Et),ae=T(Fn,ae,nn),Pn===null?Ot=Fn:Pn.sibling=Fn,Pn=Fn,Et=yn}if(nn===xe.length)return h(he,Et),dn&&co(he,nn),Ot;if(Et===null){for(;nn<xe.length;nn++)Et=Pe(he,xe[nn],Le),Et!==null&&(ae=T(Et,ae,nn),Pn===null?Ot=Et:Pn.sibling=Et,Pn=Et);return dn&&co(he,nn),Ot}for(Et=m(Et);nn<xe.length;nn++)yn=Be(Et,he,nn,xe[nn],Le),yn!==null&&(s&&yn.alternate!==null&&Et.delete(yn.key===null?nn:yn.key),ae=T(yn,ae,nn),Pn===null?Ot=yn:Pn.sibling=yn,Pn=yn);return s&&Et.forEach(function(pc){return o(he,pc)}),dn&&co(he,nn),Ot}function Ft(he,ae,xe,Le){if(xe==null)throw Error(n(151));for(var Ot=null,Pn=null,Et=ae,nn=ae=0,yn=null,Fn=xe.next();Et!==null&&!Fn.done;nn++,Fn=xe.next()){Et.index>nn?(yn=Et,Et=null):yn=Et.sibling;var pc=Se(he,Et,Fn.value,Le);if(pc===null){Et===null&&(Et=yn);break}s&&Et&&pc.alternate===null&&o(he,Et),ae=T(pc,ae,nn),Pn===null?Ot=pc:Pn.sibling=pc,Pn=pc,Et=yn}if(Fn.done)return h(he,Et),dn&&co(he,nn),Ot;if(Et===null){for(;!Fn.done;nn++,Fn=xe.next())Fn=Pe(he,Fn.value,Le),Fn!==null&&(ae=T(Fn,ae,nn),Pn===null?Ot=Fn:Pn.sibling=Fn,Pn=Fn);return dn&&co(he,nn),Ot}for(Et=m(Et);!Fn.done;nn++,Fn=xe.next())Fn=Be(Et,he,nn,Fn.value,Le),Fn!==null&&(s&&Fn.alternate!==null&&Et.delete(Fn.key===null?nn:Fn.key),ae=T(Fn,ae,nn),Pn===null?Ot=Fn:Pn.sibling=Fn,Pn=Fn);return s&&Et.forEach(function(AD){return o(he,AD)}),dn&&co(he,nn),Ot}function $n(he,ae,xe,Le){if(typeof xe=="object"&&xe!==null&&xe.type===E&&xe.key===null&&(xe=xe.props.children),typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case y:e:{for(var Ot=xe.key;ae!==null;){if(ae.key===Ot){if(Ot=xe.type,Ot===E){if(ae.tag===7){h(he,ae.sibling),Le=b(ae,xe.props.children),Le.return=he,he=Le;break e}}else if(ae.elementType===Ot||typeof Ot=="object"&&Ot!==null&&Ot.$$typeof===G&&Wl(Ot)===ae.type){h(he,ae.sibling),Le=b(ae,xe.props),yf(Le,xe),Le.return=he,he=Le;break e}h(he,ae);break}else o(he,ae);ae=ae.sibling}xe.type===E?(Le=uo(xe.props.children,he.mode,Le,xe.key),Le.return=he,he=Le):(Le=df(xe.type,xe.key,xe.props,null,he.mode,Le),yf(Le,xe),Le.return=he,he=Le)}return N(he);case S:e:{for(Ot=xe.key;ae!==null;){if(ae.key===Ot)if(ae.tag===4&&ae.stateNode.containerInfo===xe.containerInfo&&ae.stateNode.implementation===xe.implementation){h(he,ae.sibling),Le=b(ae,xe.children||[]),Le.return=he,he=Le;break e}else{h(he,ae);break}else o(he,ae);ae=ae.sibling}Le=ar(xe,he.mode,Le),Le.return=he,he=Le}return N(he);case G:return xe=Wl(xe),$n(he,ae,xe,Le)}if(re(xe))return bt(he,ae,xe,Le);if(ee(xe)){if(Ot=ee(xe),typeof Ot!="function")throw Error(n(150));return xe=Ot.call(xe),Ft(he,ae,xe,Le)}if(typeof xe.then=="function")return $n(he,ae,pd(xe),Le);if(xe.$$typeof===D)return $n(he,ae,vf(he,xe),Le);bf(he,xe)}return typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint"?(xe=""+xe,ae!==null&&ae.tag===6?(h(he,ae.sibling),Le=b(ae,xe),Le.return=he,he=Le):(h(he,ae),Le=od(xe,he.mode,Le),Le.return=he,he=Le),N(he)):h(he,ae)}return function(he,ae,xe,Le){try{cl=0;var Ot=$n(he,ae,xe,Le);return ul=null,Ot}catch(Et){if(Et===ll||Et===or)throw Et;var Pn=Na(29,Et,null,he.mode);return Pn.lanes=Le,Pn.return=he,Pn}finally{}}}var jl=Ku(!0),xv=Ku(!1),fl=!1;function zm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pm(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function zr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function vo(s,o,h){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(xn&2)!==0){var b=m.pending;return b===null?o.next=o:(o.next=b.next,b.next=o),m.pending=o,o=Xu(s),rd(s,null,h),o}return hf(s,m,o,h),Xu(s)}function hl(s,o,h){if(o=o.updateQueue,o!==null&&(o=o.shared,(h&4194048)!==0)){var m=o.lanes;m&=s.pendingLanes,h|=m,o.lanes=h,Ul(s,h)}}function md(s,o){var h=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var b=null,T=null;if(h=h.firstBaseUpdate,h!==null){do{var N={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};T===null?b=T=N:T=T.next=N,h=h.next}while(h!==null);T===null?b=T=o:T=T.next=o}else b=T=o;h={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:T,shared:m.shared,callbacks:m.callbacks},s.updateQueue=h;return}s=h.lastBaseUpdate,s===null?h.firstBaseUpdate=o:s.next=o,h.lastBaseUpdate=o}var Fm=!1;function Af(){if(Fm){var s=rr;if(s!==null)throw s}}function Zl(s,o,h,m){Fm=!1;var b=s.updateQueue;fl=!1;var T=b.firstBaseUpdate,N=b.lastBaseUpdate,X=b.shared.pending;if(X!==null){b.shared.pending=null;var ie=X,_e=ie.next;ie.next=null,N===null?T=_e:N.next=_e,N=ie;var Ue=s.alternate;Ue!==null&&(Ue=Ue.updateQueue,X=Ue.lastBaseUpdate,X!==N&&(X===null?Ue.firstBaseUpdate=_e:X.next=_e,Ue.lastBaseUpdate=ie))}if(T!==null){var Pe=b.baseState;N=0,Ue=_e=ie=null,X=T;do{var Se=X.lane&-536870913,Be=Se!==X.lane;if(Be?(hn&Se)===Se:(m&Se)===Se){Se!==0&&Se===go&&(Fm=!0),Ue!==null&&(Ue=Ue.next={lane:0,tag:X.tag,payload:X.payload,callback:null,next:null});e:{var bt=s,Ft=X;Se=o;var $n=h;switch(Ft.tag){case 1:if(bt=Ft.payload,typeof bt=="function"){Pe=bt.call($n,Pe,Se);break e}Pe=bt;break e;case 3:bt.flags=bt.flags&-65537|128;case 0:if(bt=Ft.payload,Se=typeof bt=="function"?bt.call($n,Pe,Se):bt,Se==null)break e;Pe=v({},Pe,Se);break e;case 2:fl=!0}}Se=X.callback,Se!==null&&(s.flags|=64,Be&&(s.flags|=8192),Be=b.callbacks,Be===null?b.callbacks=[Se]:Be.push(Se))}else Be={lane:Se,tag:X.tag,payload:X.payload,callback:X.callback,next:null},Ue===null?(_e=Ue=Be,ie=Pe):Ue=Ue.next=Be,N|=Se;if(X=X.next,X===null){if(X=b.shared.pending,X===null)break;Be=X,X=Be.next,Be.next=null,b.lastBaseUpdate=Be,b.shared.pending=null}}while(!0);Ue===null&&(ie=Pe),b.baseState=ie,b.firstBaseUpdate=_e,b.lastBaseUpdate=Ue,T===null&&(b.shared.lanes=0),Ms|=N,s.lanes=N,s.memoizedState=Pe}}function Pr(s,o){if(typeof s!="function")throw Error(n(191,s));s.call(o)}function ca(s,o){var h=s.callbacks;if(h!==null)for(s.callbacks=null,s=0;s<h.length;s++)Pr(h[s],o)}var ps=q(null),Ia=q(0);function Hm(s,o){s=Ri,Ce(Ia,s),Ce(ps,o),Ri=s|o.baseLanes}function Gm(){Ce(Ia,Ri),Ce(ps,ps.current)}function Sa(){Ri=Ia.current,se(ps),se(Ia)}var Xi=q(null),Hs=null;function dl(s){var o=s.alternate;Ce(hi,hi.current&1),Ce(Xi,s),Hs===null&&(o===null||ps.current!==null||o.memoizedState!==null)&&(Hs=s)}function Vm(s){Ce(hi,hi.current),Ce(Xi,s),Hs===null&&(Hs=s)}function _v(s){s.tag===22?(Ce(hi,hi.current),Ce(Xi,s),Hs===null&&(Hs=s)):xo()}function xo(){Ce(hi,hi.current),Ce(Xi,Xi.current)}function ms(s){se(Xi),Hs===s&&(Hs=null),se(hi)}var hi=q(0);function gd(s){for(var o=s;o!==null;){if(o.tag===13){var h=o.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Sb(h)||Mb(h)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var qa=0,Ht=null,kn=null,Oi=null,vd=!1,Fr=!1,Ql=!1,xd=0,Sf=0,Hr=null,tb=0;function di(){throw Error(n(321))}function Xm(s,o){if(o===null)return!1;for(var h=0;h<o.length&&h<s.length;h++)if(!ni(s[h],o[h]))return!1;return!0}function km(s,o,h,m,b,T){return qa=T,Ht=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,F.H=s===null||s.memoizedState===null?Fv:Zu,Ql=!1,T=h(m,b),Ql=!1,Fr&&(T=bv(o,h,m,b)),yv(s),T}function yv(s){F.H=Rf;var o=kn!==null&&kn.next!==null;if(qa=0,Oi=kn=Ht=null,vd=!1,Sf=0,Hr=null,o)throw Error(n(300));s===null||ii||(s=s.dependencies,s!==null&&Yu(s)&&(ii=!0))}function bv(s,o,h,m){Ht=s;var b=0;do{if(Fr&&(Hr=null),Sf=0,Fr=!1,25<=b)throw Error(n(301));if(b+=1,Oi=kn=null,s.updateQueue!=null){var T=s.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}F.H=Bf,T=o(h,m)}while(Fr);return T}function nb(){var s=F.H,o=s.useState()[0];return o=typeof o.then=="function"?Ef(o):o,s=s.useState()[0],(kn!==null?kn.memoizedState:null)!==s&&(Ht.flags|=1024),o}function Ym(){var s=xd!==0;return xd=0,s}function qm(s,o,h){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~h}function Jm(s){if(vd){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}vd=!1}qa=0,Oi=kn=Ht=null,Fr=!1,Sf=xd=0,Hr=null}function za(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Oi===null?Ht.memoizedState=Oi=s:Oi=Oi.next=s,Oi}function Mi(){if(kn===null){var s=Ht.alternate;s=s!==null?s.memoizedState:null}else s=kn.next;var o=Oi===null?Ht.memoizedState:Oi.next;if(o!==null)Oi=o,kn=s;else{if(s===null)throw Ht.alternate===null?Error(n(467)):Error(n(310));kn=s,s={memoizedState:kn.memoizedState,baseState:kn.baseState,baseQueue:kn.baseQueue,queue:kn.queue,next:null},Oi===null?Ht.memoizedState=Oi=s:Oi=Oi.next=s}return Oi}function Mf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ef(s){var o=Sf;return Sf+=1,Hr===null&&(Hr=[]),s=Lm(Hr,s,o),o=Ht,(Oi===null?o.memoizedState:Oi.next)===null&&(o=o.alternate,F.H=o===null||o.memoizedState===null?Fv:Zu),s}function _d(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ef(s);if(s.$$typeof===D)return ta(s)}throw Error(n(438,String(s)))}function Km(s){var o=null,h=Ht.updateQueue;if(h!==null&&(o=h.memoCache),o==null){var m=Ht.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(b){return b.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),h===null&&(h=Mf(),Ht.updateQueue=h),h.memoCache=o,h=o.data[o.index],h===void 0)for(h=o.data[o.index]=Array(s),m=0;m<s;m++)h[m]=I;return o.index++,h}function _o(s,o){return typeof o=="function"?o(s):o}function yd(s){var o=Mi();return Wm(o,kn,s)}function Wm(s,o,h){var m=s.queue;if(m===null)throw Error(n(311));m.lastRenderedReducer=h;var b=s.baseQueue,T=m.pending;if(T!==null){if(b!==null){var N=b.next;b.next=T.next,T.next=N}o.baseQueue=b=T,m.pending=null}if(T=s.baseState,b===null)s.memoizedState=T;else{o=b.next;var X=N=null,ie=null,_e=o,Ue=!1;do{var Pe=_e.lane&-536870913;if(Pe!==_e.lane?(hn&Pe)===Pe:(qa&Pe)===Pe){var Se=_e.revertLane;if(Se===0)ie!==null&&(ie=ie.next={lane:0,revertLane:0,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),Pe===go&&(Ue=!0);else if((qa&Se)===Se){_e=_e.next,Se===go&&(Ue=!0);continue}else Pe={lane:0,revertLane:_e.revertLane,gesture:null,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},ie===null?(X=ie=Pe,N=T):ie=ie.next=Pe,Ht.lanes|=Se,Ms|=Se;Pe=_e.action,Ql&&h(T,Pe),T=_e.hasEagerState?_e.eagerState:h(T,Pe)}else Se={lane:Pe,revertLane:_e.revertLane,gesture:_e.gesture,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},ie===null?(X=ie=Se,N=T):ie=ie.next=Se,Ht.lanes|=Pe,Ms|=Pe;_e=_e.next}while(_e!==null&&_e!==o);if(ie===null?N=T:ie.next=X,!ni(T,s.memoizedState)&&(ii=!0,Ue&&(h=rr,h!==null)))throw h;s.memoizedState=T,s.baseState=N,s.baseQueue=ie,m.lastRenderedState=T}return b===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function bd(s){var o=Mi(),h=o.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=s;var m=h.dispatch,b=h.pending,T=o.memoizedState;if(b!==null){h.pending=null;var N=b=b.next;do T=s(T,N.action),N=N.next;while(N!==b);ni(T,o.memoizedState)||(ii=!0),o.memoizedState=T,o.baseQueue===null&&(o.baseState=T),h.lastRenderedState=T}return[T,m]}function jm(s,o,h){var m=Ht,b=Mi(),T=dn;if(T){if(h===void 0)throw Error(n(407));h=h()}else h=o();var N=!ni((kn||b).memoizedState,h);if(N&&(b.memoizedState=h,ii=!0),b=b.queue,t0(Qm.bind(null,m,b,s),[s]),b.getSnapshot!==o||N||Oi!==null&&Oi.memoizedState.tag&1){if(m.flags|=2048,Wu(9,{destroy:void 0},Zm.bind(null,m,b,h,o),null),In===null)throw Error(n(349));T||(qa&127)!==0||Av(m,o,h)}return h}function Av(s,o,h){s.flags|=16384,s={getSnapshot:o,value:h},o=Ht.updateQueue,o===null?(o=Mf(),Ht.updateQueue=o,o.stores=[s]):(h=o.stores,h===null?o.stores=[s]:h.push(s))}function Zm(s,o,h,m){o.value=h,o.getSnapshot=m,$m(o)&&Ad(s)}function Qm(s,o,h){return h(function(){$m(o)&&Ad(s)})}function $m(s){var o=s.getSnapshot;s=s.value;try{var h=o();return!ni(s,h)}catch{return!0}}function Ad(s){var o=il(s,2);o!==null&&f(o,s,2)}function Tf(s){var o=za();if(typeof s=="function"){var h=s;if(s=h(),Ql){_t(!0);try{h()}finally{_t(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:s},o}function Sv(s,o,h,m){return s.baseState=h,Wm(s,kn,typeof m=="function"?m:_o)}function ib(s,o,h,m,b){if(yo(s))throw Error(n(485));if(s=o.action,s!==null){var T={payload:b,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){T.listeners.push(N)}};F.T!==null?h(!0):T.isTransition=!1,m(T),h=o.pending,h===null?(T.next=o.pending=T,Mv(o,T)):(T.next=h.next,o.pending=h.next=T)}}function Mv(s,o){var h=o.action,m=o.payload,b=s.state;if(o.isTransition){var T=F.T,N={};F.T=N;try{var X=h(b,m),ie=F.S;ie!==null&&ie(N,X),Ev(s,o,X)}catch(_e){Sd(s,o,_e)}finally{T!==null&&N.types!==null&&(T.types=N.types),F.T=T}}else try{T=h(b,m),Ev(s,o,T)}catch(_e){Sd(s,o,_e)}}function Ev(s,o,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(m){e0(s,o,m)},function(m){return Sd(s,o,m)}):e0(s,o,h)}function e0(s,o,h){o.status="fulfilled",o.value=h,Tv(o),s.state=h,o=s.pending,o!==null&&(h=o.next,h===o?s.pending=null:(h=h.next,o.next=h,Mv(s,h)))}function Sd(s,o,h){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=h,Tv(o),o=o.next;while(o!==m)}s.action=null}function Tv(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function Cv(s,o){return o}function Rv(s,o){if(dn){var h=In.formState;if(h!==null){e:{var m=Ht;if(dn){if(jn){t:{for(var b=jn,T=ea;b.nodeType!==8;){if(!T){b=null;break t}if(b=qr(b.nextSibling),b===null){b=null;break t}}T=b.data,b=T==="F!"||T==="F"?b:null}if(b){jn=qr(b.nextSibling),m=b.data==="F!";break e}}fn(m)}m=!1}m&&(o=h[0])}}return h=za(),h.memoizedState=h.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cv,lastRenderedState:o},h.queue=m,h=Pv.bind(null,Ht,m),m.dispatch=h,m=Tf(!1),T=Cf.bind(null,Ht,!1,m.queue),m=za(),b={state:o,dispatch:null,action:s,pending:null},m.queue=b,h=ib.bind(null,Ht,b,T,h),b.dispatch=h,m.memoizedState=s,[o,h,!1]}function Bv(s){var o=Mi();return Dv(o,kn,s)}function Dv(s,o,h){if(o=Wm(s,o,Cv)[0],s=yd(_o)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=Ef(o)}catch(N){throw N===ll?or:N}else m=o;o=Mi();var b=o.queue,T=b.dispatch;return h!==o.memoizedState&&(Ht.flags|=2048,Wu(9,{destroy:void 0},ab.bind(null,b,h),null)),[m,T,s]}function ab(s,o){s.action=o}function wv(s){var o=Mi(),h=kn;if(h!==null)return Dv(o,h,s);Mi(),o=o.memoizedState,h=Mi();var m=h.queue.dispatch;return h.memoizedState=s,[o,m,!1]}function Wu(s,o,h,m){return s={tag:s,create:h,deps:m,inst:o,next:null},o=Ht.updateQueue,o===null&&(o=Mf(),Ht.updateQueue=o),h=o.lastEffect,h===null?o.lastEffect=s.next=s:(m=h.next,h.next=s,s.next=m,o.lastEffect=s),s}function Uv(){return Mi().memoizedState}function Md(s,o,h,m){var b=za();Ht.flags|=s,b.memoizedState=Wu(1|o,{destroy:void 0},h,m===void 0?null:m)}function Ed(s,o,h,m){var b=Mi();m=m===void 0?null:m;var T=b.memoizedState.inst;kn!==null&&m!==null&&Xm(m,kn.memoizedState.deps)?b.memoizedState=Wu(o,T,h,m):(Ht.flags|=s,b.memoizedState=Wu(1|o,T,h,m))}function Ov(s,o){Md(8390656,8,s,o)}function t0(s,o){Ed(2048,8,s,o)}function Nv(s){Ht.flags|=4;var o=Ht.updateQueue;if(o===null)o=Mf(),Ht.updateQueue=o,o.events=[s];else{var h=o.events;h===null?o.events=[s]:h.push(s)}}function Lv(s){var o=Mi().memoizedState;return Nv({ref:o,nextImpl:s}),function(){if((xn&2)!==0)throw Error(n(440));return o.impl.apply(void 0,arguments)}}function Iv(s,o){return Ed(4,2,s,o)}function gs(s,o){return Ed(4,4,s,o)}function n0(s,o){if(typeof o=="function"){s=s();var h=o(s);return function(){typeof h=="function"?h():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function Td(s,o,h){h=h!=null?h.concat([s]):null,Ed(4,4,n0.bind(null,o,s),h)}function Cd(){}function i0(s,o){var h=Mi();o=o===void 0?null:o;var m=h.memoizedState;return o!==null&&Xm(o,m[1])?m[0]:(h.memoizedState=[s,o],s)}function a0(s,o){var h=Mi();o=o===void 0?null:o;var m=h.memoizedState;if(o!==null&&Xm(o,m[1]))return m[0];if(m=s(),Ql){_t(!0);try{s()}finally{_t(!1)}}return h.memoizedState=[m,o],m}function s0(s,o,h){return h===void 0||(qa&1073741824)!==0&&(hn&261930)===0?s.memoizedState=o:(s.memoizedState=h,s=u(),Ht.lanes|=s,Ms|=s,h)}function r0(s,o,h,m){return ni(h,o)?h:ps.current!==null?(s=s0(s,h,m),ni(s,o)||(ii=!0),s):(qa&42)===0||(qa&1073741824)!==0&&(hn&261930)===0?(ii=!0,s.memoizedState=h):(s=u(),Ht.lanes|=s,Ms|=s,o)}function o0(s,o,h,m,b){var T=J.p;J.p=T!==0&&8>T?T:8;var N=F.T,X={};F.T=X,Cf(s,!1,o,h);try{var ie=b(),_e=F.S;if(_e!==null&&_e(X,ie),ie!==null&&typeof ie=="object"&&typeof ie.then=="function"){var Ue=Nm(ie,m);ju(s,o,Ue,Fa(s))}else ju(s,o,m,Fa(s))}catch(Pe){ju(s,o,{then:function(){},status:"rejected",reason:Pe},Fa())}finally{J.p=T,N!==null&&X.types!==null&&(N.types=X.types),F.T=N}}function sb(){}function l0(s,o,h,m){if(s.tag!==5)throw Error(n(476));var b=zv(s).queue;o0(s,b,o,Z,h===null?sb:function(){return u0(s),h(m)})}function zv(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:Z},next:null};var h={};return o.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:h},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function u0(s){var o=zv(s);o.next===null&&(o=s.alternate.memoizedState),ju(s,o.next.queue,{},Fa())}function c0(){return ta(S0)}function fa(){return Mi().memoizedState}function f0(){return Mi().memoizedState}function rb(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var h=Fa();s=zr(h);var m=vo(o,s,h);m!==null&&(f(m,o,h),hl(m,o,h)),o={cache:wm()},s.payload=o;return}o=o.return}}function ob(s,o,h){var m=Fa();h={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},yo(s)?$l(o,h):(h=Vu(s,o,h,m),h!==null&&(f(h,s,m),Ja(h,o,m)))}function Pv(s,o,h){var m=Fa();ju(s,o,h,m)}function ju(s,o,h,m){var b={lane:m,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(yo(s))$l(o,b);else{var T=s.alternate;if(s.lanes===0&&(T===null||T.lanes===0)&&(T=o.lastRenderedReducer,T!==null))try{var N=o.lastRenderedState,X=T(N,h);if(b.hasEagerState=!0,b.eagerState=X,ni(X,N))return hf(s,o,b,0),In===null&&nl(),!1}catch{}finally{}if(h=Vu(s,o,b,m),h!==null)return f(h,s,m),Ja(h,o,m),!0}return!1}function Cf(s,o,h,m){if(m={lane:2,revertLane:fb(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},yo(s)){if(o)throw Error(n(479))}else o=Vu(s,h,m,2),o!==null&&f(o,s,2)}function yo(s){var o=s.alternate;return s===Ht||o!==null&&o===Ht}function $l(s,o){Fr=vd=!0;var h=s.pending;h===null?o.next=o:(o.next=h.next,h.next=o),s.pending=o}function Ja(s,o,h){if((h&4194048)!==0){var m=o.lanes;m&=s.pendingLanes,h|=m,o.lanes=h,Ul(s,h)}}var Rf={readContext:ta,use:_d,useCallback:di,useContext:di,useEffect:di,useImperativeHandle:di,useLayoutEffect:di,useInsertionEffect:di,useMemo:di,useReducer:di,useRef:di,useState:di,useDebugValue:di,useDeferredValue:di,useTransition:di,useSyncExternalStore:di,useId:di,useHostTransitionStatus:di,useFormState:di,useActionState:di,useOptimistic:di,useMemoCache:di,useCacheRefresh:di};Rf.useEffectEvent=di;var Fv={readContext:ta,use:_d,useCallback:function(s,o){return za().memoizedState=[s,o===void 0?null:o],s},useContext:ta,useEffect:Ov,useImperativeHandle:function(s,o,h){h=h!=null?h.concat([s]):null,Md(4194308,4,n0.bind(null,o,s),h)},useLayoutEffect:function(s,o){return Md(4194308,4,s,o)},useInsertionEffect:function(s,o){Md(4,2,s,o)},useMemo:function(s,o){var h=za();o=o===void 0?null:o;var m=s();if(Ql){_t(!0);try{s()}finally{_t(!1)}}return h.memoizedState=[m,o],m},useReducer:function(s,o,h){var m=za();if(h!==void 0){var b=h(o);if(Ql){_t(!0);try{h(o)}finally{_t(!1)}}}else b=o;return m.memoizedState=m.baseState=b,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:b},m.queue=s,s=s.dispatch=ob.bind(null,Ht,s),[m.memoizedState,s]},useRef:function(s){var o=za();return s={current:s},o.memoizedState=s},useState:function(s){s=Tf(s);var o=s.queue,h=Pv.bind(null,Ht,o);return o.dispatch=h,[s.memoizedState,h]},useDebugValue:Cd,useDeferredValue:function(s,o){var h=za();return s0(h,s,o)},useTransition:function(){var s=Tf(!1);return s=o0.bind(null,Ht,s.queue,!0,!1),za().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,h){var m=Ht,b=za();if(dn){if(h===void 0)throw Error(n(407));h=h()}else{if(h=o(),In===null)throw Error(n(349));(hn&127)!==0||Av(m,o,h)}b.memoizedState=h;var T={value:h,getSnapshot:o};return b.queue=T,Ov(Qm.bind(null,m,T,s),[s]),m.flags|=2048,Wu(9,{destroy:void 0},Zm.bind(null,m,T,h,o),null),h},useId:function(){var s=za(),o=In.identifierPrefix;if(dn){var h=Lr,m=Nr;h=(m&~(1<<32-$(m)-1)).toString(32)+h,o="_"+o+"R_"+h,h=xd++,0<h&&(o+="H"+h.toString(32)),o+="_"}else h=tb++,o="_"+o+"r_"+h.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:c0,useFormState:Rv,useActionState:Rv,useOptimistic:function(s){var o=za();o.memoizedState=o.baseState=s;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=h,o=Cf.bind(null,Ht,!0,h),h.dispatch=o,[s,o]},useMemoCache:Km,useCacheRefresh:function(){return za().memoizedState=rb.bind(null,Ht)},useEffectEvent:function(s){var o=za(),h={impl:s};return o.memoizedState=h,function(){if((xn&2)!==0)throw Error(n(440));return h.impl.apply(void 0,arguments)}}},Zu={readContext:ta,use:_d,useCallback:i0,useContext:ta,useEffect:t0,useImperativeHandle:Td,useInsertionEffect:Iv,useLayoutEffect:gs,useMemo:a0,useReducer:yd,useRef:Uv,useState:function(){return yd(_o)},useDebugValue:Cd,useDeferredValue:function(s,o){var h=Mi();return r0(h,kn.memoizedState,s,o)},useTransition:function(){var s=yd(_o)[0],o=Mi().memoizedState;return[typeof s=="boolean"?s:Ef(s),o]},useSyncExternalStore:jm,useId:fa,useHostTransitionStatus:c0,useFormState:Bv,useActionState:Bv,useOptimistic:function(s,o){var h=Mi();return Sv(h,kn,s,o)},useMemoCache:Km,useCacheRefresh:f0};Zu.useEffectEvent=Lv;var Bf={readContext:ta,use:_d,useCallback:i0,useContext:ta,useEffect:t0,useImperativeHandle:Td,useInsertionEffect:Iv,useLayoutEffect:gs,useMemo:a0,useReducer:bd,useRef:Uv,useState:function(){return bd(_o)},useDebugValue:Cd,useDeferredValue:function(s,o){var h=Mi();return kn===null?s0(h,s,o):r0(h,kn.memoizedState,s,o)},useTransition:function(){var s=bd(_o)[0],o=Mi().memoizedState;return[typeof s=="boolean"?s:Ef(s),o]},useSyncExternalStore:jm,useId:fa,useHostTransitionStatus:c0,useFormState:wv,useActionState:wv,useOptimistic:function(s,o){var h=Mi();return kn!==null?Sv(h,kn,s,o):(h.baseState=s,[s,h.queue.dispatch])},useMemoCache:Km,useCacheRefresh:f0};Bf.useEffectEvent=Lv;function Qu(s,o,h,m){o=s.memoizedState,h=h(m,o),h=h==null?o:v({},o,h),s.memoizedState=h,s.lanes===0&&(s.updateQueue.baseState=h)}var Df={enqueueSetState:function(s,o,h){s=s._reactInternals;var m=Fa(),b=zr(m);b.payload=o,h!=null&&(b.callback=h),o=vo(s,b,m),o!==null&&(f(o,s,m),hl(o,s,m))},enqueueReplaceState:function(s,o,h){s=s._reactInternals;var m=Fa(),b=zr(m);b.tag=1,b.payload=o,h!=null&&(b.callback=h),o=vo(s,b,m),o!==null&&(f(o,s,m),hl(o,s,m))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var h=Fa(),m=zr(h);m.tag=2,o!=null&&(m.callback=o),o=vo(s,m,h),o!==null&&(f(o,s,h),hl(o,s,h))}};function Hv(s,o,h,m,b,T,N){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,T,N):o.prototype&&o.prototype.isPureReactComponent?!Iu(h,m)||!Iu(b,T):!0}function Gv(s,o,h,m){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(h,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(h,m),o.state!==s&&Df.enqueueReplaceState(o,o.state,null)}function ha(s,o){var h=o;if("ref"in o){h={};for(var m in o)m!=="ref"&&(h[m]=o[m])}if(s=s.defaultProps){h===o&&(h=v({},h));for(var b in s)h[b]===void 0&&(h[b]=s[b])}return h}function h0(s){tl(s)}function Vv(s){console.error(s)}function Rd(s){tl(s)}function Bd(s,o){try{var h=s.onUncaughtError;h(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function Xv(s,o,h){try{var m=s.onCaughtError;m(h.value,{componentStack:h.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function d0(s,o,h){return h=zr(h),h.tag=3,h.payload={element:null},h.callback=function(){Bd(s,o)},h}function $u(s){return s=zr(s),s.tag=3,s}function Ka(s,o,h,m){var b=h.type.getDerivedStateFromError;if(typeof b=="function"){var T=m.value;s.payload=function(){return b(T)},s.callback=function(){Xv(o,h,m)}}var N=h.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(s.callback=function(){Xv(o,h,m),typeof b!="function"&&(Yr===null?Yr=new Set([this]):Yr.add(this));var X=m.stack;this.componentDidCatch(m.value,{componentStack:X!==null?X:""})})}function vs(s,o,h,m,b){if(h.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=h.alternate,o!==null&&rl(o,h,b,!0),h=Xi.current,h!==null){switch(h.tag){case 31:case 13:return Hs===null?Xt():h.alternate===null&&zn===0&&(zn=3),h.flags&=-257,h.flags|=65536,h.lanes=b,m===_f?h.flags|=16384:(o=h.updateQueue,o===null?h.updateQueue=new Set([m]):o.add(m),lb(s,m,b)),!1;case 22:return h.flags|=65536,m===_f?h.flags|=16384:(o=h.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},h.updateQueue=o):(h=o.retryQueue,h===null?o.retryQueue=new Set([m]):h.add(m)),lb(s,m,b)),!1}throw Error(n(435,h.tag))}return lb(s,m,b),Xt(),!1}if(dn)return o=Xi.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=b,m!==ud&&(s=Error(n(422),{cause:m}),gf(ka(s,h)))):(m!==ud&&(o=Error(n(423),{cause:m}),gf(ka(o,h))),s=s.current.alternate,s.flags|=65536,b&=-b,s.lanes|=b,m=ka(m,h),b=d0(s.stateNode,m,b),md(s,b),zn!==4&&(zn=2)),!1;var T=Error(n(520),{cause:m});if(T=ka(T,h),hr===null?hr=[T]:hr.push(T),zn!==4&&(zn=2),o===null)return!0;m=ka(m,h),h=o;do{switch(h.tag){case 3:return h.flags|=65536,s=b&-b,h.lanes|=s,s=d0(h.stateNode,m,s),md(h,s),!1;case 1:if(o=h.type,T=h.stateNode,(h.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Yr===null||!Yr.has(T))))return h.flags|=65536,b&=-b,h.lanes|=b,b=$u(b),Ka(b,s,h,m),md(h,b),!1}h=h.return}while(h!==null);return!1}var Dd=Error(n(461)),ii=!1;function pi(s,o,h,m){o.child=s===null?xv(o,null,h,m):jl(o,s.child,h,m)}function wf(s,o,h,m,b){h=h.render;var T=o.ref;if("ref"in m){var N={};for(var X in m)X!=="ref"&&(N[X]=m[X])}else N=m;return Jl(o),m=km(s,o,h,N,T,b),X=Ym(),s!==null&&!ii?(qm(s,o,b),cr(s,o,b)):(dn&&X&&ld(o),o.flags|=1,pi(s,o,m,b),o.child)}function Uf(s,o,h,m,b){if(s===null){var T=h.type;return typeof T=="function"&&!La(T)&&T.defaultProps===void 0&&h.compare===null?(o.tag=15,o.type=T,xs(s,o,T,m,b)):(s=df(h.type,null,m,o,o.mode,b),s.ref=o.ref,s.return=o,o.child=s)}if(T=s.child,!ml(s,b)){var N=T.memoizedProps;if(h=h.compare,h=h!==null?h:Iu,h(N,m)&&s.ref===o.ref)return cr(s,o,b)}return o.flags|=1,s=Ur(T,m),s.ref=o.ref,s.return=o,o.child=s}function xs(s,o,h,m,b){if(s!==null){var T=s.memoizedProps;if(Iu(T,m)&&s.ref===o.ref)if(ii=!1,o.pendingProps=m=T,ml(s,b))(s.flags&131072)!==0&&(ii=!0);else return o.lanes=s.lanes,cr(s,o,b)}return ec(s,o,h,m,b)}function _s(s,o,h,m){var b=m.children,T=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((o.flags&128)!==0){if(T=T!==null?T.baseLanes|h:h,s!==null){for(m=o.child=s.child,b=0;m!==null;)b=b|m.lanes|m.childLanes,m=m.sibling;m=b&~T}else m=0,o.child=null;return Gr(s,o,T,h,m)}if((h&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ju(o,T!==null?T.cachePool:null),T!==null?Hm(o,T):Gm(),_v(o);else return m=o.lanes=536870912,Gr(s,o,T!==null?T.baseLanes|h:h,h,m)}else T!==null?(Ju(o,T.cachePool),Hm(o,T),xo(),o.memoizedState=null):(s!==null&&Ju(o,null),Gm(),xo());return pi(s,o,b,h),o.child}function lr(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Gr(s,o,h,m,b){var T=Ir();return T=T===null?null:{parent:Bt._currentValue,pool:T},o.memoizedState={baseLanes:h,cachePool:T},s!==null&&Ju(o,null),Gm(),_v(o),s!==null&&rl(s,o,m,!0),o.childLanes=b,null}function Gs(s,o){return o=tc({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function na(s,o,h){return jl(o,s.child,null,h),s=Gs(o,o.pendingProps),s.flags|=2,ms(o),o.memoizedState=null,s}function Of(s,o,h){var m=o.pendingProps,b=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(dn){if(m.mode==="hidden")return s=Gs(o,m),o.lanes=536870912,lr(null,s);if(Vm(o),(s=jn)?(s=XM(s,ea),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Or!==null?{id:Nr,overflow:Lr}:null,retryLane:536870912,hydrationErrors:null},h=hv(s),h.return=o,o.child=h,$i=o,jn=null)):s=null,s===null)throw fn(o);return o.lanes=536870912,null}return Gs(o,m)}var T=s.memoizedState;if(T!==null){var N=T.dehydrated;if(Vm(o),b)if(o.flags&256)o.flags&=-257,o=na(s,o,h);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(n(558));else if(ii||rl(s,o,h,!1),b=(h&s.childLanes)!==0,ii||b){if(m=In,m!==null&&(N=Ol(m,h),N!==0&&N!==T.retryLane))throw T.retryLane=N,il(s,N),f(m,s,N),Dd;Xt(),o=na(s,o,h)}else s=T.treeContext,jn=qr(N.nextSibling),$i=o,dn=!0,fo=null,ea=!1,s!==null&&mf(o,s),o=Gs(o,m),o.flags|=4096;return o}return s=Ur(s.child,{mode:m.mode,children:m.children}),s.ref=o.ref,o.child=s,s.return=o,s}function ur(s,o){var h=o.ref;if(h===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(n(284));(s===null||s.ref!==h)&&(o.flags|=4194816)}}function ec(s,o,h,m,b){return Jl(o),h=km(s,o,h,m,void 0,b),m=Ym(),s!==null&&!ii?(qm(s,o,b),cr(s,o,b)):(dn&&m&&ld(o),o.flags|=1,pi(s,o,h,b),o.child)}function Ma(s,o,h,m,b,T){return Jl(o),o.updateQueue=null,h=bv(o,m,h,b),yv(s),m=Ym(),s!==null&&!ii?(qm(s,o,T),cr(s,o,T)):(dn&&m&&ld(o),o.flags|=1,pi(s,o,h,T),o.child)}function da(s,o,h,m,b){if(Jl(o),o.stateNode===null){var T=al,N=h.contextType;typeof N=="object"&&N!==null&&(T=ta(N)),T=new h(m,T),o.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Df,o.stateNode=T,T._reactInternals=o,T=o.stateNode,T.props=m,T.state=o.memoizedState,T.refs={},zm(o),N=h.contextType,T.context=typeof N=="object"&&N!==null?ta(N):al,T.state=o.memoizedState,N=h.getDerivedStateFromProps,typeof N=="function"&&(Qu(o,h,N,m),T.state=o.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(N=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),N!==T.state&&Df.enqueueReplaceState(T,T.state,null),Zl(o,m,T,b),Af(),T.state=o.memoizedState),typeof T.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(s===null){T=o.stateNode;var X=o.memoizedProps,ie=ha(h,X);T.props=ie;var _e=T.context,Ue=h.contextType;N=al,typeof Ue=="object"&&Ue!==null&&(N=ta(Ue));var Pe=h.getDerivedStateFromProps;Ue=typeof Pe=="function"||typeof T.getSnapshotBeforeUpdate=="function",X=o.pendingProps!==X,Ue||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(X||_e!==N)&&Gv(o,T,m,N),fl=!1;var Se=o.memoizedState;T.state=Se,Zl(o,m,T,b),Af(),_e=o.memoizedState,X||Se!==_e||fl?(typeof Pe=="function"&&(Qu(o,h,Pe,m),_e=o.memoizedState),(ie=fl||Hv(o,h,ie,m,Se,_e,N))?(Ue||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(o.flags|=4194308)):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=_e),T.props=m,T.state=_e,T.context=N,m=ie):(typeof T.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{T=o.stateNode,Pm(s,o),N=o.memoizedProps,Ue=ha(h,N),T.props=Ue,Pe=o.pendingProps,Se=T.context,_e=h.contextType,ie=al,typeof _e=="object"&&_e!==null&&(ie=ta(_e)),X=h.getDerivedStateFromProps,(_e=typeof X=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(N!==Pe||Se!==ie)&&Gv(o,T,m,ie),fl=!1,Se=o.memoizedState,T.state=Se,Zl(o,m,T,b),Af();var Be=o.memoizedState;N!==Pe||Se!==Be||fl||s!==null&&s.dependencies!==null&&Yu(s.dependencies)?(typeof X=="function"&&(Qu(o,h,X,m),Be=o.memoizedState),(Ue=fl||Hv(o,h,Ue,m,Se,Be,ie)||s!==null&&s.dependencies!==null&&Yu(s.dependencies))?(_e||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(m,Be,ie),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(m,Be,ie)),typeof T.componentDidUpdate=="function"&&(o.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof T.componentDidUpdate!="function"||N===s.memoizedProps&&Se===s.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&Se===s.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=Be),T.props=m,T.state=Be,T.context=ie,m=Ue):(typeof T.componentDidUpdate!="function"||N===s.memoizedProps&&Se===s.memoizedState||(o.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||N===s.memoizedProps&&Se===s.memoizedState||(o.flags|=1024),m=!1)}return T=m,ur(s,o),m=(o.flags&128)!==0,T||m?(T=o.stateNode,h=m&&typeof h.getDerivedStateFromError!="function"?null:T.render(),o.flags|=1,s!==null&&m?(o.child=jl(o,s.child,null,b),o.child=jl(o,null,h,b)):pi(s,o,h,b),o.memoizedState=T.state,s=o.child):s=cr(s,o,b),s}function An(s,o,h,m){return ql(),o.flags|=256,pi(s,o,h,m),o.child}var ys={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vs(s){return{baseLanes:s,cachePool:hd()}}function Nf(s,o,h){return s=s!==null?s.childLanes&~h:0,o&&(s|=_n),s}function bs(s,o,h){var m=o.pendingProps,b=!1,T=(o.flags&128)!==0,N;if((N=T)||(N=s!==null&&s.memoizedState===null?!1:(hi.current&2)!==0),N&&(b=!0,o.flags&=-129),N=(o.flags&32)!==0,o.flags&=-33,s===null){if(dn){if(b?dl(o):xo(),(s=jn)?(s=XM(s,ea),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:Or!==null?{id:Nr,overflow:Lr}:null,retryLane:536870912,hydrationErrors:null},h=hv(s),h.return=o,o.child=h,$i=o,jn=null)):s=null,s===null)throw fn(o);return Mb(s)?o.lanes=32:o.lanes=536870912,null}var X=m.children;return m=m.fallback,b?(xo(),b=o.mode,X=tc({mode:"hidden",children:X},b),m=uo(m,b,h,null),X.return=o,m.return=o,X.sibling=m,o.child=X,m=o.child,m.memoizedState=Vs(h),m.childLanes=Nf(s,N,h),o.memoizedState=ys,lr(null,m)):(dl(o),pl(o,X))}var ie=s.memoizedState;if(ie!==null&&(X=ie.dehydrated,X!==null)){if(T)o.flags&256?(dl(o),o.flags&=-257,o=nc(s,o,h)):o.memoizedState!==null?(xo(),o.child=s.child,o.flags|=128,o=null):(xo(),X=m.fallback,b=o.mode,m=tc({mode:"visible",children:m.children},b),X=uo(X,b,h,null),X.flags|=2,m.return=o,X.return=o,m.sibling=X,o.child=m,jl(o,s.child,null,h),m=o.child,m.memoizedState=Vs(h),m.childLanes=Nf(s,N,h),o.memoizedState=ys,o=lr(null,m));else if(dl(o),Mb(X)){if(N=X.nextSibling&&X.nextSibling.dataset,N)var _e=N.dgst;N=_e,m=Error(n(419)),m.stack="",m.digest=N,gf({value:m,source:null,stack:null}),o=nc(s,o,h)}else if(ii||rl(s,o,h,!1),N=(h&s.childLanes)!==0,ii||N){if(N=In,N!==null&&(m=Ol(N,h),m!==0&&m!==ie.retryLane))throw ie.retryLane=m,il(s,m),f(N,s,m),Dd;Sb(X)||Xt(),o=nc(s,o,h)}else Sb(X)?(o.flags|=192,o.child=s.child,o=null):(s=ie.treeContext,jn=qr(X.nextSibling),$i=o,dn=!0,fo=null,ea=!1,s!==null&&mf(o,s),o=pl(o,m.children),o.flags|=4096);return o}return b?(xo(),X=m.fallback,b=o.mode,ie=s.child,_e=ie.sibling,m=Ur(ie,{mode:"hidden",children:m.children}),m.subtreeFlags=ie.subtreeFlags&65011712,_e!==null?X=Ur(_e,X):(X=uo(X,b,h,null),X.flags|=2),X.return=o,m.return=o,m.sibling=X,o.child=m,lr(null,m),m=o.child,X=s.child.memoizedState,X===null?X=Vs(h):(b=X.cachePool,b!==null?(ie=Bt._currentValue,b=b.parent!==ie?{parent:ie,pool:ie}:b):b=hd(),X={baseLanes:X.baseLanes|h,cachePool:b}),m.memoizedState=X,m.childLanes=Nf(s,N,h),o.memoizedState=ys,lr(s.child,m)):(dl(o),h=s.child,s=h.sibling,h=Ur(h,{mode:"visible",children:m.children}),h.return=o,h.sibling=null,s!==null&&(N=o.deletions,N===null?(o.deletions=[s],o.flags|=16):N.push(s)),o.child=h,o.memoizedState=null,h)}function pl(s,o){return o=tc({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function tc(s,o){return s=Na(22,s,null,o),s.lanes=0,s}function nc(s,o,h){return jl(o,s.child,null,h),s=pl(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function eu(s,o,h){s.lanes|=o;var m=s.alternate;m!==null&&(m.lanes|=o),mo(s.return,o,h)}function Lf(s,o,h,m,b,T){var N=s.memoizedState;N===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:b,treeForkCount:T}:(N.isBackwards=o,N.rendering=null,N.renderingStartTime=0,N.last=m,N.tail=h,N.tailMode=b,N.treeForkCount=T)}function If(s,o,h){var m=o.pendingProps,b=m.revealOrder,T=m.tail;m=m.children;var N=hi.current,X=(N&2)!==0;if(X?(N=N&1|2,o.flags|=128):N&=1,Ce(hi,N),pi(s,o,m,h),m=dn?ku:0,!X&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&eu(s,h,o);else if(s.tag===19)eu(s,h,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(b){case"forwards":for(h=o.child,b=null;h!==null;)s=h.alternate,s!==null&&gd(s)===null&&(b=h),h=h.sibling;h=b,h===null?(b=o.child,o.child=null):(b=h.sibling,h.sibling=null),Lf(o,!1,b,h,T,m);break;case"backwards":case"unstable_legacy-backwards":for(h=null,b=o.child,o.child=null;b!==null;){if(s=b.alternate,s!==null&&gd(s)===null){o.child=b;break}s=b.sibling,b.sibling=h,h=b,b=s}Lf(o,!0,h,null,T,m);break;case"together":Lf(o,!1,null,null,void 0,m);break;default:o.memoizedState=null}return o.child}function cr(s,o,h){if(s!==null&&(o.dependencies=s.dependencies),Ms|=o.lanes,(h&o.childLanes)===0)if(s!==null){if(rl(s,o,h,!1),(h&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(n(153));if(o.child!==null){for(s=o.child,h=Ur(s,s.pendingProps),o.child=h,h.return=o;s.sibling!==null;)s=s.sibling,h=h.sibling=Ur(s,s.pendingProps),h.return=o;h.sibling=null}return o.child}function ml(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&Yu(s)))}function zf(s,o,h){switch(o.tag){case 3:$e(o,o.stateNode.containerInfo),po(o,Bt,s.memoizedState.cache),ql();break;case 27:case 5:vt(o);break;case 4:$e(o,o.stateNode.containerInfo);break;case 10:po(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Vm(o),null;break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(dl(o),o.flags|=128,null):(h&o.child.childLanes)!==0?bs(s,o,h):(dl(o),s=cr(s,o,h),s!==null?s.sibling:null);dl(o);break;case 19:var b=(s.flags&128)!==0;if(m=(h&o.childLanes)!==0,m||(rl(s,o,h,!1),m=(h&o.childLanes)!==0),b){if(m)return If(s,o,h);o.flags|=128}if(b=o.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),Ce(hi,hi.current),m)break;return null;case 22:return o.lanes=0,_s(s,o,h,o.pendingProps);case 24:po(o,Bt,s.memoizedState.cache)}return cr(s,o,h)}function wd(s,o,h){if(s!==null)if(s.memoizedProps!==o.pendingProps)ii=!0;else{if(!ml(s,h)&&(o.flags&128)===0)return ii=!1,zf(s,o,h);ii=(s.flags&131072)!==0}else ii=!1,dn&&(o.flags&1048576)!==0&&Tm(o,ku,o.index);switch(o.lanes=0,o.tag){case 16:e:{var m=o.pendingProps;if(s=Wl(o.elementType),o.type=s,typeof s=="function")La(s)?(m=ha(s,m),o.tag=1,o=da(null,o,s,m,h)):(o.tag=0,o=ec(null,o,s,m,h));else{if(s!=null){var b=s.$$typeof;if(b===w){o.tag=11,o=wf(null,o,s,m,h);break e}else if(b===P){o.tag=14,o=Uf(null,o,s,m,h);break e}}throw o=le(s)||s,Error(n(306,o,""))}}return o;case 0:return ec(s,o,o.type,o.pendingProps,h);case 1:return m=o.type,b=ha(m,o.pendingProps),da(s,o,m,b,h);case 3:e:{if($e(o,o.stateNode.containerInfo),s===null)throw Error(n(387));m=o.pendingProps;var T=o.memoizedState;b=T.element,Pm(s,o),Zl(o,m,null,h);var N=o.memoizedState;if(m=N.cache,po(o,Bt,m),m!==T.cache&&fd(o,[Bt],h,!0),Af(),m=N.element,T.isDehydrated)if(T={element:m,isDehydrated:!1,cache:N.cache},o.updateQueue.baseState=T,o.memoizedState=T,o.flags&256){o=An(s,o,m,h);break e}else if(m!==b){b=ka(Error(n(424)),o),gf(b),o=An(s,o,m,h);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(jn=qr(s.firstChild),$i=o,dn=!0,fo=null,ea=!0,h=xv(o,null,m,h),o.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(ql(),m===b){o=cr(s,o,h);break e}pi(s,o,m,h)}o=o.child}return o;case 26:return ur(s,o),s===null?(h=WM(o.type,null,o.pendingProps,null))?o.memoizedState=h:dn||(h=o.type,s=o.pendingProps,m=Zv(ge.current).createElement(h),m[$t]=o,m[Ai]=s,Ha(m,h,s),ve(m),o.stateNode=m):o.memoizedState=WM(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return vt(o),s===null&&dn&&(m=o.stateNode=qM(o.type,o.pendingProps,ge.current),$i=o,ea=!0,b=jn,uc(o.type)?(Eb=b,jn=qr(m.firstChild)):jn=b),pi(s,o,o.pendingProps.children,h),ur(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&dn&&((b=m=jn)&&(m=QB(m,o.type,o.pendingProps,ea),m!==null?(o.stateNode=m,$i=o,jn=qr(m.firstChild),ea=!1,b=!0):b=!1),b||fn(o)),vt(o),b=o.type,T=o.pendingProps,N=s!==null?s.memoizedProps:null,m=T.children,yb(b,T)?m=null:N!==null&&yb(b,N)&&(o.flags|=32),o.memoizedState!==null&&(b=km(s,o,nb,null,null,h),S0._currentValue=b),ur(s,o),pi(s,o,m,h),o.child;case 6:return s===null&&dn&&((s=h=jn)&&(h=$B(h,o.pendingProps,ea),h!==null?(o.stateNode=h,$i=o,jn=null,s=!0):s=!1),s||fn(o)),null;case 13:return bs(s,o,h);case 4:return $e(o,o.stateNode.containerInfo),m=o.pendingProps,s===null?o.child=jl(o,null,m,h):pi(s,o,m,h),o.child;case 11:return wf(s,o,o.type,o.pendingProps,h);case 7:return pi(s,o,o.pendingProps,h),o.child;case 8:return pi(s,o,o.pendingProps.children,h),o.child;case 12:return pi(s,o,o.pendingProps.children,h),o.child;case 10:return m=o.pendingProps,po(o,o.type,m.value),pi(s,o,m.children,h),o.child;case 9:return b=o.type._context,m=o.pendingProps.children,Jl(o),b=ta(b),m=m(b),o.flags|=1,pi(s,o,m,h),o.child;case 14:return Uf(s,o,o.type,o.pendingProps,h);case 15:return xs(s,o,o.type,o.pendingProps,h);case 19:return If(s,o,h);case 31:return Of(s,o,h);case 22:return _s(s,o,h,o.pendingProps);case 24:return Jl(o),m=ta(Bt),s===null?(b=Ir(),b===null&&(b=In,T=wm(),b.pooledCache=T,T.refCount++,T!==null&&(b.pooledCacheLanes|=h),b=T),o.memoizedState={parent:m,cache:b},zm(o),po(o,Bt,b)):((s.lanes&h)!==0&&(Pm(s,o),Zl(o,null,null,h),Af()),b=s.memoizedState,T=o.memoizedState,b.parent!==m?(b={parent:m,cache:m},o.memoizedState=b,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=b),po(o,Bt,m)):(m=T.cache,po(o,Bt,m),m!==b.cache&&fd(o,[Bt],h,!0))),pi(s,o,o.pendingProps.children,h),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Wa(s){s.flags|=4}function gl(s,o,h,m,b){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(b&335544128)===b)if(s.stateNode.complete)s.flags|=8192;else if(nt())s.flags|=8192;else throw Lt=_f,xf}else s.flags&=-16777217}function bo(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!eE(o))if(nt())s.flags|=8192;else throw Lt=_f,xf}function ic(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?rn():536870912,s.lanes|=o,Es|=o)}function Pf(s,o){if(!dn)switch(s.tailMode){case"hidden":o=s.tail;for(var h=null;o!==null;)o.alternate!==null&&(h=o),o=o.sibling;h===null?s.tail=null:h.sibling=null;break;case"collapsed":h=s.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function Gn(s){var o=s.alternate!==null&&s.alternate.child===s.child,h=0,m=0;if(o)for(var b=s.child;b!==null;)h|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=s,b=b.sibling;else for(b=s.child;b!==null;)h|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=s,b=b.sibling;return s.subtreeFlags|=m,s.childLanes=h,o}function p0(s,o,h){var m=o.pendingProps;switch(sl(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gn(o),null;case 1:return Gn(o),null;case 3:return h=o.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),Fs(Bt),ut(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(s===null||s.child===null)&&(Yl(o)?Wa(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Cm())),Gn(o),null;case 26:var b=o.type,T=o.memoizedState;return s===null?(Wa(o),T!==null?(Gn(o),bo(o,T)):(Gn(o),gl(o,b,null,m,h))):T?T!==s.memoizedState?(Wa(o),Gn(o),bo(o,T)):(Gn(o),o.flags&=-16777217):(s=s.memoizedProps,s!==m&&Wa(o),Gn(o),gl(o,b,s,m,h)),null;case 27:if(Pt(o),h=ge.current,b=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==m&&Wa(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return Gn(o),null}s=Ee.current,Yl(o)?cd(o):(s=qM(b,m,h),o.stateNode=s,Wa(o))}return Gn(o),null;case 5:if(Pt(o),b=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==m&&Wa(o);else{if(!m){if(o.stateNode===null)throw Error(n(166));return Gn(o),null}if(T=Ee.current,Yl(o))cd(o);else{var N=Zv(ge.current);switch(T){case 1:T=N.createElementNS("http://www.w3.org/2000/svg",b);break;case 2:T=N.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;default:switch(b){case"svg":T=N.createElementNS("http://www.w3.org/2000/svg",b);break;case"math":T=N.createElementNS("http://www.w3.org/1998/Math/MathML",b);break;case"script":T=N.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof m.is=="string"?N.createElement("select",{is:m.is}):N.createElement("select"),m.multiple?T.multiple=!0:m.size&&(T.size=m.size);break;default:T=typeof m.is=="string"?N.createElement(b,{is:m.is}):N.createElement(b)}}T[$t]=o,T[Ai]=m;e:for(N=o.child;N!==null;){if(N.tag===5||N.tag===6)T.appendChild(N.stateNode);else if(N.tag!==4&&N.tag!==27&&N.child!==null){N.child.return=N,N=N.child;continue}if(N===o)break e;for(;N.sibling===null;){if(N.return===null||N.return===o)break e;N=N.return}N.sibling.return=N.return,N=N.sibling}o.stateNode=T;e:switch(Ha(T,b,m),b){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Wa(o)}}return Gn(o),gl(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,h),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==m&&Wa(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(n(166));if(s=ge.current,Yl(o)){if(s=o.stateNode,h=o.memoizedProps,m=null,b=$i,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}s[$t]=o,s=!!(s.nodeValue===h||m!==null&&m.suppressHydrationWarning===!0||LM(s.nodeValue,h)),s||fn(o,!0)}else s=Zv(s).createTextNode(m),s[$t]=o,o.stateNode=s}return Gn(o),null;case 31:if(h=o.memoizedState,s===null||s.memoizedState!==null){if(m=Yl(o),h!==null){if(s===null){if(!m)throw Error(n(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(557));s[$t]=o}else ql(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Gn(o),s=!1}else h=Cm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=h),s=!0;if(!s)return o.flags&256?(ms(o),o):(ms(o),null);if((o.flags&128)!==0)throw Error(n(558))}return Gn(o),null;case 13:if(m=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(b=Yl(o),m!==null&&m.dehydrated!==null){if(s===null){if(!b)throw Error(n(318));if(b=o.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(n(317));b[$t]=o}else ql(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Gn(o),b=!1}else b=Cm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=b),b=!0;if(!b)return o.flags&256?(ms(o),o):(ms(o),null)}return ms(o),(o.flags&128)!==0?(o.lanes=h,o):(h=m!==null,s=s!==null&&s.memoizedState!==null,h&&(m=o.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool),T=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(T=m.memoizedState.cachePool.pool),T!==b&&(m.flags|=2048)),h!==s&&h&&(o.child.flags|=8192),ic(o,o.updateQueue),Gn(o),null);case 4:return ut(),s===null&&mb(o.stateNode.containerInfo),Gn(o),null;case 10:return Fs(o.type),Gn(o),null;case 19:if(se(hi),m=o.memoizedState,m===null)return Gn(o),null;if(b=(o.flags&128)!==0,T=m.rendering,T===null)if(b)Pf(m,!1);else{if(zn!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(T=gd(s),T!==null){for(o.flags|=128,Pf(m,!1),s=T.updateQueue,o.updateQueue=s,ic(o,s),o.subtreeFlags=0,s=h,h=o.child;h!==null;)ba(h,s),h=h.sibling;return Ce(hi,hi.current&1|2),dn&&co(o,m.treeForkCount),o.child}s=s.sibling}m.tail!==null&&H()>Ts&&(o.flags|=128,b=!0,Pf(m,!1),o.lanes=4194304)}else{if(!b)if(s=gd(T),s!==null){if(o.flags|=128,b=!0,s=s.updateQueue,o.updateQueue=s,ic(o,s),Pf(m,!0),m.tail===null&&m.tailMode==="hidden"&&!T.alternate&&!dn)return Gn(o),null}else 2*H()-m.renderingStartTime>Ts&&h!==536870912&&(o.flags|=128,b=!0,Pf(m,!1),o.lanes=4194304);m.isBackwards?(T.sibling=o.child,o.child=T):(s=m.last,s!==null?s.sibling=T:o.child=T,m.last=T)}return m.tail!==null?(s=m.tail,m.rendering=s,m.tail=s.sibling,m.renderingStartTime=H(),s.sibling=null,h=hi.current,Ce(hi,b?h&1|2:h&1),dn&&co(o,m.treeForkCount),s):(Gn(o),null);case 22:case 23:return ms(o),Sa(),m=o.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(h&536870912)!==0&&(o.flags&128)===0&&(Gn(o),o.subtreeFlags&6&&(o.flags|=8192)):Gn(o),h=o.updateQueue,h!==null&&ic(o,h.retryQueue),h=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==h&&(o.flags|=2048),s!==null&&se(ol),null;case 24:return h=null,s!==null&&(h=s.memoizedState.cache),o.memoizedState.cache!==h&&(o.flags|=2048),Fs(Bt),Gn(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function Ud(s,o){switch(sl(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Fs(Bt),ut(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return Pt(o),null;case 31:if(o.memoizedState!==null){if(ms(o),o.alternate===null)throw Error(n(340));ql()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(ms(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(n(340));ql()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return se(hi),null;case 4:return ut(),null;case 10:return Fs(o.type),null;case 22:case 23:return ms(o),Sa(),s!==null&&se(ol),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return Fs(Bt),null;case 25:return null;default:return null}}function tu(s,o){switch(sl(o),o.tag){case 3:Fs(Bt),ut();break;case 26:case 27:case 5:Pt(o);break;case 4:ut();break;case 31:o.memoizedState!==null&&ms(o);break;case 13:ms(o);break;case 19:se(hi);break;case 10:Fs(o.type);break;case 22:case 23:ms(o),Sa(),s!==null&&se(ol);break;case 24:Fs(Bt)}}function Vr(s,o){try{var h=o.updateQueue,m=h!==null?h.lastEffect:null;if(m!==null){var b=m.next;h=b;do{if((h.tag&s)===s){m=void 0;var T=h.create,N=h.inst;m=T(),N.destroy=m}h=h.next}while(h!==b)}}catch(X){Kn(o,o.return,X)}}function Xs(s,o,h){try{var m=o.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var T=b.next;m=T;do{if((m.tag&s)===s){var N=m.inst,X=N.destroy;if(X!==void 0){N.destroy=void 0,b=o;var ie=h,_e=X;try{_e()}catch(Ue){Kn(b,ie,Ue)}}}m=m.next}while(m!==T)}}catch(Ue){Kn(o,o.return,Ue)}}function vl(s){var o=s.updateQueue;if(o!==null){var h=s.stateNode;try{ca(o,h)}catch(m){Kn(s,s.return,m)}}}function m0(s,o,h){h.props=ha(s.type,s.memoizedProps),h.state=s.memoizedState;try{h.componentWillUnmount()}catch(m){Kn(s,o,m)}}function Xr(s,o){try{var h=s.ref;if(h!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof h=="function"?s.refCleanup=h(m):h.current=m}}catch(b){Kn(s,o,b)}}function As(s,o){var h=s.ref,m=s.refCleanup;if(h!==null)if(typeof m=="function")try{m()}catch(b){Kn(s,o,b)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(b){Kn(s,o,b)}else h.current=null}function Ss(s){var o=s.type,h=s.memoizedProps,m=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":h.autoFocus&&m.focus();break e;case"img":h.src?m.src=h.src:h.srcSet&&(m.srcset=h.srcSet)}}catch(b){Kn(s,s.return,b)}}function ks(s,o,h){try{var m=s.stateNode;qB(m,s.type,h,o),m[Ai]=o}catch(b){Kn(s,s.return,b)}}function Ni(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&uc(s.type)||s.tag===4}function kr(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||Ni(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&uc(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function jt(s,o,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(s,o):(o=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,o.appendChild(s),h=h._reactRootContainer,h!=null||o.onclick!==null||(o.onclick=Br));else if(m!==4&&(m===27&&uc(s.type)&&(h=s.stateNode,o=null),s=s.child,s!==null))for(jt(s,o,h),s=s.sibling;s!==null;)jt(s,o,h),s=s.sibling}function On(s,o,h){var m=s.tag;if(m===5||m===6)s=s.stateNode,o?h.insertBefore(s,o):h.appendChild(s);else if(m!==4&&(m===27&&uc(s.type)&&(h=s.stateNode),s=s.child,s!==null))for(On(s,o,h),s=s.sibling;s!==null;)On(s,o,h),s=s.sibling}function Ei(s){var o=s.stateNode,h=s.memoizedProps;try{for(var m=s.type,b=o.attributes;b.length;)o.removeAttributeNode(b[0]);Ha(o,m,h),o[$t]=s,o[Ai]=h}catch(T){Kn(s,s.return,T)}}var Ys=!1,ai=!1,Ao=!1,Ff=typeof WeakSet=="function"?WeakSet:Set,mi=null;function ac(s,o){if(s=s.containerInfo,xb=ax,s=ed(s),zu(s)){if("selectionStart"in s)var h={start:s.selectionStart,end:s.selectionEnd};else e:{h=(h=s.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var b=m.anchorOffset,T=m.focusNode;m=m.focusOffset;try{h.nodeType,T.nodeType}catch{h=null;break e}var N=0,X=-1,ie=-1,_e=0,Ue=0,Pe=s,Se=null;t:for(;;){for(var Be;Pe!==h||b!==0&&Pe.nodeType!==3||(X=N+b),Pe!==T||m!==0&&Pe.nodeType!==3||(ie=N+m),Pe.nodeType===3&&(N+=Pe.nodeValue.length),(Be=Pe.firstChild)!==null;)Se=Pe,Pe=Be;for(;;){if(Pe===s)break t;if(Se===h&&++_e===b&&(X=N),Se===T&&++Ue===m&&(ie=N),(Be=Pe.nextSibling)!==null)break;Pe=Se,Se=Pe.parentNode}Pe=Be}h=X===-1||ie===-1?null:{start:X,end:ie}}else h=null}h=h||{start:0,end:0}}else h=null;for(_b={focusedElem:s,selectionRange:h},ax=!1,mi=o;mi!==null;)if(o=mi,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,mi=s;else for(;mi!==null;){switch(o=mi,T=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(h=0;h<s.length;h++)b=s[h],b.ref.impl=b.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&T!==null){s=void 0,h=o,b=T.memoizedProps,T=T.memoizedState,m=h.stateNode;try{var bt=ha(h.type,b);s=m.getSnapshotBeforeUpdate(bt,T),m.__reactInternalSnapshotBeforeUpdate=s}catch(Ft){Kn(h,h.return,Ft)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,h=s.nodeType,h===9)Ab(s);else if(h===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Ab(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=o.sibling,s!==null){s.return=o.return,mi=s;break}mi=o.return}}function kv(s,o,h){var m=h.flags;switch(h.tag){case 0:case 11:case 15:So(s,h),m&4&&Vr(5,h);break;case 1:if(So(s,h),m&4)if(s=h.stateNode,o===null)try{s.componentDidMount()}catch(N){Kn(h,h.return,N)}else{var b=ha(h.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(b,o,s.__reactInternalSnapshotBeforeUpdate)}catch(N){Kn(h,h.return,N)}}m&64&&vl(h),m&512&&Xr(h,h.return);break;case 3:if(So(s,h),m&64&&(s=h.updateQueue,s!==null)){if(o=null,h.child!==null)switch(h.child.tag){case 27:case 5:o=h.child.stateNode;break;case 1:o=h.child.stateNode}try{ca(s,o)}catch(N){Kn(h,h.return,N)}}break;case 27:o===null&&m&4&&Ei(h);case 26:case 5:So(s,h),o===null&&m&4&&Ss(h),m&512&&Xr(h,h.return);break;case 12:So(s,h);break;case 31:So(s,h),m&4&&Nd(s,h);break;case 13:So(s,h),m&4&&g0(s,h),m&64&&(s=h.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(h=NB.bind(null,h),eD(s,h))));break;case 22:if(m=h.memoizedState!==null||Ys,!m){o=o!==null&&o.memoizedState!==null||ai,b=Ys;var T=ai;Ys=m,(ai=o)&&!T?Ln(s,h,(h.subtreeFlags&8772)!==0):So(s,h),Ys=b,ai=T}break;case 30:break;default:So(s,h)}}function Od(s){var o=s.alternate;o!==null&&(s.alternate=null,Od(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Ll(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Sn=null,Li=!1;function Ea(s,o,h){for(h=h.child;h!==null;)xl(s,o,h),h=h.sibling}function xl(s,o,h){if(Ge&&typeof Ge.onCommitFiberUnmount=="function")try{Ge.onCommitFiberUnmount(Ie,h)}catch{}switch(h.tag){case 26:ai||As(h,o),Ea(s,o,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:ai||As(h,o);var m=Sn,b=Li;uc(h.type)&&(Sn=h.stateNode,Li=!1),Ea(s,o,h),y0(h.stateNode),Sn=m,Li=b;break;case 5:ai||As(h,o);case 6:if(m=Sn,b=Li,Sn=null,Ea(s,o,h),Sn=m,Li=b,Sn!==null)if(Li)try{(Sn.nodeType===9?Sn.body:Sn.nodeName==="HTML"?Sn.ownerDocument.body:Sn).removeChild(h.stateNode)}catch(T){Kn(h,o,T)}else try{Sn.removeChild(h.stateNode)}catch(T){Kn(h,o,T)}break;case 18:Sn!==null&&(Li?(s=Sn,GM(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,h.stateNode),Yd(s)):GM(Sn,h.stateNode));break;case 4:m=Sn,b=Li,Sn=h.stateNode.containerInfo,Li=!0,Ea(s,o,h),Sn=m,Li=b;break;case 0:case 11:case 14:case 15:Xs(2,h,o),ai||Xs(4,h,o),Ea(s,o,h);break;case 1:ai||(As(h,o),m=h.stateNode,typeof m.componentWillUnmount=="function"&&m0(h,o,m)),Ea(s,o,h);break;case 21:Ea(s,o,h);break;case 22:ai=(m=ai)||h.memoizedState!==null,Ea(s,o,h),ai=m;break;default:Ea(s,o,h)}}function Nd(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{Yd(s)}catch(h){Kn(o,o.return,h)}}}function g0(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{Yd(s)}catch(h){Kn(o,o.return,h)}}function Yv(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new Ff),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new Ff),o;default:throw Error(n(435,s.tag))}}function Ti(s,o){var h=Yv(s);o.forEach(function(m){if(!h.has(m)){h.add(m);var b=LB.bind(null,s,m);m.then(b,b)}})}function Ta(s,o){var h=o.deletions;if(h!==null)for(var m=0;m<h.length;m++){var b=h[m],T=s,N=o,X=N;e:for(;X!==null;){switch(X.tag){case 27:if(uc(X.type)){Sn=X.stateNode,Li=!1;break e}break;case 5:Sn=X.stateNode,Li=!1;break e;case 3:case 4:Sn=X.stateNode.containerInfo,Li=!0;break e}X=X.return}if(Sn===null)throw Error(n(160));xl(T,N,b),Sn=null,Li=!1,T=b.alternate,T!==null&&(T.return=null),b.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)_l(o,s),o=o.sibling}var ja=null;function _l(s,o){var h=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ta(o,s),gi(s),m&4&&(Xs(3,s,s.return),Vr(3,s),Xs(5,s,s.return));break;case 1:Ta(o,s),gi(s),m&512&&(ai||h===null||As(h,h.return)),m&64&&Ys&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(h=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=h===null?m:h.concat(m))));break;case 26:var b=ja;if(Ta(o,s),gi(s),m&512&&(ai||h===null||As(h,h.return)),m&4){var T=h!==null?h.memoizedState:null;if(m=s.memoizedState,h===null)if(m===null)if(s.stateNode===null){e:{m=s.type,h=s.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":T=b.getElementsByTagName("title")[0],(!T||T[ao]||T[$t]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=b.createElement(m),b.head.insertBefore(T,b.querySelector("head > title"))),Ha(T,m,h),T[$t]=s,ve(T),m=T;break e;case"link":var N=QM("link","href",b).get(m+(h.href||""));if(N){for(var X=0;X<N.length;X++)if(T=N[X],T.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&T.getAttribute("rel")===(h.rel==null?null:h.rel)&&T.getAttribute("title")===(h.title==null?null:h.title)&&T.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){N.splice(X,1);break t}}T=b.createElement(m),Ha(T,m,h),b.head.appendChild(T);break;case"meta":if(N=QM("meta","content",b).get(m+(h.content||""))){for(X=0;X<N.length;X++)if(T=N[X],T.getAttribute("content")===(h.content==null?null:""+h.content)&&T.getAttribute("name")===(h.name==null?null:h.name)&&T.getAttribute("property")===(h.property==null?null:h.property)&&T.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&T.getAttribute("charset")===(h.charSet==null?null:h.charSet)){N.splice(X,1);break t}}T=b.createElement(m),Ha(T,m,h),b.head.appendChild(T);break;default:throw Error(n(468,m))}T[$t]=s,ve(T),m=T}s.stateNode=m}else $M(b,s.type,s.stateNode);else s.stateNode=ZM(b,m,s.memoizedProps);else T!==m?(T===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):T.count--,m===null?$M(b,s.type,s.stateNode):ZM(b,m,s.memoizedProps)):m===null&&s.stateNode!==null&&ks(s,s.memoizedProps,h.memoizedProps)}break;case 27:Ta(o,s),gi(s),m&512&&(ai||h===null||As(h,h.return)),h!==null&&m&4&&ks(s,s.memoizedProps,h.memoizedProps);break;case 5:if(Ta(o,s),gi(s),m&512&&(ai||h===null||As(h,h.return)),s.flags&32){b=s.stateNode;try{nr(b,"")}catch(bt){Kn(s,s.return,bt)}}m&4&&s.stateNode!=null&&(b=s.memoizedProps,ks(s,b,h!==null?h.memoizedProps:b)),m&1024&&(Ao=!0);break;case 6:if(Ta(o,s),gi(s),m&4){if(s.stateNode===null)throw Error(n(162));m=s.memoizedProps,h=s.stateNode;try{h.nodeValue=m}catch(bt){Kn(s,s.return,bt)}}break;case 3:if(ex=null,b=ja,ja=Qv(o.containerInfo),Ta(o,s),ja=b,gi(s),m&4&&h!==null&&h.memoizedState.isDehydrated)try{Yd(o.containerInfo)}catch(bt){Kn(s,s.return,bt)}Ao&&(Ao=!1,qv(s));break;case 4:m=ja,ja=Qv(s.stateNode.containerInfo),Ta(o,s),gi(s),ja=m;break;case 12:Ta(o,s),gi(s);break;case 31:Ta(o,s),gi(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Ti(s,m)));break;case 13:Ta(o,s),gi(s),s.child.flags&8192&&s.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(To=H()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Ti(s,m)));break;case 22:b=s.memoizedState!==null;var ie=h!==null&&h.memoizedState!==null,_e=Ys,Ue=ai;if(Ys=_e||b,ai=Ue||ie,Ta(o,s),ai=Ue,Ys=_e,gi(s),m&8192)e:for(o=s.stateNode,o._visibility=b?o._visibility&-2:o._visibility|1,b&&(h===null||ie||Ys||ai||nu(s)),h=null,o=s;;){if(o.tag===5||o.tag===26){if(h===null){ie=h=o;try{if(T=ie.stateNode,b)N=T.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{X=ie.stateNode;var Pe=ie.memoizedProps.style,Se=Pe!=null&&Pe.hasOwnProperty("display")?Pe.display:null;X.style.display=Se==null||typeof Se=="boolean"?"":(""+Se).trim()}}catch(bt){Kn(ie,ie.return,bt)}}}else if(o.tag===6){if(h===null){ie=o;try{ie.stateNode.nodeValue=b?"":ie.memoizedProps}catch(bt){Kn(ie,ie.return,bt)}}}else if(o.tag===18){if(h===null){ie=o;try{var Be=ie.stateNode;b?VM(Be,!0):VM(ie.stateNode,!1)}catch(bt){Kn(ie,ie.return,bt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;h===o&&(h=null),o=o.return}h===o&&(h=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=s.updateQueue,m!==null&&(h=m.retryQueue,h!==null&&(m.retryQueue=null,Ti(s,h))));break;case 19:Ta(o,s),gi(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Ti(s,m)));break;case 30:break;case 21:break;default:Ta(o,s),gi(s)}}function gi(s){var o=s.flags;if(o&2){try{for(var h,m=s.return;m!==null;){if(Ni(m)){h=m;break}m=m.return}if(h==null)throw Error(n(160));switch(h.tag){case 27:var b=h.stateNode,T=kr(s);On(s,T,b);break;case 5:var N=h.stateNode;h.flags&32&&(nr(N,""),h.flags&=-33);var X=kr(s);On(s,X,N);break;case 3:case 4:var ie=h.stateNode.containerInfo,_e=kr(s);jt(s,_e,ie);break;default:throw Error(n(161))}}catch(Ue){Kn(s,s.return,Ue)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function qv(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;qv(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function So(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)kv(s,o.alternate,o),o=o.sibling}function nu(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Xs(4,o,o.return),nu(o);break;case 1:As(o,o.return);var h=o.stateNode;typeof h.componentWillUnmount=="function"&&m0(o,o.return,h),nu(o);break;case 27:y0(o.stateNode);case 26:case 5:As(o,o.return),nu(o);break;case 22:o.memoizedState===null&&nu(o);break;case 30:nu(o);break;default:nu(o)}s=s.sibling}}function Ln(s,o,h){for(h=h&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,b=s,T=o,N=T.flags;switch(T.tag){case 0:case 11:case 15:Ln(b,T,h),Vr(4,T);break;case 1:if(Ln(b,T,h),m=T,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(_e){Kn(m,m.return,_e)}if(m=T,b=m.updateQueue,b!==null){var X=m.stateNode;try{var ie=b.shared.hiddenCallbacks;if(ie!==null)for(b.shared.hiddenCallbacks=null,b=0;b<ie.length;b++)Pr(ie[b],X)}catch(_e){Kn(m,m.return,_e)}}h&&N&64&&vl(T),Xr(T,T.return);break;case 27:Ei(T);case 26:case 5:Ln(b,T,h),h&&m===null&&N&4&&Ss(T),Xr(T,T.return);break;case 12:Ln(b,T,h);break;case 31:Ln(b,T,h),h&&N&4&&Nd(b,T);break;case 13:Ln(b,T,h),h&&N&4&&g0(b,T);break;case 22:T.memoizedState===null&&Ln(b,T,h),Xr(T,T.return);break;case 30:break;default:Ln(b,T,h)}o=o.sibling}}function Ld(s,o){var h=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(h=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==h&&(s!=null&&s.refCount++,h!=null&&ua(h))}function Mo(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&ua(s))}function ki(s,o,h,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ui(s,o,h,m),o=o.sibling}function ui(s,o,h,m){var b=o.flags;switch(o.tag){case 0:case 11:case 15:ki(s,o,h,m),b&2048&&Vr(9,o);break;case 1:ki(s,o,h,m);break;case 3:ki(s,o,h,m),b&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&ua(s)));break;case 12:if(b&2048){ki(s,o,h,m),s=o.stateNode;try{var T=o.memoizedProps,N=T.id,X=T.onPostCommit;typeof X=="function"&&X(N,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(ie){Kn(o,o.return,ie)}}else ki(s,o,h,m);break;case 31:ki(s,o,h,m);break;case 13:ki(s,o,h,m);break;case 23:break;case 22:T=o.stateNode,N=o.alternate,o.memoizedState!==null?T._visibility&2?ki(s,o,h,m):sc(s,o):T._visibility&2?ki(s,o,h,m):(T._visibility|=2,yl(s,o,h,m,(o.subtreeFlags&10256)!==0||!1)),b&2048&&Ld(N,o);break;case 24:ki(s,o,h,m),b&2048&&Mo(o.alternate,o);break;default:ki(s,o,h,m)}}function yl(s,o,h,m,b){for(b=b&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var T=s,N=o,X=h,ie=m,_e=N.flags;switch(N.tag){case 0:case 11:case 15:yl(T,N,X,ie,b),Vr(8,N);break;case 23:break;case 22:var Ue=N.stateNode;N.memoizedState!==null?Ue._visibility&2?yl(T,N,X,ie,b):sc(T,N):(Ue._visibility|=2,yl(T,N,X,ie,b)),b&&_e&2048&&Ld(N.alternate,N);break;case 24:yl(T,N,X,ie,b),b&&_e&2048&&Mo(N.alternate,N);break;default:yl(T,N,X,ie,b)}o=o.sibling}}function sc(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var h=s,m=o,b=m.flags;switch(m.tag){case 22:sc(h,m),b&2048&&Ld(m.alternate,m);break;case 24:sc(h,m),b&2048&&Mo(m.alternate,m);break;default:sc(h,m)}o=o.sibling}}var vi=8192;function iu(s,o,h){if(s.subtreeFlags&vi)for(s=s.child;s!==null;)Ci(s,o,h),s=s.sibling}function Ci(s,o,h){switch(s.tag){case 26:iu(s,o,h),s.flags&vi&&s.memoizedState!==null&&hD(h,ja,s.memoizedState,s.memoizedProps);break;case 5:iu(s,o,h);break;case 3:case 4:var m=ja;ja=Qv(s.stateNode.containerInfo),iu(s,o,h),ja=m;break;case 22:s.memoizedState===null&&(m=s.alternate,m!==null&&m.memoizedState!==null?(m=vi,vi=16777216,iu(s,o,h),vi=m):iu(s,o,h));break;default:iu(s,o,h)}}function Za(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function Pa(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var m=o[h];mi=m,Hf(m,s)}Za(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)au(s),s=s.sibling}function au(s){switch(s.tag){case 0:case 11:case 15:Pa(s),s.flags&2048&&Xs(9,s,s.return);break;case 3:Pa(s);break;case 12:Pa(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Id(s)):Pa(s);break;default:Pa(s)}}function Id(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var h=0;h<o.length;h++){var m=o[h];mi=m,Hf(m,s)}Za(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Xs(8,o,o.return),Id(o);break;case 22:h=o.stateNode,h._visibility&2&&(h._visibility&=-3,Id(o));break;default:Id(o)}s=s.sibling}}function Hf(s,o){for(;mi!==null;){var h=mi;switch(h.tag){case 0:case 11:case 15:Xs(8,h,o);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var m=h.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:ua(h.memoizedState.cache)}if(m=h.child,m!==null)m.return=h,mi=m;else e:for(h=s;mi!==null;){m=mi;var b=m.sibling,T=m.return;if(Od(m),m===h){mi=null;break e}if(b!==null){b.return=T,mi=b;break e}mi=T}}}var zd={getCacheForType:function(s){var o=ta(Bt),h=o.data.get(s);return h===void 0&&(h=s(),o.data.set(s,h)),h},cacheSignal:function(){return ta(Bt).controller.signal}},Pd=typeof WeakMap=="function"?WeakMap:Map,xn=0,In=null,Zt=null,hn=0,Dt=0,on=null,Yt=!1,tn=!1,Yn=!1,Ri=0,zn=0,Ms=0,Eo=0,fr=0,_n=0,Es=0,hr=null,Ca=null,Qa=!1,To=0,rc=0,Ts=1/0,oc=null,Yr=null,ci=0,dr=null,Cs=null,qs=0,Co=0,su=null,Fd=null,ru=0,ou=null;function Fa(){return(xn&2)!==0&&hn!==0?hn&-hn:F.T!==null?fb():zs()}function u(){if(_n===0)if((hn&536870912)===0||dn){var s=We;We<<=1,(We&3932160)===0&&(We=262144),_n=s}else _n=536870912;return s=Xi.current,s!==null&&(s.flags|=32),_n}function f(s,o,h){(s===In&&(Dt===2||Dt===9)||s.cancelPendingCommit!==null)&&(de(s,0),U(s,hn,_n,!1)),li(s,h),((xn&2)===0||s!==In)&&(s===In&&((xn&2)===0&&(Eo|=h),zn===4&&U(s,hn,_n,!1)),bl(s))}function x(s,o,h){if((xn&6)!==0)throw Error(n(327));var m=!h&&(o&127)===0&&(o&s.expiredLanes)===0||lt(s,o),b=m?lu(s,o):$a(s,o,!0),T=m;do{if(b===0){tn&&!m&&U(s,o,0,!1);break}else{if(h=s.current.alternate,T&&!R(h)){b=$a(s,o,!1),T=!1;continue}if(b===2){if(T=o,s.errorRecoveryDisabledLanes&T)var N=0;else N=s.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){o=N;e:{var X=s;b=hr;var ie=X.current.memoizedState.isDehydrated;if(ie&&(de(X,N).flags|=256),N=$a(X,N,!1),N!==2){if(Yn&&!ie){X.errorRecoveryDisabledLanes|=T,Eo|=T,b=4;break e}T=Ca,Ca=b,T!==null&&(Ca===null?Ca=T:Ca.push.apply(Ca,T))}b=N}if(T=!1,b!==2)continue}}if(b===1){de(s,0),U(s,o,0,!0);break}e:{switch(m=s,T=b,T){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:U(m,o,_n,!Yt);break e;case 2:Ca=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(b=To+300-H(),10<b)){if(U(m,o,_n,!Yt),Ne(m,0,!0)!==0)break e;qs=o,m.timeoutHandle=FM(A.bind(null,m,h,Ca,oc,Qa,o,_n,Eo,Es,Yt,T,"Throttled",-0,0),b);break e}A(m,h,Ca,oc,Qa,o,_n,Eo,Es,Yt,T,null,-0,0)}}break}while(!0);bl(s)}function A(s,o,h,m,b,T,N,X,ie,_e,Ue,Pe,Se,Be){if(s.timeoutHandle=-1,Pe=o.subtreeFlags,Pe&8192||(Pe&16785408)===16785408){Pe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Br},Ci(o,T,Pe);var bt=(T&62914560)===T?To-H():(T&4194048)===T?rc-H():0;if(bt=dD(Pe,bt),bt!==null){qs=T,s.cancelPendingCommit=bt(Gt.bind(null,s,o,T,h,m,b,N,X,ie,Ue,Pe,null,Se,Be)),U(s,T,N,!_e);return}}Gt(s,o,T,h,m,b,N,X,ie)}function R(s){for(var o=s;;){var h=o.tag;if((h===0||h===11||h===15)&&o.flags&16384&&(h=o.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var m=0;m<h.length;m++){var b=h[m],T=b.getSnapshot;b=b.value;try{if(!ni(T(),b))return!1}catch{return!1}}if(h=o.child,o.subtreeFlags&16384&&h!==null)h.return=o,o=h;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function U(s,o,h,m){o&=~fr,o&=~Eo,s.suspendedLanes|=o,s.pingedLanes&=~o,m&&(s.warmLanes|=o),m=s.expirationTimes;for(var b=o;0<b;){var T=31-$(b),N=1<<T;m[T]=-1,b&=~N}h!==0&&Wc(s,h,o)}function k(){return(xn&6)===0?(v0(0),!1):!0}function ne(){if(Zt!==null){if(Dt===0)var s=Zt.return;else s=Zt,Aa=ho=null,Jm(s),ul=null,cl=0,s=Zt;for(;s!==null;)tu(s.alternate,s),s=s.return;Zt=null}}function de(s,o){var h=s.timeoutHandle;h!==-1&&(s.timeoutHandle=-1,WB(h)),h=s.cancelPendingCommit,h!==null&&(s.cancelPendingCommit=null,h()),qs=0,ne(),In=s,Zt=h=Ur(s.current,null),hn=o,Dt=0,on=null,Yt=!1,tn=lt(s,o),Yn=!1,Es=_n=fr=Eo=Ms=zn=0,Ca=hr=null,Qa=!1,(o&8)!==0&&(o|=o&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=o;0<m;){var b=31-$(m),T=1<<b;o|=s[b],m&=~T}return Ri=o,nl(),h}function Oe(s,o){Ht=null,F.H=Rf,o===ll||o===or?(o=dd(),Dt=3):o===xf?(o=dd(),Dt=4):Dt=o===Dd?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,on=o,Zt===null&&(zn=1,Bd(s,ka(o,s.current)))}function nt(){var s=Xi.current;return s===null?!0:(hn&4194048)===hn?Hs===null:(hn&62914560)===hn||(hn&536870912)!==0?s===Hs:!1}function ct(){var s=F.H;return F.H=Rf,s===null?Rf:s}function pt(){var s=F.A;return F.A=zd,s}function Xt(){zn=4,Yt||(hn&4194048)!==hn&&Xi.current!==null||(tn=!0),(Ms&134217727)===0&&(Eo&134217727)===0||In===null||U(In,hn,_n,!1)}function $a(s,o,h){var m=xn;xn|=2;var b=ct(),T=pt();(In!==s||hn!==o)&&(oc=null,de(s,o)),o=!1;var N=zn;e:do try{if(Dt!==0&&Zt!==null){var X=Zt,ie=on;switch(Dt){case 8:ne(),N=6;break e;case 3:case 2:case 9:case 6:Xi.current===null&&(o=!0);var _e=Dt;if(Dt=0,on=null,je(s,X,ie,_e),h&&tn){N=0;break e}break;default:_e=Dt,Dt=0,on=null,je(s,X,ie,_e)}}Gf(),N=zn;break}catch(Ue){Oe(s,Ue)}while(!0);return o&&s.shellSuspendCounter++,Aa=ho=null,xn=m,F.H=b,F.A=T,Zt===null&&(In=null,hn=0,nl()),N}function Gf(){for(;Zt!==null;)fe(Zt)}function lu(s,o){var h=xn;xn|=2;var m=ct(),b=pt();In!==s||hn!==o?(oc=null,Ts=H()+500,de(s,o)):tn=lt(s,o);e:do try{if(Dt!==0&&Zt!==null){o=Zt;var T=on;t:switch(Dt){case 1:Dt=0,on=null,je(s,o,T,1);break;case 2:case 9:if(vv(T)){Dt=0,on=null,Me(o);break}o=function(){Dt!==2&&Dt!==9||In!==s||(Dt=7),bl(s)},T.then(o,o);break e;case 3:Dt=7;break e;case 4:Dt=5;break e;case 7:vv(T)?(Dt=0,on=null,Me(o)):(Dt=0,on=null,je(s,o,T,7));break;case 5:var N=null;switch(Zt.tag){case 26:N=Zt.memoizedState;case 5:case 27:var X=Zt;if(N?eE(N):X.stateNode.complete){Dt=0,on=null;var ie=X.sibling;if(ie!==null)Zt=ie;else{var _e=X.return;_e!==null?(Zt=_e,Tt(_e)):Zt=null}break t}}Dt=0,on=null,je(s,o,T,5);break;case 6:Dt=0,on=null,je(s,o,T,6);break;case 8:ne(),zn=6;break e;default:throw Error(n(462))}}be();break}catch(Ue){Oe(s,Ue)}while(!0);return Aa=ho=null,F.H=m,F.A=b,xn=h,Zt!==null?0:(In=null,hn=0,nl(),zn)}function be(){for(;Zt!==null&&!dt();)fe(Zt)}function fe(s){var o=wd(s.alternate,s,Ri);s.memoizedProps=s.pendingProps,o===null?Tt(s):Zt=o}function Me(s){var o=s,h=o.alternate;switch(o.tag){case 15:case 0:o=Ma(h,o,o.pendingProps,o.type,void 0,hn);break;case 11:o=Ma(h,o,o.pendingProps,o.type.render,o.ref,hn);break;case 5:Jm(o);default:tu(h,o),o=Zt=ba(o,Ri),o=wd(h,o,Ri)}s.memoizedProps=s.pendingProps,o===null?Tt(s):Zt=o}function je(s,o,h,m){Aa=ho=null,Jm(o),ul=null,cl=0;var b=o.return;try{if(vs(s,b,o,h,hn)){zn=1,Bd(s,ka(h,s.current)),Zt=null;return}}catch(T){if(b!==null)throw Zt=b,T;zn=1,Bd(s,ka(h,s.current)),Zt=null;return}o.flags&32768?(dn||m===1?s=!0:tn||(hn&536870912)!==0?s=!1:(Yt=s=!0,(m===2||m===9||m===3||m===6)&&(m=Xi.current,m!==null&&m.tag===13&&(m.flags|=16384))),Zn(o,s)):Tt(o)}function Tt(s){var o=s;do{if((o.flags&32768)!==0){Zn(o,Yt);return}s=o.return;var h=p0(o.alternate,o,Ri);if(h!==null){Zt=h;return}if(o=o.sibling,o!==null){Zt=o;return}Zt=o=s}while(o!==null);zn===0&&(zn=5)}function Zn(s,o){do{var h=Ud(s.alternate,s);if(h!==null){h.flags&=32767,Zt=h;return}if(h=s.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!o&&(s=s.sibling,s!==null)){Zt=s;return}Zt=s=h}while(s!==null);zn=6,Zt=null}function Gt(s,o,h,m,b,T,N,X,ie){s.cancelPendingCommit=null;do Hd();while(ci!==0);if((xn&6)!==0)throw Error(n(327));if(o!==null){if(o===s.current)throw Error(n(177));if(T=o.lanes|o.childLanes,T|=sd,Fi(s,h,T,N,X,ie),s===In&&(Zt=In=null,hn=0),Cs=o,dr=s,qs=h,Co=T,su=b,Fd=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,IB(Te,function(){return AM(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=F.T,F.T=null,b=J.p,J.p=2,N=xn,xn|=4;try{ac(s,o,h)}finally{xn=N,J.p=b,F.T=m}}ci=1,Mn(),Yi(),En()}}function Mn(){if(ci===1){ci=0;var s=dr,o=Cs,h=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||h){h=F.T,F.T=null;var m=J.p;J.p=2;var b=xn;xn|=4;try{_l(o,s);var T=_b,N=ed(s.containerInfo),X=T.focusedElem,ie=T.selectionRange;if(N!==X&&X&&X.ownerDocument&&$h(X.ownerDocument.documentElement,X)){if(ie!==null&&zu(X)){var _e=ie.start,Ue=ie.end;if(Ue===void 0&&(Ue=_e),"selectionStart"in X)X.selectionStart=_e,X.selectionEnd=Math.min(Ue,X.value.length);else{var Pe=X.ownerDocument||document,Se=Pe&&Pe.defaultView||window;if(Se.getSelection){var Be=Se.getSelection(),bt=X.textContent.length,Ft=Math.min(ie.start,bt),$n=ie.end===void 0?Ft:Math.min(ie.end,bt);!Be.extend&&Ft>$n&&(N=$n,$n=Ft,Ft=N);var he=Am(X,Ft),ae=Am(X,$n);if(he&&ae&&(Be.rangeCount!==1||Be.anchorNode!==he.node||Be.anchorOffset!==he.offset||Be.focusNode!==ae.node||Be.focusOffset!==ae.offset)){var xe=Pe.createRange();xe.setStart(he.node,he.offset),Be.removeAllRanges(),Ft>$n?(Be.addRange(xe),Be.extend(ae.node,ae.offset)):(xe.setEnd(ae.node,ae.offset),Be.addRange(xe))}}}}for(Pe=[],Be=X;Be=Be.parentNode;)Be.nodeType===1&&Pe.push({element:Be,left:Be.scrollLeft,top:Be.scrollTop});for(typeof X.focus=="function"&&X.focus(),X=0;X<Pe.length;X++){var Le=Pe[X];Le.element.scrollLeft=Le.left,Le.element.scrollTop=Le.top}}ax=!!xb,_b=xb=null}finally{xn=b,J.p=m,F.T=h}}s.current=o,ci=2}}function Yi(){if(ci===2){ci=0;var s=dr,o=Cs,h=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||h){h=F.T,F.T=null;var m=J.p;J.p=2;var b=xn;xn|=4;try{kv(s,o.alternate,o)}finally{xn=b,J.p=m,F.T=h}}ci=3}}function En(){if(ci===4||ci===3){ci=0,K();var s=dr,o=Cs,h=qs,m=Fd;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?ci=5:(ci=0,Cs=dr=null,Ro(s,s.pendingLanes));var b=s.pendingLanes;if(b===0&&(Yr=null),Xo(h),o=o.stateNode,Ge&&typeof Ge.onCommitFiberRoot=="function")try{Ge.onCommitFiberRoot(Ie,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=F.T,b=J.p,J.p=2,F.T=null;try{for(var T=s.onRecoverableError,N=0;N<m.length;N++){var X=m[N];T(X.value,{componentStack:X.stack})}}finally{F.T=o,J.p=b}}(qs&3)!==0&&Hd(),bl(s),b=s.pendingLanes,(h&261930)!==0&&(b&42)!==0?s===ou?ru++:(ru=0,ou=s):ru=0,v0(0)}}function Ro(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,ua(o)))}function Hd(){return Mn(),Yi(),En(),AM()}function AM(){if(ci!==5)return!1;var s=dr,o=Co;Co=0;var h=Xo(qs),m=F.T,b=J.p;try{J.p=32>h?32:h,F.T=null,h=su,su=null;var T=dr,N=qs;if(ci=0,Cs=dr=null,qs=0,(xn&6)!==0)throw Error(n(331));var X=xn;if(xn|=4,au(T.current),ui(T,T.current,N,h),xn=X,v0(0,!1),Ge&&typeof Ge.onPostCommitFiberRoot=="function")try{Ge.onPostCommitFiberRoot(Ie,T)}catch{}return!0}finally{J.p=b,F.T=m,Ro(s,o)}}function SM(s,o,h){o=ka(h,o),o=d0(s.stateNode,o,2),s=vo(s,o,2),s!==null&&(li(s,2),bl(s))}function Kn(s,o,h){if(s.tag===3)SM(s,s,h);else for(;o!==null;){if(o.tag===3){SM(o,s,h);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Yr===null||!Yr.has(m))){s=ka(h,s),h=$u(2),m=vo(o,h,2),m!==null&&(Ka(h,m,o,s),li(m,2),bl(m));break}}o=o.return}}function lb(s,o,h){var m=s.pingCache;if(m===null){m=s.pingCache=new Pd;var b=new Set;m.set(o,b)}else b=m.get(o),b===void 0&&(b=new Set,m.set(o,b));b.has(h)||(Yn=!0,b.add(h),s=OB.bind(null,s,o,h),o.then(s,s))}function OB(s,o,h){var m=s.pingCache;m!==null&&m.delete(o),s.pingedLanes|=s.suspendedLanes&h,s.warmLanes&=~h,In===s&&(hn&h)===h&&(zn===4||zn===3&&(hn&62914560)===hn&&300>H()-To?(xn&2)===0&&de(s,0):fr|=h,Es===hn&&(Es=0)),bl(s)}function MM(s,o){o===0&&(o=rn()),s=il(s,o),s!==null&&(li(s,o),bl(s))}function NB(s){var o=s.memoizedState,h=0;o!==null&&(h=o.retryLane),MM(s,h)}function LB(s,o){var h=0;switch(s.tag){case 31:case 13:var m=s.stateNode,b=s.memoizedState;b!==null&&(h=b.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(n(314))}m!==null&&m.delete(o),MM(s,h)}function IB(s,o){return ot(s,o)}var Jv=null,Gd=null,ub=!1,Kv=!1,cb=!1,lc=0;function bl(s){s!==Gd&&s.next===null&&(Gd===null?Jv=Gd=s:Gd=Gd.next=s),Kv=!0,ub||(ub=!0,PB())}function v0(s,o){if(!cb&&Kv){cb=!0;do for(var h=!1,m=Jv;m!==null;){if(s!==0){var b=m.pendingLanes;if(b===0)var T=0;else{var N=m.suspendedLanes,X=m.pingedLanes;T=(1<<31-$(42|s)+1)-1,T&=b&~(N&~X),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(h=!0,RM(m,T))}else T=hn,T=Ne(m,m===In?T:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(T&3)===0||lt(m,T)||(h=!0,RM(m,T));m=m.next}while(h);cb=!1}}function zB(){EM()}function EM(){Kv=ub=!1;var s=0;lc!==0&&KB()&&(s=lc);for(var o=H(),h=null,m=Jv;m!==null;){var b=m.next,T=TM(m,o);T===0?(m.next=null,h===null?Jv=b:h.next=b,b===null&&(Gd=h)):(h=m,(s!==0||(T&3)!==0)&&(Kv=!0)),m=b}ci!==0&&ci!==5||v0(s),lc!==0&&(lc=0)}function TM(s,o){for(var h=s.suspendedLanes,m=s.pingedLanes,b=s.expirationTimes,T=s.pendingLanes&-62914561;0<T;){var N=31-$(T),X=1<<N,ie=b[N];ie===-1?((X&h)===0||(X&m)!==0)&&(b[N]=Mt(X,o)):ie<=o&&(s.expiredLanes|=X),T&=~X}if(o=In,h=hn,h=Ne(s,s===o?h:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,h===0||s===o&&(Dt===2||Dt===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&it(m),s.callbackNode=null,s.callbackPriority=0;if((h&3)===0||lt(s,h)){if(o=h&-h,o===s.callbackPriority)return o;switch(m!==null&&it(m),Xo(h)){case 2:case 8:h=Fe;break;case 32:h=Te;break;case 268435456:h=at;break;default:h=Te}return m=CM.bind(null,s),h=ot(h,m),s.callbackPriority=o,s.callbackNode=h,o}return m!==null&&m!==null&&it(m),s.callbackPriority=2,s.callbackNode=null,2}function CM(s,o){if(ci!==0&&ci!==5)return s.callbackNode=null,s.callbackPriority=0,null;var h=s.callbackNode;if(Hd()&&s.callbackNode!==h)return null;var m=hn;return m=Ne(s,s===In?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(x(s,m,o),TM(s,H()),s.callbackNode!=null&&s.callbackNode===h?CM.bind(null,s):null)}function RM(s,o){if(Hd())return null;x(s,o,!0)}function PB(){jB(function(){(xn&6)!==0?ot(we,zB):EM()})}function fb(){if(lc===0){var s=go;s===0&&(s=Je,Je<<=1,(Je&261888)===0&&(Je=256)),lc=s}return lc}function BM(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Qc(""+s)}function DM(s,o){var h=o.ownerDocument.createElement("input");return h.name=o.name,h.value=o.value,s.id&&h.setAttribute("form",s.id),o.parentNode.insertBefore(h,o),s=new FormData(s),h.parentNode.removeChild(h),s}function FB(s,o,h,m,b){if(o==="submit"&&h&&h.stateNode===b){var T=BM((b[Ai]||null).action),N=m.submitter;N&&(o=(o=N[Ai]||null)?BM(o.formAction):N.getAttribute("formAction"),o!==null&&(T=o,N=null));var X=new nf("action","action",null,m,b);s.push({event:X,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(lc!==0){var ie=N?DM(b,N):new FormData(b);l0(h,{pending:!0,data:ie,method:b.method,action:T},null,ie)}}else typeof T=="function"&&(X.preventDefault(),ie=N?DM(b,N):new FormData(b),l0(h,{pending:!0,data:ie,method:b.method,action:T},T,ie))},currentTarget:b}]})}}for(var hb=0;hb<ad.length;hb++){var db=ad[hb],HB=db.toLowerCase(),GB=db[0].toUpperCase()+db.slice(1);ya(HB,"on"+GB)}ya(Xa,"onAnimationEnd"),ya(Sm,"onAnimationIteration"),ya(wr,"onAnimationStart"),ya("dblclick","onDoubleClick"),ya("focusin","onFocus"),ya("focusout","onBlur"),ya(Gu,"onTransitionRun"),ya(el,"onTransitionStart"),ya(Mm,"onTransitionCancel"),ya(id,"onTransitionEnd"),mt("onMouseEnter",["mouseout","mouseover"]),mt("onMouseLeave",["mouseout","mouseover"]),mt("onPointerEnter",["pointerout","pointerover"]),mt("onPointerLeave",["pointerout","pointerover"]),st("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),st("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),st("onBeforeInput",["compositionend","keypress","textInput","paste"]),st("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var x0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VB=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(x0));function wM(s,o){o=(o&4)!==0;for(var h=0;h<s.length;h++){var m=s[h],b=m.event;m=m.listeners;e:{var T=void 0;if(o)for(var N=m.length-1;0<=N;N--){var X=m[N],ie=X.instance,_e=X.currentTarget;if(X=X.listener,ie!==T&&b.isPropagationStopped())break e;T=X,b.currentTarget=_e;try{T(b)}catch(Ue){tl(Ue)}b.currentTarget=null,T=ie}else for(N=0;N<m.length;N++){if(X=m[N],ie=X.instance,_e=X.currentTarget,X=X.listener,ie!==T&&b.isPropagationStopped())break e;T=X,b.currentTarget=_e;try{T(b)}catch(Ue){tl(Ue)}b.currentTarget=null,T=ie}}}}function pn(s,o){var h=o[Nl];h===void 0&&(h=o[Nl]=new Set);var m=s+"__bubble";h.has(m)||(UM(o,s,2,!1),h.add(m))}function pb(s,o,h){var m=0;o&&(m|=4),UM(h,s,m,o)}var Wv="_reactListening"+Math.random().toString(36).slice(2);function mb(s){if(!s[Wv]){s[Wv]=!0,ce.forEach(function(h){h!=="selectionchange"&&(VB.has(h)||pb(h,!1,s),pb(h,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Wv]||(o[Wv]=!0,pb("selectionchange",!1,o))}}function UM(s,o,h,m){switch(oE(o)){case 2:var b=gD;break;case 8:b=vD;break;default:b=Db}h=b.bind(null,o,h,s),b=void 0,!Xh||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(b=!0),m?b!==void 0?s.addEventListener(o,h,{capture:!0,passive:b}):s.addEventListener(o,h,!0):b!==void 0?s.addEventListener(o,h,{passive:b}):s.addEventListener(o,h,!1)}function gb(s,o,h,m,b){var T=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var N=m.tag;if(N===3||N===4){var X=m.stateNode.containerInfo;if(X===b)break;if(N===4)for(N=m.return;N!==null;){var ie=N.tag;if((ie===3||ie===4)&&N.stateNode.containerInfo===b)return;N=N.return}for(;X!==null;){if(N=Si(X),N===null)return;if(ie=N.tag,ie===5||ie===6||ie===26||ie===27){m=T=N;continue e}X=X.parentNode}}m=m.return}sm(function(){var _e=T,Ue=Gh(h),Pe=[];e:{var Se=lo.get(s);if(Se!==void 0){var Be=nf,bt=s;switch(s){case"keypress":if(Pl(h)===0)break e;case"keydown":case"keyup":Be=hm;break;case"focusin":bt="focus",Be=Kh;break;case"focusout":bt="blur",Be=Kh;break;case"beforeblur":case"afterblur":Be=Kh;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Be=Kg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Be=Wg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Be=ro;break;case Xa:case Sm:case wr:Be=Qg;break;case id:Be=eb;break;case"scroll":case"scrollend":Be=qh;break;case"wheel":Be=Ko;break;case"copy":case"cut":case"paste":Be=om;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Be=Wh;break;case"toggle":case"beforetoggle":Be=pm}var Ft=(o&4)!==0,$n=!Ft&&(s==="scroll"||s==="scrollend"),he=Ft?Se!==null?Se+"Capture":null:Se;Ft=[];for(var ae=_e,xe;ae!==null;){var Le=ae;if(xe=Le.stateNode,Le=Le.tag,Le!==5&&Le!==26&&Le!==27||xe===null||he===null||(Le=zl(ae,he),Le!=null&&Ft.push(_0(ae,Le,xe))),$n)break;ae=ae.return}0<Ft.length&&(Se=new Be(Se,bt,null,h,Ue),Pe.push({event:Se,listeners:Ft}))}}if((o&7)===0){e:{if(Se=s==="mouseover"||s==="pointerover",Be=s==="mouseout"||s==="pointerout",Se&&h!==$c&&(bt=h.relatedTarget||h.fromElement)&&(Si(bt)||bt[tr]))break e;if((Be||Se)&&(Se=Ue.window===Ue?Ue:(Se=Ue.ownerDocument)?Se.defaultView||Se.parentWindow:window,Be?(bt=h.relatedTarget||h.toElement,Be=_e,bt=bt?Si(bt):null,bt!==null&&($n=r(bt),Ft=bt.tag,bt!==$n||Ft!==5&&Ft!==27&&Ft!==6)&&(bt=null)):(Be=null,bt=_e),Be!==bt)){if(Ft=Kg,Le="onMouseLeave",he="onMouseEnter",ae="mouse",(s==="pointerout"||s==="pointerover")&&(Ft=Wh,Le="onPointerLeave",he="onPointerEnter",ae="pointer"),$n=Be==null?Se:ue(Be),xe=bt==null?Se:ue(bt),Se=new Ft(Le,ae+"leave",Be,h,Ue),Se.target=$n,Se.relatedTarget=xe,Le=null,Si(Ue)===_e&&(Ft=new Ft(he,ae+"enter",bt,h,Ue),Ft.target=xe,Ft.relatedTarget=$n,Le=Ft),$n=Le,Be&&bt)t:{for(Ft=XB,he=Be,ae=bt,xe=0,Le=he;Le;Le=Ft(Le))xe++;Le=0;for(var Ot=ae;Ot;Ot=Ft(Ot))Le++;for(;0<xe-Le;)he=Ft(he),xe--;for(;0<Le-xe;)ae=Ft(ae),Le--;for(;xe--;){if(he===ae||ae!==null&&he===ae.alternate){Ft=he;break t}he=Ft(he),ae=Ft(ae)}Ft=null}else Ft=null;Be!==null&&OM(Pe,Se,Be,Ft,!1),bt!==null&&$n!==null&&OM(Pe,$n,bt,Ft,!0)}}e:{if(Se=_e?ue(_e):window,Be=Se.nodeName&&Se.nodeName.toLowerCase(),Be==="select"||Be==="input"&&Se.type==="file")var Pn=_m;else if(vm(Se))if(uf)Pn=uv;else{Pn=Zo;var Et=cf}else Be=Se.nodeName,!Be||Be.toLowerCase()!=="input"||Se.type!=="checkbox"&&Se.type!=="radio"?_e&&Zc(_e.elementType)&&(Pn=_m):Pn=lv;if(Pn&&(Pn=Pn(s,_e))){Qh(Pe,Pn,h,Ue);break e}Et&&Et(s,Se,_e),s==="focusout"&&_e&&Se.type==="number"&&_e.memoizedProps.value!=null&&Hi(Se,"number",Se.value)}switch(Et=_e?ue(_e):window,s){case"focusin":(vm(Et)||Et.contentEditable==="true")&&(Pu=Et,td=_e,Fu=null);break;case"focusout":Fu=td=Pu=null;break;case"mousedown":hs=!0;break;case"contextmenu":case"mouseup":case"dragend":hs=!1,nd(Pe,h,Ue);break;case"selectionchange":if(cv)break;case"keydown":case"keyup":nd(Pe,h,Ue)}var nn;if(Fl)e:{switch(s){case"compositionstart":var yn="onCompositionStart";break e;case"compositionend":yn="onCompositionEnd";break e;case"compositionupdate":yn="onCompositionUpdate";break e}yn=void 0}else jo?jh(s,h)&&(yn="onCompositionEnd"):s==="keydown"&&h.keyCode===229&&(yn="onCompositionStart");yn&&(la&&h.locale!=="ko"&&(jo||yn!=="onCompositionStart"?yn==="onCompositionEnd"&&jo&&(nn=Yh()):(Yo=Ue,kh="value"in Yo?Yo.value:Yo.textContent,jo=!0)),Et=jv(_e,yn),0<Et.length&&(yn=new lm(yn,s,null,h,Ue),Pe.push({event:yn,listeners:Et}),nn?yn.data=nn:(nn=Uu(h),nn!==null&&(yn.data=nn)))),(nn=Hl?Zh(s,h):sv(s,h))&&(yn=jv(_e,"onBeforeInput"),0<yn.length&&(Et=new lm("onBeforeInput","beforeinput",null,h,Ue),Pe.push({event:Et,listeners:yn}),Et.data=nn)),FB(Pe,s,_e,h,Ue)}wM(Pe,o)})}function _0(s,o,h){return{instance:s,listener:o,currentTarget:h}}function jv(s,o){for(var h=o+"Capture",m=[];s!==null;){var b=s,T=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||T===null||(b=zl(s,h),b!=null&&m.unshift(_0(s,b,T)),b=zl(s,o),b!=null&&m.push(_0(s,b,T))),s.tag===3)return m;s=s.return}return[]}function XB(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function OM(s,o,h,m,b){for(var T=o._reactName,N=[];h!==null&&h!==m;){var X=h,ie=X.alternate,_e=X.stateNode;if(X=X.tag,ie!==null&&ie===m)break;X!==5&&X!==26&&X!==27||_e===null||(ie=_e,b?(_e=zl(h,T),_e!=null&&N.unshift(_0(h,_e,ie))):b||(_e=zl(h,T),_e!=null&&N.push(_0(h,_e,ie)))),h=h.return}N.length!==0&&s.push({event:o,listeners:N})}var kB=/\r\n?/g,YB=/\u0000|\uFFFD/g;function NM(s){return(typeof s=="string"?s:""+s).replace(kB,`
`).replace(YB,"")}function LM(s,o){return o=NM(o),NM(s)===o}function Qn(s,o,h,m,b,T){switch(h){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||nr(s,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&nr(s,""+m);break;case"className":gn(s,"class",m);break;case"tabIndex":gn(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":gn(s,h,m);break;case"style":im(s,m,T);break;case"data":if(o!=="object"){gn(s,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||h!=="href")){s.removeAttribute(h);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(h);break}m=Qc(""+m),s.setAttribute(h,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(h==="formAction"?(o!=="input"&&Qn(s,o,"name",b.name,b,null),Qn(s,o,"formEncType",b.formEncType,b,null),Qn(s,o,"formMethod",b.formMethod,b,null),Qn(s,o,"formTarget",b.formTarget,b,null)):(Qn(s,o,"encType",b.encType,b,null),Qn(s,o,"method",b.method,b,null),Qn(s,o,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(h);break}m=Qc(""+m),s.setAttribute(h,m);break;case"onClick":m!=null&&(s.onclick=Br);break;case"onScroll":m!=null&&pn("scroll",s);break;case"onScrollEnd":m!=null&&pn("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(h=m.__html,h!=null){if(b.children!=null)throw Error(n(60));s.innerHTML=h}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}h=Qc(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,""+m):s.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,""):s.removeAttribute(h);break;case"capture":case"download":m===!0?s.setAttribute(h,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(h,m):s.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(h,m):s.removeAttribute(h);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(h):s.setAttribute(h,m);break;case"popover":pn("beforetoggle",s),pn("toggle",s),Jt(s,"popover",m);break;case"xlinkActuate":vn(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":vn(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":vn(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":vn(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":vn(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":vn(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":vn(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":vn(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":vn(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Jt(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=qg.get(h)||h,Jt(s,h,m))}}function vb(s,o,h,m,b,T){switch(h){case"style":im(s,m,T);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(n(61));if(h=m.__html,h!=null){if(b.children!=null)throw Error(n(60));s.innerHTML=h}}break;case"children":typeof m=="string"?nr(s,m):(typeof m=="number"||typeof m=="bigint")&&nr(s,""+m);break;case"onScroll":m!=null&&pn("scroll",s);break;case"onScrollEnd":m!=null&&pn("scrollend",s);break;case"onClick":m!=null&&(s.onclick=Br);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!tt.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(b=h.endsWith("Capture"),o=h.slice(2,b?h.length-7:void 0),T=s[Ai]||null,T=T!=null?T[h]:null,typeof T=="function"&&s.removeEventListener(o,T,b),typeof m=="function")){typeof T!="function"&&T!==null&&(h in s?s[h]=null:s.hasAttribute(h)&&s.removeAttribute(h)),s.addEventListener(o,m,b);break e}h in s?s[h]=m:m===!0?s.setAttribute(h,""):Jt(s,h,m)}}}function Ha(s,o,h){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pn("error",s),pn("load",s);var m=!1,b=!1,T;for(T in h)if(h.hasOwnProperty(T)){var N=h[T];if(N!=null)switch(T){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Qn(s,o,T,N,h,null)}}b&&Qn(s,o,"srcSet",h.srcSet,h,null),m&&Qn(s,o,"src",h.src,h,null);return;case"input":pn("invalid",s);var X=T=N=b=null,ie=null,_e=null;for(m in h)if(h.hasOwnProperty(m)){var Ue=h[m];if(Ue!=null)switch(m){case"name":b=Ue;break;case"type":N=Ue;break;case"checked":ie=Ue;break;case"defaultChecked":_e=Ue;break;case"value":T=Ue;break;case"defaultValue":X=Ue;break;case"children":case"dangerouslySetInnerHTML":if(Ue!=null)throw Error(n(137,o));break;default:Qn(s,o,m,Ue,h,null)}}Jn(s,T,X,ie,_e,N,b,!1);return;case"select":pn("invalid",s),m=N=T=null;for(b in h)if(h.hasOwnProperty(b)&&(X=h[b],X!=null))switch(b){case"value":T=X;break;case"defaultValue":N=X;break;case"multiple":m=X;default:Qn(s,o,b,X,h,null)}o=T,h=N,s.multiple=!!m,o!=null?Gi(s,!!m,o,!1):h!=null&&Gi(s,!!m,h,!0);return;case"textarea":pn("invalid",s),T=b=m=null;for(N in h)if(h.hasOwnProperty(N)&&(X=h[N],X!=null))switch(N){case"value":m=X;break;case"defaultValue":b=X;break;case"children":T=X;break;case"dangerouslySetInnerHTML":if(X!=null)throw Error(n(91));break;default:Qn(s,o,N,X,h,null)}fi(s,m,b,T);return;case"option":for(ie in h)if(h.hasOwnProperty(ie)&&(m=h[ie],m!=null))switch(ie){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Qn(s,o,ie,m,h,null)}return;case"dialog":pn("beforetoggle",s),pn("toggle",s),pn("cancel",s),pn("close",s);break;case"iframe":case"object":pn("load",s);break;case"video":case"audio":for(m=0;m<x0.length;m++)pn(x0[m],s);break;case"image":pn("error",s),pn("load",s);break;case"details":pn("toggle",s);break;case"embed":case"source":case"link":pn("error",s),pn("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_e in h)if(h.hasOwnProperty(_e)&&(m=h[_e],m!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Qn(s,o,_e,m,h,null)}return;default:if(Zc(o)){for(Ue in h)h.hasOwnProperty(Ue)&&(m=h[Ue],m!==void 0&&vb(s,o,Ue,m,h,void 0));return}}for(X in h)h.hasOwnProperty(X)&&(m=h[X],m!=null&&Qn(s,o,X,m,h,null))}function qB(s,o,h,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,T=null,N=null,X=null,ie=null,_e=null,Ue=null;for(Be in h){var Pe=h[Be];if(h.hasOwnProperty(Be)&&Pe!=null)switch(Be){case"checked":break;case"value":break;case"defaultValue":ie=Pe;default:m.hasOwnProperty(Be)||Qn(s,o,Be,null,m,Pe)}}for(var Se in m){var Be=m[Se];if(Pe=h[Se],m.hasOwnProperty(Se)&&(Be!=null||Pe!=null))switch(Se){case"type":T=Be;break;case"name":b=Be;break;case"checked":_e=Be;break;case"defaultChecked":Ue=Be;break;case"value":N=Be;break;case"defaultValue":X=Be;break;case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(n(137,o));break;default:Be!==Pe&&Qn(s,o,Se,Be,m,Pe)}}Rr(s,N,X,ie,_e,Ue,T,b);return;case"select":Be=N=X=Se=null;for(T in h)if(ie=h[T],h.hasOwnProperty(T)&&ie!=null)switch(T){case"value":break;case"multiple":Be=ie;default:m.hasOwnProperty(T)||Qn(s,o,T,null,m,ie)}for(b in m)if(T=m[b],ie=h[b],m.hasOwnProperty(b)&&(T!=null||ie!=null))switch(b){case"value":Se=T;break;case"defaultValue":X=T;break;case"multiple":N=T;default:T!==ie&&Qn(s,o,b,T,m,ie)}o=X,h=N,m=Be,Se!=null?Gi(s,!!h,Se,!1):!!m!=!!h&&(o!=null?Gi(s,!!h,o,!0):Gi(s,!!h,h?[]:"",!1));return;case"textarea":Be=Se=null;for(X in h)if(b=h[X],h.hasOwnProperty(X)&&b!=null&&!m.hasOwnProperty(X))switch(X){case"value":break;case"children":break;default:Qn(s,o,X,null,m,b)}for(N in m)if(b=m[N],T=h[N],m.hasOwnProperty(N)&&(b!=null||T!=null))switch(N){case"value":Se=b;break;case"defaultValue":Be=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(n(91));break;default:b!==T&&Qn(s,o,N,b,m,T)}Vi(s,Se,Be);return;case"option":for(var bt in h)if(Se=h[bt],h.hasOwnProperty(bt)&&Se!=null&&!m.hasOwnProperty(bt))switch(bt){case"selected":s.selected=!1;break;default:Qn(s,o,bt,null,m,Se)}for(ie in m)if(Se=m[ie],Be=h[ie],m.hasOwnProperty(ie)&&Se!==Be&&(Se!=null||Be!=null))switch(ie){case"selected":s.selected=Se&&typeof Se!="function"&&typeof Se!="symbol";break;default:Qn(s,o,ie,Se,m,Be)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ft in h)Se=h[Ft],h.hasOwnProperty(Ft)&&Se!=null&&!m.hasOwnProperty(Ft)&&Qn(s,o,Ft,null,m,Se);for(_e in m)if(Se=m[_e],Be=h[_e],m.hasOwnProperty(_e)&&Se!==Be&&(Se!=null||Be!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(n(137,o));break;default:Qn(s,o,_e,Se,m,Be)}return;default:if(Zc(o)){for(var $n in h)Se=h[$n],h.hasOwnProperty($n)&&Se!==void 0&&!m.hasOwnProperty($n)&&vb(s,o,$n,void 0,m,Se);for(Ue in m)Se=m[Ue],Be=h[Ue],!m.hasOwnProperty(Ue)||Se===Be||Se===void 0&&Be===void 0||vb(s,o,Ue,Se,m,Be);return}}for(var he in h)Se=h[he],h.hasOwnProperty(he)&&Se!=null&&!m.hasOwnProperty(he)&&Qn(s,o,he,null,m,Se);for(Pe in m)Se=m[Pe],Be=h[Pe],!m.hasOwnProperty(Pe)||Se===Be||Se==null&&Be==null||Qn(s,o,Pe,Se,m,Be)}function IM(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function JB(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,h=performance.getEntriesByType("resource"),m=0;m<h.length;m++){var b=h[m],T=b.transferSize,N=b.initiatorType,X=b.duration;if(T&&X&&IM(N)){for(N=0,X=b.responseEnd,m+=1;m<h.length;m++){var ie=h[m],_e=ie.startTime;if(_e>X)break;var Ue=ie.transferSize,Pe=ie.initiatorType;Ue&&IM(Pe)&&(ie=ie.responseEnd,N+=Ue*(ie<X?1:(X-_e)/(ie-_e)))}if(--m,o+=8*(T+N)/(b.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var xb=null,_b=null;function Zv(s){return s.nodeType===9?s:s.ownerDocument}function zM(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function PM(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function yb(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var bb=null;function KB(){var s=window.event;return s&&s.type==="popstate"?s===bb?!1:(bb=s,!0):(bb=null,!1)}var FM=typeof setTimeout=="function"?setTimeout:void 0,WB=typeof clearTimeout=="function"?clearTimeout:void 0,HM=typeof Promise=="function"?Promise:void 0,jB=typeof queueMicrotask=="function"?queueMicrotask:typeof HM<"u"?function(s){return HM.resolve(null).then(s).catch(ZB)}:FM;function ZB(s){setTimeout(function(){throw s})}function uc(s){return s==="head"}function GM(s,o){var h=o,m=0;do{var b=h.nextSibling;if(s.removeChild(h),b&&b.nodeType===8)if(h=b.data,h==="/$"||h==="/&"){if(m===0){s.removeChild(b),Yd(o);return}m--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")m++;else if(h==="html")y0(s.ownerDocument.documentElement);else if(h==="head"){h=s.ownerDocument.head,y0(h);for(var T=h.firstChild;T;){var N=T.nextSibling,X=T.nodeName;T[ao]||X==="SCRIPT"||X==="STYLE"||X==="LINK"&&T.rel.toLowerCase()==="stylesheet"||h.removeChild(T),T=N}}else h==="body"&&y0(s.ownerDocument.body);h=b}while(h);Yd(o)}function VM(s,o){var h=s;s=0;do{var m=h.nextSibling;if(h.nodeType===1?o?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(o?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),m&&m.nodeType===8)if(h=m.data,h==="/$"){if(s===0)break;s--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||s++;h=m}while(h)}function Ab(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var h=o;switch(o=o.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Ab(h),Ll(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}s.removeChild(h)}}function QB(s,o,h,m){for(;s.nodeType===1;){var b=h;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[ao])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(T=s.getAttribute("rel"),T==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(T!==b.rel||s.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||s.getAttribute("title")!==(b.title==null?null:b.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(T=s.getAttribute("src"),(T!==(b.src==null?null:b.src)||s.getAttribute("type")!==(b.type==null?null:b.type)||s.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&T&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var T=b.name==null?null:""+b.name;if(b.type==="hidden"&&s.getAttribute("name")===T)return s}else return s;if(s=qr(s.nextSibling),s===null)break}return null}function $B(s,o,h){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!h||(s=qr(s.nextSibling),s===null))return null;return s}function XM(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=qr(s.nextSibling),s===null))return null;return s}function Sb(s){return s.data==="$?"||s.data==="$~"}function Mb(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function eD(s,o){var h=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||h.readyState!=="loading")o();else{var m=function(){o(),h.removeEventListener("DOMContentLoaded",m)};h.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function qr(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var Eb=null;function kM(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var h=s.data;if(h==="/$"||h==="/&"){if(o===0)return qr(s.nextSibling);o--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||o++}s=s.nextSibling}return null}function YM(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var h=s.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(o===0)return s;o--}else h!=="/$"&&h!=="/&"||o++}s=s.previousSibling}return null}function qM(s,o,h){switch(o=Zv(h),s){case"html":if(s=o.documentElement,!s)throw Error(n(452));return s;case"head":if(s=o.head,!s)throw Error(n(453));return s;case"body":if(s=o.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function y0(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Ll(s)}var Jr=new Map,JM=new Set;function Qv(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var uu=J.d;J.d={f:tD,r:nD,D:iD,C:aD,L:sD,m:rD,X:lD,S:oD,M:uD};function tD(){var s=uu.f(),o=k();return s||o}function nD(s){var o=V(s);o!==null&&o.tag===5&&o.type==="form"?u0(o):uu.r(s)}var Vd=typeof document>"u"?null:document;function KM(s,o,h){var m=Vd;if(m&&typeof o=="string"&&o){var b=qn(o);b='link[rel="'+s+'"][href="'+b+'"]',typeof h=="string"&&(b+='[crossorigin="'+h+'"]'),JM.has(b)||(JM.add(b),s={rel:s,crossOrigin:h,href:o},m.querySelector(b)===null&&(o=m.createElement("link"),Ha(o,"link",s),ve(o),m.head.appendChild(o)))}}function iD(s){uu.D(s),KM("dns-prefetch",s,null)}function aD(s,o){uu.C(s,o),KM("preconnect",s,o)}function sD(s,o,h){uu.L(s,o,h);var m=Vd;if(m&&s&&o){var b='link[rel="preload"][as="'+qn(o)+'"]';o==="image"&&h&&h.imageSrcSet?(b+='[imagesrcset="'+qn(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(b+='[imagesizes="'+qn(h.imageSizes)+'"]')):b+='[href="'+qn(s)+'"]';var T=b;switch(o){case"style":T=Xd(s);break;case"script":T=kd(s)}Jr.has(T)||(s=v({rel:"preload",href:o==="image"&&h&&h.imageSrcSet?void 0:s,as:o},h),Jr.set(T,s),m.querySelector(b)!==null||o==="style"&&m.querySelector(b0(T))||o==="script"&&m.querySelector(A0(T))||(o=m.createElement("link"),Ha(o,"link",s),ve(o),m.head.appendChild(o)))}}function rD(s,o){uu.m(s,o);var h=Vd;if(h&&s){var m=o&&typeof o.as=="string"?o.as:"script",b='link[rel="modulepreload"][as="'+qn(m)+'"][href="'+qn(s)+'"]',T=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=kd(s)}if(!Jr.has(T)&&(s=v({rel:"modulepreload",href:s},o),Jr.set(T,s),h.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(A0(T)))return}m=h.createElement("link"),Ha(m,"link",s),ve(m),h.head.appendChild(m)}}}function oD(s,o,h){uu.S(s,o,h);var m=Vd;if(m&&s){var b=Ae(m).hoistableStyles,T=Xd(s);o=o||"default";var N=b.get(T);if(!N){var X={loading:0,preload:null};if(N=m.querySelector(b0(T)))X.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":o},h),(h=Jr.get(T))&&Tb(s,h);var ie=N=m.createElement("link");ve(ie),Ha(ie,"link",s),ie._p=new Promise(function(_e,Ue){ie.onload=_e,ie.onerror=Ue}),ie.addEventListener("load",function(){X.loading|=1}),ie.addEventListener("error",function(){X.loading|=2}),X.loading|=4,$v(N,o,m)}N={type:"stylesheet",instance:N,count:1,state:X},b.set(T,N)}}}function lD(s,o){uu.X(s,o);var h=Vd;if(h&&s){var m=Ae(h).hoistableScripts,b=kd(s),T=m.get(b);T||(T=h.querySelector(A0(b)),T||(s=v({src:s,async:!0},o),(o=Jr.get(b))&&Cb(s,o),T=h.createElement("script"),ve(T),Ha(T,"link",s),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(b,T))}}function uD(s,o){uu.M(s,o);var h=Vd;if(h&&s){var m=Ae(h).hoistableScripts,b=kd(s),T=m.get(b);T||(T=h.querySelector(A0(b)),T||(s=v({src:s,async:!0,type:"module"},o),(o=Jr.get(b))&&Cb(s,o),T=h.createElement("script"),ve(T),Ha(T,"link",s),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},m.set(b,T))}}function WM(s,o,h,m){var b=(b=ge.current)?Qv(b):null;if(!b)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(o=Xd(h.href),h=Ae(b).hoistableStyles,m=h.get(o),m||(m={type:"style",instance:null,count:0,state:null},h.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){s=Xd(h.href);var T=Ae(b).hoistableStyles,N=T.get(s);if(N||(b=b.ownerDocument||b,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(s,N),(T=b.querySelector(b0(s)))&&!T._p&&(N.instance=T,N.state.loading=5),Jr.has(s)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},Jr.set(s,h),T||cD(b,s,h,N.state))),o&&m===null)throw Error(n(528,""));return N}if(o&&m!==null)throw Error(n(529,""));return null;case"script":return o=h.async,h=h.src,typeof h=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=kd(h),h=Ae(b).hoistableScripts,m=h.get(o),m||(m={type:"script",instance:null,count:0,state:null},h.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function Xd(s){return'href="'+qn(s)+'"'}function b0(s){return'link[rel="stylesheet"]['+s+"]"}function jM(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function cD(s,o,h,m){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=s.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),Ha(o,"link",h),ve(o),s.head.appendChild(o))}function kd(s){return'[src="'+qn(s)+'"]'}function A0(s){return"script[async]"+s}function ZM(s,o,h){if(o.count++,o.instance===null)switch(o.type){case"style":var m=s.querySelector('style[data-href~="'+qn(h.href)+'"]');if(m)return o.instance=m,ve(m),m;var b=v({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),ve(m),Ha(m,"style",b),$v(m,h.precedence,s),o.instance=m;case"stylesheet":b=Xd(h.href);var T=s.querySelector(b0(b));if(T)return o.state.loading|=4,o.instance=T,ve(T),T;m=jM(h),(b=Jr.get(b))&&Tb(m,b),T=(s.ownerDocument||s).createElement("link"),ve(T);var N=T;return N._p=new Promise(function(X,ie){N.onload=X,N.onerror=ie}),Ha(T,"link",m),o.state.loading|=4,$v(T,h.precedence,s),o.instance=T;case"script":return T=kd(h.src),(b=s.querySelector(A0(T)))?(o.instance=b,ve(b),b):(m=h,(b=Jr.get(T))&&(m=v({},h),Cb(m,b)),s=s.ownerDocument||s,b=s.createElement("script"),ve(b),Ha(b,"link",m),s.head.appendChild(b),o.instance=b);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,$v(m,h.precedence,s));return o.instance}function $v(s,o,h){for(var m=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,T=b,N=0;N<m.length;N++){var X=m[N];if(X.dataset.precedence===o)T=X;else if(T!==b)break}T?T.parentNode.insertBefore(s,T.nextSibling):(o=h.nodeType===9?h.head:h,o.insertBefore(s,o.firstChild))}function Tb(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function Cb(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var ex=null;function QM(s,o,h){if(ex===null){var m=new Map,b=ex=new Map;b.set(h,m)}else b=ex,m=b.get(h),m||(m=new Map,b.set(h,m));if(m.has(s))return m;for(m.set(s,null),h=h.getElementsByTagName(s),b=0;b<h.length;b++){var T=h[b];if(!(T[ao]||T[$t]||s==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var N=T.getAttribute(o)||"";N=s+N;var X=m.get(N);X?X.push(T):m.set(N,[T])}}return m}function $M(s,o,h){s=s.ownerDocument||s,s.head.insertBefore(h,o==="title"?s.querySelector("head > title"):null)}function fD(s,o,h){if(h===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function eE(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function hD(s,o,h,m){if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var b=Xd(m.href),T=o.querySelector(b0(b));if(T){o=T._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=tx.bind(s),o.then(s,s)),h.state.loading|=4,h.instance=T,ve(T);return}T=o.ownerDocument||o,m=jM(m),(b=Jr.get(b))&&Tb(m,b),T=T.createElement("link"),ve(T);var N=T;N._p=new Promise(function(X,ie){N.onload=X,N.onerror=ie}),Ha(T,"link",m),h.instance=T}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(h,o),(o=h.state.preload)&&(h.state.loading&3)===0&&(s.count++,h=tx.bind(s),o.addEventListener("load",h),o.addEventListener("error",h))}}var Rb=0;function dD(s,o){return s.stylesheets&&s.count===0&&ix(s,s.stylesheets),0<s.count||0<s.imgCount?function(h){var m=setTimeout(function(){if(s.stylesheets&&ix(s,s.stylesheets),s.unsuspend){var T=s.unsuspend;s.unsuspend=null,T()}},6e4+o);0<s.imgBytes&&Rb===0&&(Rb=62500*JB());var b=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&ix(s,s.stylesheets),s.unsuspend)){var T=s.unsuspend;s.unsuspend=null,T()}},(s.imgBytes>Rb?50:800)+o);return s.unsuspend=h,function(){s.unsuspend=null,clearTimeout(m),clearTimeout(b)}}:null}function tx(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ix(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var nx=null;function ix(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,nx=new Map,o.forEach(pD,s),nx=null,tx.call(s))}function pD(s,o){if(!(o.state.loading&4)){var h=nx.get(s);if(h)var m=h.get(null);else{h=new Map,nx.set(s,h);for(var b=s.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<b.length;T++){var N=b[T];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(h.set(N.dataset.precedence,N),m=N)}m&&h.set(null,m)}b=o.instance,N=b.getAttribute("data-precedence"),T=h.get(N)||m,T===m&&h.set(null,b),h.set(N,b),this.count++,m=tx.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),T?T.parentNode.insertBefore(b,T.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(b,s.firstChild)),o.state.loading|=4}}var S0={$$typeof:D,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function mD(s,o,h,m,b,T,N,X,ie){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wt(0),this.hiddenUpdates=Wt(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=T,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ie,this.incompleteTransitions=new Map}function tE(s,o,h,m,b,T,N,X,ie,_e,Ue,Pe){return s=new mD(s,o,h,N,ie,_e,Ue,Pe,X),o=1,T===!0&&(o|=24),T=Na(3,null,null,o),s.current=T,T.stateNode=s,o=wm(),o.refCount++,s.pooledCache=o,o.refCount++,T.memoizedState={element:m,isDehydrated:h,cache:o},zm(T),s}function nE(s){return s?(s=al,s):al}function iE(s,o,h,m,b,T){b=nE(b),m.context===null?m.context=b:m.pendingContext=b,m=zr(o),m.payload={element:h},T=T===void 0?null:T,T!==null&&(m.callback=T),h=vo(s,m,o),h!==null&&(f(h,s,o),hl(h,s,o))}function aE(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var h=s.retryLane;s.retryLane=h!==0&&h<o?h:o}}function Bb(s,o){aE(s,o),(s=s.alternate)&&aE(s,o)}function sE(s){if(s.tag===13||s.tag===31){var o=il(s,67108864);o!==null&&f(o,s,67108864),Bb(s,67108864)}}function rE(s){if(s.tag===13||s.tag===31){var o=Fa();o=Zi(o);var h=il(s,o);h!==null&&f(h,s,o),Bb(s,o)}}var ax=!0;function gD(s,o,h,m){var b=F.T;F.T=null;var T=J.p;try{J.p=2,Db(s,o,h,m)}finally{J.p=T,F.T=b}}function vD(s,o,h,m){var b=F.T;F.T=null;var T=J.p;try{J.p=8,Db(s,o,h,m)}finally{J.p=T,F.T=b}}function Db(s,o,h,m){if(ax){var b=wb(m);if(b===null)gb(s,o,m,sx,h),lE(s,m);else if(_D(b,s,o,h,m))m.stopPropagation();else if(lE(s,m),o&4&&-1<xD.indexOf(s)){for(;b!==null;){var T=V(b);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var N=Xe(T.pendingLanes);if(N!==0){var X=T;for(X.pendingLanes|=2,X.entangledLanes|=2;N;){var ie=1<<31-$(N);X.entanglements[1]|=ie,N&=~ie}bl(T),(xn&6)===0&&(Ts=H()+500,v0(0))}}break;case 31:case 13:X=il(T,2),X!==null&&f(X,T,2),k(),Bb(T,2)}if(T=wb(m),T===null&&gb(s,o,m,sx,h),T===b)break;b=T}b!==null&&m.stopPropagation()}else gb(s,o,m,null,h)}}function wb(s){return s=Gh(s),Ub(s)}var sx=null;function Ub(s){if(sx=null,s=Si(s),s!==null){var o=r(s);if(o===null)s=null;else{var h=o.tag;if(h===13){if(s=l(o),s!==null)return s;s=null}else if(h===31){if(s=c(o),s!==null)return s;s=null}else if(h===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return sx=s,null}function oE(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(me()){case we:return 2;case Fe:return 8;case Te:case yt:return 32;case at:return 268435456;default:return 32}default:return 32}}var Ob=!1,cc=null,fc=null,hc=null,M0=new Map,E0=new Map,dc=[],xD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function lE(s,o){switch(s){case"focusin":case"focusout":cc=null;break;case"dragenter":case"dragleave":fc=null;break;case"mouseover":case"mouseout":hc=null;break;case"pointerover":case"pointerout":M0.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":E0.delete(o.pointerId)}}function T0(s,o,h,m,b,T){return s===null||s.nativeEvent!==T?(s={blockedOn:o,domEventName:h,eventSystemFlags:m,nativeEvent:T,targetContainers:[b]},o!==null&&(o=V(o),o!==null&&sE(o)),s):(s.eventSystemFlags|=m,o=s.targetContainers,b!==null&&o.indexOf(b)===-1&&o.push(b),s)}function _D(s,o,h,m,b){switch(o){case"focusin":return cc=T0(cc,s,o,h,m,b),!0;case"dragenter":return fc=T0(fc,s,o,h,m,b),!0;case"mouseover":return hc=T0(hc,s,o,h,m,b),!0;case"pointerover":var T=b.pointerId;return M0.set(T,T0(M0.get(T)||null,s,o,h,m,b)),!0;case"gotpointercapture":return T=b.pointerId,E0.set(T,T0(E0.get(T)||null,s,o,h,m,b)),!0}return!1}function uE(s){var o=Si(s.target);if(o!==null){var h=r(o);if(h!==null){if(o=h.tag,o===13){if(o=l(h),o!==null){s.blockedOn=o,cs(s.priority,function(){rE(h)});return}}else if(o===31){if(o=c(h),o!==null){s.blockedOn=o,cs(s.priority,function(){rE(h)});return}}else if(o===3&&h.stateNode.current.memoizedState.isDehydrated){s.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}s.blockedOn=null}function rx(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var h=wb(s.nativeEvent);if(h===null){h=s.nativeEvent;var m=new h.constructor(h.type,h);$c=m,h.target.dispatchEvent(m),$c=null}else return o=V(h),o!==null&&sE(o),s.blockedOn=h,!1;o.shift()}return!0}function cE(s,o,h){rx(s)&&h.delete(o)}function yD(){Ob=!1,cc!==null&&rx(cc)&&(cc=null),fc!==null&&rx(fc)&&(fc=null),hc!==null&&rx(hc)&&(hc=null),M0.forEach(cE),E0.forEach(cE)}function ox(s,o){s.blockedOn===o&&(s.blockedOn=null,Ob||(Ob=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,yD)))}var lx=null;function fE(s){lx!==s&&(lx=s,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){lx===s&&(lx=null);for(var o=0;o<s.length;o+=3){var h=s[o],m=s[o+1],b=s[o+2];if(typeof m!="function"){if(Ub(m||h)===null)continue;break}var T=V(h);T!==null&&(s.splice(o,3),o-=3,l0(T,{pending:!0,data:b,method:h.method,action:m},m,b))}}))}function Yd(s){function o(ie){return ox(ie,s)}cc!==null&&ox(cc,s),fc!==null&&ox(fc,s),hc!==null&&ox(hc,s),M0.forEach(o),E0.forEach(o);for(var h=0;h<dc.length;h++){var m=dc[h];m.blockedOn===s&&(m.blockedOn=null)}for(;0<dc.length&&(h=dc[0],h.blockedOn===null);)uE(h),h.blockedOn===null&&dc.shift();if(h=(s.ownerDocument||s).$$reactFormReplay,h!=null)for(m=0;m<h.length;m+=3){var b=h[m],T=h[m+1],N=b[Ai]||null;if(typeof T=="function")N||fE(h);else if(N){var X=null;if(T&&T.hasAttribute("formAction")){if(b=T,N=T[Ai]||null)X=N.formAction;else if(Ub(b)!==null)continue}else X=N.action;typeof X=="function"?h[m+1]=X:(h.splice(m,3),m-=3),fE(h)}}}function hE(){function s(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(N){return b=N})},focusReset:"manual",scroll:"manual"})}function o(){b!==null&&(b(),b=null),m||setTimeout(h,20)}function h(){if(!m&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,b=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(h,100),function(){m=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),b!==null&&(b(),b=null)}}}function Nb(s){this._internalRoot=s}ux.prototype.render=Nb.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(n(409));var h=o.current,m=Fa();iE(h,m,s,o,null,null)},ux.prototype.unmount=Nb.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;iE(s.current,2,null,s,null,null),k(),o[tr]=null}};function ux(s){this._internalRoot=s}ux.prototype.unstable_scheduleHydration=function(s){if(s){var o=zs();s={blockedOn:null,target:s,priority:o};for(var h=0;h<dc.length&&o!==0&&o<dc[h].priority;h++);dc.splice(h,0,s),h===0&&uE(s)}};var dE=e.version;if(dE!=="19.2.0")throw Error(n(527,dE,"19.2.0"));J.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=p(o),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var bD={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cx=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cx.isDisabled&&cx.supportsFiber)try{Ie=cx.inject(bD),Ge=cx}catch{}}return R0.createRoot=function(s,o){if(!i(s))throw Error(n(299));var h=!1,m="",b=h0,T=Vv,N=Rd;return o!=null&&(o.unstable_strictMode===!0&&(h=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(b=o.onUncaughtError),o.onCaughtError!==void 0&&(T=o.onCaughtError),o.onRecoverableError!==void 0&&(N=o.onRecoverableError)),o=tE(s,1,!1,null,null,h,m,null,b,T,N,hE),s[tr]=o.current,mb(s),new Nb(o)},R0.hydrateRoot=function(s,o,h){if(!i(s))throw Error(n(299));var m=!1,b="",T=h0,N=Vv,X=Rd,ie=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(b=h.identifierPrefix),h.onUncaughtError!==void 0&&(T=h.onUncaughtError),h.onCaughtError!==void 0&&(N=h.onCaughtError),h.onRecoverableError!==void 0&&(X=h.onRecoverableError),h.formState!==void 0&&(ie=h.formState)),o=tE(s,1,!0,o,h??null,m,b,ie,T,N,X,hE),o.context=nE(null),h=o.current,m=Fa(),m=Zi(m),b=zr(m),b.callback=null,vo(h,b,m),h=m,o.current.lanes=h,li(o,h),bl(o),s[tr]=o.current,mb(s),new ux(o)},R0.version="19.2.0",R0}var SE;function UD(){if(SE)return zb.exports;SE=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),zb.exports=wD(),zb.exports}var OD=UD();const ND=[{text:"Ideas",imgPath:"/images/ideas.svg"},{text:"Concepts",imgPath:"/images/concepts.svg"},{text:"Designs",imgPath:"/images/designs.svg"},{text:"Code",imgPath:"/images/code.svg"}],LD=({className:a,id:e,text:t})=>Ke.jsx("a",{className:`${a??""} cta-wrapper`,children:Ke.jsxs("div",{className:"cta-button group",children:[Ke.jsx("div",{className:"bg-circle"}),Ke.jsx("p",{className:"text",children:t}),Ke.jsx("div",{className:"arrow-wrapper",children:Ke.jsx("img",{src:"/images/arrow-down.svg",alt:"arrow"})})]})});var Gb={exports:{}},cu={};var ME;function ID(){return ME||(ME=1,cu.ConcurrentRoot=1,cu.ContinuousEventPriority=8,cu.DefaultEventPriority=32,cu.DiscreteEventPriority=2,cu.IdleEventPriority=268435456,cu.LegacyRoot=0,cu.NoEventPriority=0),cu}var EE;function zD(){return EE||(EE=1,Gb.exports=ID()),Gb.exports}var c_=zD();const Nh="181",sh={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},rh={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},f2=0,gS=1,h2=2,PD=3,d2=0,fy=1,W0=2,Uo=3,Fo=0,pa=1,Us=2,Ba=0,vh=1,vS=2,xS=3,_S=4,p2=5,Ec=100,m2=101,g2=102,v2=103,x2=104,_2=200,y2=201,b2=202,A2=203,x_=204,__=205,S2=206,M2=207,E2=208,T2=209,C2=210,R2=211,B2=212,D2=213,w2=214,ug=0,Tp=1,Cp=2,Ic=3,Mh=4,cg=5,fg=6,Rp=7,Og=0,U2=1,O2=2,zo=0,N2=1,L2=2,I2=3,a1=4,z2=5,P2=6,F2=7,yS="attached",H2="detached",hy=300,Tu=301,zc=302,hg=303,dg=304,Wp=306,Pc=1e3,Ls=1001,Bp=1002,bi=1003,dy=1004,FD=1004,ch=1005,HD=1005,oi=1006,yp=1007,GD=1007,Qr=1008,VD=1008,ra=1009,s1=1010,r1=1011,Dp=1012,py=1013,Bl=1014,Is=1015,Xc=1016,my=1017,gy=1018,Eh=1020,o1=35902,l1=35899,u1=1021,c1=1022,ss=1023,wp=1026,Th=1027,vy=1028,Ng=1029,xy=1030,_y=1031,XD=1032,yy=1033,j0=33776,Z0=33777,Q0=33778,$0=33779,y_=35840,b_=35841,A_=35842,S_=35843,M_=36196,E_=37492,T_=37496,C_=37808,R_=37809,B_=37810,D_=37811,w_=37812,U_=37813,O_=37814,N_=37815,L_=37816,I_=37817,z_=37818,P_=37819,F_=37820,H_=37821,G_=36492,V_=36494,X_=36495,k_=36283,Y_=36284,q_=36285,J_=36286,G2=2200,V2=2201,X2=2202,Up=2300,Op=2301,f_=2302,fh=2400,hh=2401,pg=2402,by=2500,f1=2501,k2=0,h1=1,K_=2,Ho=3200,Ay=3201,kD=3202,YD=3203,kc=0,Y2=1,Lo="",Un="srgb",Dl="srgb-linear",mg="linear",Wn="srgb",qD=0,oh=7680,JD=7681,KD=7682,WD=7683,jD=34055,ZD=34056,QD=5386,$D=512,ew=513,tw=514,nw=515,iw=516,aw=517,sw=518,bS=519,q2=512,J2=513,K2=514,d1=515,W2=516,j2=517,Z2=518,Q2=519,gg=35044,rw=35048,ow=35040,lw=35045,uw=35049,cw=35041,fw=35046,hw=35050,dw=35042,pw="100",AS="300 es",xr=2e3,Np=2001,mw={COMPUTE:"compute",RENDER:"render"},gw={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},vw={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};function $2(a){for(let e=a.length-1;e>=0;--e)if(a[e]>=65535)return!0;return!1}const xw={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function vp(a,e){return new xw[a](e)}function vg(a){return document.createElementNS("http://www.w3.org/1999/xhtml",a)}function e3(){const a=vg("canvas");return a.style.display="block",a}const TE={};let Fc=null;function _w(a){Fc=a}function yw(){return Fc}function xg(...a){const e="THREE."+a.shift();Fc?Fc("log",e,...a):console.log(e,...a)}function ht(...a){const e="THREE."+a.shift();Fc?Fc("warn",e,...a):console.warn(e,...a)}function kt(...a){const e="THREE."+a.shift();Fc?Fc("error",e,...a):console.error(e,...a)}function Lp(...a){const e=a.join(" ");e in TE||(TE[e]=!0,ht(...a))}function bw(a,e,t){return new Promise(function(n,i){function r(){switch(a.clientWaitSync(e,a.SYNC_FLUSH_COMMANDS_BIT,0)){case a.WAIT_FAILED:i();break;case a.TIMEOUT_EXPIRED:setTimeout(r,t);break;default:n()}}setTimeout(r,t)})}let Cr=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const i=n[e];if(i!==void 0){const r=i.indexOf(t);r!==-1&&i.splice(r,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let r=0,l=i.length;r<l;r++)i[r].call(this,e);e.target=null}}};const ts=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let CE=1234567;const xh=Math.PI/180,Ip=180/Math.PI;function br(){const a=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(ts[a&255]+ts[a>>8&255]+ts[a>>16&255]+ts[a>>24&255]+"-"+ts[e&255]+ts[e>>8&255]+"-"+ts[e>>16&15|64]+ts[e>>24&255]+"-"+ts[t&63|128]+ts[t>>8&255]+"-"+ts[t>>16&255]+ts[t>>24&255]+ts[n&255]+ts[n>>8&255]+ts[n>>16&255]+ts[n>>24&255]).toLowerCase()}function Vt(a,e,t){return Math.max(e,Math.min(t,a))}function p1(a,e){return(a%e+e)%e}function Aw(a,e,t,n,i){return n+(a-e)*(i-n)/(t-e)}function Sw(a,e,t){return a!==e?(t-a)/(e-a):0}function eg(a,e,t){return(1-t)*a+t*e}function Mw(a,e,t,n){return eg(a,e,1-Math.exp(-t*n))}function Ew(a,e=1){return e-Math.abs(p1(a,e*2)-e)}function Tw(a,e,t){return a<=e?0:a>=t?1:(a=(a-e)/(t-e),a*a*(3-2*a))}function Cw(a,e,t){return a<=e?0:a>=t?1:(a=(a-e)/(t-e),a*a*a*(a*(a*6-15)+10))}function Rw(a,e){return a+Math.floor(Math.random()*(e-a+1))}function Bw(a,e){return a+Math.random()*(e-a)}function Dw(a){return a*(.5-Math.random())}function ww(a){a!==void 0&&(CE=a);let e=CE+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Uw(a){return a*xh}function Ow(a){return a*Ip}function Nw(a){return(a&a-1)===0&&a!==0}function Lw(a){return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function Iw(a){return Math.pow(2,Math.floor(Math.log(a)/Math.LN2))}function zw(a,e,t,n,i){const r=Math.cos,l=Math.sin,c=r(t/2),d=l(t/2),p=r((e+n)/2),g=l((e+n)/2),v=r((e-n)/2),_=l((e-n)/2),y=r((n-e)/2),S=l((n-e)/2);switch(i){case"XYX":a.set(c*g,d*v,d*_,c*p);break;case"YZY":a.set(d*_,c*g,d*v,c*p);break;case"ZXZ":a.set(d*v,d*_,c*g,c*p);break;case"XZX":a.set(c*g,d*S,d*y,c*p);break;case"YXY":a.set(d*y,c*g,d*S,c*p);break;case"ZYZ":a.set(d*S,d*y,c*g,c*p);break;default:ht("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Os(a,e){switch(e.constructor){case Float32Array:return a;case Uint32Array:return a/4294967295;case Uint16Array:return a/65535;case Uint8Array:return a/255;case Int32Array:return Math.max(a/2147483647,-1);case Int16Array:return Math.max(a/32767,-1);case Int8Array:return Math.max(a/127,-1);default:throw new Error("Invalid component type.")}}function en(a,e){switch(e.constructor){case Float32Array:return a;case Uint32Array:return Math.round(a*4294967295);case Uint16Array:return Math.round(a*65535);case Uint8Array:return Math.round(a*255);case Int32Array:return Math.round(a*2147483647);case Int16Array:return Math.round(a*32767);case Int8Array:return Math.round(a*127);default:throw new Error("Invalid component type.")}}const t3={DEG2RAD:xh,RAD2DEG:Ip,generateUUID:br,clamp:Vt,euclideanModulo:p1,mapLinear:Aw,inverseLerp:Sw,lerp:eg,damp:Mw,pingpong:Ew,smoothstep:Tw,smootherstep:Cw,randInt:Rw,randFloat:Bw,randFloatSpread:Dw,seededRandom:ww,degToRad:Uw,radToDeg:Ow,isPowerOfTwo:Nw,ceilPowerOfTwo:Lw,floorPowerOfTwo:Iw,setQuaternionFromProperEuler:zw,normalize:en,denormalize:Os};class De{constructor(e=0,t=0){De.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Vt(this.x,e.x,t.x),this.y=Vt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Vt(this.x,e,t),this.y=Vt(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Vt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Vt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,l=this.y-e.y;return this.x=r*n-l*i+e.x,this.y=r*i+l*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Da{constructor(e=0,t=0,n=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,l,c){let d=n[i+0],p=n[i+1],g=n[i+2],v=n[i+3],_=r[l+0],y=r[l+1],S=r[l+2],E=r[l+3];if(c<=0){e[t+0]=d,e[t+1]=p,e[t+2]=g,e[t+3]=v;return}if(c>=1){e[t+0]=_,e[t+1]=y,e[t+2]=S,e[t+3]=E;return}if(v!==E||d!==_||p!==y||g!==S){let C=d*_+p*y+g*S+v*E;C<0&&(_=-_,y=-y,S=-S,E=-E,C=-C);let M=1-c;if(C<.9995){const B=Math.acos(C),D=Math.sin(B);M=Math.sin(M*B)/D,c=Math.sin(c*B)/D,d=d*M+_*c,p=p*M+y*c,g=g*M+S*c,v=v*M+E*c}else{d=d*M+_*c,p=p*M+y*c,g=g*M+S*c,v=v*M+E*c;const B=1/Math.sqrt(d*d+p*p+g*g+v*v);d*=B,p*=B,g*=B,v*=B}}e[t]=d,e[t+1]=p,e[t+2]=g,e[t+3]=v}static multiplyQuaternionsFlat(e,t,n,i,r,l){const c=n[i],d=n[i+1],p=n[i+2],g=n[i+3],v=r[l],_=r[l+1],y=r[l+2],S=r[l+3];return e[t]=c*S+g*v+d*y-p*_,e[t+1]=d*S+g*_+p*v-c*y,e[t+2]=p*S+g*y+c*_-d*v,e[t+3]=g*S-c*v-d*_-p*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,i=e._y,r=e._z,l=e._order,c=Math.cos,d=Math.sin,p=c(n/2),g=c(i/2),v=c(r/2),_=d(n/2),y=d(i/2),S=d(r/2);switch(l){case"XYZ":this._x=_*g*v+p*y*S,this._y=p*y*v-_*g*S,this._z=p*g*S+_*y*v,this._w=p*g*v-_*y*S;break;case"YXZ":this._x=_*g*v+p*y*S,this._y=p*y*v-_*g*S,this._z=p*g*S-_*y*v,this._w=p*g*v+_*y*S;break;case"ZXY":this._x=_*g*v-p*y*S,this._y=p*y*v+_*g*S,this._z=p*g*S+_*y*v,this._w=p*g*v-_*y*S;break;case"ZYX":this._x=_*g*v-p*y*S,this._y=p*y*v+_*g*S,this._z=p*g*S-_*y*v,this._w=p*g*v+_*y*S;break;case"YZX":this._x=_*g*v+p*y*S,this._y=p*y*v+_*g*S,this._z=p*g*S-_*y*v,this._w=p*g*v-_*y*S;break;case"XZY":this._x=_*g*v-p*y*S,this._y=p*y*v-_*g*S,this._z=p*g*S+_*y*v,this._w=p*g*v+_*y*S;break;default:ht("Quaternion: .setFromEuler() encountered an unknown order: "+l)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],l=t[1],c=t[5],d=t[9],p=t[2],g=t[6],v=t[10],_=n+c+v;if(_>0){const y=.5/Math.sqrt(_+1);this._w=.25/y,this._x=(g-d)*y,this._y=(r-p)*y,this._z=(l-i)*y}else if(n>c&&n>v){const y=2*Math.sqrt(1+n-c-v);this._w=(g-d)/y,this._x=.25*y,this._y=(i+l)/y,this._z=(r+p)/y}else if(c>v){const y=2*Math.sqrt(1+c-n-v);this._w=(r-p)/y,this._x=(i+l)/y,this._y=.25*y,this._z=(d+g)/y}else{const y=2*Math.sqrt(1+v-n-c);this._w=(l-i)/y,this._x=(r+p)/y,this._y=(d+g)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Vt(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,l=e._w,c=t._x,d=t._y,p=t._z,g=t._w;return this._x=n*g+l*c+i*p-r*d,this._y=i*g+l*d+r*c-n*p,this._z=r*g+l*p+n*d-i*c,this._w=l*g-n*c-i*d-r*p,this._onChangeCallback(),this}slerp(e,t){if(t<=0)return this;if(t>=1)return this.copy(e);let n=e._x,i=e._y,r=e._z,l=e._w,c=this.dot(e);c<0&&(n=-n,i=-i,r=-r,l=-l,c=-c);let d=1-t;if(c<.9995){const p=Math.acos(c),g=Math.sin(p);d=Math.sin(d*p)/g,t=Math.sin(t*p)/g,this._x=this._x*d+n*t,this._y=this._y*d+i*t,this._z=this._z*d+r*t,this._w=this._w*d+l*t,this._onChangeCallback()}else this._x=this._x*d+n*t,this._y=this._y*d+i*t,this._z=this._z*d+r*t,this._w=this._w*d+l*t,this.normalize();return this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),i=Math.sqrt(1-n),r=Math.sqrt(n);return this.set(i*Math.sin(e),i*Math.cos(e),r*Math.sin(t),r*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class j{constructor(e=0,t=0,n=0){j.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(RE.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(RE.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,l=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*l,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*l,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*l,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,l=e.y,c=e.z,d=e.w,p=2*(l*i-c*n),g=2*(c*t-r*i),v=2*(r*n-l*t);return this.x=t+d*p+l*v-c*g,this.y=n+d*g+c*p-r*v,this.z=i+d*v+r*g-l*p,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Vt(this.x,e.x,t.x),this.y=Vt(this.y,e.y,t.y),this.z=Vt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Vt(this.x,e,t),this.y=Vt(this.y,e,t),this.z=Vt(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Vt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,l=t.x,c=t.y,d=t.z;return this.x=i*d-r*c,this.y=r*l-n*d,this.z=n*c-i*l,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Vb.copy(this).projectOnVector(e),this.sub(Vb)}reflect(e){return this.sub(Vb.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Vt(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Vb=new j,RE=new Da;class Qt{constructor(e,t,n,i,r,l,c,d,p){Qt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,i,r,l,c,d,p)}set(e,t,n,i,r,l,c,d,p){const g=this.elements;return g[0]=e,g[1]=i,g[2]=c,g[3]=t,g[4]=r,g[5]=d,g[6]=n,g[7]=l,g[8]=p,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,l=n[0],c=n[3],d=n[6],p=n[1],g=n[4],v=n[7],_=n[2],y=n[5],S=n[8],E=i[0],C=i[3],M=i[6],B=i[1],D=i[4],w=i[7],z=i[2],O=i[5],P=i[8];return r[0]=l*E+c*B+d*z,r[3]=l*C+c*D+d*O,r[6]=l*M+c*w+d*P,r[1]=p*E+g*B+v*z,r[4]=p*C+g*D+v*O,r[7]=p*M+g*w+v*P,r[2]=_*E+y*B+S*z,r[5]=_*C+y*D+S*O,r[8]=_*M+y*w+S*P,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],l=e[4],c=e[5],d=e[6],p=e[7],g=e[8];return t*l*g-t*c*p-n*r*g+n*c*d+i*r*p-i*l*d}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],l=e[4],c=e[5],d=e[6],p=e[7],g=e[8],v=g*l-c*p,_=c*d-g*r,y=p*r-l*d,S=t*v+n*_+i*y;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const E=1/S;return e[0]=v*E,e[1]=(i*p-g*n)*E,e[2]=(c*n-i*l)*E,e[3]=_*E,e[4]=(g*t-i*d)*E,e[5]=(i*r-c*t)*E,e[6]=y*E,e[7]=(n*d-p*t)*E,e[8]=(l*t-n*r)*E,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,l,c){const d=Math.cos(r),p=Math.sin(r);return this.set(n*d,n*p,-n*(d*l+p*c)+l+e,-i*p,i*d,-i*(-p*l+d*c)+c+t,0,0,1),this}scale(e,t){return this.premultiply(Xb.makeScale(e,t)),this}rotate(e){return this.premultiply(Xb.makeRotation(-e)),this}translate(e,t){return this.premultiply(Xb.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Xb=new Qt,BE=new Qt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),DE=new Qt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Pw(){const a={enabled:!0,workingColorSpace:Dl,spaces:{},convert:function(i,r,l){return this.enabled===!1||r===l||!r||!l||(this.spaces[r].transfer===Wn&&(i.r=Mu(i.r),i.g=Mu(i.g),i.b=Mu(i.b)),this.spaces[r].primaries!==this.spaces[l].primaries&&(i.applyMatrix3(this.spaces[r].toXYZ),i.applyMatrix3(this.spaces[l].fromXYZ)),this.spaces[l].transfer===Wn&&(i.r=bp(i.r),i.g=bp(i.g),i.b=bp(i.b))),i},workingToColorSpace:function(i,r){return this.convert(i,this.workingColorSpace,r)},colorSpaceToWorking:function(i,r){return this.convert(i,r,this.workingColorSpace)},getPrimaries:function(i){return this.spaces[i].primaries},getTransfer:function(i){return i===Lo?mg:this.spaces[i].transfer},getToneMappingMode:function(i){return this.spaces[i].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(i,r=this.workingColorSpace){return i.fromArray(this.spaces[r].luminanceCoefficients)},define:function(i){Object.assign(this.spaces,i)},_getMatrix:function(i,r,l){return i.copy(this.spaces[r].toXYZ).multiply(this.spaces[l].fromXYZ)},_getDrawingBufferColorSpace:function(i){return this.spaces[i].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(i=this.workingColorSpace){return this.spaces[i].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(i,r){return Lp("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),a.workingToColorSpace(i,r)},toWorkingColorSpace:function(i,r){return Lp("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),a.colorSpaceToWorking(i,r)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return a.define({[Dl]:{primaries:e,whitePoint:n,transfer:mg,toXYZ:BE,fromXYZ:DE,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:Un},outputColorSpaceConfig:{drawingBufferColorSpace:Un}},[Un]:{primaries:e,whitePoint:n,transfer:Wn,toXYZ:BE,fromXYZ:DE,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:Un}}}),a}const Tn=Pw();function Mu(a){return a<.04045?a*.0773993808:Math.pow(a*.9478672986+.0521327014,2.4)}function bp(a){return a<.0031308?a*12.92:1.055*Math.pow(a,.41666)-.055}let qd;class n3{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{qd===void 0&&(qd=vg("canvas")),qd.width=e.width,qd.height=e.height;const i=qd.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),n=qd}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=vg("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let l=0;l<r.length;l++)r[l]=Mu(r[l]/255)*255;return n.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Mu(t[n]/255)*255):t[n]=Mu(t[n]);return{data:t,width:e.width,height:e.height}}else return ht("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Fw=0;class Cc{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Fw++}),this.uuid=br(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(i!==null){let r;if(Array.isArray(i)){r=[];for(let l=0,c=i.length;l<c;l++)i[l].isDataTexture?r.push(kb(i[l].image)):r.push(kb(i[l]))}else r=kb(i);n.url=r}return t||(e.images[this.uuid]=n),n}}function kb(a){return typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&a instanceof ImageBitmap?n3.getDataURL(a):a.data?{data:Array.from(a.data),width:a.width,height:a.height,type:a.data.constructor.name}:(ht("Texture: Unable to serialize Texture."),{})}let Hw=0;const Yb=new j;class ei extends Cr{constructor(e=ei.DEFAULT_IMAGE,t=ei.DEFAULT_MAPPING,n=Ls,i=Ls,r=oi,l=Qr,c=ss,d=ra,p=ei.DEFAULT_ANISOTROPY,g=Lo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Hw++}),this.uuid=br(),this.name="",this.source=new Cc(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=l,this.anisotropy=p,this.format=c,this.internalFormat=null,this.type=d,this.offset=new De(0,0),this.repeat=new De(1,1),this.center=new De(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Qt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=g,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(Yb).x}get height(){return this.source.getSize(Yb).y}get depth(){return this.source.getSize(Yb).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){ht(`Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){ht(`Texture.setValues(): property '${t}' does not exist.`);continue}i&&n&&i.isVector2&&n.isVector2||i&&n&&i.isVector3&&n.isVector3||i&&n&&i.isMatrix3&&n.isMatrix3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==hy)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Pc:e.x=e.x-Math.floor(e.x);break;case Ls:e.x=e.x<0?0:1;break;case Bp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Pc:e.y=e.y-Math.floor(e.y);break;case Ls:e.y=e.y<0?0:1;break;case Bp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ei.DEFAULT_IMAGE=null;ei.DEFAULT_MAPPING=hy;ei.DEFAULT_ANISOTROPY=1;class Cn{constructor(e=0,t=0,n=0,i=1){Cn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,l=e.elements;return this.x=l[0]*t+l[4]*n+l[8]*i+l[12]*r,this.y=l[1]*t+l[5]*n+l[9]*i+l[13]*r,this.z=l[2]*t+l[6]*n+l[10]*i+l[14]*r,this.w=l[3]*t+l[7]*n+l[11]*i+l[15]*r,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const d=e.elements,p=d[0],g=d[4],v=d[8],_=d[1],y=d[5],S=d[9],E=d[2],C=d[6],M=d[10];if(Math.abs(g-_)<.01&&Math.abs(v-E)<.01&&Math.abs(S-C)<.01){if(Math.abs(g+_)<.1&&Math.abs(v+E)<.1&&Math.abs(S+C)<.1&&Math.abs(p+y+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const D=(p+1)/2,w=(y+1)/2,z=(M+1)/2,O=(g+_)/4,P=(v+E)/4,G=(S+C)/4;return D>w&&D>z?D<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(D),i=O/n,r=P/n):w>z?w<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(w),n=O/i,r=G/i):z<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(z),n=P/r,i=G/r),this.set(n,i,r,t),this}let B=Math.sqrt((C-S)*(C-S)+(v-E)*(v-E)+(_-g)*(_-g));return Math.abs(B)<.001&&(B=1),this.x=(C-S)/B,this.y=(v-E)/B,this.z=(_-g)/B,this.w=Math.acos((p+y+M-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Vt(this.x,e.x,t.x),this.y=Vt(this.y,e.y,t.y),this.z=Vt(this.z,e.z,t.z),this.w=Vt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Vt(this.x,e,t),this.y=Vt(this.y,e,t),this.z=Vt(this.z,e,t),this.w=Vt(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Vt(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class m1 extends Cr{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:oi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new Cn(0,0,e,t),this.scissorTest=!1,this.viewport=new Cn(0,0,e,t);const i={width:e,height:t,depth:n.depth},r=new ei(i);this.textures=[];const l=n.count;for(let c=0;c<l;c++)this.textures[c]=r.clone(),this.textures[c].isRenderTargetTexture=!0,this.textures[c].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:oi,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.textures.length;i<r;i++)this.textures[i].image.width=e,this.textures[i].image.height=t,this.textures[i].image.depth=n,this.textures[i].isData3DTexture!==!0&&(this.textures[i].isArrayTexture=this.textures[i].image.depth>1);this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const i=Object.assign({},e.textures[t].image);this.textures[t].source=new Cc(i)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Pi extends m1{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Sy extends ei{constructor(e=null,t=1,n=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=bi,this.minFilter=bi,this.wrapR=Ls,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Gw extends Pi{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Sy(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class My extends ei{constructor(e=null,t=1,n=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=bi,this.minFilter=bi,this.wrapR=Ls,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Vw extends Pi{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new My(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class Ga{constructor(e=new j(1/0,1/0,1/0),t=new j(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Bo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Bo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Bo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const r=n.getAttribute("position");if(t===!0&&r!==void 0&&e.isInstancedMesh!==!0)for(let l=0,c=r.count;l<c;l++)e.isMesh===!0?e.getVertexPosition(l,Bo):Bo.fromBufferAttribute(r,l),Bo.applyMatrix4(e.matrixWorld),this.expandByPoint(Bo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),fx.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),fx.copy(n.boundingBox)),fx.applyMatrix4(e.matrixWorld),this.union(fx)}const i=e.children;for(let r=0,l=i.length;r<l;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,Bo),Bo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(B0),hx.subVectors(this.max,B0),Jd.subVectors(e.a,B0),Kd.subVectors(e.b,B0),Wd.subVectors(e.c,B0),mc.subVectors(Kd,Jd),gc.subVectors(Wd,Kd),Vf.subVectors(Jd,Wd);let t=[0,-mc.z,mc.y,0,-gc.z,gc.y,0,-Vf.z,Vf.y,mc.z,0,-mc.x,gc.z,0,-gc.x,Vf.z,0,-Vf.x,-mc.y,mc.x,0,-gc.y,gc.x,0,-Vf.y,Vf.x,0];return!qb(t,Jd,Kd,Wd,hx)||(t=[1,0,0,0,1,0,0,0,1],!qb(t,Jd,Kd,Wd,hx))?!1:(dx.crossVectors(mc,gc),t=[dx.x,dx.y,dx.z],qb(t,Jd,Kd,Wd,hx))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Bo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Bo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(fu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),fu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),fu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),fu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),fu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),fu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),fu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),fu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(fu),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const fu=[new j,new j,new j,new j,new j,new j,new j,new j],Bo=new j,fx=new Ga,Jd=new j,Kd=new j,Wd=new j,mc=new j,gc=new j,Vf=new j,B0=new j,hx=new j,dx=new j,Xf=new j;function qb(a,e,t,n,i){for(let r=0,l=a.length-3;r<=l;r+=3){Xf.fromArray(a,r);const c=i.x*Math.abs(Xf.x)+i.y*Math.abs(Xf.y)+i.z*Math.abs(Xf.z),d=e.dot(Xf),p=t.dot(Xf),g=n.dot(Xf);if(Math.max(-Math.max(d,p,g),Math.min(d,p,g))>c)return!1}return!0}const Xw=new Ga,D0=new j,Jb=new j;class wa{constructor(e=new j,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):Xw.setFromPoints(e).getCenter(n);let i=0;for(let r=0,l=e.length;r<l;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;D0.subVectors(e,this.center);const t=D0.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),i=(n-this.radius)*.5;this.center.addScaledVector(D0,i/n),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Jb.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(D0.copy(e.center).add(Jb)),this.expandByPoint(D0.copy(e.center).sub(Jb))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const hu=new j,Kb=new j,px=new j,vc=new j,Wb=new j,mx=new j,jb=new j;class Lh{constructor(e=new j,t=new j(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,hu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=hu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(hu.copy(this.origin).addScaledVector(this.direction,t),hu.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){Kb.copy(e).add(t).multiplyScalar(.5),px.copy(t).sub(e).normalize(),vc.copy(this.origin).sub(Kb);const r=e.distanceTo(t)*.5,l=-this.direction.dot(px),c=vc.dot(this.direction),d=-vc.dot(px),p=vc.lengthSq(),g=Math.abs(1-l*l);let v,_,y,S;if(g>0)if(v=l*d-c,_=l*c-d,S=r*g,v>=0)if(_>=-S)if(_<=S){const E=1/g;v*=E,_*=E,y=v*(v+l*_+2*c)+_*(l*v+_+2*d)+p}else _=r,v=Math.max(0,-(l*_+c)),y=-v*v+_*(_+2*d)+p;else _=-r,v=Math.max(0,-(l*_+c)),y=-v*v+_*(_+2*d)+p;else _<=-S?(v=Math.max(0,-(-l*r+c)),_=v>0?-r:Math.min(Math.max(-r,-d),r),y=-v*v+_*(_+2*d)+p):_<=S?(v=0,_=Math.min(Math.max(-r,-d),r),y=_*(_+2*d)+p):(v=Math.max(0,-(l*r+c)),_=v>0?r:Math.min(Math.max(-r,-d),r),y=-v*v+_*(_+2*d)+p);else _=l>0?-r:r,v=Math.max(0,-(l*_+c)),y=-v*v+_*(_+2*d)+p;return n&&n.copy(this.origin).addScaledVector(this.direction,v),i&&i.copy(Kb).addScaledVector(px,_),y}intersectSphere(e,t){hu.subVectors(e.center,this.origin);const n=hu.dot(this.direction),i=hu.dot(hu)-n*n,r=e.radius*e.radius;if(i>r)return null;const l=Math.sqrt(r-i),c=n-l,d=n+l;return d<0?null:c<0?this.at(d,t):this.at(c,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,l,c,d;const p=1/this.direction.x,g=1/this.direction.y,v=1/this.direction.z,_=this.origin;return p>=0?(n=(e.min.x-_.x)*p,i=(e.max.x-_.x)*p):(n=(e.max.x-_.x)*p,i=(e.min.x-_.x)*p),g>=0?(r=(e.min.y-_.y)*g,l=(e.max.y-_.y)*g):(r=(e.max.y-_.y)*g,l=(e.min.y-_.y)*g),n>l||r>i||((r>n||isNaN(n))&&(n=r),(l<i||isNaN(i))&&(i=l),v>=0?(c=(e.min.z-_.z)*v,d=(e.max.z-_.z)*v):(c=(e.max.z-_.z)*v,d=(e.min.z-_.z)*v),n>d||c>i)||((c>n||n!==n)&&(n=c),(d<i||i!==i)&&(i=d),i<0)?null:this.at(n>=0?n:i,t)}intersectsBox(e){return this.intersectBox(e,hu)!==null}intersectTriangle(e,t,n,i,r){Wb.subVectors(t,e),mx.subVectors(n,e),jb.crossVectors(Wb,mx);let l=this.direction.dot(jb),c;if(l>0){if(i)return null;c=1}else if(l<0)c=-1,l=-l;else return null;vc.subVectors(this.origin,e);const d=c*this.direction.dot(mx.crossVectors(vc,mx));if(d<0)return null;const p=c*this.direction.dot(Wb.cross(vc));if(p<0||d+p>l)return null;const g=-c*vc.dot(jb);return g<0?null:this.at(g/l,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class zt{constructor(e,t,n,i,r,l,c,d,p,g,v,_,y,S,E,C){zt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,i,r,l,c,d,p,g,v,_,y,S,E,C)}set(e,t,n,i,r,l,c,d,p,g,v,_,y,S,E,C){const M=this.elements;return M[0]=e,M[4]=t,M[8]=n,M[12]=i,M[1]=r,M[5]=l,M[9]=c,M[13]=d,M[2]=p,M[6]=g,M[10]=v,M[14]=_,M[3]=y,M[7]=S,M[11]=E,M[15]=C,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new zt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/jd.setFromMatrixColumn(e,0).length(),r=1/jd.setFromMatrixColumn(e,1).length(),l=1/jd.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*l,t[9]=n[9]*l,t[10]=n[10]*l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,l=Math.cos(n),c=Math.sin(n),d=Math.cos(i),p=Math.sin(i),g=Math.cos(r),v=Math.sin(r);if(e.order==="XYZ"){const _=l*g,y=l*v,S=c*g,E=c*v;t[0]=d*g,t[4]=-d*v,t[8]=p,t[1]=y+S*p,t[5]=_-E*p,t[9]=-c*d,t[2]=E-_*p,t[6]=S+y*p,t[10]=l*d}else if(e.order==="YXZ"){const _=d*g,y=d*v,S=p*g,E=p*v;t[0]=_+E*c,t[4]=S*c-y,t[8]=l*p,t[1]=l*v,t[5]=l*g,t[9]=-c,t[2]=y*c-S,t[6]=E+_*c,t[10]=l*d}else if(e.order==="ZXY"){const _=d*g,y=d*v,S=p*g,E=p*v;t[0]=_-E*c,t[4]=-l*v,t[8]=S+y*c,t[1]=y+S*c,t[5]=l*g,t[9]=E-_*c,t[2]=-l*p,t[6]=c,t[10]=l*d}else if(e.order==="ZYX"){const _=l*g,y=l*v,S=c*g,E=c*v;t[0]=d*g,t[4]=S*p-y,t[8]=_*p+E,t[1]=d*v,t[5]=E*p+_,t[9]=y*p-S,t[2]=-p,t[6]=c*d,t[10]=l*d}else if(e.order==="YZX"){const _=l*d,y=l*p,S=c*d,E=c*p;t[0]=d*g,t[4]=E-_*v,t[8]=S*v+y,t[1]=v,t[5]=l*g,t[9]=-c*g,t[2]=-p*g,t[6]=y*v+S,t[10]=_-E*v}else if(e.order==="XZY"){const _=l*d,y=l*p,S=c*d,E=c*p;t[0]=d*g,t[4]=-v,t[8]=p*g,t[1]=_*v+E,t[5]=l*g,t[9]=y*v-S,t[2]=S*v-y,t[6]=c*g,t[10]=E*v+_}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(kw,e,Yw)}lookAt(e,t,n){const i=this.elements;return pr.subVectors(e,t),pr.lengthSq()===0&&(pr.z=1),pr.normalize(),xc.crossVectors(n,pr),xc.lengthSq()===0&&(Math.abs(n.z)===1?pr.x+=1e-4:pr.z+=1e-4,pr.normalize(),xc.crossVectors(n,pr)),xc.normalize(),gx.crossVectors(pr,xc),i[0]=xc.x,i[4]=gx.x,i[8]=pr.x,i[1]=xc.y,i[5]=gx.y,i[9]=pr.y,i[2]=xc.z,i[6]=gx.z,i[10]=pr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,l=n[0],c=n[4],d=n[8],p=n[12],g=n[1],v=n[5],_=n[9],y=n[13],S=n[2],E=n[6],C=n[10],M=n[14],B=n[3],D=n[7],w=n[11],z=n[15],O=i[0],P=i[4],G=i[8],L=i[12],I=i[1],Y=i[5],ee=i[9],te=i[13],le=i[2],re=i[6],F=i[10],J=i[14],Z=i[3],oe=i[7],pe=i[11],q=i[15];return r[0]=l*O+c*I+d*le+p*Z,r[4]=l*P+c*Y+d*re+p*oe,r[8]=l*G+c*ee+d*F+p*pe,r[12]=l*L+c*te+d*J+p*q,r[1]=g*O+v*I+_*le+y*Z,r[5]=g*P+v*Y+_*re+y*oe,r[9]=g*G+v*ee+_*F+y*pe,r[13]=g*L+v*te+_*J+y*q,r[2]=S*O+E*I+C*le+M*Z,r[6]=S*P+E*Y+C*re+M*oe,r[10]=S*G+E*ee+C*F+M*pe,r[14]=S*L+E*te+C*J+M*q,r[3]=B*O+D*I+w*le+z*Z,r[7]=B*P+D*Y+w*re+z*oe,r[11]=B*G+D*ee+w*F+z*pe,r[15]=B*L+D*te+w*J+z*q,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],l=e[1],c=e[5],d=e[9],p=e[13],g=e[2],v=e[6],_=e[10],y=e[14],S=e[3],E=e[7],C=e[11],M=e[15];return S*(+r*d*v-i*p*v-r*c*_+n*p*_+i*c*y-n*d*y)+E*(+t*d*y-t*p*_+r*l*_-i*l*y+i*p*g-r*d*g)+C*(+t*p*v-t*c*y-r*l*v+n*l*y+r*c*g-n*p*g)+M*(-i*c*g-t*d*v+t*c*_+i*l*v-n*l*_+n*d*g)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],l=e[4],c=e[5],d=e[6],p=e[7],g=e[8],v=e[9],_=e[10],y=e[11],S=e[12],E=e[13],C=e[14],M=e[15],B=v*C*p-E*_*p+E*d*y-c*C*y-v*d*M+c*_*M,D=S*_*p-g*C*p-S*d*y+l*C*y+g*d*M-l*_*M,w=g*E*p-S*v*p+S*c*y-l*E*y-g*c*M+l*v*M,z=S*v*d-g*E*d-S*c*_+l*E*_+g*c*C-l*v*C,O=t*B+n*D+i*w+r*z;if(O===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const P=1/O;return e[0]=B*P,e[1]=(E*_*r-v*C*r-E*i*y+n*C*y+v*i*M-n*_*M)*P,e[2]=(c*C*r-E*d*r+E*i*p-n*C*p-c*i*M+n*d*M)*P,e[3]=(v*d*r-c*_*r-v*i*p+n*_*p+c*i*y-n*d*y)*P,e[4]=D*P,e[5]=(g*C*r-S*_*r+S*i*y-t*C*y-g*i*M+t*_*M)*P,e[6]=(S*d*r-l*C*r-S*i*p+t*C*p+l*i*M-t*d*M)*P,e[7]=(l*_*r-g*d*r+g*i*p-t*_*p-l*i*y+t*d*y)*P,e[8]=w*P,e[9]=(S*v*r-g*E*r-S*n*y+t*E*y+g*n*M-t*v*M)*P,e[10]=(l*E*r-S*c*r+S*n*p-t*E*p-l*n*M+t*c*M)*P,e[11]=(g*c*r-l*v*r-g*n*p+t*v*p+l*n*y-t*c*y)*P,e[12]=z*P,e[13]=(g*E*i-S*v*i+S*n*_-t*E*_-g*n*C+t*v*C)*P,e[14]=(S*c*i-l*E*i-S*n*d+t*E*d+l*n*C-t*c*C)*P,e[15]=(l*v*i-g*c*i+g*n*d-t*v*d-l*n*_+t*c*_)*P,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,l=e.x,c=e.y,d=e.z,p=r*l,g=r*c;return this.set(p*l+n,p*c-i*d,p*d+i*c,0,p*c+i*d,g*c+n,g*d-i*l,0,p*d-i*c,g*d+i*l,r*d*d+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,l){return this.set(1,n,r,0,e,1,l,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,l=t._y,c=t._z,d=t._w,p=r+r,g=l+l,v=c+c,_=r*p,y=r*g,S=r*v,E=l*g,C=l*v,M=c*v,B=d*p,D=d*g,w=d*v,z=n.x,O=n.y,P=n.z;return i[0]=(1-(E+M))*z,i[1]=(y+w)*z,i[2]=(S-D)*z,i[3]=0,i[4]=(y-w)*O,i[5]=(1-(_+M))*O,i[6]=(C+B)*O,i[7]=0,i[8]=(S+D)*P,i[9]=(C-B)*P,i[10]=(1-(_+E))*P,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=jd.set(i[0],i[1],i[2]).length();const l=jd.set(i[4],i[5],i[6]).length(),c=jd.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],Do.copy(this);const p=1/r,g=1/l,v=1/c;return Do.elements[0]*=p,Do.elements[1]*=p,Do.elements[2]*=p,Do.elements[4]*=g,Do.elements[5]*=g,Do.elements[6]*=g,Do.elements[8]*=v,Do.elements[9]*=v,Do.elements[10]*=v,t.setFromRotationMatrix(Do),n.x=r,n.y=l,n.z=c,this}makePerspective(e,t,n,i,r,l,c=xr,d=!1){const p=this.elements,g=2*r/(t-e),v=2*r/(n-i),_=(t+e)/(t-e),y=(n+i)/(n-i);let S,E;if(d)S=r/(l-r),E=l*r/(l-r);else if(c===xr)S=-(l+r)/(l-r),E=-2*l*r/(l-r);else if(c===Np)S=-l/(l-r),E=-l*r/(l-r);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return p[0]=g,p[4]=0,p[8]=_,p[12]=0,p[1]=0,p[5]=v,p[9]=y,p[13]=0,p[2]=0,p[6]=0,p[10]=S,p[14]=E,p[3]=0,p[7]=0,p[11]=-1,p[15]=0,this}makeOrthographic(e,t,n,i,r,l,c=xr,d=!1){const p=this.elements,g=2/(t-e),v=2/(n-i),_=-(t+e)/(t-e),y=-(n+i)/(n-i);let S,E;if(d)S=1/(l-r),E=l/(l-r);else if(c===xr)S=-2/(l-r),E=-(l+r)/(l-r);else if(c===Np)S=-1/(l-r),E=-r/(l-r);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return p[0]=g,p[4]=0,p[8]=0,p[12]=_,p[1]=0,p[5]=v,p[9]=0,p[13]=y,p[2]=0,p[6]=0,p[10]=S,p[14]=E,p[3]=0,p[7]=0,p[11]=0,p[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const jd=new j,Do=new zt,kw=new j(0,0,0),Yw=new j(1,1,1),xc=new j,gx=new j,pr=new j,wE=new zt,UE=new Da;class Sr{constructor(e=0,t=0,n=0,i=Sr.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,i=this._order){return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const i=e.elements,r=i[0],l=i[4],c=i[8],d=i[1],p=i[5],g=i[9],v=i[2],_=i[6],y=i[10];switch(t){case"XYZ":this._y=Math.asin(Vt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-g,y),this._z=Math.atan2(-l,r)):(this._x=Math.atan2(_,p),this._z=0);break;case"YXZ":this._x=Math.asin(-Vt(g,-1,1)),Math.abs(g)<.9999999?(this._y=Math.atan2(c,y),this._z=Math.atan2(d,p)):(this._y=Math.atan2(-v,r),this._z=0);break;case"ZXY":this._x=Math.asin(Vt(_,-1,1)),Math.abs(_)<.9999999?(this._y=Math.atan2(-v,y),this._z=Math.atan2(-l,p)):(this._y=0,this._z=Math.atan2(d,r));break;case"ZYX":this._y=Math.asin(-Vt(v,-1,1)),Math.abs(v)<.9999999?(this._x=Math.atan2(_,y),this._z=Math.atan2(d,r)):(this._x=0,this._z=Math.atan2(-l,p));break;case"YZX":this._z=Math.asin(Vt(d,-1,1)),Math.abs(d)<.9999999?(this._x=Math.atan2(-g,p),this._y=Math.atan2(-v,r)):(this._x=0,this._y=Math.atan2(c,y));break;case"XZY":this._z=Math.asin(-Vt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(_,p),this._y=Math.atan2(c,r)):(this._x=Math.atan2(-g,y),this._y=0);break;default:ht("Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return wE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(wE,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return UE.setFromEuler(this),this.setFromQuaternion(UE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Sr.DEFAULT_ORDER="XYZ";class zp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let qw=0;const OE=new j,Zd=new Da,du=new zt,vx=new j,w0=new j,Jw=new j,Kw=new Da,NE=new j(1,0,0),LE=new j(0,1,0),IE=new j(0,0,1),zE={type:"added"},Ww={type:"removed"},Qd={type:"childadded",child:null},Zb={type:"childremoved",child:null};class Bn extends Cr{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:qw++}),this.uuid=br(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Bn.DEFAULT_UP.clone();const e=new j,t=new Sr,n=new Da,i=new j(1,1,1);function r(){n.setFromEuler(t,!1)}function l(){t.setFromQuaternion(n,void 0,!1)}t._onChange(r),n._onChange(l),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new zt},normalMatrix:{value:new Qt}}),this.matrix=new zt,this.matrixWorld=new zt,this.matrixAutoUpdate=Bn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new zp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Zd.setFromAxisAngle(e,t),this.quaternion.multiply(Zd),this}rotateOnWorldAxis(e,t){return Zd.setFromAxisAngle(e,t),this.quaternion.premultiply(Zd),this}rotateX(e){return this.rotateOnAxis(NE,e)}rotateY(e){return this.rotateOnAxis(LE,e)}rotateZ(e){return this.rotateOnAxis(IE,e)}translateOnAxis(e,t){return OE.copy(e).applyQuaternion(this.quaternion),this.position.add(OE.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(NE,e)}translateY(e){return this.translateOnAxis(LE,e)}translateZ(e){return this.translateOnAxis(IE,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(du.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?vx.copy(e):vx.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),w0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?du.lookAt(w0,vx,this.up):du.lookAt(vx,w0,this.up),this.quaternion.setFromRotationMatrix(du),i&&(du.extractRotation(i.matrixWorld),Zd.setFromRotationMatrix(du),this.quaternion.premultiply(Zd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(kt("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(zE),Qd.child=e,this.dispatchEvent(Qd),Qd.child=null):kt("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Ww),Zb.child=e,this.dispatchEvent(Zb),Zb.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),du.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),du.multiply(e.parent.matrixWorld)),e.applyMatrix4(du),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(zE),Qd.child=e,this.dispatchEvent(Qd),Qd.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const l=this.children[n].getObjectByProperty(e,t);if(l!==void 0)return l}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const i=this.children;for(let r=0,l=i.length;r<l;r++)i[r].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(w0,e,Jw),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(w0,Kw,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const i=this.children;for(let r=0,l=i.length;r<l;r++)i[r].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(i.type="BatchedMesh",i.perObjectFrustumCulled=this.perObjectFrustumCulled,i.sortObjects=this.sortObjects,i.drawRanges=this._drawRanges,i.reservedRanges=this._reservedRanges,i.geometryInfo=this._geometryInfo.map(c=>({...c,boundingBox:c.boundingBox?c.boundingBox.toJSON():void 0,boundingSphere:c.boundingSphere?c.boundingSphere.toJSON():void 0})),i.instanceInfo=this._instanceInfo.map(c=>({...c})),i.availableInstanceIds=this._availableInstanceIds.slice(),i.availableGeometryIds=this._availableGeometryIds.slice(),i.nextIndexStart=this._nextIndexStart,i.nextVertexStart=this._nextVertexStart,i.geometryCount=this._geometryCount,i.maxInstanceCount=this._maxInstanceCount,i.maxVertexCount=this._maxVertexCount,i.maxIndexCount=this._maxIndexCount,i.geometryInitialized=this._geometryInitialized,i.matricesTexture=this._matricesTexture.toJSON(e),i.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(i.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(i.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(i.boundingBox=this.boundingBox.toJSON()));function r(c,d){return c[d.uuid]===void 0&&(c[d.uuid]=d.toJSON(e)),d.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){const d=c.shapes;if(Array.isArray(d))for(let p=0,g=d.length;p<g;p++){const v=d[p];r(e.shapes,v)}else r(e.shapes,d)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const c=[];for(let d=0,p=this.material.length;d<p;d++)c.push(r(e.materials,this.material[d]));i.material=c}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let c=0;c<this.children.length;c++)i.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let c=0;c<this.animations.length;c++){const d=this.animations[c];i.animations.push(r(e.animations,d))}}if(t){const c=l(e.geometries),d=l(e.materials),p=l(e.textures),g=l(e.images),v=l(e.shapes),_=l(e.skeletons),y=l(e.animations),S=l(e.nodes);c.length>0&&(n.geometries=c),d.length>0&&(n.materials=d),p.length>0&&(n.textures=p),g.length>0&&(n.images=g),v.length>0&&(n.shapes=v),_.length>0&&(n.skeletons=_),y.length>0&&(n.animations=y),S.length>0&&(n.nodes=S)}return n.object=i,n;function l(c){const d=[];for(const p in c){const g=c[p];delete g.metadata,d.push(g)}return d}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const i=e.children[n];this.add(i.clone())}return this}}Bn.DEFAULT_UP=new j(0,1,0);Bn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Bn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const wo=new j,pu=new j,Qb=new j,mu=new j,$d=new j,ep=new j,PE=new j,$b=new j,eA=new j,tA=new j,nA=new Cn,iA=new Cn,aA=new Cn;class Ws{constructor(e=new j,t=new j,n=new j){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),wo.subVectors(e,t),i.cross(wo);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){wo.subVectors(i,t),pu.subVectors(n,t),Qb.subVectors(e,t);const l=wo.dot(wo),c=wo.dot(pu),d=wo.dot(Qb),p=pu.dot(pu),g=pu.dot(Qb),v=l*p-c*c;if(v===0)return r.set(0,0,0),null;const _=1/v,y=(p*d-c*g)*_,S=(l*g-c*d)*_;return r.set(1-y-S,S,y)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,mu)===null?!1:mu.x>=0&&mu.y>=0&&mu.x+mu.y<=1}static getInterpolation(e,t,n,i,r,l,c,d){return this.getBarycoord(e,t,n,i,mu)===null?(d.x=0,d.y=0,"z"in d&&(d.z=0),"w"in d&&(d.w=0),null):(d.setScalar(0),d.addScaledVector(r,mu.x),d.addScaledVector(l,mu.y),d.addScaledVector(c,mu.z),d)}static getInterpolatedAttribute(e,t,n,i,r,l){return nA.setScalar(0),iA.setScalar(0),aA.setScalar(0),nA.fromBufferAttribute(e,t),iA.fromBufferAttribute(e,n),aA.fromBufferAttribute(e,i),l.setScalar(0),l.addScaledVector(nA,r.x),l.addScaledVector(iA,r.y),l.addScaledVector(aA,r.z),l}static isFrontFacing(e,t,n,i){return wo.subVectors(n,t),pu.subVectors(e,t),wo.cross(pu).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return wo.subVectors(this.c,this.b),pu.subVectors(this.a,this.b),wo.cross(pu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ws.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ws.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,i,r){return Ws.getInterpolation(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return Ws.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ws.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let l,c;$d.subVectors(i,n),ep.subVectors(r,n),$b.subVectors(e,n);const d=$d.dot($b),p=ep.dot($b);if(d<=0&&p<=0)return t.copy(n);eA.subVectors(e,i);const g=$d.dot(eA),v=ep.dot(eA);if(g>=0&&v<=g)return t.copy(i);const _=d*v-g*p;if(_<=0&&d>=0&&g<=0)return l=d/(d-g),t.copy(n).addScaledVector($d,l);tA.subVectors(e,r);const y=$d.dot(tA),S=ep.dot(tA);if(S>=0&&y<=S)return t.copy(r);const E=y*p-d*S;if(E<=0&&p>=0&&S<=0)return c=p/(p-S),t.copy(n).addScaledVector(ep,c);const C=g*S-y*v;if(C<=0&&v-g>=0&&y-S>=0)return PE.subVectors(r,i),c=(v-g)/(v-g+(y-S)),t.copy(i).addScaledVector(PE,c);const M=1/(C+E+_);return l=E*M,c=_*M,t.copy(n).addScaledVector($d,l).addScaledVector(ep,c)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const i3={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_c={h:0,s:0,l:0},xx={h:0,s:0,l:0};function sA(a,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?a+(e-a)*6*t:t<1/2?e:t<2/3?a+(e-a)*6*(2/3-t):a}class rt{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Un){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Tn.colorSpaceToWorking(this,t),this}setRGB(e,t,n,i=Tn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Tn.colorSpaceToWorking(this,i),this}setHSL(e,t,n,i=Tn.workingColorSpace){if(e=p1(e,1),t=Vt(t,0,1),n=Vt(n,0,1),t===0)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,l=2*n-r;this.r=sA(l,r,e+1/3),this.g=sA(l,r,e),this.b=sA(l,r,e-1/3)}return Tn.colorSpaceToWorking(this,i),this}setStyle(e,t=Un){function n(r){r!==void 0&&parseFloat(r)<1&&ht("Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const l=i[1],c=i[2];switch(l){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(r[4]),this.setRGB(Math.min(255,parseInt(r[1],10))/255,Math.min(255,parseInt(r[2],10))/255,Math.min(255,parseInt(r[3],10))/255,t);if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(r[4]),this.setRGB(Math.min(100,parseInt(r[1],10))/100,Math.min(100,parseInt(r[2],10))/100,Math.min(100,parseInt(r[3],10))/100,t);break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(c))return n(r[4]),this.setHSL(parseFloat(r[1])/360,parseFloat(r[2])/100,parseFloat(r[3])/100,t);break;default:ht("Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=i[1],l=r.length;if(l===3)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,t);if(l===6)return this.setHex(parseInt(r,16),t);ht("Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Un){const n=i3[e.toLowerCase()];return n!==void 0?this.setHex(n,t):ht("Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Mu(e.r),this.g=Mu(e.g),this.b=Mu(e.b),this}copyLinearToSRGB(e){return this.r=bp(e.r),this.g=bp(e.g),this.b=bp(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Un){return Tn.workingToColorSpace(ns.copy(this),e),Math.round(Vt(ns.r*255,0,255))*65536+Math.round(Vt(ns.g*255,0,255))*256+Math.round(Vt(ns.b*255,0,255))}getHexString(e=Un){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Tn.workingColorSpace){Tn.workingToColorSpace(ns.copy(this),t);const n=ns.r,i=ns.g,r=ns.b,l=Math.max(n,i,r),c=Math.min(n,i,r);let d,p;const g=(c+l)/2;if(c===l)d=0,p=0;else{const v=l-c;switch(p=g<=.5?v/(l+c):v/(2-l-c),l){case n:d=(i-r)/v+(i<r?6:0);break;case i:d=(r-n)/v+2;break;case r:d=(n-i)/v+4;break}d/=6}return e.h=d,e.s=p,e.l=g,e}getRGB(e,t=Tn.workingColorSpace){return Tn.workingToColorSpace(ns.copy(this),t),e.r=ns.r,e.g=ns.g,e.b=ns.b,e}getStyle(e=Un){Tn.workingToColorSpace(ns.copy(this),e);const t=ns.r,n=ns.g,i=ns.b;return e!==Un?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(i*255)})`}offsetHSL(e,t,n){return this.getHSL(_c),this.setHSL(_c.h+e,_c.s+t,_c.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(_c),e.getHSL(xx);const n=eg(_c.h,xx.h,t),i=eg(_c.s,xx.s,t),r=eg(_c.l,xx.l,t);return this.setHSL(n,i,r),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,i=this.b,r=e.elements;return this.r=r[0]*t+r[3]*n+r[6]*i,this.g=r[1]*t+r[4]*n+r[7]*i,this.b=r[2]*t+r[5]*n+r[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ns=new rt;rt.NAMES=i3;let jw=0;class Ki extends Cr{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:jw++}),this.uuid=br(),this.name="",this.type="Material",this.blending=vh,this.side=Fo,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=x_,this.blendDst=__,this.blendEquation=Ec,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new rt(0,0,0),this.blendAlpha=0,this.depthFunc=Ic,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=bS,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=oh,this.stencilZFail=oh,this.stencilZPass=oh,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){ht(`Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){ht(`Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==vh&&(n.blending=this.blending),this.side!==Fo&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==x_&&(n.blendSrc=this.blendSrc),this.blendDst!==__&&(n.blendDst=this.blendDst),this.blendEquation!==Ec&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Ic&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==bS&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==oh&&(n.stencilFail=this.stencilFail),this.stencilZFail!==oh&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==oh&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function i(r){const l=[];for(const c in r){const d=r[c];delete d.metadata,l.push(d)}return l}if(t){const r=i(e.textures),l=i(e.images);r.length>0&&(n.textures=r),l.length>0&&(n.images=l)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const i=t.length;n=new Array(i);for(let r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class _r extends Ki{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sr,this.combine=Og,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Au=Zw();function Zw(){const a=new ArrayBuffer(4),e=new Float32Array(a),t=new Uint32Array(a),n=new Uint32Array(512),i=new Uint32Array(512);for(let d=0;d<256;++d){const p=d-127;p<-27?(n[d]=0,n[d|256]=32768,i[d]=24,i[d|256]=24):p<-14?(n[d]=1024>>-p-14,n[d|256]=1024>>-p-14|32768,i[d]=-p-1,i[d|256]=-p-1):p<=15?(n[d]=p+15<<10,n[d|256]=p+15<<10|32768,i[d]=13,i[d|256]=13):p<128?(n[d]=31744,n[d|256]=64512,i[d]=24,i[d|256]=24):(n[d]=31744,n[d|256]=64512,i[d]=13,i[d|256]=13)}const r=new Uint32Array(2048),l=new Uint32Array(64),c=new Uint32Array(64);for(let d=1;d<1024;++d){let p=d<<13,g=0;for(;(p&8388608)===0;)p<<=1,g-=8388608;p&=-8388609,g+=947912704,r[d]=p|g}for(let d=1024;d<2048;++d)r[d]=939524096+(d-1024<<13);for(let d=1;d<31;++d)l[d]=d<<23;l[31]=1199570944,l[32]=2147483648;for(let d=33;d<63;++d)l[d]=2147483648+(d-32<<23);l[63]=3347054592;for(let d=1;d<64;++d)d!==32&&(c[d]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:i,mantissaTable:r,exponentTable:l,offsetTable:c}}function Ks(a){Math.abs(a)>65504&&ht("DataUtils.toHalfFloat(): Value out of range."),a=Vt(a,-65504,65504),Au.floatView[0]=a;const e=Au.uint32View[0],t=e>>23&511;return Au.baseTable[t]+((e&8388607)>>Au.shiftTable[t])}function k0(a){const e=a>>10;return Au.uint32View[0]=Au.mantissaTable[Au.offsetTable[e]+(a&1023)]+Au.exponentTable[e],Au.floatView[0]}class Qw{static toHalfFloat(e){return Ks(e)}static fromHalfFloat(e){return k0(e)}}const ia=new j,_x=new De;let $w=0;class Dn{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:$w++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=gg,this.updateRanges=[],this.gpuType=Is,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)_x.fromBufferAttribute(this,t),_x.applyMatrix3(e),this.setXY(t,_x.x,_x.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)ia.fromBufferAttribute(this,t),ia.applyMatrix3(e),this.setXYZ(t,ia.x,ia.y,ia.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)ia.fromBufferAttribute(this,t),ia.applyMatrix4(e),this.setXYZ(t,ia.x,ia.y,ia.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ia.fromBufferAttribute(this,t),ia.applyNormalMatrix(e),this.setXYZ(t,ia.x,ia.y,ia.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ia.fromBufferAttribute(this,t),ia.transformDirection(e),this.setXYZ(t,ia.x,ia.y,ia.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Os(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=en(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Os(t,this.array)),t}setX(e,t){return this.normalized&&(t=en(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Os(t,this.array)),t}setY(e,t){return this.normalized&&(t=en(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Os(t,this.array)),t}setZ(e,t){return this.normalized&&(t=en(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Os(t,this.array)),t}setW(e,t){return this.normalized&&(t=en(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=en(t,this.array),n=en(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=en(t,this.array),n=en(n,this.array),i=en(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=en(t,this.array),n=en(n,this.array),i=en(i,this.array),r=en(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==gg&&(e.usage=this.usage),e}}class eU extends Dn{constructor(e,t,n){super(new Int8Array(e),t,n)}}class tU extends Dn{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class nU extends Dn{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class iU extends Dn{constructor(e,t,n){super(new Int16Array(e),t,n)}}class g1 extends Dn{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class aU extends Dn{constructor(e,t,n){super(new Int32Array(e),t,n)}}class v1 extends Dn{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class sU extends Dn{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=k0(this.array[e*this.itemSize]);return this.normalized&&(t=Os(t,this.array)),t}setX(e,t){return this.normalized&&(t=en(t,this.array)),this.array[e*this.itemSize]=Ks(t),this}getY(e){let t=k0(this.array[e*this.itemSize+1]);return this.normalized&&(t=Os(t,this.array)),t}setY(e,t){return this.normalized&&(t=en(t,this.array)),this.array[e*this.itemSize+1]=Ks(t),this}getZ(e){let t=k0(this.array[e*this.itemSize+2]);return this.normalized&&(t=Os(t,this.array)),t}setZ(e,t){return this.normalized&&(t=en(t,this.array)),this.array[e*this.itemSize+2]=Ks(t),this}getW(e){let t=k0(this.array[e*this.itemSize+3]);return this.normalized&&(t=Os(t,this.array)),t}setW(e,t){return this.normalized&&(t=en(t,this.array)),this.array[e*this.itemSize+3]=Ks(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=en(t,this.array),n=en(n,this.array)),this.array[e+0]=Ks(t),this.array[e+1]=Ks(n),this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=en(t,this.array),n=en(n,this.array),i=en(i,this.array)),this.array[e+0]=Ks(t),this.array[e+1]=Ks(n),this.array[e+2]=Ks(i),this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=en(t,this.array),n=en(n,this.array),i=en(i,this.array),r=en(r,this.array)),this.array[e+0]=Ks(t),this.array[e+1]=Ks(n),this.array[e+2]=Ks(i),this.array[e+3]=Ks(r),this}}class At extends Dn{constructor(e,t,n){super(new Float32Array(e),t,n)}}let rU=0;const Kr=new zt,rA=new Bn,tp=new j,mr=new Ga,U0=new Ga,Ra=new j;class qt extends Cr{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:rU++}),this.uuid=br(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new($2(e)?v1:g1)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const r=new Qt().getNormalMatrix(e);n.applyNormalMatrix(r),n.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Kr.makeRotationFromQuaternion(e),this.applyMatrix4(Kr),this}rotateX(e){return Kr.makeRotationX(e),this.applyMatrix4(Kr),this}rotateY(e){return Kr.makeRotationY(e),this.applyMatrix4(Kr),this}rotateZ(e){return Kr.makeRotationZ(e),this.applyMatrix4(Kr),this}translate(e,t,n){return Kr.makeTranslation(e,t,n),this.applyMatrix4(Kr),this}scale(e,t,n){return Kr.makeScale(e,t,n),this.applyMatrix4(Kr),this}lookAt(e){return rA.lookAt(e),rA.updateMatrix(),this.applyMatrix4(rA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(tp).negate(),this.translate(tp.x,tp.y,tp.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let i=0,r=e.length;i<r;i++){const l=e[i];n.push(l.x,l.y,l.z||0)}this.setAttribute("position",new At(n,3))}else{const n=Math.min(e.length,t.count);for(let i=0;i<n;i++){const r=e[i];t.setXYZ(i,r.x,r.y,r.z||0)}e.length>t.count&&ht("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ga);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){kt("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const r=t[n];mr.setFromBufferAttribute(r),this.morphTargetsRelative?(Ra.addVectors(this.boundingBox.min,mr.min),this.boundingBox.expandByPoint(Ra),Ra.addVectors(this.boundingBox.max,mr.max),this.boundingBox.expandByPoint(Ra)):(this.boundingBox.expandByPoint(mr.min),this.boundingBox.expandByPoint(mr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&kt('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new wa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){kt("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new j,1/0);return}if(e){const n=this.boundingSphere.center;if(mr.setFromBufferAttribute(e),t)for(let r=0,l=t.length;r<l;r++){const c=t[r];U0.setFromBufferAttribute(c),this.morphTargetsRelative?(Ra.addVectors(mr.min,U0.min),mr.expandByPoint(Ra),Ra.addVectors(mr.max,U0.max),mr.expandByPoint(Ra)):(mr.expandByPoint(U0.min),mr.expandByPoint(U0.max))}mr.getCenter(n);let i=0;for(let r=0,l=e.count;r<l;r++)Ra.fromBufferAttribute(e,r),i=Math.max(i,n.distanceToSquared(Ra));if(t)for(let r=0,l=t.length;r<l;r++){const c=t[r],d=this.morphTargetsRelative;for(let p=0,g=c.count;p<g;p++)Ra.fromBufferAttribute(c,p),d&&(tp.fromBufferAttribute(e,p),Ra.add(tp)),i=Math.max(i,n.distanceToSquared(Ra))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&kt('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){kt("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,i=t.normal,r=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Dn(new Float32Array(4*n.count),4));const l=this.getAttribute("tangent"),c=[],d=[];for(let G=0;G<n.count;G++)c[G]=new j,d[G]=new j;const p=new j,g=new j,v=new j,_=new De,y=new De,S=new De,E=new j,C=new j;function M(G,L,I){p.fromBufferAttribute(n,G),g.fromBufferAttribute(n,L),v.fromBufferAttribute(n,I),_.fromBufferAttribute(r,G),y.fromBufferAttribute(r,L),S.fromBufferAttribute(r,I),g.sub(p),v.sub(p),y.sub(_),S.sub(_);const Y=1/(y.x*S.y-S.x*y.y);isFinite(Y)&&(E.copy(g).multiplyScalar(S.y).addScaledVector(v,-y.y).multiplyScalar(Y),C.copy(v).multiplyScalar(y.x).addScaledVector(g,-S.x).multiplyScalar(Y),c[G].add(E),c[L].add(E),c[I].add(E),d[G].add(C),d[L].add(C),d[I].add(C))}let B=this.groups;B.length===0&&(B=[{start:0,count:e.count}]);for(let G=0,L=B.length;G<L;++G){const I=B[G],Y=I.start,ee=I.count;for(let te=Y,le=Y+ee;te<le;te+=3)M(e.getX(te+0),e.getX(te+1),e.getX(te+2))}const D=new j,w=new j,z=new j,O=new j;function P(G){z.fromBufferAttribute(i,G),O.copy(z);const L=c[G];D.copy(L),D.sub(z.multiplyScalar(z.dot(L))).normalize(),w.crossVectors(O,L);const Y=w.dot(d[G])<0?-1:1;l.setXYZW(G,D.x,D.y,D.z,Y)}for(let G=0,L=B.length;G<L;++G){const I=B[G],Y=I.start,ee=I.count;for(let te=Y,le=Y+ee;te<le;te+=3)P(e.getX(te+0)),P(e.getX(te+1)),P(e.getX(te+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new Dn(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let _=0,y=n.count;_<y;_++)n.setXYZ(_,0,0,0);const i=new j,r=new j,l=new j,c=new j,d=new j,p=new j,g=new j,v=new j;if(e)for(let _=0,y=e.count;_<y;_+=3){const S=e.getX(_+0),E=e.getX(_+1),C=e.getX(_+2);i.fromBufferAttribute(t,S),r.fromBufferAttribute(t,E),l.fromBufferAttribute(t,C),g.subVectors(l,r),v.subVectors(i,r),g.cross(v),c.fromBufferAttribute(n,S),d.fromBufferAttribute(n,E),p.fromBufferAttribute(n,C),c.add(g),d.add(g),p.add(g),n.setXYZ(S,c.x,c.y,c.z),n.setXYZ(E,d.x,d.y,d.z),n.setXYZ(C,p.x,p.y,p.z)}else for(let _=0,y=t.count;_<y;_+=3)i.fromBufferAttribute(t,_+0),r.fromBufferAttribute(t,_+1),l.fromBufferAttribute(t,_+2),g.subVectors(l,r),v.subVectors(i,r),g.cross(v),n.setXYZ(_+0,g.x,g.y,g.z),n.setXYZ(_+1,g.x,g.y,g.z),n.setXYZ(_+2,g.x,g.y,g.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ra.fromBufferAttribute(e,t),Ra.normalize(),e.setXYZ(t,Ra.x,Ra.y,Ra.z)}toNonIndexed(){function e(c,d){const p=c.array,g=c.itemSize,v=c.normalized,_=new p.constructor(d.length*g);let y=0,S=0;for(let E=0,C=d.length;E<C;E++){c.isInterleavedBufferAttribute?y=d[E]*c.data.stride+c.offset:y=d[E]*g;for(let M=0;M<g;M++)_[S++]=p[y++]}return new Dn(_,g,v)}if(this.index===null)return ht("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new qt,n=this.index.array,i=this.attributes;for(const c in i){const d=i[c],p=e(d,n);t.setAttribute(c,p)}const r=this.morphAttributes;for(const c in r){const d=[],p=r[c];for(let g=0,v=p.length;g<v;g++){const _=p[g],y=e(_,n);d.push(y)}t.morphAttributes[c]=d}t.morphTargetsRelative=this.morphTargetsRelative;const l=this.groups;for(let c=0,d=l.length;c<d;c++){const p=l[c];t.addGroup(p.start,p.count,p.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const d=this.parameters;for(const p in d)d[p]!==void 0&&(e[p]=d[p]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const d in n){const p=n[d];e.data.attributes[d]=p.toJSON(e.data)}const i={};let r=!1;for(const d in this.morphAttributes){const p=this.morphAttributes[d],g=[];for(let v=0,_=p.length;v<_;v++){const y=p[v];g.push(y.toJSON(e.data))}g.length>0&&(i[d]=g,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const l=this.groups;l.length>0&&(e.data.groups=JSON.parse(JSON.stringify(l)));const c=this.boundingSphere;return c!==null&&(e.data.boundingSphere=c.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const i=e.attributes;for(const p in i){const g=i[p];this.setAttribute(p,g.clone(t))}const r=e.morphAttributes;for(const p in r){const g=[],v=r[p];for(let _=0,y=v.length;_<y;_++)g.push(v[_].clone(t));this.morphAttributes[p]=g}this.morphTargetsRelative=e.morphTargetsRelative;const l=e.groups;for(let p=0,g=l.length;p<g;p++){const v=l[p];this.addGroup(v.start,v.count,v.materialIndex)}const c=e.boundingBox;c!==null&&(this.boundingBox=c.clone());const d=e.boundingSphere;return d!==null&&(this.boundingSphere=d.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const FE=new zt,kf=new Lh,yx=new wa,HE=new j,bx=new j,Ax=new j,Sx=new j,oA=new j,Mx=new j,GE=new j,Ex=new j;class Wi extends Bn{constructor(e=new qt,t=new _r){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,l=i.length;r<l;r++){const c=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=r}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,l=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const c=this.morphTargetInfluences;if(r&&c){Mx.set(0,0,0);for(let d=0,p=r.length;d<p;d++){const g=c[d],v=r[d];g!==0&&(oA.fromBufferAttribute(v,e),l?Mx.addScaledVector(oA,g):Mx.addScaledVector(oA.sub(t),g))}t.add(Mx)}return t}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;i!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),yx.copy(n.boundingSphere),yx.applyMatrix4(r),kf.copy(e.ray).recast(e.near),!(yx.containsPoint(kf.origin)===!1&&(kf.intersectSphere(yx,HE)===null||kf.origin.distanceToSquared(HE)>(e.far-e.near)**2))&&(FE.copy(r).invert(),kf.copy(e.ray).applyMatrix4(FE),!(n.boundingBox!==null&&kf.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,kf)))}_computeIntersections(e,t,n){let i;const r=this.geometry,l=this.material,c=r.index,d=r.attributes.position,p=r.attributes.uv,g=r.attributes.uv1,v=r.attributes.normal,_=r.groups,y=r.drawRange;if(c!==null)if(Array.isArray(l))for(let S=0,E=_.length;S<E;S++){const C=_[S],M=l[C.materialIndex],B=Math.max(C.start,y.start),D=Math.min(c.count,Math.min(C.start+C.count,y.start+y.count));for(let w=B,z=D;w<z;w+=3){const O=c.getX(w),P=c.getX(w+1),G=c.getX(w+2);i=Tx(this,M,e,n,p,g,v,O,P,G),i&&(i.faceIndex=Math.floor(w/3),i.face.materialIndex=C.materialIndex,t.push(i))}}else{const S=Math.max(0,y.start),E=Math.min(c.count,y.start+y.count);for(let C=S,M=E;C<M;C+=3){const B=c.getX(C),D=c.getX(C+1),w=c.getX(C+2);i=Tx(this,l,e,n,p,g,v,B,D,w),i&&(i.faceIndex=Math.floor(C/3),t.push(i))}}else if(d!==void 0)if(Array.isArray(l))for(let S=0,E=_.length;S<E;S++){const C=_[S],M=l[C.materialIndex],B=Math.max(C.start,y.start),D=Math.min(d.count,Math.min(C.start+C.count,y.start+y.count));for(let w=B,z=D;w<z;w+=3){const O=w,P=w+1,G=w+2;i=Tx(this,M,e,n,p,g,v,O,P,G),i&&(i.faceIndex=Math.floor(w/3),i.face.materialIndex=C.materialIndex,t.push(i))}}else{const S=Math.max(0,y.start),E=Math.min(d.count,y.start+y.count);for(let C=S,M=E;C<M;C+=3){const B=C,D=C+1,w=C+2;i=Tx(this,l,e,n,p,g,v,B,D,w),i&&(i.faceIndex=Math.floor(C/3),t.push(i))}}}}function oU(a,e,t,n,i,r,l,c){let d;if(e.side===pa?d=n.intersectTriangle(l,r,i,!0,c):d=n.intersectTriangle(i,r,l,e.side===Fo,c),d===null)return null;Ex.copy(c),Ex.applyMatrix4(a.matrixWorld);const p=t.ray.origin.distanceTo(Ex);return p<t.near||p>t.far?null:{distance:p,point:Ex.clone(),object:a}}function Tx(a,e,t,n,i,r,l,c,d,p){a.getVertexPosition(c,bx),a.getVertexPosition(d,Ax),a.getVertexPosition(p,Sx);const g=oU(a,e,t,n,bx,Ax,Sx,GE);if(g){const v=new j;Ws.getBarycoord(GE,bx,Ax,Sx,v),i&&(g.uv=Ws.getInterpolatedAttribute(i,c,d,p,v,new De)),r&&(g.uv1=Ws.getInterpolatedAttribute(r,c,d,p,v,new De)),l&&(g.normal=Ws.getInterpolatedAttribute(l,c,d,p,v,new j),g.normal.dot(n.direction)>0&&g.normal.multiplyScalar(-1));const _={a:c,b:d,c:p,normal:new j,materialIndex:0};Ws.getNormal(bx,Ax,Sx,_.normal),g.face=_,g.barycoord=v}return g}class Ih extends qt{constructor(e=1,t=1,n=1,i=1,r=1,l=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:l};const c=this;i=Math.floor(i),r=Math.floor(r),l=Math.floor(l);const d=[],p=[],g=[],v=[];let _=0,y=0;S("z","y","x",-1,-1,n,t,e,l,r,0),S("z","y","x",1,-1,n,t,-e,l,r,1),S("x","z","y",1,1,e,n,t,i,l,2),S("x","z","y",1,-1,e,n,-t,i,l,3),S("x","y","z",1,-1,e,t,n,i,r,4),S("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(d),this.setAttribute("position",new At(p,3)),this.setAttribute("normal",new At(g,3)),this.setAttribute("uv",new At(v,2));function S(E,C,M,B,D,w,z,O,P,G,L){const I=w/P,Y=z/G,ee=w/2,te=z/2,le=O/2,re=P+1,F=G+1;let J=0,Z=0;const oe=new j;for(let pe=0;pe<F;pe++){const q=pe*Y-te;for(let se=0;se<re;se++){const Ce=se*I-ee;oe[E]=Ce*B,oe[C]=q*D,oe[M]=le,p.push(oe.x,oe.y,oe.z),oe[E]=0,oe[C]=0,oe[M]=O>0?1:-1,g.push(oe.x,oe.y,oe.z),v.push(se/P),v.push(1-pe/G),J+=1}}for(let pe=0;pe<G;pe++)for(let q=0;q<P;q++){const se=_+q+re*pe,Ce=_+q+re*(pe+1),Ee=_+(q+1)+re*(pe+1),Ye=_+(q+1)+re*pe;d.push(se,Ce,Ye),d.push(Ce,Ee,Ye),Z+=6}c.addGroup(y,Z,L),y+=Z,_+=J}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ih(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Pp(a){const e={};for(const t in a){e[t]={};for(const n in a[t]){const i=a[t][n];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(ht("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=i.clone():Array.isArray(i)?e[t][n]=i.slice():e[t][n]=i}}return e}function Bs(a){const e={};for(let t=0;t<a.length;t++){const n=Pp(a[t]);for(const i in n)e[i]=n[i]}return e}function lU(a){const e=[];for(let t=0;t<a.length;t++)e.push(a[t].clone());return e}function a3(a){const e=a.getRenderTarget();return e===null?a.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Tn.workingColorSpace}const s3={clone:Pp,merge:Bs};var uU=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,cU=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ji extends Ki{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=uU,this.fragmentShader=cU,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Pp(e.uniforms),this.uniformsGroups=lU(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const l=this.uniforms[i].value;l&&l.isTexture?t.uniforms[i]={type:"t",value:l.toJSON(e).uuid}:l&&l.isColor?t.uniforms[i]={type:"c",value:l.getHex()}:l&&l.isVector2?t.uniforms[i]={type:"v2",value:l.toArray()}:l&&l.isVector3?t.uniforms[i]={type:"v3",value:l.toArray()}:l&&l.isVector4?t.uniforms[i]={type:"v4",value:l.toArray()}:l&&l.isMatrix3?t.uniforms[i]={type:"m3",value:l.toArray()}:l&&l.isMatrix4?t.uniforms[i]={type:"m4",value:l.toArray()}:t.uniforms[i]={value:l}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const i in this.extensions)this.extensions[i]===!0&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Ey extends Bn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new zt,this.projectionMatrix=new zt,this.projectionMatrixInverse=new zt,this.coordinateSystem=xr,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const yc=new j,VE=new De,XE=new De;class _i extends Ey{constructor(e=50,t=1,n=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=Ip*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(xh*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return Ip*2*Math.atan(Math.tan(xh*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){yc.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(yc.x,yc.y).multiplyScalar(-e/yc.z),yc.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(yc.x,yc.y).multiplyScalar(-e/yc.z)}getViewSize(e,t){return this.getViewBounds(e,VE,XE),t.subVectors(XE,VE)}setViewOffset(e,t,n,i,r,l){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(xh*.5*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const l=this.view;if(this.view!==null&&this.view.enabled){const d=l.fullWidth,p=l.fullHeight;r+=l.offsetX*i/d,t-=l.offsetY*n/p,i*=l.width/d,n*=l.height/p}const c=this.filmOffset;c!==0&&(r+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const np=-90,ip=1;class r3 extends Bn{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const i=new _i(np,ip,e,t);i.layers=this.layers,this.add(i);const r=new _i(np,ip,e,t);r.layers=this.layers,this.add(r);const l=new _i(np,ip,e,t);l.layers=this.layers,this.add(l);const c=new _i(np,ip,e,t);c.layers=this.layers,this.add(c);const d=new _i(np,ip,e,t);d.layers=this.layers,this.add(d);const p=new _i(np,ip,e,t);p.layers=this.layers,this.add(p)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,i,r,l,c,d]=t;for(const p of t)this.remove(p);if(e===xr)n.up.set(0,1,0),n.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),r.up.set(0,0,-1),r.lookAt(0,1,0),l.up.set(0,0,1),l.lookAt(0,-1,0),c.up.set(0,1,0),c.lookAt(0,0,1),d.up.set(0,1,0),d.lookAt(0,0,-1);else if(e===Np)n.up.set(0,-1,0),n.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),r.up.set(0,0,1),r.lookAt(0,1,0),l.up.set(0,0,-1),l.lookAt(0,-1,0),c.up.set(0,-1,0),c.lookAt(0,0,1),d.up.set(0,-1,0),d.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const p of t)this.add(p),p.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:i}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,l,c,d,p,g]=this.children,v=e.getRenderTarget(),_=e.getActiveCubeFace(),y=e.getActiveMipmapLevel(),S=e.xr.enabled;e.xr.enabled=!1;const E=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,i),e.render(t,r),e.setRenderTarget(n,1,i),e.render(t,l),e.setRenderTarget(n,2,i),e.render(t,c),e.setRenderTarget(n,3,i),e.render(t,d),e.setRenderTarget(n,4,i),e.render(t,p),n.texture.generateMipmaps=E,e.setRenderTarget(n,5,i),e.render(t,g),e.setRenderTarget(v,_,y),e.xr.enabled=S,n.texture.needsPMREMUpdate=!0}}class Lg extends ei{constructor(e=[],t=Tu,n,i,r,l,c,d,p,g){super(e,t,n,i,r,l,c,d,p,g),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class o3 extends Pi{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new Lg(i),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Ih(5,5,5),r=new ji({name:"CubemapFromEquirect",uniforms:Pp(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:pa,blending:Ba});r.uniforms.tEquirect.value=t;const l=new Wi(i,r),c=t.minFilter;return t.minFilter===Qr&&(t.minFilter=oi),new r3(1,10,this).update(e,l),t.minFilter=c,l.geometry.dispose(),l.material.dispose(),this}clear(e,t=!0,n=!0,i=!0){const r=e.getRenderTarget();for(let l=0;l<6;l++)e.setRenderTarget(this,l),e.clear(t,n,i);e.setRenderTarget(r)}}class Su extends Bn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const fU={type:"move"};class h_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Su,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Su,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new j,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new j),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Su,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new j,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new j),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,l=null;const c=this._targetRay,d=this._grip,p=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(p&&e.hand){l=!0;for(const E of e.hand.values()){const C=t.getJointPose(E,n),M=this._getHandJoint(p,E);C!==null&&(M.matrix.fromArray(C.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=C.radius),M.visible=C!==null}const g=p.joints["index-finger-tip"],v=p.joints["thumb-tip"],_=g.position.distanceTo(v.position),y=.02,S=.005;p.inputState.pinching&&_>y+S?(p.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!p.inputState.pinching&&_<=y-S&&(p.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else d!==null&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),r!==null&&(d.matrix.fromArray(r.transform.matrix),d.matrix.decompose(d.position,d.rotation,d.scale),d.matrixWorldNeedsUpdate=!0,r.linearVelocity?(d.hasLinearVelocity=!0,d.linearVelocity.copy(r.linearVelocity)):d.hasLinearVelocity=!1,r.angularVelocity?(d.hasAngularVelocity=!0,d.angularVelocity.copy(r.angularVelocity)):d.hasAngularVelocity=!1));c!==null&&(i=t.getPose(e.targetRaySpace,n),i===null&&r!==null&&(i=r),i!==null&&(c.matrix.fromArray(i.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,i.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(i.linearVelocity)):c.hasLinearVelocity=!1,i.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(i.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(fU)))}return c!==null&&(c.visible=i!==null),d!==null&&(d.visible=r!==null),p!==null&&(p.visible=l!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Su;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Ty{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new rt(e),this.density=t}clone(){return new Ty(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Cy{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new rt(e),this.near=t,this.far=n}clone(){return new Cy(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class _g extends Bn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Sr,this.environmentIntensity=1,this.environmentRotation=new Sr,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Ig{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=gg,this.updateRanges=[],this.version=0,this.uuid=br()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=br()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=br()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Rs=new j;class Hc{constructor(e,t,n,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Rs.fromBufferAttribute(this,t),Rs.applyMatrix4(e),this.setXYZ(t,Rs.x,Rs.y,Rs.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Rs.fromBufferAttribute(this,t),Rs.applyNormalMatrix(e),this.setXYZ(t,Rs.x,Rs.y,Rs.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Rs.fromBufferAttribute(this,t),Rs.transformDirection(e),this.setXYZ(t,Rs.x,Rs.y,Rs.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Os(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=en(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=en(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=en(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=en(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=en(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Os(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Os(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Os(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Os(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=en(t,this.array),n=en(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=en(t,this.array),n=en(n,this.array),i=en(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=en(t,this.array),n=en(n,this.array),i=en(i,this.array),r=en(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(e===void 0){xg("InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return new Dn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Hc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){xg("InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const i=n*this.data.stride+this.offset;for(let r=0;r<this.itemSize;r++)t.push(this.data.array[i+r])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class x1 extends Ki{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new rt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let ap;const O0=new j,sp=new j,rp=new j,op=new De,N0=new De,l3=new zt,Cx=new j,L0=new j,Rx=new j,kE=new De,lA=new De,YE=new De;class u3 extends Bn{constructor(e=new x1){if(super(),this.isSprite=!0,this.type="Sprite",ap===void 0){ap=new qt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new Ig(t,5);ap.setIndex([0,1,2,0,2,3]),ap.setAttribute("position",new Hc(n,3,0,!1)),ap.setAttribute("uv",new Hc(n,2,3,!1))}this.geometry=ap,this.material=e,this.center=new De(.5,.5),this.count=1}raycast(e,t){e.camera===null&&kt('Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),sp.setFromMatrixScale(this.matrixWorld),l3.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),rp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&sp.multiplyScalar(-rp.z);const n=this.material.rotation;let i,r;n!==0&&(r=Math.cos(n),i=Math.sin(n));const l=this.center;Bx(Cx.set(-.5,-.5,0),rp,l,sp,i,r),Bx(L0.set(.5,-.5,0),rp,l,sp,i,r),Bx(Rx.set(.5,.5,0),rp,l,sp,i,r),kE.set(0,0),lA.set(1,0),YE.set(1,1);let c=e.ray.intersectTriangle(Cx,L0,Rx,!1,O0);if(c===null&&(Bx(L0.set(-.5,.5,0),rp,l,sp,i,r),lA.set(0,1),c=e.ray.intersectTriangle(Cx,Rx,L0,!1,O0),c===null))return;const d=e.ray.origin.distanceTo(O0);d<e.near||d>e.far||t.push({distance:d,point:O0.clone(),uv:Ws.getInterpolation(O0,Cx,L0,Rx,kE,lA,YE,new De),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Bx(a,e,t,n,i,r){op.subVectors(a,t).addScalar(.5).multiply(n),i!==void 0?(N0.x=r*op.x-i*op.y,N0.y=i*op.x+r*op.y):N0.copy(op),a.copy(e),a.x+=N0.x,a.y+=N0.y,a.applyMatrix4(l3)}const Dx=new j,qE=new j;class c3 extends Bn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const r=t[n];this.addLevel(r.object.clone(),r.distance,r.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const i=this.levels;let r;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const i=t.splice(n,1);return this.remove(i[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){Dx.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Dx);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Dx.setFromMatrixPosition(e.matrixWorld),qE.setFromMatrixPosition(this.matrixWorld);const n=Dx.distanceTo(qE)/e.zoom;t[0].object.visible=!0;let i,r;for(i=1,r=t.length;i<r;i++){let l=t[i].distance;if(t[i].object.visible&&(l-=l*t[i].hysteresis),n>=l)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const l=n[i];t.object.levels.push({object:l.object.uuid,distance:l.distance,hysteresis:l.hysteresis})}return t}}const JE=new j,KE=new Cn,WE=new Cn,hU=new j,jE=new zt,wx=new j,uA=new wa,ZE=new zt,cA=new Lh;class _1 extends Wi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=yS,this.bindMatrix=new zt,this.bindMatrixInverse=new zt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Ga),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,wx),this.boundingBox.expandByPoint(wx)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new wa),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,wx),this.boundingSphere.expandByPoint(wx)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,i=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),uA.copy(this.boundingSphere),uA.applyMatrix4(i),e.ray.intersectsSphere(uA)!==!1&&(ZE.copy(i).invert(),cA.copy(e.ray).applyMatrix4(ZE),!(this.boundingBox!==null&&cA.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,cA)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Cn,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===yS?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===H2?this.bindMatrixInverse.copy(this.bindMatrix).invert():ht("SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,i=this.geometry;KE.fromBufferAttribute(i.attributes.skinIndex,e),WE.fromBufferAttribute(i.attributes.skinWeight,e),JE.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const l=WE.getComponent(r);if(l!==0){const c=KE.getComponent(r);jE.multiplyMatrices(n.bones[c].matrixWorld,n.boneInverses[c]),t.addScaledVector(hU.copy(JE).applyMatrix4(jE),l)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Ry extends Bn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Po extends ei{constructor(e=null,t=1,n=1,i,r,l,c,d,p=bi,g=bi,v,_){super(null,l,c,d,p,g,i,r,v,_),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const QE=new zt,dU=new zt;class zg{constructor(e=[],t=[]){this.uuid=br(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){ht("Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new zt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new zt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,l=e.length;r<l;r++){const c=e[r]?e[r].matrixWorld:dU;QE.multiplyMatrices(c,t[r]),QE.toArray(n,r*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new zg(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Po(t,e,e,ss,Is);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const r=e.bones[n];let l=t[r];l===void 0&&(ht("Skeleton: No bone found with UUID:",r),l=new Ry),this.bones.push(l),this.boneInverses.push(new zt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++){const l=t[i];e.bones.push(l.uuid);const c=n[i];e.boneInverses.push(c.toArray())}return e}}class Ch extends Dn{constructor(e,t,n,i=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const lp=new zt,$E=new zt,Ux=[],eT=new Ga,pU=new zt,I0=new Wi,z0=new wa;class y1 extends Wi{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Ch(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<n;i++)this.setMatrixAt(i,pU)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Ga),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,lp),eT.copy(e.boundingBox).applyMatrix4(lp),this.boundingBox.union(eT)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new wa),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,lp),z0.copy(e.boundingSphere).applyMatrix4(lp),this.boundingSphere.union(z0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,i=this.morphTexture.source.data.data,r=n.length+1,l=e*r+1;for(let c=0;c<n.length;c++)n[c]=i[l+c]}raycast(e,t){const n=this.matrixWorld,i=this.count;if(I0.geometry=this.geometry,I0.material=this.material,I0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),z0.copy(this.boundingSphere),z0.applyMatrix4(n),e.ray.intersectsSphere(z0)!==!1))for(let r=0;r<i;r++){this.getMatrixAt(r,lp),$E.multiplyMatrices(n,lp),I0.matrixWorld=$E,I0.raycast(e,Ux);for(let l=0,c=Ux.length;l<c;l++){const d=Ux[l];d.instanceId=r,d.object=this,t.push(d)}Ux.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Ch(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,i=n.length+1;this.morphTexture===null&&(this.morphTexture=new Po(new Float32Array(i*this.count),i,this.count,vy,Is));const r=this.morphTexture.source.data.data;let l=0;for(let p=0;p<n.length;p++)l+=n[p];const c=this.geometry.morphTargetsRelative?1:1-l,d=i*e;r[d]=c,r.set(n,d+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const fA=new j,mU=new j,gU=new Qt;class yu{constructor(e=new j(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=fA.subVectors(n,t).cross(mU.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(fA),i=this.normal.dot(n);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||gU.getNormalMatrix(e),i=this.coplanarPoint(fA).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Yf=new wa,vU=new De(.5,.5),Ox=new j;class jp{constructor(e=new yu,t=new yu,n=new yu,i=new yu,r=new yu,l=new yu){this.planes=[e,t,n,i,r,l]}set(e,t,n,i,r,l){const c=this.planes;return c[0].copy(e),c[1].copy(t),c[2].copy(n),c[3].copy(i),c[4].copy(r),c[5].copy(l),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=xr,n=!1){const i=this.planes,r=e.elements,l=r[0],c=r[1],d=r[2],p=r[3],g=r[4],v=r[5],_=r[6],y=r[7],S=r[8],E=r[9],C=r[10],M=r[11],B=r[12],D=r[13],w=r[14],z=r[15];if(i[0].setComponents(p-l,y-g,M-S,z-B).normalize(),i[1].setComponents(p+l,y+g,M+S,z+B).normalize(),i[2].setComponents(p+c,y+v,M+E,z+D).normalize(),i[3].setComponents(p-c,y-v,M-E,z-D).normalize(),n)i[4].setComponents(d,_,C,w).normalize(),i[5].setComponents(p-d,y-_,M-C,z-w).normalize();else if(i[4].setComponents(p-d,y-_,M-C,z-w).normalize(),t===xr)i[5].setComponents(p+d,y+_,M+C,z+w).normalize();else if(t===Np)i[5].setComponents(d,_,C,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Yf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Yf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Yf)}intersectsSprite(e){Yf.center.set(0,0,0);const t=vU.distanceTo(e.center);return Yf.radius=.7071067811865476+t,Yf.applyMatrix4(e.matrixWorld),this.intersectsSphere(Yf)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++)if(t[r].distanceToPoint(n)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(Ox.x=i.normal.x>0?e.max.x:e.min.x,Ox.y=i.normal.y>0?e.max.y:e.min.y,Ox.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Ox)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const Al=new zt,Sl=new jp;class By{constructor(){this.coordinateSystem=xr}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(Al.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Sl.setFromProjectionMatrix(Al,i.coordinateSystem,i.reversedDepth),Sl.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(Al.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Sl.setFromProjectionMatrix(Al,i.coordinateSystem,i.reversedDepth),Sl.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(Al.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Sl.setFromProjectionMatrix(Al,i.coordinateSystem,i.reversedDepth),Sl.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(Al.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Sl.setFromProjectionMatrix(Al,i.coordinateSystem,i.reversedDepth),Sl.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const i=t.cameras[n];if(Al.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),Sl.setFromProjectionMatrix(Al,i.coordinateSystem,i.reversedDepth),Sl.containsPoint(e))return!0}return!1}clone(){return new By}}function hA(a,e){return a-e}function xU(a,e){return a.z-e.z}function _U(a,e){return e.z-a.z}class yU{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,i){const r=this.pool,l=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const c=r[this.index];l.push(c),this.index++,c.start=e,c.count=t,c.z=n,c.index=i}reset(){this.list.length=0,this.index=0}}const Js=new zt,bU=new rt(1,1,1),tT=new jp,AU=new By,Nx=new Ga,qf=new wa,P0=new j,nT=new j,SU=new j,dA=new yU,is=new Wi,Lx=[];function MU(a,e,t=0){const n=e.itemSize;if(a.isInterleavedBufferAttribute||a.array.constructor!==e.array.constructor){const i=a.count;for(let r=0;r<i;r++)for(let l=0;l<n;l++)e.setComponent(r+t,l,a.getComponent(r,l))}else e.array.set(a.array,t*n);e.needsUpdate=!0}function Jf(a,e){if(a.constructor!==e.constructor){const t=Math.min(a.length,e.length);for(let n=0;n<t;n++)e[n]=a[n]}else{const t=Math.min(a.length,e.length);e.set(new a.constructor(a.buffer,0,t))}}class f3 extends Wi{constructor(e,t,n=t*2,i){super(new qt,i),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Po(t,e,e,ss,Is);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Po(t,e,e,Ng,Bl);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Po(t,e,e,ss,Is);n.colorSpace=Tn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,i=this._maxIndexCount;if(this._geometryInitialized===!1){for(const r in e.attributes){const l=e.getAttribute(r),{array:c,itemSize:d,normalized:p}=l,g=new c.constructor(n*d),v=new Dn(g,d,p);t.setAttribute(r,v)}if(e.getIndex()!==null){const r=n>65535?new Uint32Array(i):new Uint16Array(i);t.setIndex(new Dn(r,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const i=e.getAttribute(n),r=t.getAttribute(n);if(i.itemSize!==r.itemSize||i.normalized!==r.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Ga);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,Js),this.getBoundingBoxAt(r,Nx).applyMatrix4(Js),e.union(Nx)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new wa);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,i=t.length;n<i;n++){if(t[n].active===!1)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,Js),this.getBoundingSphereAt(r,qf).applyMatrix4(Js),e.union(qf)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let i=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(hA),i=this._availableInstanceIds.shift(),this._instanceInfo[i]=n):(i=this._instanceInfo.length,this._instanceInfo.push(n));const r=this._matricesTexture;Js.identity().toArray(r.image.data,i*16),r.needsUpdate=!0;const l=this._colorsTexture;return l&&(bU.toArray(l.image.data,i*4),l.needsUpdate=!0),this._visibilityChanged=!0,i}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const i={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},r=this._geometryInfo;i.vertexStart=this._nextVertexStart,i.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const l=e.getIndex();if(l!==null&&(i.indexStart=this._nextIndexStart,i.reservedIndexCount=n===-1?l.count:n),i.indexStart!==-1&&i.indexStart+i.reservedIndexCount>this._maxIndexCount||i.vertexStart+i.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let d;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(hA),d=this._availableGeometryIds.shift(),r[d]=i):(d=this._geometryCount,this._geometryCount++,r.push(i)),this.setGeometryAt(d,e),this._nextIndexStart=i.indexStart+i.reservedIndexCount,this._nextVertexStart=i.vertexStart+i.reservedVertexCount,d}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,i=n.getIndex()!==null,r=n.getIndex(),l=t.getIndex(),c=this._geometryInfo[e];if(i&&l.count>c.reservedIndexCount||t.attributes.position.count>c.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const d=c.vertexStart,p=c.reservedVertexCount;c.vertexCount=t.getAttribute("position").count;for(const g in n.attributes){const v=t.getAttribute(g),_=n.getAttribute(g);MU(v,_,d);const y=v.itemSize;for(let S=v.count,E=p;S<E;S++){const C=d+S;for(let M=0;M<y;M++)_.setComponent(C,M,0)}_.needsUpdate=!0,_.addUpdateRange(d*y,p*y)}if(i){const g=c.indexStart,v=c.reservedIndexCount;c.indexCount=t.getIndex().count;for(let _=0;_<l.count;_++)r.setX(g+_,d+l.getX(_));for(let _=l.count,y=v;_<y;_++)r.setX(g+_,d);r.needsUpdate=!0,r.addUpdateRange(g,c.reservedIndexCount)}return c.start=i?c.indexStart:c.vertexStart,c.count=i?c.indexCount:c.vertexCount,c.boundingBox=null,t.boundingBox!==null&&(c.boundingBox=t.boundingBox.clone()),c.boundingSphere=null,t.boundingSphere!==null&&(c.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let i=0,r=n.length;i<r;i++)n[i].active&&n[i].geometryIndex===e&&this.deleteInstance(i);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,i=n.map((l,c)=>c).sort((l,c)=>n[l].vertexStart-n[c].vertexStart),r=this.geometry;for(let l=0,c=n.length;l<c;l++){const d=i[l],p=n[d];if(p.active!==!1){if(r.index!==null){if(p.indexStart!==t){const{indexStart:g,vertexStart:v,reservedIndexCount:_}=p,y=r.index,S=y.array,E=e-v;for(let C=g;C<g+_;C++)S[C]=S[C]+E;y.array.copyWithin(t,g,g+_),y.addUpdateRange(t,_),p.indexStart=t}t+=p.reservedIndexCount}if(p.vertexStart!==e){const{vertexStart:g,reservedVertexCount:v}=p,_=r.attributes;for(const y in _){const S=_[y],{array:E,itemSize:C}=S;E.copyWithin(e*C,g*C,(g+v)*C),S.addUpdateRange(e*C,v*C)}p.vertexStart=e}e+=p.reservedVertexCount,p.start=r.index?p.indexStart:p.vertexStart,this._nextIndexStart=r.index?p.indexStart+p.reservedIndexCount:0,this._nextVertexStart=p.vertexStart+p.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingBox===null){const r=new Ga,l=n.index,c=n.attributes.position;for(let d=i.start,p=i.start+i.count;d<p;d++){let g=d;l&&(g=l.getX(g)),r.expandByPoint(P0.fromBufferAttribute(c,g))}i.boundingBox=r}return t.copy(i.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,i=this._geometryInfo[e];if(i.boundingSphere===null){const r=new wa;this.getBoundingBoxAt(e,Nx),Nx.getCenter(r.center);const l=n.index,c=n.attributes.position;let d=0;for(let p=i.start,g=i.start+i.count;p<g;p++){let v=p;l&&(v=l.getX(v)),P0.fromBufferAttribute(c,v),d=Math.max(d,r.center.distanceToSquared(P0))}r.radius=Math.sqrt(d),i.boundingSphere=r}return t.copy(i.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,i=this._matricesTexture.image.data;return t.toArray(i,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(hA);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const i=new Int32Array(e),r=new Int32Array(e);Jf(this._multiDrawCounts,i),Jf(this._multiDrawStarts,r),this._multiDrawCounts=i,this._multiDrawStarts=r,this._maxInstanceCount=e;const l=this._indirectTexture,c=this._matricesTexture,d=this._colorsTexture;l.dispose(),this._initIndirectTexture(),Jf(l.image.data,this._indirectTexture.image.data),c.dispose(),this._initMatricesTexture(),Jf(c.image.data,this._matricesTexture.image.data),d&&(d.dispose(),this._initColorsTexture(),Jf(d.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(c=>c.active);if(Math.max(...n.map(c=>c.vertexStart+c.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(d=>d.indexStart+d.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const r=this.geometry;r.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new qt,this._initializeGeometry(r));const l=this.geometry;r.index&&Jf(r.index.array,l.index.array);for(const c in r.attributes)Jf(r.attributes[c].array,l.attributes[c].array)}raycast(e,t){const n=this._instanceInfo,i=this._geometryInfo,r=this.matrixWorld,l=this.geometry;is.material=this.material,is.geometry.index=l.index,is.geometry.attributes=l.attributes,is.geometry.boundingBox===null&&(is.geometry.boundingBox=new Ga),is.geometry.boundingSphere===null&&(is.geometry.boundingSphere=new wa);for(let c=0,d=n.length;c<d;c++){if(!n[c].visible||!n[c].active)continue;const p=n[c].geometryIndex,g=i[p];is.geometry.setDrawRange(g.start,g.count),this.getMatrixAt(c,is.matrixWorld).premultiply(r),this.getBoundingBoxAt(p,is.geometry.boundingBox),this.getBoundingSphereAt(p,is.geometry.boundingSphere),is.raycast(e,Lx);for(let v=0,_=Lx.length;v<_;v++){const y=Lx[v];y.object=this,y.batchId=c,t.push(y)}Lx.length=0}is.material=null,is.geometry.index=null,is.geometry.attributes={},is.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,i,r){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const l=i.getIndex(),c=l===null?1:l.array.BYTES_PER_ELEMENT,d=this._instanceInfo,p=this._multiDrawStarts,g=this._multiDrawCounts,v=this._geometryInfo,_=this.perObjectFrustumCulled,y=this._indirectTexture,S=y.image.data,E=n.isArrayCamera?AU:tT;_&&!n.isArrayCamera&&(Js.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),tT.setFromProjectionMatrix(Js,n.coordinateSystem,n.reversedDepth));let C=0;if(this.sortObjects){Js.copy(this.matrixWorld).invert(),P0.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Js),nT.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Js);for(let D=0,w=d.length;D<w;D++)if(d[D].visible&&d[D].active){const z=d[D].geometryIndex;this.getMatrixAt(D,Js),this.getBoundingSphereAt(z,qf).applyMatrix4(Js);let O=!1;if(_&&(O=!E.intersectsSphere(qf,n)),!O){const P=v[z],G=SU.subVectors(qf.center,P0).dot(nT);dA.push(P.start,P.count,G,D)}}const M=dA.list,B=this.customSort;B===null?M.sort(r.transparent?_U:xU):B.call(this,M,n);for(let D=0,w=M.length;D<w;D++){const z=M[D];p[C]=z.start*c,g[C]=z.count,S[C]=z.index,C++}dA.reset()}else for(let M=0,B=d.length;M<B;M++)if(d[M].visible&&d[M].active){const D=d[M].geometryIndex;let w=!1;if(_&&(this.getMatrixAt(M,Js),this.getBoundingSphereAt(D,qf).applyMatrix4(Js),w=!E.intersectsSphere(qf,n)),!w){const z=v[D];p[C]=z.start*c,g[C]=z.count,S[C]=M,C++}}y.needsUpdate=!0,this._multiDrawCount=C,this._visibilityChanged=!1}onBeforeShadow(e,t,n,i,r,l){this.onBeforeRender(e,null,i,r,l)}}class os extends Ki{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new rt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const W_=new j,j_=new j,iT=new zt,F0=new Lh,Ix=new wa,pA=new j,aT=new j;class Cu extends Bn{constructor(e=new qt,t=new os){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let i=1,r=t.count;i<r;i++)W_.fromBufferAttribute(t,i-1),j_.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=W_.distanceTo(j_);e.setAttribute("lineDistance",new At(n,1))}else ht("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Ix.copy(n.boundingSphere),Ix.applyMatrix4(i),Ix.radius+=r,e.ray.intersectsSphere(Ix)===!1)return;iT.copy(i).invert(),F0.copy(e.ray).applyMatrix4(iT);const c=r/((this.scale.x+this.scale.y+this.scale.z)/3),d=c*c,p=this.isLineSegments?2:1,g=n.index,_=n.attributes.position;if(g!==null){const y=Math.max(0,l.start),S=Math.min(g.count,l.start+l.count);for(let E=y,C=S-1;E<C;E+=p){const M=g.getX(E),B=g.getX(E+1),D=zx(this,e,F0,d,M,B,E);D&&t.push(D)}if(this.isLineLoop){const E=g.getX(S-1),C=g.getX(y),M=zx(this,e,F0,d,E,C,S-1);M&&t.push(M)}}else{const y=Math.max(0,l.start),S=Math.min(_.count,l.start+l.count);for(let E=y,C=S-1;E<C;E+=p){const M=zx(this,e,F0,d,E,E+1,E);M&&t.push(M)}if(this.isLineLoop){const E=zx(this,e,F0,d,S-1,y,S-1);E&&t.push(E)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,l=i.length;r<l;r++){const c=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=r}}}}}function zx(a,e,t,n,i,r,l){const c=a.geometry.attributes.position;if(W_.fromBufferAttribute(c,i),j_.fromBufferAttribute(c,r),t.distanceSqToSegment(W_,j_,pA,aT)>n)return;pA.applyMatrix4(a.matrixWorld);const p=e.ray.origin.distanceTo(pA);if(!(p<e.near||p>e.far))return{distance:p,point:aT.clone().applyMatrix4(a.matrixWorld),index:l,face:null,faceIndex:null,barycoord:null,object:a}}const sT=new j,rT=new j;class Go extends Cu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let i=0,r=t.count;i<r;i+=2)sT.fromBufferAttribute(t,i),rT.fromBufferAttribute(t,i+1),n[i]=i===0?0:n[i-1],n[i+1]=n[i]+sT.distanceTo(rT);e.setAttribute("lineDistance",new At(n,1))}else ht("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class b1 extends Cu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Dy extends Ki{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new rt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const oT=new zt,SS=new Lh,Px=new wa,Fx=new j;class A1 extends Bn{constructor(e=new qt,t=new Dy){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,l=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),Px.copy(n.boundingSphere),Px.applyMatrix4(i),Px.radius+=r,e.ray.intersectsSphere(Px)===!1)return;oT.copy(i).invert(),SS.copy(e.ray).applyMatrix4(oT);const c=r/((this.scale.x+this.scale.y+this.scale.z)/3),d=c*c,p=n.index,v=n.attributes.position;if(p!==null){const _=Math.max(0,l.start),y=Math.min(p.count,l.start+l.count);for(let S=_,E=y;S<E;S++){const C=p.getX(S);Fx.fromBufferAttribute(v,C),lT(Fx,C,d,i,e,t,this)}}else{const _=Math.max(0,l.start),y=Math.min(v.count,l.start+l.count);for(let S=_,E=y;S<E;S++)Fx.fromBufferAttribute(v,S),lT(Fx,S,d,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const i=t[n[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let r=0,l=i.length;r<l;r++){const c=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=r}}}}}function lT(a,e,t,n,i,r,l){const c=SS.distanceSqToPoint(a);if(c<t){const d=new j;SS.closestPointToPoint(a,d),d.applyMatrix4(n);const p=i.ray.origin.distanceTo(d);if(p<i.near||p>i.far)return;r.push({distance:p,distanceToRay:Math.sqrt(c),point:d,index:e,face:null,faceIndex:null,barycoord:null,object:l})}}class h3 extends ei{constructor(e,t,n,i,r=oi,l=oi,c,d,p){super(e,t,n,i,r,l,c,d,p),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const g=this;function v(){g.needsUpdate=!0,g._requestVideoFrameCallbackId=e.requestVideoFrameCallback(v)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(v))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&(this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),this._requestVideoFrameCallbackId=0),super.dispose()}}class EU extends h3{constructor(e,t,n,i,r,l,c,d){super({},e,t,n,i,r,l,c,d),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class TU extends ei{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=bi,this.minFilter=bi,this.generateMipmaps=!1,this.needsUpdate=!0}}class wy extends ei{constructor(e,t,n,i,r,l,c,d,p,g,v,_){super(null,l,c,d,p,g,i,r,v,_),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class CU extends wy{constructor(e,t,n,i,r,l){super(e,t,n,r,l),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Ls,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class RU extends wy{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Tu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class BU extends ei{constructor(e,t,n,i,r,l,c,d,p){super(e,t,n,i,r,l,c,d,p),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Uy extends ei{constructor(e,t,n=Bl,i,r,l,c=bi,d=bi,p,g=wp,v=1){if(g!==wp&&g!==Th)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const _={width:e,height:t,depth:v};super(_,i,r,l,c,d,g,n,p),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Cc(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class S1 extends ei{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class Oy extends qt{constructor(e=1,t=1,n=4,i=8,r=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:i,heightSegments:r},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),i=Math.max(3,Math.floor(i)),r=Math.max(1,Math.floor(r));const l=[],c=[],d=[],p=[],g=t/2,v=Math.PI/2*e,_=t,y=2*v+_,S=n*2+r,E=i+1,C=new j,M=new j;for(let B=0;B<=S;B++){let D=0,w=0,z=0,O=0;if(B<=n){const L=B/n,I=L*Math.PI/2;w=-g-e*Math.cos(I),z=e*Math.sin(I),O=-e*Math.cos(I),D=L*v}else if(B<=n+r){const L=(B-n)/r;w=-g+L*t,z=e,O=0,D=v+L*_}else{const L=(B-n-r)/n,I=L*Math.PI/2;w=g+e*Math.sin(I),z=e*Math.cos(I),O=e*Math.sin(I),D=v+_+L*v}const P=Math.max(0,Math.min(1,D/y));let G=0;B===0?G=.5/i:B===S&&(G=-.5/i);for(let L=0;L<=i;L++){const I=L/i,Y=I*Math.PI*2,ee=Math.sin(Y),te=Math.cos(Y);M.x=-z*te,M.y=w,M.z=z*ee,c.push(M.x,M.y,M.z),C.set(-z*te,O,z*ee),C.normalize(),d.push(C.x,C.y,C.z),p.push(I+G,P)}if(B>0){const L=(B-1)*E;for(let I=0;I<i;I++){const Y=L+I,ee=L+I+1,te=B*E+I,le=B*E+I+1;l.push(Y,ee,te),l.push(ee,le,te)}}}this.setIndex(l),this.setAttribute("position",new At(c,3)),this.setAttribute("normal",new At(d,3)),this.setAttribute("uv",new At(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Oy(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class Ny extends qt{constructor(e=1,t=32,n=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const r=[],l=[],c=[],d=[],p=new j,g=new De;l.push(0,0,0),c.push(0,0,1),d.push(.5,.5);for(let v=0,_=3;v<=t;v++,_+=3){const y=n+v/t*i;p.x=e*Math.cos(y),p.y=e*Math.sin(y),l.push(p.x,p.y,p.z),c.push(0,0,1),g.x=(l[_]/e+1)/2,g.y=(l[_+1]/e+1)/2,d.push(g.x,g.y)}for(let v=1;v<=t;v++)r.push(v,v+1,0);this.setIndex(r),this.setAttribute("position",new At(l,3)),this.setAttribute("normal",new At(c,3)),this.setAttribute("uv",new At(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ny(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Pg extends qt{constructor(e=1,t=1,n=1,i=32,r=1,l=!1,c=0,d=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:l,thetaStart:c,thetaLength:d};const p=this;i=Math.floor(i),r=Math.floor(r);const g=[],v=[],_=[],y=[];let S=0;const E=[],C=n/2;let M=0;B(),l===!1&&(e>0&&D(!0),t>0&&D(!1)),this.setIndex(g),this.setAttribute("position",new At(v,3)),this.setAttribute("normal",new At(_,3)),this.setAttribute("uv",new At(y,2));function B(){const w=new j,z=new j;let O=0;const P=(t-e)/n;for(let G=0;G<=r;G++){const L=[],I=G/r,Y=I*(t-e)+e;for(let ee=0;ee<=i;ee++){const te=ee/i,le=te*d+c,re=Math.sin(le),F=Math.cos(le);z.x=Y*re,z.y=-I*n+C,z.z=Y*F,v.push(z.x,z.y,z.z),w.set(re,P,F).normalize(),_.push(w.x,w.y,w.z),y.push(te,1-I),L.push(S++)}E.push(L)}for(let G=0;G<i;G++)for(let L=0;L<r;L++){const I=E[L][G],Y=E[L+1][G],ee=E[L+1][G+1],te=E[L][G+1];(e>0||L!==0)&&(g.push(I,Y,te),O+=3),(t>0||L!==r-1)&&(g.push(Y,ee,te),O+=3)}p.addGroup(M,O,0),M+=O}function D(w){const z=S,O=new De,P=new j;let G=0;const L=w===!0?e:t,I=w===!0?1:-1;for(let ee=1;ee<=i;ee++)v.push(0,C*I,0),_.push(0,I,0),y.push(.5,.5),S++;const Y=S;for(let ee=0;ee<=i;ee++){const le=ee/i*d+c,re=Math.cos(le),F=Math.sin(le);P.x=L*F,P.y=C*I,P.z=L*re,v.push(P.x,P.y,P.z),_.push(0,I,0),O.x=re*.5+.5,O.y=F*.5*I+.5,y.push(O.x,O.y),S++}for(let ee=0;ee<i;ee++){const te=z+ee,le=Y+ee;w===!0?g.push(le,le+1,te):g.push(le+1,le,te),G+=3}p.addGroup(M,G,w===!0?1:2),M+=G}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pg(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Fg extends Pg{constructor(e=1,t=1,n=32,i=1,r=!1,l=0,c=Math.PI*2){super(0,e,t,n,i,r,l,c),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:l,thetaLength:c}}static fromJSON(e){return new Fg(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Yc extends qt{constructor(e=[],t=[],n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const r=[],l=[];c(i),p(n),g(),this.setAttribute("position",new At(r,3)),this.setAttribute("normal",new At(r.slice(),3)),this.setAttribute("uv",new At(l,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function c(B){const D=new j,w=new j,z=new j;for(let O=0;O<t.length;O+=3)y(t[O+0],D),y(t[O+1],w),y(t[O+2],z),d(D,w,z,B)}function d(B,D,w,z){const O=z+1,P=[];for(let G=0;G<=O;G++){P[G]=[];const L=B.clone().lerp(w,G/O),I=D.clone().lerp(w,G/O),Y=O-G;for(let ee=0;ee<=Y;ee++)ee===0&&G===O?P[G][ee]=L:P[G][ee]=L.clone().lerp(I,ee/Y)}for(let G=0;G<O;G++)for(let L=0;L<2*(O-G)-1;L++){const I=Math.floor(L/2);L%2===0?(_(P[G][I+1]),_(P[G+1][I]),_(P[G][I])):(_(P[G][I+1]),_(P[G+1][I+1]),_(P[G+1][I]))}}function p(B){const D=new j;for(let w=0;w<r.length;w+=3)D.x=r[w+0],D.y=r[w+1],D.z=r[w+2],D.normalize().multiplyScalar(B),r[w+0]=D.x,r[w+1]=D.y,r[w+2]=D.z}function g(){const B=new j;for(let D=0;D<r.length;D+=3){B.x=r[D+0],B.y=r[D+1],B.z=r[D+2];const w=C(B)/2/Math.PI+.5,z=M(B)/Math.PI+.5;l.push(w,1-z)}S(),v()}function v(){for(let B=0;B<l.length;B+=6){const D=l[B+0],w=l[B+2],z=l[B+4],O=Math.max(D,w,z),P=Math.min(D,w,z);O>.9&&P<.1&&(D<.2&&(l[B+0]+=1),w<.2&&(l[B+2]+=1),z<.2&&(l[B+4]+=1))}}function _(B){r.push(B.x,B.y,B.z)}function y(B,D){const w=B*3;D.x=e[w+0],D.y=e[w+1],D.z=e[w+2]}function S(){const B=new j,D=new j,w=new j,z=new j,O=new De,P=new De,G=new De;for(let L=0,I=0;L<r.length;L+=9,I+=6){B.set(r[L+0],r[L+1],r[L+2]),D.set(r[L+3],r[L+4],r[L+5]),w.set(r[L+6],r[L+7],r[L+8]),O.set(l[I+0],l[I+1]),P.set(l[I+2],l[I+3]),G.set(l[I+4],l[I+5]),z.copy(B).add(D).add(w).divideScalar(3);const Y=C(z);E(O,I+0,B,Y),E(P,I+2,D,Y),E(G,I+4,w,Y)}}function E(B,D,w,z){z<0&&B.x===1&&(l[D]=B.x-1),w.x===0&&w.z===0&&(l[D]=z/2/Math.PI+.5)}function C(B){return Math.atan2(B.z,-B.x)}function M(B){return Math.atan2(-B.y,Math.sqrt(B.x*B.x+B.z*B.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yc(e.vertices,e.indices,e.radius,e.details)}}class Ly extends Yc{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],l=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,l,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Ly(e.radius,e.detail)}}const Hx=new j,Gx=new j,mA=new j,Vx=new Ws;class d3 extends qt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),r=Math.cos(xh*t),l=e.getIndex(),c=e.getAttribute("position"),d=l?l.count:c.count,p=[0,0,0],g=["a","b","c"],v=new Array(3),_={},y=[];for(let S=0;S<d;S+=3){l?(p[0]=l.getX(S),p[1]=l.getX(S+1),p[2]=l.getX(S+2)):(p[0]=S,p[1]=S+1,p[2]=S+2);const{a:E,b:C,c:M}=Vx;if(E.fromBufferAttribute(c,p[0]),C.fromBufferAttribute(c,p[1]),M.fromBufferAttribute(c,p[2]),Vx.getNormal(mA),v[0]=`${Math.round(E.x*i)},${Math.round(E.y*i)},${Math.round(E.z*i)}`,v[1]=`${Math.round(C.x*i)},${Math.round(C.y*i)},${Math.round(C.z*i)}`,v[2]=`${Math.round(M.x*i)},${Math.round(M.y*i)},${Math.round(M.z*i)}`,!(v[0]===v[1]||v[1]===v[2]||v[2]===v[0]))for(let B=0;B<3;B++){const D=(B+1)%3,w=v[B],z=v[D],O=Vx[g[B]],P=Vx[g[D]],G=`${w}_${z}`,L=`${z}_${w}`;L in _&&_[L]?(mA.dot(_[L].normal)<=r&&(y.push(O.x,O.y,O.z),y.push(P.x,P.y,P.z)),_[L]=null):G in _||(_[G]={index0:p[B],index1:p[D],normal:mA.clone()})}}for(const S in _)if(_[S]){const{index0:E,index1:C}=_[S];Hx.fromBufferAttribute(c,E),Gx.fromBufferAttribute(c,C),y.push(Hx.x,Hx.y,Hx.z),y.push(Gx.x,Gx.y,Gx.z)}this.setAttribute("position",new At(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Vo{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){ht("Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let l=1;l<=e;l++)n=this.getPoint(l/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let i=0;const r=n.length;let l;t?l=t:l=e*n[r-1];let c=0,d=r-1,p;for(;c<=d;)if(i=Math.floor(c+(d-c)/2),p=n[i]-l,p<0)c=i+1;else if(p>0)d=i-1;else{d=i;break}if(i=d,n[i]===l)return i/(r-1);const g=n[i],_=n[i+1]-g,y=(l-g)/_;return(i+y)/(r-1)}getTangent(e,t){let i=e-1e-4,r=e+1e-4;i<0&&(i=0),r>1&&(r=1);const l=this.getPoint(i),c=this.getPoint(r),d=t||(l.isVector2?new De:new j);return d.copy(c).sub(l).normalize(),d}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new j,i=[],r=[],l=[],c=new j,d=new zt;for(let y=0;y<=e;y++){const S=y/e;i[y]=this.getTangentAt(S,new j)}r[0]=new j,l[0]=new j;let p=Number.MAX_VALUE;const g=Math.abs(i[0].x),v=Math.abs(i[0].y),_=Math.abs(i[0].z);g<=p&&(p=g,n.set(1,0,0)),v<=p&&(p=v,n.set(0,1,0)),_<=p&&n.set(0,0,1),c.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],c),l[0].crossVectors(i[0],r[0]);for(let y=1;y<=e;y++){if(r[y]=r[y-1].clone(),l[y]=l[y-1].clone(),c.crossVectors(i[y-1],i[y]),c.length()>Number.EPSILON){c.normalize();const S=Math.acos(Vt(i[y-1].dot(i[y]),-1,1));r[y].applyMatrix4(d.makeRotationAxis(c,S))}l[y].crossVectors(i[y],r[y])}if(t===!0){let y=Math.acos(Vt(r[0].dot(r[e]),-1,1));y/=e,i[0].dot(c.crossVectors(r[0],r[e]))>0&&(y=-y);for(let S=1;S<=e;S++)r[S].applyMatrix4(d.makeRotationAxis(i[S],y*S)),l[S].crossVectors(i[S],r[S])}return{tangents:i,normals:r,binormals:l}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Iy extends Vo{constructor(e=0,t=0,n=1,i=1,r=0,l=Math.PI*2,c=!1,d=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=l,this.aClockwise=c,this.aRotation=d}getPoint(e,t=new De){const n=t,i=Math.PI*2;let r=this.aEndAngle-this.aStartAngle;const l=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(l?r=0:r=i),this.aClockwise===!0&&!l&&(r===i?r=-i:r=r-i);const c=this.aStartAngle+e*r;let d=this.aX+this.xRadius*Math.cos(c),p=this.aY+this.yRadius*Math.sin(c);if(this.aRotation!==0){const g=Math.cos(this.aRotation),v=Math.sin(this.aRotation),_=d-this.aX,y=p-this.aY;d=_*g-y*v+this.aX,p=_*v+y*g+this.aY}return n.set(d,p)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class p3 extends Iy{constructor(e,t,n,i,r,l){super(e,t,n,n,i,r,l),this.isArcCurve=!0,this.type="ArcCurve"}}function M1(){let a=0,e=0,t=0,n=0;function i(r,l,c,d){a=r,e=c,t=-3*r+3*l-2*c-d,n=2*r-2*l+c+d}return{initCatmullRom:function(r,l,c,d,p){i(l,c,p*(c-r),p*(d-l))},initNonuniformCatmullRom:function(r,l,c,d,p,g,v){let _=(l-r)/p-(c-r)/(p+g)+(c-l)/g,y=(c-l)/g-(d-l)/(g+v)+(d-c)/v;_*=g,y*=g,i(l,c,_,y)},calc:function(r){const l=r*r,c=l*r;return a+e*r+t*l+n*c}}}const Xx=new j,gA=new M1,vA=new M1,xA=new M1;class m3 extends Vo{constructor(e=[],t=!1,n="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e,t=new j){const n=t,i=this.points,r=i.length,l=(r-(this.closed?0:1))*e;let c=Math.floor(l),d=l-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/r)+1)*r:d===0&&c===r-1&&(c=r-2,d=1);let p,g;this.closed||c>0?p=i[(c-1)%r]:(Xx.subVectors(i[0],i[1]).add(i[0]),p=Xx);const v=i[c%r],_=i[(c+1)%r];if(this.closed||c+2<r?g=i[(c+2)%r]:(Xx.subVectors(i[r-1],i[r-2]).add(i[r-1]),g=Xx),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let S=Math.pow(p.distanceToSquared(v),y),E=Math.pow(v.distanceToSquared(_),y),C=Math.pow(_.distanceToSquared(g),y);E<1e-4&&(E=1),S<1e-4&&(S=E),C<1e-4&&(C=E),gA.initNonuniformCatmullRom(p.x,v.x,_.x,g.x,S,E,C),vA.initNonuniformCatmullRom(p.y,v.y,_.y,g.y,S,E,C),xA.initNonuniformCatmullRom(p.z,v.z,_.z,g.z,S,E,C)}else this.curveType==="catmullrom"&&(gA.initCatmullRom(p.x,v.x,_.x,g.x,this.tension),vA.initCatmullRom(p.y,v.y,_.y,g.y,this.tension),xA.initCatmullRom(p.z,v.z,_.z,g.z,this.tension));return n.set(gA.calc(d),vA.calc(d),xA.calc(d)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new j().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function uT(a,e,t,n,i){const r=(n-e)*.5,l=(i-t)*.5,c=a*a,d=a*c;return(2*t-2*n+r+l)*d+(-3*t+3*n-2*r-l)*c+r*a+t}function DU(a,e){const t=1-a;return t*t*e}function wU(a,e){return 2*(1-a)*a*e}function UU(a,e){return a*a*e}function tg(a,e,t,n){return DU(a,e)+wU(a,t)+UU(a,n)}function OU(a,e){const t=1-a;return t*t*t*e}function NU(a,e){const t=1-a;return 3*t*t*a*e}function LU(a,e){return 3*(1-a)*a*a*e}function IU(a,e){return a*a*a*e}function ng(a,e,t,n,i){return OU(a,e)+NU(a,t)+LU(a,n)+IU(a,i)}class E1 extends Vo{constructor(e=new De,t=new De,n=new De,i=new De){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new De){const n=t,i=this.v0,r=this.v1,l=this.v2,c=this.v3;return n.set(ng(e,i.x,r.x,l.x,c.x),ng(e,i.y,r.y,l.y,c.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class g3 extends Vo{constructor(e=new j,t=new j,n=new j,i=new j){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e,t=new j){const n=t,i=this.v0,r=this.v1,l=this.v2,c=this.v3;return n.set(ng(e,i.x,r.x,l.x,c.x),ng(e,i.y,r.y,l.y,c.y),ng(e,i.z,r.z,l.z,c.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class T1 extends Vo{constructor(e=new De,t=new De){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new De){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new De){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class v3 extends Vo{constructor(e=new j,t=new j){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new j){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new j){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class C1 extends Vo{constructor(e=new De,t=new De,n=new De){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new De){const n=t,i=this.v0,r=this.v1,l=this.v2;return n.set(tg(e,i.x,r.x,l.x),tg(e,i.y,r.y,l.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class R1 extends Vo{constructor(e=new j,t=new j,n=new j){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new j){const n=t,i=this.v0,r=this.v1,l=this.v2;return n.set(tg(e,i.x,r.x,l.x),tg(e,i.y,r.y,l.y),tg(e,i.z,r.z,l.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class B1 extends Vo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new De){const n=t,i=this.points,r=(i.length-1)*e,l=Math.floor(r),c=r-l,d=i[l===0?l:l-1],p=i[l],g=i[l>i.length-2?i.length-1:l+1],v=i[l>i.length-3?i.length-1:l+2];return n.set(uT(c,d.x,p.x,g.x,v.x),uT(c,d.y,p.y,g.y,v.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const i=e.points[t];this.points.push(new De().fromArray(i))}return this}}var Z_=Object.freeze({__proto__:null,ArcCurve:p3,CatmullRomCurve3:m3,CubicBezierCurve:E1,CubicBezierCurve3:g3,EllipseCurve:Iy,LineCurve:T1,LineCurve3:v3,QuadraticBezierCurve:C1,QuadraticBezierCurve3:R1,SplineCurve:B1});class x3 extends Vo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Z_[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const l=i[r]-n,c=this.curves[r],d=c.getLength(),p=d===0?0:1-l/d;return c.getPointAt(p,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const l=r[i],c=l.isEllipseCurve?e*2:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,d=l.getPoints(c);for(let p=0;p<d.length;p++){const g=d[p];n&&n.equals(g)||(t.push(g),n=g)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const i=e.curves[t];this.curves.push(new Z_[i.type]().fromJSON(i))}return this}}class Q_ extends x3{constructor(e){super(),this.type="Path",this.currentPoint=new De,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new T1(this.currentPoint.clone(),new De(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const r=new C1(this.currentPoint.clone(),new De(e,t),new De(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,l){const c=new E1(this.currentPoint.clone(),new De(e,t),new De(n,i),new De(r,l));return this.curves.push(c),this.currentPoint.set(r,l),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new B1(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,l){const c=this.currentPoint.x,d=this.currentPoint.y;return this.absarc(e+c,t+d,n,i,r,l),this}absarc(e,t,n,i,r,l){return this.absellipse(e,t,n,n,i,r,l),this}ellipse(e,t,n,i,r,l,c,d){const p=this.currentPoint.x,g=this.currentPoint.y;return this.absellipse(e+p,t+g,n,i,r,l,c,d),this}absellipse(e,t,n,i,r,l,c,d){const p=new Iy(e,t,n,i,r,l,c,d);if(this.curves.length>0){const v=p.getPoint(0);v.equals(this.currentPoint)||this.lineTo(v.x,v.y)}this.curves.push(p);const g=p.getPoint(1);return this.currentPoint.copy(g),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class _h extends Q_{constructor(e){super(e),this.uuid=br(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const i=e.holes[t];this.holes.push(new Q_().fromJSON(i))}return this}}function zU(a,e,t=2){const n=e&&e.length,i=n?e[0]*t:a.length;let r=_3(a,0,i,t,!0);const l=[];if(!r||r.next===r.prev)return l;let c,d,p;if(n&&(r=VU(a,e,r,t)),a.length>80*t){c=a[0],d=a[1];let g=c,v=d;for(let _=t;_<i;_+=t){const y=a[_],S=a[_+1];y<c&&(c=y),S<d&&(d=S),y>g&&(g=y),S>v&&(v=S)}p=Math.max(g-c,v-d),p=p!==0?32767/p:0}return yg(r,l,t,c,d,p,0),l}function _3(a,e,t,n,i){let r;if(i===$U(a,e,t,n)>0)for(let l=e;l<t;l+=n)r=cT(l/n|0,a[l],a[l+1],r);else for(let l=t-n;l>=e;l-=n)r=cT(l/n|0,a[l],a[l+1],r);return r&&Fp(r,r.next)&&(Ag(r),r=r.next),r}function Rh(a,e){if(!a)return a;e||(e=a);let t=a,n;do if(n=!1,!t.steiner&&(Fp(t,t.next)||Di(t.prev,t,t.next)===0)){if(Ag(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function yg(a,e,t,n,i,r,l){if(!a)return;!l&&r&&JU(a,n,i,r);let c=a;for(;a.prev!==a.next;){const d=a.prev,p=a.next;if(r?FU(a,n,i,r):PU(a)){e.push(d.i,a.i,p.i),Ag(a),a=p.next,c=p.next;continue}if(a=p,a===c){l?l===1?(a=HU(Rh(a),e),yg(a,e,t,n,i,r,2)):l===2&&GU(a,e,t,n,i,r):yg(Rh(a),e,t,n,i,r,1);break}}}function PU(a){const e=a.prev,t=a,n=a.next;if(Di(e,t,n)>=0)return!1;const i=e.x,r=t.x,l=n.x,c=e.y,d=t.y,p=n.y,g=Math.min(i,r,l),v=Math.min(c,d,p),_=Math.max(i,r,l),y=Math.max(c,d,p);let S=n.next;for(;S!==e;){if(S.x>=g&&S.x<=_&&S.y>=v&&S.y<=y&&Y0(i,c,r,d,l,p,S.x,S.y)&&Di(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function FU(a,e,t,n){const i=a.prev,r=a,l=a.next;if(Di(i,r,l)>=0)return!1;const c=i.x,d=r.x,p=l.x,g=i.y,v=r.y,_=l.y,y=Math.min(c,d,p),S=Math.min(g,v,_),E=Math.max(c,d,p),C=Math.max(g,v,_),M=MS(y,S,e,t,n),B=MS(E,C,e,t,n);let D=a.prevZ,w=a.nextZ;for(;D&&D.z>=M&&w&&w.z<=B;){if(D.x>=y&&D.x<=E&&D.y>=S&&D.y<=C&&D!==i&&D!==l&&Y0(c,g,d,v,p,_,D.x,D.y)&&Di(D.prev,D,D.next)>=0||(D=D.prevZ,w.x>=y&&w.x<=E&&w.y>=S&&w.y<=C&&w!==i&&w!==l&&Y0(c,g,d,v,p,_,w.x,w.y)&&Di(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;D&&D.z>=M;){if(D.x>=y&&D.x<=E&&D.y>=S&&D.y<=C&&D!==i&&D!==l&&Y0(c,g,d,v,p,_,D.x,D.y)&&Di(D.prev,D,D.next)>=0)return!1;D=D.prevZ}for(;w&&w.z<=B;){if(w.x>=y&&w.x<=E&&w.y>=S&&w.y<=C&&w!==i&&w!==l&&Y0(c,g,d,v,p,_,w.x,w.y)&&Di(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function HU(a,e){let t=a;do{const n=t.prev,i=t.next.next;!Fp(n,i)&&b3(n,t,t.next,i)&&bg(n,i)&&bg(i,n)&&(e.push(n.i,t.i,i.i),Ag(t),Ag(t.next),t=a=i),t=t.next}while(t!==a);return Rh(t)}function GU(a,e,t,n,i,r){let l=a;do{let c=l.next.next;for(;c!==l.prev;){if(l.i!==c.i&&jU(l,c)){let d=A3(l,c);l=Rh(l,l.next),d=Rh(d,d.next),yg(l,e,t,n,i,r,0),yg(d,e,t,n,i,r,0);return}c=c.next}l=l.next}while(l!==a)}function VU(a,e,t,n){const i=[];for(let r=0,l=e.length;r<l;r++){const c=e[r]*n,d=r<l-1?e[r+1]*n:a.length,p=_3(a,c,d,n,!1);p===p.next&&(p.steiner=!0),i.push(WU(p))}i.sort(XU);for(let r=0;r<i.length;r++)t=kU(i[r],t);return t}function XU(a,e){let t=a.x-e.x;if(t===0&&(t=a.y-e.y,t===0)){const n=(a.next.y-a.y)/(a.next.x-a.x),i=(e.next.y-e.y)/(e.next.x-e.x);t=n-i}return t}function kU(a,e){const t=YU(a,e);if(!t)return e;const n=A3(t,a);return Rh(n,n.next),Rh(t,t.next)}function YU(a,e){let t=e;const n=a.x,i=a.y;let r=-1/0,l;if(Fp(a,t))return t;do{if(Fp(a,t.next))return t.next;if(i<=t.y&&i>=t.next.y&&t.next.y!==t.y){const v=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=n&&v>r&&(r=v,l=t.x<t.next.x?t:t.next,v===n))return l}t=t.next}while(t!==e);if(!l)return null;const c=l,d=l.x,p=l.y;let g=1/0;t=l;do{if(n>=t.x&&t.x>=d&&n!==t.x&&y3(i<p?n:r,i,d,p,i<p?r:n,i,t.x,t.y)){const v=Math.abs(i-t.y)/(n-t.x);bg(t,a)&&(v<g||v===g&&(t.x>l.x||t.x===l.x&&qU(l,t)))&&(l=t,g=v)}t=t.next}while(t!==c);return l}function qU(a,e){return Di(a.prev,a,e.prev)<0&&Di(e.next,a,a.next)<0}function JU(a,e,t,n){let i=a;do i.z===0&&(i.z=MS(i.x,i.y,e,t,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==a);i.prevZ.nextZ=null,i.prevZ=null,KU(i)}function KU(a){let e,t=1;do{let n=a,i;a=null;let r=null;for(e=0;n;){e++;let l=n,c=0;for(let p=0;p<t&&(c++,l=l.nextZ,!!l);p++);let d=t;for(;c>0||d>0&&l;)c!==0&&(d===0||!l||n.z<=l.z)?(i=n,n=n.nextZ,c--):(i=l,l=l.nextZ,d--),r?r.nextZ=i:a=i,i.prevZ=r,r=i;n=l}r.nextZ=null,t*=2}while(e>1);return a}function MS(a,e,t,n,i){return a=(a-t)*i|0,e=(e-n)*i|0,a=(a|a<<8)&16711935,a=(a|a<<4)&252645135,a=(a|a<<2)&858993459,a=(a|a<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,a|e<<1}function WU(a){let e=a,t=a;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==a);return t}function y3(a,e,t,n,i,r,l,c){return(i-l)*(e-c)>=(a-l)*(r-c)&&(a-l)*(n-c)>=(t-l)*(e-c)&&(t-l)*(r-c)>=(i-l)*(n-c)}function Y0(a,e,t,n,i,r,l,c){return!(a===l&&e===c)&&y3(a,e,t,n,i,r,l,c)}function jU(a,e){return a.next.i!==e.i&&a.prev.i!==e.i&&!ZU(a,e)&&(bg(a,e)&&bg(e,a)&&QU(a,e)&&(Di(a.prev,a,e.prev)||Di(a,e.prev,e))||Fp(a,e)&&Di(a.prev,a,a.next)>0&&Di(e.prev,e,e.next)>0)}function Di(a,e,t){return(e.y-a.y)*(t.x-e.x)-(e.x-a.x)*(t.y-e.y)}function Fp(a,e){return a.x===e.x&&a.y===e.y}function b3(a,e,t,n){const i=Yx(Di(a,e,t)),r=Yx(Di(a,e,n)),l=Yx(Di(t,n,a)),c=Yx(Di(t,n,e));return!!(i!==r&&l!==c||i===0&&kx(a,t,e)||r===0&&kx(a,n,e)||l===0&&kx(t,a,n)||c===0&&kx(t,e,n))}function kx(a,e,t){return e.x<=Math.max(a.x,t.x)&&e.x>=Math.min(a.x,t.x)&&e.y<=Math.max(a.y,t.y)&&e.y>=Math.min(a.y,t.y)}function Yx(a){return a>0?1:a<0?-1:0}function ZU(a,e){let t=a;do{if(t.i!==a.i&&t.next.i!==a.i&&t.i!==e.i&&t.next.i!==e.i&&b3(t,t.next,a,e))return!0;t=t.next}while(t!==a);return!1}function bg(a,e){return Di(a.prev,a,a.next)<0?Di(a,e,a.next)>=0&&Di(a,a.prev,e)>=0:Di(a,e,a.prev)<0||Di(a,a.next,e)<0}function QU(a,e){let t=a,n=!1;const i=(a.x+e.x)/2,r=(a.y+e.y)/2;do t.y>r!=t.next.y>r&&t.next.y!==t.y&&i<(t.next.x-t.x)*(r-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==a);return n}function A3(a,e){const t=ES(a.i,a.x,a.y),n=ES(e.i,e.x,e.y),i=a.next,r=e.prev;return a.next=e,e.prev=a,t.next=i,i.prev=t,n.next=t,t.prev=n,r.next=n,n.prev=r,n}function cT(a,e,t,n){const i=ES(a,e,t);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function Ag(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function ES(a,e,t){return{i:a,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function $U(a,e,t,n){let i=0;for(let r=e,l=t-n;r<t;r+=n)i+=(a[l]-a[r])*(a[r+1]+a[l+1]),l=r;return i}class eO{static triangulate(e,t,n=2){return zU(e,t,n)}}class Io{static area(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return n*.5}static isClockWise(e){return Io.area(e)<0}static triangulateShape(e,t){const n=[],i=[],r=[];fT(e),hT(n,e);let l=e.length;t.forEach(fT);for(let d=0;d<t.length;d++)i.push(l),l+=t[d].length,hT(n,t[d]);const c=eO.triangulate(n,i);for(let d=0;d<c.length;d+=3)r.push(c.slice(d,d+3));return r}}function fT(a){const e=a.length;e>2&&a[e-1].equals(a[0])&&a.pop()}function hT(a,e){for(let t=0;t<e.length;t++)a.push(e[t].x),a.push(e[t].y)}class zy extends qt{constructor(e=new _h([new De(.5,.5),new De(-.5,.5),new De(-.5,-.5),new De(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let c=0,d=e.length;c<d;c++){const p=e[c];l(p)}this.setAttribute("position",new At(i,3)),this.setAttribute("uv",new At(r,2)),this.computeVertexNormals();function l(c){const d=[],p=t.curveSegments!==void 0?t.curveSegments:12,g=t.steps!==void 0?t.steps:1,v=t.depth!==void 0?t.depth:1;let _=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,S=t.bevelSize!==void 0?t.bevelSize:y-.1,E=t.bevelOffset!==void 0?t.bevelOffset:0,C=t.bevelSegments!==void 0?t.bevelSegments:3;const M=t.extrudePath,B=t.UVGenerator!==void 0?t.UVGenerator:tO;let D,w=!1,z,O,P,G;M&&(D=M.getSpacedPoints(g),w=!0,_=!1,z=M.computeFrenetFrames(g,!1),O=new j,P=new j,G=new j),_||(C=0,y=0,S=0,E=0);const L=c.extractPoints(p);let I=L.shape;const Y=L.holes;if(!Io.isClockWise(I)){I=I.reverse();for(let ze=0,W=Y.length;ze<W;ze++){const He=Y[ze];Io.isClockWise(He)&&(Y[ze]=He.reverse())}}function te(ze){const He=10000000000000001e-36;let ke=ze[0];for(let et=1;et<=ze.length;et++){const Ve=et%ze.length,ot=ze[Ve],it=ot.x-ke.x,dt=ot.y-ke.y,K=it*it+dt*dt,H=Math.max(Math.abs(ot.x),Math.abs(ot.y),Math.abs(ke.x),Math.abs(ke.y)),me=He*H*H;if(K<=me){ze.splice(Ve,1),et--;continue}ke=ot}}te(I),Y.forEach(te);const le=Y.length,re=I;for(let ze=0;ze<le;ze++){const W=Y[ze];I=I.concat(W)}function F(ze,W,He){return W||kt("ExtrudeGeometry: vec does not exist"),ze.clone().addScaledVector(W,He)}const J=I.length;function Z(ze,W,He){let ke,et,Ve;const ot=ze.x-W.x,it=ze.y-W.y,dt=He.x-ze.x,K=He.y-ze.y,H=ot*ot+it*it,me=ot*K-it*dt;if(Math.abs(me)>Number.EPSILON){const we=Math.sqrt(H),Fe=Math.sqrt(dt*dt+K*K),Te=W.x-it/we,yt=W.y+ot/we,at=He.x-K/Fe,St=He.y+dt/Fe,xt=((at-Te)*K-(St-yt)*dt)/(ot*K-it*dt);ke=Te+ot*xt-ze.x,et=yt+it*xt-ze.y;const Ie=ke*ke+et*et;if(Ie<=2)return new De(ke,et);Ve=Math.sqrt(Ie/2)}else{let we=!1;ot>Number.EPSILON?dt>Number.EPSILON&&(we=!0):ot<-Number.EPSILON?dt<-Number.EPSILON&&(we=!0):Math.sign(it)===Math.sign(K)&&(we=!0),we?(ke=-it,et=ot,Ve=Math.sqrt(H)):(ke=ot,et=it,Ve=Math.sqrt(H/2))}return new De(ke/Ve,et/Ve)}const oe=[];for(let ze=0,W=re.length,He=W-1,ke=ze+1;ze<W;ze++,He++,ke++)He===W&&(He=0),ke===W&&(ke=0),oe[ze]=Z(re[ze],re[He],re[ke]);const pe=[];let q,se=oe.concat();for(let ze=0,W=le;ze<W;ze++){const He=Y[ze];q=[];for(let ke=0,et=He.length,Ve=et-1,ot=ke+1;ke<et;ke++,Ve++,ot++)Ve===et&&(Ve=0),ot===et&&(ot=0),q[ke]=Z(He[ke],He[Ve],He[ot]);pe.push(q),se=se.concat(q)}let Ce;if(C===0)Ce=Io.triangulateShape(re,Y);else{const ze=[],W=[];for(let He=0;He<C;He++){const ke=He/C,et=y*Math.cos(ke*Math.PI/2),Ve=S*Math.sin(ke*Math.PI/2)+E;for(let ot=0,it=re.length;ot<it;ot++){const dt=F(re[ot],oe[ot],Ve);ut(dt.x,dt.y,-et),ke===0&&ze.push(dt)}for(let ot=0,it=le;ot<it;ot++){const dt=Y[ot];q=pe[ot];const K=[];for(let H=0,me=dt.length;H<me;H++){const we=F(dt[H],q[H],Ve);ut(we.x,we.y,-et),ke===0&&K.push(we)}ke===0&&W.push(K)}}Ce=Io.triangulateShape(ze,W)}const Ee=Ce.length,Ye=S+E;for(let ze=0;ze<J;ze++){const W=_?F(I[ze],se[ze],Ye):I[ze];w?(P.copy(z.normals[0]).multiplyScalar(W.x),O.copy(z.binormals[0]).multiplyScalar(W.y),G.copy(D[0]).add(P).add(O),ut(G.x,G.y,G.z)):ut(W.x,W.y,0)}for(let ze=1;ze<=g;ze++)for(let W=0;W<J;W++){const He=_?F(I[W],se[W],Ye):I[W];w?(P.copy(z.normals[ze]).multiplyScalar(He.x),O.copy(z.binormals[ze]).multiplyScalar(He.y),G.copy(D[ze]).add(P).add(O),ut(G.x,G.y,G.z)):ut(He.x,He.y,v/g*ze)}for(let ze=C-1;ze>=0;ze--){const W=ze/C,He=y*Math.cos(W*Math.PI/2),ke=S*Math.sin(W*Math.PI/2)+E;for(let et=0,Ve=re.length;et<Ve;et++){const ot=F(re[et],oe[et],ke);ut(ot.x,ot.y,v+He)}for(let et=0,Ve=Y.length;et<Ve;et++){const ot=Y[et];q=pe[et];for(let it=0,dt=ot.length;it<dt;it++){const K=F(ot[it],q[it],ke);w?ut(K.x,K.y+D[g-1].y,D[g-1].x+He):ut(K.x,K.y,v+He)}}}ge(),Re();function ge(){const ze=i.length/3;if(_){let W=0,He=J*W;for(let ke=0;ke<Ee;ke++){const et=Ce[ke];vt(et[2]+He,et[1]+He,et[0]+He)}W=g+C*2,He=J*W;for(let ke=0;ke<Ee;ke++){const et=Ce[ke];vt(et[0]+He,et[1]+He,et[2]+He)}}else{for(let W=0;W<Ee;W++){const He=Ce[W];vt(He[2],He[1],He[0])}for(let W=0;W<Ee;W++){const He=Ce[W];vt(He[0]+J*g,He[1]+J*g,He[2]+J*g)}}n.addGroup(ze,i.length/3-ze,0)}function Re(){const ze=i.length/3;let W=0;$e(re,W),W+=re.length;for(let He=0,ke=Y.length;He<ke;He++){const et=Y[He];$e(et,W),W+=et.length}n.addGroup(ze,i.length/3-ze,1)}function $e(ze,W){let He=ze.length;for(;--He>=0;){const ke=He;let et=He-1;et<0&&(et=ze.length-1);for(let Ve=0,ot=g+C*2;Ve<ot;Ve++){const it=J*Ve,dt=J*(Ve+1),K=W+ke+it,H=W+et+it,me=W+et+dt,we=W+ke+dt;Pt(K,H,me,we)}}}function ut(ze,W,He){d.push(ze),d.push(W),d.push(He)}function vt(ze,W,He){sn(ze),sn(W),sn(He);const ke=i.length/3,et=B.generateTopUV(n,i,ke-3,ke-2,ke-1);Ct(et[0]),Ct(et[1]),Ct(et[2])}function Pt(ze,W,He,ke){sn(ze),sn(W),sn(ke),sn(W),sn(He),sn(ke);const et=i.length/3,Ve=B.generateSideWallUV(n,i,et-6,et-3,et-2,et-1);Ct(Ve[0]),Ct(Ve[1]),Ct(Ve[3]),Ct(Ve[1]),Ct(Ve[2]),Ct(Ve[3])}function sn(ze){i.push(d[ze*3+0]),i.push(d[ze*3+1]),i.push(d[ze*3+2])}function Ct(ze){r.push(ze.x),r.push(ze.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return nO(t,n,e)}static fromJSON(e,t){const n=[];for(let r=0,l=e.shapes.length;r<l;r++){const c=t[e.shapes[r]];n.push(c)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new Z_[i.type]().fromJSON(i)),new zy(n,e.options)}}const tO={generateTopUV:function(a,e,t,n,i){const r=e[t*3],l=e[t*3+1],c=e[n*3],d=e[n*3+1],p=e[i*3],g=e[i*3+1];return[new De(r,l),new De(c,d),new De(p,g)]},generateSideWallUV:function(a,e,t,n,i,r){const l=e[t*3],c=e[t*3+1],d=e[t*3+2],p=e[n*3],g=e[n*3+1],v=e[n*3+2],_=e[i*3],y=e[i*3+1],S=e[i*3+2],E=e[r*3],C=e[r*3+1],M=e[r*3+2];return Math.abs(c-g)<Math.abs(l-p)?[new De(l,1-d),new De(p,1-v),new De(_,1-S),new De(E,1-M)]:[new De(c,1-d),new De(g,1-v),new De(y,1-S),new De(C,1-M)]}};function nO(a,e,t){if(t.shapes=[],Array.isArray(a))for(let n=0,i=a.length;n<i;n++){const r=a[n];t.shapes.push(r.uuid)}else t.shapes.push(a.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Py extends Yc{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,r,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Py(e.radius,e.detail)}}class Fy extends qt{constructor(e=[new De(0,-.5),new De(.5,0),new De(0,.5)],t=12,n=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=Vt(i,0,Math.PI*2);const r=[],l=[],c=[],d=[],p=[],g=1/t,v=new j,_=new De,y=new j,S=new j,E=new j;let C=0,M=0;for(let B=0;B<=e.length-1;B++)switch(B){case 0:C=e[B+1].x-e[B].x,M=e[B+1].y-e[B].y,y.x=M*1,y.y=-C,y.z=M*0,E.copy(y),y.normalize(),d.push(y.x,y.y,y.z);break;case e.length-1:d.push(E.x,E.y,E.z);break;default:C=e[B+1].x-e[B].x,M=e[B+1].y-e[B].y,y.x=M*1,y.y=-C,y.z=M*0,S.copy(y),y.x+=E.x,y.y+=E.y,y.z+=E.z,y.normalize(),d.push(y.x,y.y,y.z),E.copy(S)}for(let B=0;B<=t;B++){const D=n+B*g*i,w=Math.sin(D),z=Math.cos(D);for(let O=0;O<=e.length-1;O++){v.x=e[O].x*w,v.y=e[O].y,v.z=e[O].x*z,l.push(v.x,v.y,v.z),_.x=B/t,_.y=O/(e.length-1),c.push(_.x,_.y);const P=d[3*O+0]*w,G=d[3*O+1],L=d[3*O+0]*z;p.push(P,G,L)}}for(let B=0;B<t;B++)for(let D=0;D<e.length-1;D++){const w=D+B*e.length,z=w,O=w+e.length,P=w+e.length+1,G=w+1;r.push(z,O,G),r.push(P,G,O)}this.setIndex(r),this.setAttribute("position",new At(l,3)),this.setAttribute("uv",new At(c,2)),this.setAttribute("normal",new At(p,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fy(e.points,e.segments,e.phiStart,e.phiLength)}}class Hg extends Yc{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Hg(e.radius,e.detail)}}class Zp extends qt{constructor(e=1,t=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,l=t/2,c=Math.floor(n),d=Math.floor(i),p=c+1,g=d+1,v=e/c,_=t/d,y=[],S=[],E=[],C=[];for(let M=0;M<g;M++){const B=M*_-l;for(let D=0;D<p;D++){const w=D*v-r;S.push(w,-B,0),E.push(0,0,1),C.push(D/c),C.push(1-M/d)}}for(let M=0;M<d;M++)for(let B=0;B<c;B++){const D=B+p*M,w=B+p*(M+1),z=B+1+p*(M+1),O=B+1+p*M;y.push(D,w,O),y.push(w,z,O)}this.setIndex(y),this.setAttribute("position",new At(S,3)),this.setAttribute("normal",new At(E,3)),this.setAttribute("uv",new At(C,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Zp(e.width,e.height,e.widthSegments,e.heightSegments)}}class Hy extends qt{constructor(e=.5,t=1,n=32,i=1,r=0,l=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:l},n=Math.max(3,n),i=Math.max(1,i);const c=[],d=[],p=[],g=[];let v=e;const _=(t-e)/i,y=new j,S=new De;for(let E=0;E<=i;E++){for(let C=0;C<=n;C++){const M=r+C/n*l;y.x=v*Math.cos(M),y.y=v*Math.sin(M),d.push(y.x,y.y,y.z),p.push(0,0,1),S.x=(y.x/t+1)/2,S.y=(y.y/t+1)/2,g.push(S.x,S.y)}v+=_}for(let E=0;E<i;E++){const C=E*(n+1);for(let M=0;M<n;M++){const B=M+C,D=B,w=B+n+1,z=B+n+2,O=B+1;c.push(D,w,O),c.push(w,z,O)}}this.setIndex(c),this.setAttribute("position",new At(d,3)),this.setAttribute("normal",new At(p,3)),this.setAttribute("uv",new At(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hy(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Gy extends qt{constructor(e=new _h([new De(0,.5),new De(-.5,-.5),new De(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],r=[],l=[];let c=0,d=0;if(Array.isArray(e)===!1)p(e);else for(let g=0;g<e.length;g++)p(e[g]),this.addGroup(c,d,g),c+=d,d=0;this.setIndex(n),this.setAttribute("position",new At(i,3)),this.setAttribute("normal",new At(r,3)),this.setAttribute("uv",new At(l,2));function p(g){const v=i.length/3,_=g.extractPoints(t);let y=_.shape;const S=_.holes;Io.isClockWise(y)===!1&&(y=y.reverse());for(let C=0,M=S.length;C<M;C++){const B=S[C];Io.isClockWise(B)===!0&&(S[C]=B.reverse())}const E=Io.triangulateShape(y,S);for(let C=0,M=S.length;C<M;C++){const B=S[C];y=y.concat(B)}for(let C=0,M=y.length;C<M;C++){const B=y[C];i.push(B.x,B.y,0),r.push(0,0,1),l.push(B.x,B.y)}for(let C=0,M=E.length;C<M;C++){const B=E[C],D=B[0]+v,w=B[1]+v,z=B[2]+v;n.push(D,w,z),d+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return iO(t,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const l=t[e.shapes[i]];n.push(l)}return new Gy(n,e.curveSegments)}}function iO(a,e){if(e.shapes=[],Array.isArray(a))for(let t=0,n=a.length;t<n;t++){const i=a[t];e.shapes.push(i.uuid)}else e.shapes.push(a.uuid);return e}class Gg extends qt{constructor(e=1,t=32,n=16,i=0,r=Math.PI*2,l=0,c=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:l,thetaLength:c},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const d=Math.min(l+c,Math.PI);let p=0;const g=[],v=new j,_=new j,y=[],S=[],E=[],C=[];for(let M=0;M<=n;M++){const B=[],D=M/n;let w=0;M===0&&l===0?w=.5/t:M===n&&d===Math.PI&&(w=-.5/t);for(let z=0;z<=t;z++){const O=z/t;v.x=-e*Math.cos(i+O*r)*Math.sin(l+D*c),v.y=e*Math.cos(l+D*c),v.z=e*Math.sin(i+O*r)*Math.sin(l+D*c),S.push(v.x,v.y,v.z),_.copy(v).normalize(),E.push(_.x,_.y,_.z),C.push(O+w,1-D),B.push(p++)}g.push(B)}for(let M=0;M<n;M++)for(let B=0;B<t;B++){const D=g[M][B+1],w=g[M][B],z=g[M+1][B],O=g[M+1][B+1];(M!==0||l>0)&&y.push(D,w,O),(M!==n-1||d<Math.PI)&&y.push(w,z,O)}this.setIndex(y),this.setAttribute("position",new At(S,3)),this.setAttribute("normal",new At(E,3)),this.setAttribute("uv",new At(C,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Vy extends Yc{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Vy(e.radius,e.detail)}}class Xy extends qt{constructor(e=1,t=.4,n=12,i=48,r=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const l=[],c=[],d=[],p=[],g=new j,v=new j,_=new j;for(let y=0;y<=n;y++)for(let S=0;S<=i;S++){const E=S/i*r,C=y/n*Math.PI*2;v.x=(e+t*Math.cos(C))*Math.cos(E),v.y=(e+t*Math.cos(C))*Math.sin(E),v.z=t*Math.sin(C),c.push(v.x,v.y,v.z),g.x=e*Math.cos(E),g.y=e*Math.sin(E),_.subVectors(v,g).normalize(),d.push(_.x,_.y,_.z),p.push(S/i),p.push(y/n)}for(let y=1;y<=n;y++)for(let S=1;S<=i;S++){const E=(i+1)*y+S-1,C=(i+1)*(y-1)+S-1,M=(i+1)*(y-1)+S,B=(i+1)*y+S;l.push(E,C,B),l.push(C,M,B)}this.setIndex(l),this.setAttribute("position",new At(c,3)),this.setAttribute("normal",new At(d,3)),this.setAttribute("uv",new At(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xy(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class ky extends qt{constructor(e=1,t=.4,n=64,i=8,r=2,l=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:l},n=Math.floor(n),i=Math.floor(i);const c=[],d=[],p=[],g=[],v=new j,_=new j,y=new j,S=new j,E=new j,C=new j,M=new j;for(let D=0;D<=n;++D){const w=D/n*r*Math.PI*2;B(w,r,l,e,y),B(w+.01,r,l,e,S),C.subVectors(S,y),M.addVectors(S,y),E.crossVectors(C,M),M.crossVectors(E,C),E.normalize(),M.normalize();for(let z=0;z<=i;++z){const O=z/i*Math.PI*2,P=-t*Math.cos(O),G=t*Math.sin(O);v.x=y.x+(P*M.x+G*E.x),v.y=y.y+(P*M.y+G*E.y),v.z=y.z+(P*M.z+G*E.z),d.push(v.x,v.y,v.z),_.subVectors(v,y).normalize(),p.push(_.x,_.y,_.z),g.push(D/n),g.push(z/i)}}for(let D=1;D<=n;D++)for(let w=1;w<=i;w++){const z=(i+1)*(D-1)+(w-1),O=(i+1)*D+(w-1),P=(i+1)*D+w,G=(i+1)*(D-1)+w;c.push(z,O,G),c.push(O,P,G)}this.setIndex(c),this.setAttribute("position",new At(d,3)),this.setAttribute("normal",new At(p,3)),this.setAttribute("uv",new At(g,2));function B(D,w,z,O,P){const G=Math.cos(D),L=Math.sin(D),I=z/w*D,Y=Math.cos(I);P.x=O*(2+Y)*.5*G,P.y=O*(2+Y)*L*.5,P.z=O*Math.sin(I)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ky(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Yy extends qt{constructor(e=new R1(new j(-1,-1,0),new j(-1,1,0),new j(1,1,0)),t=64,n=1,i=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r};const l=e.computeFrenetFrames(t,r);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;const c=new j,d=new j,p=new De;let g=new j;const v=[],_=[],y=[],S=[];E(),this.setIndex(S),this.setAttribute("position",new At(v,3)),this.setAttribute("normal",new At(_,3)),this.setAttribute("uv",new At(y,2));function E(){for(let D=0;D<t;D++)C(D);C(r===!1?t:0),B(),M()}function C(D){g=e.getPointAt(D/t,g);const w=l.normals[D],z=l.binormals[D];for(let O=0;O<=i;O++){const P=O/i*Math.PI*2,G=Math.sin(P),L=-Math.cos(P);d.x=L*w.x+G*z.x,d.y=L*w.y+G*z.y,d.z=L*w.z+G*z.z,d.normalize(),_.push(d.x,d.y,d.z),c.x=g.x+n*d.x,c.y=g.y+n*d.y,c.z=g.z+n*d.z,v.push(c.x,c.y,c.z)}}function M(){for(let D=1;D<=t;D++)for(let w=1;w<=i;w++){const z=(i+1)*(D-1)+(w-1),O=(i+1)*D+(w-1),P=(i+1)*D+w,G=(i+1)*(D-1)+w;S.push(z,O,G),S.push(O,P,G)}}function B(){for(let D=0;D<=t;D++)for(let w=0;w<=i;w++)p.x=D/t,p.y=w/i,y.push(p.x,p.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Yy(new Z_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class S3 extends qt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,i=new j,r=new j;if(e.index!==null){const l=e.attributes.position,c=e.index;let d=e.groups;d.length===0&&(d=[{start:0,count:c.count,materialIndex:0}]);for(let p=0,g=d.length;p<g;++p){const v=d[p],_=v.start,y=v.count;for(let S=_,E=_+y;S<E;S+=3)for(let C=0;C<3;C++){const M=c.getX(S+C),B=c.getX(S+(C+1)%3);i.fromBufferAttribute(l,M),r.fromBufferAttribute(l,B),dT(i,r,n)===!0&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}}else{const l=e.attributes.position;for(let c=0,d=l.count/3;c<d;c++)for(let p=0;p<3;p++){const g=3*c+p,v=3*c+(p+1)%3;i.fromBufferAttribute(l,g),r.fromBufferAttribute(l,v),dT(i,r,n)===!0&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new At(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function dT(a,e,t){const n=`${a.x},${a.y},${a.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${a.x},${a.y},${a.z}`;return t.has(n)===!0||t.has(i)===!0?!1:(t.add(n),t.add(i),!0)}var pT=Object.freeze({__proto__:null,BoxGeometry:Ih,CapsuleGeometry:Oy,CircleGeometry:Ny,ConeGeometry:Fg,CylinderGeometry:Pg,DodecahedronGeometry:Ly,EdgesGeometry:d3,ExtrudeGeometry:zy,IcosahedronGeometry:Py,LatheGeometry:Fy,OctahedronGeometry:Hg,PlaneGeometry:Zp,PolyhedronGeometry:Yc,RingGeometry:Hy,ShapeGeometry:Gy,SphereGeometry:Gg,TetrahedronGeometry:Vy,TorusGeometry:Xy,TorusKnotGeometry:ky,TubeGeometry:Yy,WireframeGeometry:S3});class M3 extends Ki{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new rt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class E3 extends ji{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Qp extends Ki{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new rt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kc,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sr,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class no extends Qp{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new De(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Vt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new rt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new rt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new rt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Mc extends Ki{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new rt(16777215),this.specular=new rt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kc,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sr,this.combine=Og,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class T3 extends Ki{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new rt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kc,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class D1 extends Ki{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kc,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class C3 extends Ki{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new rt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new rt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kc,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Sr,this.combine=Og,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class qy extends Ki{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ho,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class w1 extends Ki{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class R3 extends Ki{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new rt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=kc,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this.fog=e.fog,this}}class B3 extends os{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function dh(a,e){return!a||a.constructor===e?a:typeof e.BYTES_PER_ELEMENT=="number"?new e(a):Array.prototype.slice.call(a)}function D3(a){return ArrayBuffer.isView(a)&&!(a instanceof DataView)}function w3(a){function e(i,r){return a[i]-a[r]}const t=a.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(e),n}function TS(a,e,t){const n=a.length,i=new a.constructor(n);for(let r=0,l=0;l!==n;++r){const c=t[r]*e;for(let d=0;d!==e;++d)i[l++]=a[c+d]}return i}function U1(a,e,t,n){let i=1,r=a[0];for(;r!==void 0&&r[n]===void 0;)r=a[i++];if(r===void 0)return;let l=r[n];if(l!==void 0)if(Array.isArray(l))do l=r[n],l!==void 0&&(e.push(r.time),t.push(...l)),r=a[i++];while(r!==void 0);else if(l.toArray!==void 0)do l=r[n],l!==void 0&&(e.push(r.time),l.toArray(t,t.length)),r=a[i++];while(r!==void 0);else do l=r[n],l!==void 0&&(e.push(r.time),t.push(l)),r=a[i++];while(r!==void 0)}function aO(a,e,t,n,i=30){const r=a.clone();r.name=e;const l=[];for(let d=0;d<r.tracks.length;++d){const p=r.tracks[d],g=p.getValueSize(),v=[],_=[];for(let y=0;y<p.times.length;++y){const S=p.times[y]*i;if(!(S<t||S>=n)){v.push(p.times[y]);for(let E=0;E<g;++E)_.push(p.values[y*g+E])}}v.length!==0&&(p.times=dh(v,p.times.constructor),p.values=dh(_,p.values.constructor),l.push(p))}r.tracks=l;let c=1/0;for(let d=0;d<r.tracks.length;++d)c>r.tracks[d].times[0]&&(c=r.tracks[d].times[0]);for(let d=0;d<r.tracks.length;++d)r.tracks[d].shift(-1*c);return r.resetDuration(),r}function sO(a,e=0,t=a,n=30){n<=0&&(n=30);const i=t.tracks.length,r=e/n;for(let l=0;l<i;++l){const c=t.tracks[l],d=c.ValueTypeName;if(d==="bool"||d==="string")continue;const p=a.tracks.find(function(M){return M.name===c.name&&M.ValueTypeName===d});if(p===void 0)continue;let g=0;const v=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(g=v/3);let _=0;const y=p.getValueSize();p.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(_=y/3);const S=c.times.length-1;let E;if(r<=c.times[0]){const M=g,B=v-g;E=c.values.slice(M,B)}else if(r>=c.times[S]){const M=S*v+g,B=M+v-g;E=c.values.slice(M,B)}else{const M=c.createInterpolant(),B=g,D=v-g;M.evaluate(r),E=M.resultBuffer.slice(B,D)}d==="quaternion"&&new Da().fromArray(E).normalize().conjugate().toArray(E);const C=p.times.length;for(let M=0;M<C;++M){const B=M*y+_;if(d==="quaternion")Da.multiplyQuaternionsFlat(p.values,B,E,0,p.values,B);else{const D=y-_*2;for(let w=0;w<D;++w)p.values[B+w]-=E[w]}}}return a.blendMode=f1,a}class rO{static convertArray(e,t){return dh(e,t)}static isTypedArray(e){return D3(e)}static getKeyframeOrder(e){return w3(e)}static sortedArray(e,t,n){return TS(e,t,n)}static flattenJSON(e,t,n,i){U1(e,t,n,i)}static subclip(e,t,n,i,r=30){return aO(e,t,n,i,r)}static makeClipAdditive(e,t=0,n=e,i=30){return sO(e,t,n,i)}}class $p{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let l;n:{i:if(!(e<i)){for(let c=n+2;;){if(i===void 0){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===c)break;if(r=i,i=t[++n],e<i)break t}l=t.length;break n}if(!(e>=r)){const c=t[1];e<c&&(n=2,r=c);for(let d=n-2;;){if(r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===d)break;if(i=r,r=t[--n-1],e>=r)break t}l=n,n=0;break n}break e}for(;n<l;){const c=n+l>>>1;e<t[c]?l=c:n=c+1}if(i=t[n],r=t[n-1],r===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let l=0;l!==i;++l)t[l]=n[r+l];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class U3 extends $p{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:fh,endingEnd:fh}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,l=e+1,c=i[r],d=i[l];if(c===void 0)switch(this.getSettings_().endingStart){case hh:r=e,c=2*t-n;break;case pg:r=i.length-2,c=t+i[r]-i[r+1];break;default:r=e,c=n}if(d===void 0)switch(this.getSettings_().endingEnd){case hh:l=e,d=2*n-t;break;case pg:l=1,d=n+i[1]-i[0];break;default:l=e-1,d=t}const p=(n-t)*.5,g=this.valueSize;this._weightPrev=p/(t-c),this._weightNext=p/(d-n),this._offsetPrev=r*g,this._offsetNext=l*g}interpolate_(e,t,n,i){const r=this.resultBuffer,l=this.sampleValues,c=this.valueSize,d=e*c,p=d-c,g=this._offsetPrev,v=this._offsetNext,_=this._weightPrev,y=this._weightNext,S=(n-t)/(i-t),E=S*S,C=E*S,M=-_*C+2*_*E-_*S,B=(1+_)*C+(-1.5-2*_)*E+(-.5+_)*S+1,D=(-1-y)*C+(1.5+y)*E+.5*S,w=y*C-y*E;for(let z=0;z!==c;++z)r[z]=M*l[g+z]+B*l[p+z]+D*l[d+z]+w*l[v+z];return r}}class O1 extends $p{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,l=this.sampleValues,c=this.valueSize,d=e*c,p=d-c,g=(n-t)/(i-t),v=1-g;for(let _=0;_!==c;++_)r[_]=l[p+_]*v+l[d+_]*g;return r}}class O3 extends $p{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class io{constructor(e,t,n,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=dh(t,this.TimeBufferType),this.values=dh(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:dh(e.times,Array),values:dh(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(n.interpolation=i)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new O3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new O1(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new U3(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Up:t=this.InterpolantFactoryMethodDiscrete;break;case Op:t=this.InterpolantFactoryMethodLinear;break;case f_:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return ht("KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Up;case this.InterpolantFactoryMethodLinear:return Op;case this.InterpolantFactoryMethodSmooth:return f_}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,l=i-1;for(;r!==i&&n[r]<e;)++r;for(;l!==-1&&n[l]>t;)--l;if(++l,r!==0||l!==i){r>=l&&(l=Math.max(l,1),r=l-1);const c=this.getValueSize();this.times=n.slice(r,l),this.values=this.values.slice(r*c,l*c)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(kt("KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;r===0&&(kt("KeyframeTrack: Track is empty.",this),e=!1);let l=null;for(let c=0;c!==r;c++){const d=n[c];if(typeof d=="number"&&isNaN(d)){kt("KeyframeTrack: Time is not a valid number.",this,c,d),e=!1;break}if(l!==null&&l>d){kt("KeyframeTrack: Out of order keys.",this,c,d,l),e=!1;break}l=d}if(i!==void 0&&D3(i))for(let c=0,d=i.length;c!==d;++c){const p=i[c];if(isNaN(p)){kt("KeyframeTrack: Value is not a valid number.",this,c,p),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),i=this.getInterpolation()===f_,r=e.length-1;let l=1;for(let c=1;c<r;++c){let d=!1;const p=e[c],g=e[c+1];if(p!==g&&(c!==1||p!==e[0]))if(i)d=!0;else{const v=c*n,_=v-n,y=v+n;for(let S=0;S!==n;++S){const E=t[v+S];if(E!==t[_+S]||E!==t[y+S]){d=!0;break}}}if(d){if(c!==l){e[l]=e[c];const v=c*n,_=l*n;for(let y=0;y!==n;++y)t[_+y]=t[v+y]}++l}}if(r>0){e[l]=e[r];for(let c=r*n,d=l*n,p=0;p!==n;++p)t[d+p]=t[c+p];++l}return l!==e.length?(this.times=e.slice(0,l),this.values=t.slice(0,l*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,i=new n(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}io.prototype.ValueTypeName="";io.prototype.TimeBufferType=Float32Array;io.prototype.ValueBufferType=Float32Array;io.prototype.DefaultInterpolation=Op;class zh extends io{constructor(e,t,n){super(e,t,n)}}zh.prototype.ValueTypeName="bool";zh.prototype.ValueBufferType=Array;zh.prototype.DefaultInterpolation=Up;zh.prototype.InterpolantFactoryMethodLinear=void 0;zh.prototype.InterpolantFactoryMethodSmooth=void 0;class N1 extends io{constructor(e,t,n,i){super(e,t,n,i)}}N1.prototype.ValueTypeName="color";class Bh extends io{constructor(e,t,n,i){super(e,t,n,i)}}Bh.prototype.ValueTypeName="number";class N3 extends $p{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,l=this.sampleValues,c=this.valueSize,d=(n-t)/(i-t);let p=e*c;for(let g=p+c;p!==g;p+=4)Da.slerpFlat(r,0,l,p-c,l,p,d);return r}}class Dh extends io{constructor(e,t,n,i){super(e,t,n,i)}InterpolantFactoryMethodLinear(e){return new N3(this.times,this.values,this.getValueSize(),e)}}Dh.prototype.ValueTypeName="quaternion";Dh.prototype.InterpolantFactoryMethodSmooth=void 0;class Ph extends io{constructor(e,t,n){super(e,t,n)}}Ph.prototype.ValueTypeName="string";Ph.prototype.ValueBufferType=Array;Ph.prototype.DefaultInterpolation=Up;Ph.prototype.InterpolantFactoryMethodLinear=void 0;Ph.prototype.InterpolantFactoryMethodSmooth=void 0;class wh extends io{constructor(e,t,n,i){super(e,t,n,i)}}wh.prototype.ValueTypeName="vector";class Hp{constructor(e="",t=-1,n=[],i=by){this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=br(),this.userData={},this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let l=0,c=n.length;l!==c;++l)t.push(lO(n[l]).scale(i));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r.userData=JSON.parse(e.userData||"{}"),r}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode,userData:JSON.stringify(e.userData)};for(let r=0,l=n.length;r!==l;++r)t.push(io.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const r=t.length,l=[];for(let c=0;c<r;c++){let d=[],p=[];d.push((c+r-1)%r,c,(c+1)%r),p.push(0,1,0);const g=w3(d);d=TS(d,1,g),p=TS(p,1,g),!i&&d[0]===0&&(d.push(r),p.push(p[0])),l.push(new Bh(".morphTargetInfluences["+t[c].name+"]",d,p).scale(1/n))}return new this(e,-1,l)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const i=e;n=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let c=0,d=e.length;c<d;c++){const p=e[c],g=p.name.match(r);if(g&&g.length>1){const v=g[1];let _=i[v];_||(i[v]=_=[]),_.push(p)}}const l=[];for(const c in i)l.push(this.CreateFromMorphTargetSequence(c,i[c],t,n));return l}static parseAnimation(e,t){if(ht("AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return kt("AnimationClip: No animation in JSONLoader data."),null;const n=function(v,_,y,S,E){if(y.length!==0){const C=[],M=[];U1(y,C,M,S),C.length!==0&&E.push(new v(_,C,M))}},i=[],r=e.name||"default",l=e.fps||30,c=e.blendMode;let d=e.length||-1;const p=e.hierarchy||[];for(let v=0;v<p.length;v++){const _=p[v].keys;if(!(!_||_.length===0))if(_[0].morphTargets){const y={};let S;for(S=0;S<_.length;S++)if(_[S].morphTargets)for(let E=0;E<_[S].morphTargets.length;E++)y[_[S].morphTargets[E]]=-1;for(const E in y){const C=[],M=[];for(let B=0;B!==_[S].morphTargets.length;++B){const D=_[S];C.push(D.time),M.push(D.morphTarget===E?1:0)}i.push(new Bh(".morphTargetInfluence["+E+"]",C,M))}d=y.length*l}else{const y=".bones["+t[v].name+"]";n(wh,y+".position",_,"pos",i),n(Dh,y+".quaternion",_,"rot",i),n(wh,y+".scale",_,"scl",i)}}return i.length===0?null:new this(r,d,i,c)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,i=e.length;n!==i;++n){const r=this.tracks[n];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());const t=new this.constructor(this.name,this.duration,e,this.blendMode);return t.userData=JSON.parse(JSON.stringify(this.userData)),t}toJSON(){return this.constructor.toJSON(this)}}function oO(a){switch(a.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Bh;case"vector":case"vector2":case"vector3":case"vector4":return wh;case"color":return N1;case"quaternion":return Dh;case"bool":case"boolean":return zh;case"string":return Ph}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+a)}function lO(a){if(a.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=oO(a.type);if(a.times===void 0){const t=[],n=[];U1(a.keys,t,n,"value"),a.times=t,a.values=n}return e.parse!==void 0?e.parse(a):new e(a.name,a.times,a.values,a.interpolation)}const Tl={enabled:!1,files:{},add:function(a,e){this.enabled!==!1&&(this.files[a]=e)},get:function(a){if(this.enabled!==!1)return this.files[a]},remove:function(a){delete this.files[a]},clear:function(){this.files={}}};class L1{constructor(e,t,n){const i=this;let r=!1,l=0,c=0,d;const p=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this._abortController=null,this.itemStart=function(g){c++,r===!1&&i.onStart!==void 0&&i.onStart(g,l,c),r=!0},this.itemEnd=function(g){l++,i.onProgress!==void 0&&i.onProgress(g,l,c),l===c&&(r=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(g){i.onError!==void 0&&i.onError(g)},this.resolveURL=function(g){return d?d(g):g},this.setURLModifier=function(g){return d=g,this},this.addHandler=function(g,v){return p.push(g,v),this},this.removeHandler=function(g){const v=p.indexOf(g);return v!==-1&&p.splice(v,2),this},this.getHandler=function(g){for(let v=0,_=p.length;v<_;v+=2){const y=p[v],S=p[v+1];if(y.global&&(y.lastIndex=0),y.test(g))return S}return null},this.abort=function(){return this.abortController.abort(),this._abortController=null,this}}get abortController(){return this._abortController||(this._abortController=new AbortController),this._abortController}}const L3=new L1;class ls{constructor(e){this.manager=e!==void 0?e:L3,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,r){n.load(e,i,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}ls.DEFAULT_MATERIAL_NAME="__DEFAULT";const gu={};class uO extends Error{constructor(e,t){super(e),this.response=t}}class Mr extends ls{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=Tl.get(`file:${e}`);if(r!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(gu[e]!==void 0){gu[e].push({onLoad:t,onProgress:n,onError:i});return}gu[e]=[],gu[e].push({onLoad:t,onProgress:n,onError:i});const l=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),c=this.mimeType,d=this.responseType;fetch(l).then(p=>{if(p.status===200||p.status===0){if(p.status===0&&ht("FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||p.body===void 0||p.body.getReader===void 0)return p;const g=gu[e],v=p.body.getReader(),_=p.headers.get("X-File-Size")||p.headers.get("Content-Length"),y=_?parseInt(_):0,S=y!==0;let E=0;const C=new ReadableStream({start(M){B();function B(){v.read().then(({done:D,value:w})=>{if(D)M.close();else{E+=w.byteLength;const z=new ProgressEvent("progress",{lengthComputable:S,loaded:E,total:y});for(let O=0,P=g.length;O<P;O++){const G=g[O];G.onProgress&&G.onProgress(z)}M.enqueue(w),B()}},D=>{M.error(D)})}}});return new Response(C)}else throw new uO(`fetch for "${p.url}" responded with ${p.status}: ${p.statusText}`,p)}).then(p=>{switch(d){case"arraybuffer":return p.arrayBuffer();case"blob":return p.blob();case"document":return p.text().then(g=>new DOMParser().parseFromString(g,c));case"json":return p.json();default:if(c==="")return p.text();{const v=/charset="?([^;"\s]*)"?/i.exec(c),_=v&&v[1]?v[1].toLowerCase():void 0,y=new TextDecoder(_);return p.arrayBuffer().then(S=>y.decode(S))}}}).then(p=>{Tl.add(`file:${e}`,p);const g=gu[e];delete gu[e];for(let v=0,_=g.length;v<_;v++){const y=g[v];y.onLoad&&y.onLoad(p)}}).catch(p=>{const g=gu[e];if(g===void 0)throw this.manager.itemError(e),p;delete gu[e];for(let v=0,_=g.length;v<_;v++){const y=g[v];y.onError&&y.onError(p)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class cO extends ls{constructor(e){super(e)}load(e,t,n,i){const r=this,l=new Mr(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){try{t(r.parse(JSON.parse(c)))}catch(d){i?i(d):kt(d),r.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=Hp.parse(e[n]);t.push(i)}return t}}class fO extends ls{constructor(e){super(e)}load(e,t,n,i){const r=this,l=[],c=new wy,d=new Mr(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(r.withCredentials);let p=0;function g(v){d.load(e[v],function(_){const y=r.parse(_,!0);l[v]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},p+=1,p===6&&(y.mipmapCount===1&&(c.minFilter=oi),c.image=l,c.format=y.format,c.needsUpdate=!0,t&&t(c))},n,i)}if(Array.isArray(e))for(let v=0,_=e.length;v<_;++v)g(v);else d.load(e,function(v){const _=r.parse(v,!0);if(_.isCubemap){const y=_.mipmaps.length/_.mipmapCount;for(let S=0;S<y;S++){l[S]={mipmaps:[]};for(let E=0;E<_.mipmapCount;E++)l[S].mipmaps.push(_.mipmaps[S*_.mipmapCount+E]),l[S].format=_.format,l[S].width=_.width,l[S].height=_.height}c.image=l}else c.image.width=_.width,c.image.height=_.height,c.mipmaps=_.mipmaps;_.mipmapCount===1&&(c.minFilter=oi),c.format=_.format,c.needsUpdate=!0,t&&t(c)},n,i);return c}}const up=new WeakMap;class Sg extends ls{constructor(e){super(e)}load(e,t,n,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,l=Tl.get(`image:${e}`);if(l!==void 0){if(l.complete===!0)r.manager.itemStart(e),setTimeout(function(){t&&t(l),r.manager.itemEnd(e)},0);else{let v=up.get(l);v===void 0&&(v=[],up.set(l,v)),v.push({onLoad:t,onError:i})}return l}const c=vg("img");function d(){g(),t&&t(this);const v=up.get(this)||[];for(let _=0;_<v.length;_++){const y=v[_];y.onLoad&&y.onLoad(this)}up.delete(this),r.manager.itemEnd(e)}function p(v){g(),i&&i(v),Tl.remove(`image:${e}`);const _=up.get(this)||[];for(let y=0;y<_.length;y++){const S=_[y];S.onError&&S.onError(v)}up.delete(this),r.manager.itemError(e),r.manager.itemEnd(e)}function g(){c.removeEventListener("load",d,!1),c.removeEventListener("error",p,!1)}return c.addEventListener("load",d,!1),c.addEventListener("error",p,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(c.crossOrigin=this.crossOrigin),Tl.add(`image:${e}`,c),r.manager.itemStart(e),c.src=e,c}}class hO extends ls{constructor(e){super(e)}load(e,t,n,i){const r=new Lg;r.colorSpace=Un;const l=new Sg(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);let c=0;function d(p){l.load(e[p],function(g){r.images[p]=g,c++,c===6&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(let p=0;p<e.length;++p)d(p);return r}}class dO extends ls{constructor(e){super(e)}load(e,t,n,i){const r=this,l=new Po,c=new Mr(this.manager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(r.withCredentials),c.load(e,function(d){let p;try{p=r.parse(d)}catch(g){if(i!==void 0)i(g);else{g(g);return}}p.image!==void 0?l.image=p.image:p.data!==void 0&&(l.image.width=p.width,l.image.height=p.height,l.image.data=p.data),l.wrapS=p.wrapS!==void 0?p.wrapS:Ls,l.wrapT=p.wrapT!==void 0?p.wrapT:Ls,l.magFilter=p.magFilter!==void 0?p.magFilter:oi,l.minFilter=p.minFilter!==void 0?p.minFilter:oi,l.anisotropy=p.anisotropy!==void 0?p.anisotropy:1,p.colorSpace!==void 0&&(l.colorSpace=p.colorSpace),p.flipY!==void 0&&(l.flipY=p.flipY),p.format!==void 0&&(l.format=p.format),p.type!==void 0&&(l.type=p.type),p.mipmaps!==void 0&&(l.mipmaps=p.mipmaps,l.minFilter=Qr),p.mipmapCount===1&&(l.minFilter=oi),p.generateMipmaps!==void 0&&(l.generateMipmaps=p.generateMipmaps),l.needsUpdate=!0,t&&t(l,p)},n,i),l}}class Vg extends ls{constructor(e){super(e)}load(e,t,n,i){const r=new ei,l=new Sg(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(e,function(c){r.image=c,r.needsUpdate=!0,t!==void 0&&t(r)},n,i),r}}class qc extends Bn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new rt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class I3 extends qc{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Bn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new rt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const _A=new zt,mT=new j,gT=new j;class I1{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new De(512,512),this.mapType=ra,this.map=null,this.mapPass=null,this.matrix=new zt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new jp,this._frameExtents=new De(1,1),this._viewportCount=1,this._viewports=[new Cn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;mT.setFromMatrixPosition(e.matrixWorld),t.position.copy(mT),gT.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(gT),t.updateMatrixWorld(),_A.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_A,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(_A)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class pO extends I1{constructor(){super(new _i(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=Ip*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height*this.aspect,r=e.distance||t.far;(n!==t.fov||i!==t.aspect||r!==t.far)&&(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class z1 extends qc{constructor(e,t,n=0,i=Math.PI/3,r=0,l=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Bn.DEFAULT_UP),this.updateMatrix(),this.target=new Bn,this.distance=n,this.angle=i,this.penumbra=r,this.decay=l,this.map=null,this.shadow=new pO}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const vT=new zt,H0=new j,yA=new j;class mO extends I1{constructor(){super(new _i(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new De(4,2),this._viewportCount=6,this._viewports=[new Cn(2,1,1,1),new Cn(0,1,1,1),new Cn(3,1,1,1),new Cn(1,1,1,1),new Cn(3,0,1,1),new Cn(1,0,1,1)],this._cubeDirections=[new j(1,0,0),new j(-1,0,0),new j(0,0,1),new j(0,0,-1),new j(0,1,0),new j(0,-1,0)],this._cubeUps=[new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,0,1),new j(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),H0.setFromMatrixPosition(e.matrixWorld),n.position.copy(H0),yA.copy(n.position),yA.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(yA),n.updateMatrixWorld(),i.makeTranslation(-H0.x,-H0.y,-H0.z),vT.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(vT,n.coordinateSystem,n.reversedDepth)}}class P1 extends qc{constructor(e,t,n=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new mO}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Rl extends Ey{constructor(e=-1,t=1,n=1,i=-1,r=.1,l=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=l,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,l){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=l,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,l=n+e,c=i+t,d=i-t;if(this.view!==null&&this.view.enabled){const p=(this.right-this.left)/this.view.fullWidth/this.zoom,g=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=p*this.view.offsetX,l=r+p*this.view.width,c-=g*this.view.offsetY,d=c-g*this.view.height}this.projectionMatrix.makeOrthographic(r,l,c,d,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class gO extends I1{constructor(){super(new Rl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class F1 extends qc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Bn.DEFAULT_UP),this.updateMatrix(),this.target=new Bn,this.shadow=new gO}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class z3 extends qc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class H1 extends qc{constructor(e,t,n=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class P3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new j)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.282095),t.addScaledVector(l[1],.488603*i),t.addScaledVector(l[2],.488603*r),t.addScaledVector(l[3],.488603*n),t.addScaledVector(l[4],1.092548*(n*i)),t.addScaledVector(l[5],1.092548*(i*r)),t.addScaledVector(l[6],.315392*(3*r*r-1)),t.addScaledVector(l[7],1.092548*(n*r)),t.addScaledVector(l[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,l=this.coefficients;return t.copy(l[0]).multiplyScalar(.886227),t.addScaledVector(l[1],2*.511664*i),t.addScaledVector(l[2],2*.511664*r),t.addScaledVector(l[3],2*.511664*n),t.addScaledVector(l[4],2*.429043*n*i),t.addScaledVector(l[5],2*.429043*i*r),t.addScaledVector(l[6],.743125*r*r-.247708),t.addScaledVector(l[7],2*.429043*n*r),t.addScaledVector(l[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}class F3 extends qc{constructor(e=new P3,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Jy extends ls{constructor(e){super(e),this.textures={}}load(e,t,n,i){const r=this,l=new Mr(r.manager);l.setPath(r.path),l.setRequestHeader(r.requestHeader),l.setWithCredentials(r.withCredentials),l.load(e,function(c){try{t(r.parse(JSON.parse(c)))}catch(d){i?i(d):kt(d),r.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(r){return t[r]===void 0&&ht("MaterialLoader: Undefined texture",r),t[r]}const i=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new rt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(i.dispersion=e.dispersion),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(i.depthFunc=e.depthFunc),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(i.blendSrc=e.blendSrc),e.blendDst!==void 0&&(i.blendDst=e.blendDst),e.blendEquation!==void 0&&(i.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(i.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(i.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(i.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&i.blendColor!==void 0&&i.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(i.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==void 0&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const r in e.uniforms){const l=e.uniforms[r];switch(i.uniforms[r]={},l.type){case"t":i.uniforms[r].value=n(l.value);break;case"c":i.uniforms[r].value=new rt().setHex(l.value);break;case"v2":i.uniforms[r].value=new De().fromArray(l.value);break;case"v3":i.uniforms[r].value=new j().fromArray(l.value);break;case"v4":i.uniforms[r].value=new Cn().fromArray(l.value);break;case"m3":i.uniforms[r].value=new Qt().fromArray(l.value);break;case"m4":i.uniforms[r].value=new zt().fromArray(l.value);break;default:i.uniforms[r].value=l.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const r in e.extensions)i.extensions[r]=e.extensions[r];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=n(e.map)),e.matcap!==void 0&&(i.matcap=n(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let r=e.normalScale;Array.isArray(r)===!1&&(r=[r,r]),i.normalScale=new De().fromArray(r)}return e.displacementMap!==void 0&&(i.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=n(e.envMap)),e.envMapRotation!==void 0&&i.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new De().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Jy.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:M3,SpriteMaterial:x1,RawShaderMaterial:E3,ShaderMaterial:ji,PointsMaterial:Dy,MeshPhysicalMaterial:no,MeshStandardMaterial:Qp,MeshPhongMaterial:Mc,MeshToonMaterial:T3,MeshNormalMaterial:D1,MeshLambertMaterial:C3,MeshDepthMaterial:qy,MeshDistanceMaterial:w1,MeshBasicMaterial:_r,MeshMatcapMaterial:R3,LineDashedMaterial:B3,LineBasicMaterial:os,Material:Ki};return new t[e]}}class Uc{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class H3 extends qt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class G3 extends ls{constructor(e){super(e)}load(e,t,n,i){const r=this,l=new Mr(r.manager);l.setPath(r.path),l.setRequestHeader(r.requestHeader),l.setWithCredentials(r.withCredentials),l.load(e,function(c){try{t(r.parse(JSON.parse(c)))}catch(d){i?i(d):kt(d),r.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(y,S){if(t[S]!==void 0)return t[S];const C=y.interleavedBuffers[S],M=r(y,C.buffer),B=vp(C.type,M),D=new Ig(B,C.stride);return D.uuid=C.uuid,t[S]=D,D}function r(y,S){if(n[S]!==void 0)return n[S];const C=y.arrayBuffers[S],M=new Uint32Array(C).buffer;return n[S]=M,M}const l=e.isInstancedBufferGeometry?new H3:new qt,c=e.data.index;if(c!==void 0){const y=vp(c.type,c.array);l.setIndex(new Dn(y,1))}const d=e.data.attributes;for(const y in d){const S=d[y];let E;if(S.isInterleavedBufferAttribute){const C=i(e.data,S.data);E=new Hc(C,S.itemSize,S.offset,S.normalized)}else{const C=vp(S.type,S.array),M=S.isInstancedBufferAttribute?Ch:Dn;E=new M(C,S.itemSize,S.normalized)}S.name!==void 0&&(E.name=S.name),S.usage!==void 0&&E.setUsage(S.usage),l.setAttribute(y,E)}const p=e.data.morphAttributes;if(p)for(const y in p){const S=p[y],E=[];for(let C=0,M=S.length;C<M;C++){const B=S[C];let D;if(B.isInterleavedBufferAttribute){const w=i(e.data,B.data);D=new Hc(w,B.itemSize,B.offset,B.normalized)}else{const w=vp(B.type,B.array);D=new Dn(w,B.itemSize,B.normalized)}B.name!==void 0&&(D.name=B.name),E.push(D)}l.morphAttributes[y]=E}e.data.morphTargetsRelative&&(l.morphTargetsRelative=!0);const v=e.data.groups||e.data.drawcalls||e.data.offsets;if(v!==void 0)for(let y=0,S=v.length;y!==S;++y){const E=v[y];l.addGroup(E.start,E.count,E.materialIndex)}const _=e.data.boundingSphere;return _!==void 0&&(l.boundingSphere=new wa().fromJSON(_)),e.name&&(l.name=e.name),e.userData&&(l.userData=e.userData),l}}class vO extends ls{constructor(e){super(e)}load(e,t,n,i){const r=this,l=this.path===""?Uc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||l;const c=new Mr(this.manager);c.setPath(this.path),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,function(d){let p=null;try{p=JSON.parse(d)}catch(v){i!==void 0&&i(v),v("ObjectLoader: Can't parse "+e+".",v.message);return}const g=p.metadata;if(g===void 0||g.type===void 0||g.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),kt("ObjectLoader: Can't load "+e);return}r.parse(p,t)},n,i)}async loadAsync(e,t){const n=this,i=this.path===""?Uc.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const r=new Mr(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const l=await r.loadAsync(e,t),c=JSON.parse(l),d=c.metadata;if(d===void 0||d.type===void 0||d.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(c)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),l=this.parseImages(e.images,function(){t!==void 0&&t(p)}),c=this.parseTextures(e.textures,l),d=this.parseMaterials(e.materials,c),p=this.parseObject(e.object,r,d,c,n),g=this.parseSkeletons(e.skeletons,p);if(this.bindSkeletons(p,g),this.bindLightTargets(p),t!==void 0){let v=!1;for(const _ in l)if(l[_].data instanceof HTMLImageElement){v=!0;break}v===!1&&t(p)}return p}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),l=this.parseTextures(e.textures,r),c=this.parseMaterials(e.materials,l),d=this.parseObject(e.object,i,c,l,t),p=this.parseSkeletons(e.skeletons,d);return this.bindSkeletons(d,p),this.bindLightTargets(d),d}parseShapes(e){const t={};if(e!==void 0)for(let n=0,i=e.length;n<i;n++){const r=new _h().fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(r){r.isBone&&(i[r.uuid]=r)}),e!==void 0)for(let r=0,l=e.length;r<l;r++){const c=new zg().fromJSON(e[r],i);n[c.uuid]=c}return n}parseGeometries(e,t){const n={};if(e!==void 0){const i=new G3;for(let r=0,l=e.length;r<l;r++){let c;const d=e[r];switch(d.type){case"BufferGeometry":case"InstancedBufferGeometry":c=i.parse(d);break;default:d.type in pT?c=pT[d.type].fromJSON(d,t):ht(`ObjectLoader: Unsupported geometry type "${d.type}"`)}c.uuid=d.uuid,d.name!==void 0&&(c.name=d.name),d.userData!==void 0&&(c.userData=d.userData),n[d.uuid]=c}}return n}parseMaterials(e,t){const n={},i={};if(e!==void 0){const r=new Jy;r.setTextures(t);for(let l=0,c=e.length;l<c;l++){const d=e[l];n[d.uuid]===void 0&&(n[d.uuid]=r.parse(d)),i[d.uuid]=n[d.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const i=e[n],r=Hp.parse(i);t[r.uuid]=r}return t}parseImages(e,t){const n=this,i={};let r;function l(d){return n.manager.itemStart(d),r.load(d,function(){n.manager.itemEnd(d)},void 0,function(){n.manager.itemError(d),n.manager.itemEnd(d)})}function c(d){if(typeof d=="string"){const p=d,g=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;return l(g)}else return d.data?{data:vp(d.type,d.data),width:d.width,height:d.height}:null}if(e!==void 0&&e.length>0){const d=new L1(t);r=new Sg(d),r.setCrossOrigin(this.crossOrigin);for(let p=0,g=e.length;p<g;p++){const v=e[p],_=v.url;if(Array.isArray(_)){const y=[];for(let S=0,E=_.length;S<E;S++){const C=_[S],M=c(C);M!==null&&(M instanceof HTMLImageElement?y.push(M):y.push(new Po(M.data,M.width,M.height)))}i[v.uuid]=new Cc(y)}else{const y=c(v.url);i[v.uuid]=new Cc(y)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function r(l){if(typeof l=="string"){const c=l,d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:t.resourcePath+c;return await i.loadAsync(d)}else return l.data?{data:vp(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){i=new Sg(this.manager),i.setCrossOrigin(this.crossOrigin);for(let l=0,c=e.length;l<c;l++){const d=e[l],p=d.url;if(Array.isArray(p)){const g=[];for(let v=0,_=p.length;v<_;v++){const y=p[v],S=await r(y);S!==null&&(S instanceof HTMLImageElement?g.push(S):g.push(new Po(S.data,S.width,S.height)))}n[d.uuid]=new Cc(g)}else{const g=await r(d.url);n[d.uuid]=new Cc(g)}}}return n}parseTextures(e,t){function n(r,l){return typeof r=="number"?r:(ht("ObjectLoader.parseTexture: Constant should be in numeric form.",r),l[r])}const i={};if(e!==void 0)for(let r=0,l=e.length;r<l;r++){const c=e[r];c.image===void 0&&ht('ObjectLoader: No "image" specified for',c.uuid),t[c.image]===void 0&&ht("ObjectLoader: Undefined image",c.image);const d=t[c.image],p=d.data;let g;Array.isArray(p)?(g=new Lg,p.length===6&&(g.needsUpdate=!0)):(p&&p.data?g=new Po:g=new ei,p&&(g.needsUpdate=!0)),g.source=d,g.uuid=c.uuid,c.name!==void 0&&(g.name=c.name),c.mapping!==void 0&&(g.mapping=n(c.mapping,xO)),c.channel!==void 0&&(g.channel=c.channel),c.offset!==void 0&&g.offset.fromArray(c.offset),c.repeat!==void 0&&g.repeat.fromArray(c.repeat),c.center!==void 0&&g.center.fromArray(c.center),c.rotation!==void 0&&(g.rotation=c.rotation),c.wrap!==void 0&&(g.wrapS=n(c.wrap[0],xT),g.wrapT=n(c.wrap[1],xT)),c.format!==void 0&&(g.format=c.format),c.internalFormat!==void 0&&(g.internalFormat=c.internalFormat),c.type!==void 0&&(g.type=c.type),c.colorSpace!==void 0&&(g.colorSpace=c.colorSpace),c.minFilter!==void 0&&(g.minFilter=n(c.minFilter,_T)),c.magFilter!==void 0&&(g.magFilter=n(c.magFilter,_T)),c.anisotropy!==void 0&&(g.anisotropy=c.anisotropy),c.flipY!==void 0&&(g.flipY=c.flipY),c.generateMipmaps!==void 0&&(g.generateMipmaps=c.generateMipmaps),c.premultiplyAlpha!==void 0&&(g.premultiplyAlpha=c.premultiplyAlpha),c.unpackAlignment!==void 0&&(g.unpackAlignment=c.unpackAlignment),c.compareFunction!==void 0&&(g.compareFunction=c.compareFunction),c.userData!==void 0&&(g.userData=c.userData),i[c.uuid]=g}return i}parseObject(e,t,n,i,r){let l;function c(_){return t[_]===void 0&&ht("ObjectLoader: Undefined geometry",_),t[_]}function d(_){if(_!==void 0){if(Array.isArray(_)){const y=[];for(let S=0,E=_.length;S<E;S++){const C=_[S];n[C]===void 0&&ht("ObjectLoader: Undefined material",C),y.push(n[C])}return y}return n[_]===void 0&&ht("ObjectLoader: Undefined material",_),n[_]}}function p(_){return i[_]===void 0&&ht("ObjectLoader: Undefined texture",_),i[_]}let g,v;switch(e.type){case"Scene":l=new _g,e.background!==void 0&&(Number.isInteger(e.background)?l.background=new rt(e.background):l.background=p(e.background)),e.environment!==void 0&&(l.environment=p(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?l.fog=new Cy(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(l.fog=new Ty(e.fog.color,e.fog.density)),e.fog.name!==""&&(l.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(l.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(l.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&l.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(l.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&l.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":l=new _i(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(l.focus=e.focus),e.zoom!==void 0&&(l.zoom=e.zoom),e.filmGauge!==void 0&&(l.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(l.filmOffset=e.filmOffset),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"OrthographicCamera":l=new Rl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(l.zoom=e.zoom),e.view!==void 0&&(l.view=Object.assign({},e.view));break;case"AmbientLight":l=new z3(e.color,e.intensity);break;case"DirectionalLight":l=new F1(e.color,e.intensity),l.target=e.target||"";break;case"PointLight":l=new P1(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":l=new H1(e.color,e.intensity,e.width,e.height);break;case"SpotLight":l=new z1(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),l.target=e.target||"";break;case"HemisphereLight":l=new I3(e.color,e.groundColor,e.intensity);break;case"LightProbe":l=new F3().fromJSON(e);break;case"SkinnedMesh":g=c(e.geometry),v=d(e.material),l=new _1(g,v),e.bindMode!==void 0&&(l.bindMode=e.bindMode),e.bindMatrix!==void 0&&l.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(l.skeleton=e.skeleton);break;case"Mesh":g=c(e.geometry),v=d(e.material),l=new Wi(g,v);break;case"InstancedMesh":g=c(e.geometry),v=d(e.material);const _=e.count,y=e.instanceMatrix,S=e.instanceColor;l=new y1(g,v,_),l.instanceMatrix=new Ch(new Float32Array(y.array),16),S!==void 0&&(l.instanceColor=new Ch(new Float32Array(S.array),S.itemSize));break;case"BatchedMesh":g=c(e.geometry),v=d(e.material),l=new f3(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,v),l.geometry=g,l.perObjectFrustumCulled=e.perObjectFrustumCulled,l.sortObjects=e.sortObjects,l._drawRanges=e.drawRanges,l._reservedRanges=e.reservedRanges,l._geometryInfo=e.geometryInfo.map(E=>{let C=null,M=null;return E.boundingBox!==void 0&&(C=new Ga().fromJSON(E.boundingBox)),E.boundingSphere!==void 0&&(M=new wa().fromJSON(E.boundingSphere)),{...E,boundingBox:C,boundingSphere:M}}),l._instanceInfo=e.instanceInfo,l._availableInstanceIds=e._availableInstanceIds,l._availableGeometryIds=e._availableGeometryIds,l._nextIndexStart=e.nextIndexStart,l._nextVertexStart=e.nextVertexStart,l._geometryCount=e.geometryCount,l._maxInstanceCount=e.maxInstanceCount,l._maxVertexCount=e.maxVertexCount,l._maxIndexCount=e.maxIndexCount,l._geometryInitialized=e.geometryInitialized,l._matricesTexture=p(e.matricesTexture.uuid),l._indirectTexture=p(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(l._colorsTexture=p(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(l.boundingSphere=new wa().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(l.boundingBox=new Ga().fromJSON(e.boundingBox));break;case"LOD":l=new c3;break;case"Line":l=new Cu(c(e.geometry),d(e.material));break;case"LineLoop":l=new b1(c(e.geometry),d(e.material));break;case"LineSegments":l=new Go(c(e.geometry),d(e.material));break;case"PointCloud":case"Points":l=new A1(c(e.geometry),d(e.material));break;case"Sprite":l=new u3(d(e.material));break;case"Group":l=new Su;break;case"Bone":l=new Ry;break;default:l=new Bn}if(l.uuid=e.uuid,e.name!==void 0&&(l.name=e.name),e.matrix!==void 0?(l.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(l.matrixAutoUpdate=e.matrixAutoUpdate),l.matrixAutoUpdate&&l.matrix.decompose(l.position,l.quaternion,l.scale)):(e.position!==void 0&&l.position.fromArray(e.position),e.rotation!==void 0&&l.rotation.fromArray(e.rotation),e.quaternion!==void 0&&l.quaternion.fromArray(e.quaternion),e.scale!==void 0&&l.scale.fromArray(e.scale)),e.up!==void 0&&l.up.fromArray(e.up),e.castShadow!==void 0&&(l.castShadow=e.castShadow),e.receiveShadow!==void 0&&(l.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(l.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(l.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(l.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(l.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&l.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(l.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(l.visible=e.visible),e.frustumCulled!==void 0&&(l.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(l.renderOrder=e.renderOrder),e.userData!==void 0&&(l.userData=e.userData),e.layers!==void 0&&(l.layers.mask=e.layers),e.children!==void 0){const _=e.children;for(let y=0;y<_.length;y++)l.add(this.parseObject(_[y],t,n,i,r))}if(e.animations!==void 0){const _=e.animations;for(let y=0;y<_.length;y++){const S=_[y];l.animations.push(r[S])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(l.autoUpdate=e.autoUpdate);const _=e.levels;for(let y=0;y<_.length;y++){const S=_[y],E=l.getObjectByProperty("uuid",S.object);E!==void 0&&l.addLevel(E,S.distance,S.hysteresis)}}return l}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const i=t[n.skeleton];i===void 0?ht("ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(i,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,i=e.getObjectByProperty("uuid",n);i!==void 0?t.target=i:t.target=new Bn}})}}const xO={UVMapping:hy,CubeReflectionMapping:Tu,CubeRefractionMapping:zc,EquirectangularReflectionMapping:hg,EquirectangularRefractionMapping:dg,CubeUVReflectionMapping:Wp},xT={RepeatWrapping:Pc,ClampToEdgeWrapping:Ls,MirroredRepeatWrapping:Bp},_T={NearestFilter:bi,NearestMipmapNearestFilter:dy,NearestMipmapLinearFilter:ch,LinearFilter:oi,LinearMipmapNearestFilter:yp,LinearMipmapLinearFilter:Qr},bA=new WeakMap;class V3 extends ls{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&ht("ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&ht("ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,l=Tl.get(`image-bitmap:${e}`);if(l!==void 0){if(r.manager.itemStart(e),l.then){l.then(p=>{if(bA.has(l)===!0)i&&i(bA.get(l)),r.manager.itemError(e),r.manager.itemEnd(e);else return t&&t(p),r.manager.itemEnd(e),p});return}return setTimeout(function(){t&&t(l),r.manager.itemEnd(e)},0),l}const c={};c.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",c.headers=this.requestHeader,c.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const d=fetch(e,c).then(function(p){return p.blob()}).then(function(p){return createImageBitmap(p,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(p){return Tl.add(`image-bitmap:${e}`,p),t&&t(p),r.manager.itemEnd(e),p}).catch(function(p){i&&i(p),bA.set(d,p),Tl.remove(`image-bitmap:${e}`),r.manager.itemError(e),r.manager.itemEnd(e)});Tl.add(`image-bitmap:${e}`,d),r.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let qx;class G1{static getContext(){return qx===void 0&&(qx=new(window.AudioContext||window.webkitAudioContext)),qx}static setContext(e){qx=e}}class _O extends ls{constructor(e){super(e)}load(e,t,n,i){const r=this,l=new Mr(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(d){try{const p=d.slice(0);G1.getContext().decodeAudioData(p,function(v){t(v)}).catch(c)}catch(p){c(p)}},n,i);function c(d){i?i(d):kt(d),r.manager.itemError(e)}}}const yT=new zt,bT=new zt,Kf=new zt;class yO{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new _i,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new _i,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Kf.copy(e.projectionMatrix);const i=t.eyeSep/2,r=i*t.near/t.focus,l=t.near*Math.tan(xh*t.fov*.5)/t.zoom;let c,d;bT.elements[12]=-i,yT.elements[12]=i,c=-l*t.aspect+r,d=l*t.aspect+r,Kf.elements[0]=2*t.near/(d-c),Kf.elements[8]=(d+c)/(d-c),this.cameraL.projectionMatrix.copy(Kf),c=-l*t.aspect-r,d=l*t.aspect-r,Kf.elements[0]=2*t.near/(d-c),Kf.elements[8]=(d+c)/(d-c),this.cameraR.projectionMatrix.copy(Kf)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(bT),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(yT)}}class X3 extends _i{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class V1{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const Wf=new j,AA=new Da,bO=new j,jf=new j,Zf=new j;class AO extends Bn{constructor(){super(),this.type="AudioListener",this.context=G1.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new V1}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Wf,AA,bO),jf.set(0,0,-1).applyQuaternion(AA),Zf.set(0,1,0).applyQuaternion(AA),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Wf.x,n),t.positionY.linearRampToValueAtTime(Wf.y,n),t.positionZ.linearRampToValueAtTime(Wf.z,n),t.forwardX.linearRampToValueAtTime(jf.x,n),t.forwardY.linearRampToValueAtTime(jf.y,n),t.forwardZ.linearRampToValueAtTime(jf.z,n),t.upX.linearRampToValueAtTime(Zf.x,n),t.upY.linearRampToValueAtTime(Zf.y,n),t.upZ.linearRampToValueAtTime(Zf.z,n)}else t.setPosition(Wf.x,Wf.y,Wf.z),t.setOrientation(jf.x,jf.y,jf.z,Zf.x,Zf.y,Zf.z)}}class k3 extends Bn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){ht("Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){ht("Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){ht("Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){ht("Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){ht("Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(ht("Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){ht("Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(ht("Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Qf=new j,AT=new Da,SO=new j,$f=new j;class MO extends k3{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Qf,AT,SO),$f.set(0,0,1).applyQuaternion(AT);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Qf.x,n),t.positionY.linearRampToValueAtTime(Qf.y,n),t.positionZ.linearRampToValueAtTime(Qf.z,n),t.orientationX.linearRampToValueAtTime($f.x,n),t.orientationY.linearRampToValueAtTime($f.y,n),t.orientationZ.linearRampToValueAtTime($f.z,n)}else t.setPosition(Qf.x,Qf.y,Qf.z),t.setOrientation($f.x,$f.y,$f.z)}}class EO{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Y3{constructor(e,t,n){this.binding=e,this.valueSize=n;let i,r,l;switch(t){case"quaternion":i=this._slerp,r=this._slerpAdditive,l=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,l=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:i=this._lerp,r=this._lerpAdditive,l=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=l,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let l=this.cumulativeWeight;if(l===0){for(let c=0;c!==i;++c)n[r+c]=n[c];l=t}else{l+=t;const c=t/l;this._mixBufferRegion(n,r,0,c,i)}this.cumulativeWeight=l}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,l=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const d=t*this._origIndex;this._mixBufferRegion(n,i,d,1-r,t)}l>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let d=t,p=t+t;d!==p;++d)if(n[d]!==n[d+t]){c.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let r=n,l=i;r!==l;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let l=0;l!==r;++l)e[t+l]=e[n+l]}_slerp(e,t,n,i){Da.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){const l=this._workIndex*r;Da.multiplyQuaternionsFlat(e,l,e,t,e,n),Da.slerpFlat(e,t,e,t,e,l,i)}_lerp(e,t,n,i,r){const l=1-i;for(let c=0;c!==r;++c){const d=t+c;e[d]=e[d]*l+e[n+c]*i}}_lerpAdditive(e,t,n,i,r){for(let l=0;l!==r;++l){const c=t+l;e[c]=e[c]+e[n+l]*i}}}const X1="\\[\\]\\.:\\/",TO=new RegExp("["+X1+"]","g"),k1="[^"+X1+"]",CO="[^"+X1.replace("\\.","")+"]",RO=/((?:WC+[\/:])*)/.source.replace("WC",k1),BO=/(WCOD+)?/.source.replace("WCOD",CO),DO=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",k1),wO=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",k1),UO=new RegExp("^"+RO+BO+DO+wO+"$"),OO=["material","materials","bones","map"];class NO{constructor(e,t,n){const i=n||wn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];i!==void 0&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class wn{constructor(e,t,n){this.path=t,this.parsedPath=n||wn.parseTrackName(t),this.node=wn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new wn.Composite(e,t,n):new wn(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(TO,"")}static parseTrackName(e){const t=UO.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const r=n.nodeName.substring(i+1);OO.indexOf(r)!==-1&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(r){for(let l=0;l<r.length;l++){const c=r[l];if(c.name===t||c.uuid===t)return c;const d=n(c.children);if(d)return d}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=wn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){ht("PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let p=t.objectIndex;switch(n){case"materials":if(!e.material){kt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){kt("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){kt("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let g=0;g<e.length;g++)if(e[g].name===p){p=g;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){kt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){kt("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){kt("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(p!==void 0){if(e[p]===void 0){kt("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[p]}}const l=e[i];if(l===void 0){const p=t.nodeName;kt("PropertyBinding: Trying to update property for track: "+p+"."+i+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?c=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let d=this.BindingType.Direct;if(r!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){kt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){kt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[r]!==void 0&&(r=e.morphTargetDictionary[r])}d=this.BindingType.ArrayElement,this.resolvedProperty=l,this.propertyIndex=r}else l.fromArray!==void 0&&l.toArray!==void 0?(d=this.BindingType.HasFromToArray,this.resolvedProperty=l):Array.isArray(l)?(d=this.BindingType.EntireArray,this.resolvedProperty=l):this.propertyName=i;this.getValue=this.GetterByBindingType[d],this.setValue=this.SetterByBindingTypeAndVersioning[d][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}wn.Composite=NO;wn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};wn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};wn.prototype.GetterByBindingType=[wn.prototype._getValue_direct,wn.prototype._getValue_array,wn.prototype._getValue_arrayElement,wn.prototype._getValue_toArray];wn.prototype.SetterByBindingTypeAndVersioning=[[wn.prototype._setValue_direct,wn.prototype._setValue_direct_setNeedsUpdate,wn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[wn.prototype._setValue_array,wn.prototype._setValue_array_setNeedsUpdate,wn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[wn.prototype._setValue_arrayElement,wn.prototype._setValue_arrayElement_setNeedsUpdate,wn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[wn.prototype._setValue_fromArray,wn.prototype._setValue_fromArray_setNeedsUpdate,wn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class LO{constructor(){this.isAnimationObjectGroup=!0,this.uuid=br(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,l=r.length;let c,d=e.length,p=this.nCachedObjects_;for(let g=0,v=arguments.length;g!==v;++g){const _=arguments[g],y=_.uuid;let S=t[y];if(S===void 0){S=d++,t[y]=S,e.push(_);for(let E=0,C=l;E!==C;++E)r[E].push(new wn(_,n[E],i[E]))}else if(S<p){c=e[S];const E=--p,C=e[E];t[C.uuid]=S,e[S]=C,t[y]=E,e[E]=_;for(let M=0,B=l;M!==B;++M){const D=r[M],w=D[E];let z=D[S];D[S]=w,z===void 0&&(z=new wn(_,n[M],i[M])),D[E]=z}}else e[S]!==c&&kt("AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=p}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let l=0,c=arguments.length;l!==c;++l){const d=arguments[l],p=d.uuid,g=t[p];if(g!==void 0&&g>=r){const v=r++,_=e[v];t[_.uuid]=g,e[g]=_,t[p]=v,e[v]=d;for(let y=0,S=i;y!==S;++y){const E=n[y],C=E[v],M=E[g];E[g]=C,E[v]=M}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,l=e.length;for(let c=0,d=arguments.length;c!==d;++c){const p=arguments[c],g=p.uuid,v=t[g];if(v!==void 0)if(delete t[g],v<r){const _=--r,y=e[_],S=--l,E=e[S];t[y.uuid]=v,e[v]=y,t[E.uuid]=_,e[_]=E,e.pop();for(let C=0,M=i;C!==M;++C){const B=n[C],D=B[_],w=B[S];B[v]=D,B[_]=w,B.pop()}}else{const _=--l,y=e[_];_>0&&(t[y.uuid]=v),e[v]=y,e.pop();for(let S=0,E=i;S!==E;++S){const C=n[S];C[v]=C[_],C.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(i!==void 0)return r[i];const l=this._paths,c=this._parsedPaths,d=this._objects,p=d.length,g=this.nCachedObjects_,v=new Array(p);i=r.length,n[e]=i,l.push(e),c.push(t),r.push(v);for(let _=g,y=d.length;_!==y;++_){const S=d[_];v[_]=new wn(S,e,t)}return v}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const i=this._paths,r=this._parsedPaths,l=this._bindings,c=l.length-1,d=l[c],p=e[c];t[p]=n,l[n]=d,l.pop(),r[n]=r[c],r.pop(),i[n]=i[c],i.pop()}}}class q3{constructor(e,t,n=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const r=t.tracks,l=r.length,c=new Array(l),d={endingStart:fh,endingEnd:fh};for(let p=0;p!==l;++p){const g=r[p].createInterpolant(null);c[p]=g,g.settings=d}this._interpolantSettings=d,this._interpolants=c,this._propertyBindings=new Array(l),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=V2,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const i=this._clip.duration,r=e._clip.duration,l=r/i,c=i/r;e.warp(1,l,t),this.warp(c,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,l=this.timeScale;let c=this._timeScaleInterpolant;c===null&&(c=i._lendControlInterpolant(),this._timeScaleInterpolant=c);const d=c.parameterPositions,p=c.sampleValues;return d[0]=r,d[1]=r+n,p[0]=e/l,p[1]=t/l,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled){this._updateWeight(e);return}const r=this._startTime;if(r!==null){const d=(e-r)*n;d<0||n===0?t=0:(this._startTime=null,t=n*d)}t*=this._updateTimeScale(e);const l=this._updateTime(t),c=this._updateWeight(e);if(c>0){const d=this._interpolants,p=this._propertyBindings;switch(this.blendMode){case f1:for(let g=0,v=d.length;g!==v;++g)d[g].evaluate(l),p[g].accumulateAdditive(c);break;case by:default:for(let g=0,v=d.length;g!==v;++g)d[g].evaluate(l),p[g].accumulate(i,c)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const l=n===X2;if(e===0)return r===-1?i:l&&(r&1)===1?t-i:i;if(n===G2){r===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(r===-1&&(e>=0?(r=0,this._setEndings(!0,this.repetitions===0,l)):this._setEndings(this.repetitions===0,!0,l)),i>=t||i<0){const c=Math.floor(i/t);i-=t*c,r+=Math.abs(c);const d=this.repetitions-r;if(d<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(d===1){const p=e<0;this._setEndings(p,!p,l)}else this._setEndings(!1,!1,l);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:c})}}else this.time=i;if(l&&(r&1)===1)return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=hh,i.endingEnd=hh):(e?i.endingStart=this.zeroSlopeAtStart?hh:fh:i.endingStart=pg,t?i.endingEnd=this.zeroSlopeAtEnd?hh:fh:i.endingEnd=pg)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let l=this._weightInterpolant;l===null&&(l=i._lendControlInterpolant(),this._weightInterpolant=l);const c=l.parameterPositions,d=l.sampleValues;return c[0]=r,d[0]=t,c[1]=r+e,d[1]=n,this}}const IO=new Float32Array(1);class zO extends Cr{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,l=e._propertyBindings,c=e._interpolants,d=n.uuid,p=this._bindingsByRootAndName;let g=p[d];g===void 0&&(g={},p[d]=g);for(let v=0;v!==r;++v){const _=i[v],y=_.name;let S=g[y];if(S!==void 0)++S.referenceCount,l[v]=S;else{if(S=l[v],S!==void 0){S._cacheIndex===null&&(++S.referenceCount,this._addInactiveBinding(S,d,y));continue}const E=t&&t._propertyBindings[v].binding.parsedPath;S=new Y3(wn.create(n,y,E),_.ValueTypeName,_.getValueSize()),++S.referenceCount,this._addInactiveBinding(S,d,y),l[v]=S}c[v].resultBuffer=S.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,i=e._clip.uuid,r=this._actionsByClip[i];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,i,n)}const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];r.useCount++===0&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];--r.useCount===0&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,r=this._actionsByClip;let l=r[t];if(l===void 0)l={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=l;else{const c=l.knownActions;e._byClipCacheIndex=c.length,c.push(e)}e._cacheIndex=i.length,i.push(e),l.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,l=this._actionsByClip,c=l[r],d=c.knownActions,p=d[d.length-1],g=e._byClipCacheIndex;p._byClipCacheIndex=g,d[g]=p,d.pop(),e._byClipCacheIndex=null;const v=c.actionByRoot,_=(e._localRoot||this._root).uuid;delete v[_],d.length===0&&delete l[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const r=t[n];--r.referenceCount===0&&this._removeInactiveBinding(r)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let l=i[t];l===void 0&&(l={},i[t]=l),l[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,l=this._bindingsByRootAndName,c=l[i],d=t[t.length-1],p=e._cacheIndex;d._cacheIndex=p,t[p]=d,t.pop(),delete c[r],Object.keys(c).length===0&&delete l[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new O1(new Float32Array(2),new Float32Array(2),1,IO),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const i=t||this._root,r=i.uuid;let l=typeof e=="string"?Hp.findByName(i,e):e;const c=l!==null?l.uuid:e,d=this._actionsByClip[c];let p=null;if(n===void 0&&(l!==null?n=l.blendMode:n=by),d!==void 0){const v=d.actionByRoot[r];if(v!==void 0&&v.blendMode===n)return v;p=d.knownActions[0],l===null&&(l=p._clip)}if(l===null)return null;const g=new q3(this,l,t,n);return this._bindAction(g,p),this._addInactiveAction(g,c,r),g}existingAction(e,t){const n=t||this._root,i=n.uuid,r=typeof e=="string"?Hp.findByName(n,e):e,l=r?r.uuid:e,c=this._actionsByClip[l];return c!==void 0&&c.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),l=this._accuIndex^=1;for(let p=0;p!==n;++p)t[p]._update(i,e,r,l);const c=this._bindings,d=this._nActiveBindings;for(let p=0;p!==d;++p)c[p].apply(l);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(r!==void 0){const l=r.knownActions;for(let c=0,d=l.length;c!==d;++c){const p=l[c];this._deactivateAction(p);const g=p._cacheIndex,v=t[t.length-1];p._cacheIndex=null,p._byClipCacheIndex=null,v._cacheIndex=g,t[g]=v,t.pop(),this._removeInactiveBindingsForAction(p)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const l in n){const c=n[l].actionByRoot,d=c[t];d!==void 0&&(this._deactivateAction(d),this._removeInactiveAction(d))}const i=this._bindingsByRootAndName,r=i[t];if(r!==void 0)for(const l in r){const c=r[l];c.restoreOriginalState(),this._removeInactiveBinding(c)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class PO extends m1{constructor(e=1,t=1,n=1,i={}){super(e,t,i),this.isRenderTarget3D=!0,this.depth=n,this.texture=new My(null,e,t,n),this._setTextureOptions(i),this.texture.isRenderTargetTexture=!0}}class ln{constructor(e){this.value=e}clone(){return new ln(this.value.clone===void 0?this.value:this.value.clone())}}let FO=0;class HO extends Cr{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:FO++}),this.name="",this.usage=gg,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++){const r=Array.isArray(t[n])?t[n]:[t[n]];for(let l=0;l<r.length;l++)this.uniforms.push(r[l].clone())}return this}clone(){return new this.constructor().copy(this)}}class GO extends Ig{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class VO{constructor(e,t,n,i,r,l=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.normalized=l,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const ST=new zt;class J3{constructor(e,t,n=0,i=1/0){this.ray=new Lh(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new zp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):kt("Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return ST.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(ST),this}intersectObject(e,t=!0,n=[]){return CS(e,this,n,t),n.sort(MT),n}intersectObjects(e,t=!0,n=[]){for(let i=0,r=e.length;i<r;i++)CS(e[i],this,n,t);return n.sort(MT),n}}function MT(a,e){return a.distance-e.distance}function CS(a,e,t,n){let i=!0;if(a.layers.test(e.layers)&&a.raycast(e,t)===!1&&(i=!1),i===!0&&n===!0){const r=a.children;for(let l=0,c=r.length;l<c;l++)CS(r[l],e,t,!0)}}let XO=class{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=kO.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}};function kO(){this._document.hidden===!1&&this.reset()}class RS{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Vt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Vt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class YO{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class Y1{constructor(e,t,n,i){Y1.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,i)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,i){const r=this.elements;return r[0]=e,r[2]=t,r[1]=n,r[3]=i,this}}const ET=new De;class qO{constructor(e=new De(1/0,1/0),t=new De(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ET.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ET).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const TT=new j,Jx=new j,cp=new j,fp=new j,SA=new j,JO=new j,KO=new j;class WO{constructor(e=new j,t=new j){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){TT.subVectors(e,this.start),Jx.subVectors(this.end,this.start);const n=Jx.dot(Jx);let r=Jx.dot(TT)/n;return t&&(r=Vt(r,0,1)),r}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}distanceSqToLine3(e,t=JO,n=KO){const i=10000000000000001e-32;let r,l;const c=this.start,d=e.start,p=this.end,g=e.end;cp.subVectors(p,c),fp.subVectors(g,d),SA.subVectors(c,d);const v=cp.dot(cp),_=fp.dot(fp),y=fp.dot(SA);if(v<=i&&_<=i)return t.copy(c),n.copy(d),t.sub(n),t.dot(t);if(v<=i)r=0,l=y/_,l=Vt(l,0,1);else{const S=cp.dot(SA);if(_<=i)l=0,r=Vt(-S/v,0,1);else{const E=cp.dot(fp),C=v*_-E*E;C!==0?r=Vt((E*y-S*_)/C,0,1):r=0,l=(E*r+y)/_,l<0?(l=0,r=Vt(-S/v,0,1)):l>1&&(l=1,r=Vt((E-S)/v,0,1))}}return t.copy(c).add(cp.multiplyScalar(r)),n.copy(d).add(fp.multiplyScalar(l)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const CT=new j;class jO extends Bn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new qt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let l=0,c=1,d=32;l<d;l++,c++){const p=l/d*Math.PI*2,g=c/d*Math.PI*2;i.push(Math.cos(p),Math.sin(p),1,Math.cos(g),Math.sin(g),1)}n.setAttribute("position",new At(i,3));const r=new os({fog:!1,toneMapped:!1});this.cone=new Go(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),CT.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(CT),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const bc=new j,Kx=new zt,MA=new zt;class ZO extends Go{constructor(e){const t=K3(e),n=new qt,i=[],r=[];for(let p=0;p<t.length;p++){const g=t[p];g.parent&&g.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(0,0,0),r.push(0,0,0))}n.setAttribute("position",new At(i,3)),n.setAttribute("color",new At(r,3));const l=new os({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const c=new rt(255),d=new rt(65280);this.setColors(c,d)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");MA.copy(this.root.matrixWorld).invert();for(let r=0,l=0;r<t.length;r++){const c=t[r];c.parent&&c.parent.isBone&&(Kx.multiplyMatrices(MA,c.matrixWorld),bc.setFromMatrixPosition(Kx),i.setXYZ(l,bc.x,bc.y,bc.z),Kx.multiplyMatrices(MA,c.parent.matrixWorld),bc.setFromMatrixPosition(Kx),i.setXYZ(l+1,bc.x,bc.y,bc.z),l+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const i=this.geometry.getAttribute("color");for(let r=0;r<i.count;r+=2)i.setXYZ(r,e.r,e.g,e.b),i.setXYZ(r+1,t.r,t.g,t.b);return i.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function K3(a){const e=[];a.isBone===!0&&e.push(a);for(let t=0;t<a.children.length;t++)e.push(...K3(a.children[t]));return e}class QO extends Wi{constructor(e,t,n){const i=new Gg(t,4,2),r=new _r({wireframe:!0,fog:!1,toneMapped:!1});super(i,r),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const $O=new j,RT=new rt,BT=new rt;class eN extends Bn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new Hg(t);i.rotateY(Math.PI*.5),this.material=new _r({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),l=new Float32Array(r.count*3);i.setAttribute("color",new Dn(l,3)),this.add(new Wi(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");RT.copy(this.light.color),BT.copy(this.light.groundColor);for(let n=0,i=t.count;n<i;n++){const r=n<i/2?RT:BT;t.setXYZ(n,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt($O.setFromMatrixPosition(this.light.matrixWorld).negate())}}class tN extends Go{constructor(e=10,t=10,n=4473924,i=8947848){n=new rt(n),i=new rt(i);const r=t/2,l=e/t,c=e/2,d=[],p=[];for(let _=0,y=0,S=-c;_<=t;_++,S+=l){d.push(-c,0,S,c,0,S),d.push(S,0,-c,S,0,c);const E=_===r?n:i;E.toArray(p,y),y+=3,E.toArray(p,y),y+=3,E.toArray(p,y),y+=3,E.toArray(p,y),y+=3}const g=new qt;g.setAttribute("position",new At(d,3)),g.setAttribute("color",new At(p,3));const v=new os({vertexColors:!0,toneMapped:!1});super(g,v),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class nN extends Go{constructor(e=10,t=16,n=8,i=64,r=4473924,l=8947848){r=new rt(r),l=new rt(l);const c=[],d=[];if(t>1)for(let v=0;v<t;v++){const _=v/t*(Math.PI*2),y=Math.sin(_)*e,S=Math.cos(_)*e;c.push(0,0,0),c.push(y,0,S);const E=v&1?r:l;d.push(E.r,E.g,E.b),d.push(E.r,E.g,E.b)}for(let v=0;v<n;v++){const _=v&1?r:l,y=e-e/n*v;for(let S=0;S<i;S++){let E=S/i*(Math.PI*2),C=Math.sin(E)*y,M=Math.cos(E)*y;c.push(C,0,M),d.push(_.r,_.g,_.b),E=(S+1)/i*(Math.PI*2),C=Math.sin(E)*y,M=Math.cos(E)*y,c.push(C,0,M),d.push(_.r,_.g,_.b)}}const p=new qt;p.setAttribute("position",new At(c,3)),p.setAttribute("color",new At(d,3));const g=new os({vertexColors:!0,toneMapped:!1});super(p,g),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const DT=new j,Wx=new j,wT=new j;class iN extends Bn{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new qt;i.setAttribute("position",new At([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new os({fog:!1,toneMapped:!1});this.lightPlane=new Cu(i,r),this.add(this.lightPlane),i=new qt,i.setAttribute("position",new At([0,0,0,0,0,1],3)),this.targetLine=new Cu(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),DT.setFromMatrixPosition(this.light.matrixWorld),Wx.setFromMatrixPosition(this.light.target.matrixWorld),wT.subVectors(Wx,DT),this.lightPlane.lookAt(Wx),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Wx),this.targetLine.scale.z=wT.length()}}const jx=new j,Ii=new Ey;class aN extends Go{constructor(e){const t=new qt,n=new os({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],l={};c("n1","n2"),c("n2","n4"),c("n4","n3"),c("n3","n1"),c("f1","f2"),c("f2","f4"),c("f4","f3"),c("f3","f1"),c("n1","f1"),c("n2","f2"),c("n3","f3"),c("n4","f4"),c("p","n1"),c("p","n2"),c("p","n3"),c("p","n4"),c("u1","u2"),c("u2","u3"),c("u3","u1"),c("c","t"),c("p","c"),c("cn1","cn2"),c("cn3","cn4"),c("cf1","cf2"),c("cf3","cf4");function c(S,E){d(S),d(E)}function d(S){i.push(0,0,0),r.push(0,0,0),l[S]===void 0&&(l[S]=[]),l[S].push(i.length/3-1)}t.setAttribute("position",new At(i,3)),t.setAttribute("color",new At(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=l,this.update();const p=new rt(16755200),g=new rt(16711680),v=new rt(43775),_=new rt(16777215),y=new rt(3355443);this.setColors(p,g,v,_,y)}setColors(e,t,n,i,r){const c=this.geometry.getAttribute("color");return c.setXYZ(0,e.r,e.g,e.b),c.setXYZ(1,e.r,e.g,e.b),c.setXYZ(2,e.r,e.g,e.b),c.setXYZ(3,e.r,e.g,e.b),c.setXYZ(4,e.r,e.g,e.b),c.setXYZ(5,e.r,e.g,e.b),c.setXYZ(6,e.r,e.g,e.b),c.setXYZ(7,e.r,e.g,e.b),c.setXYZ(8,e.r,e.g,e.b),c.setXYZ(9,e.r,e.g,e.b),c.setXYZ(10,e.r,e.g,e.b),c.setXYZ(11,e.r,e.g,e.b),c.setXYZ(12,e.r,e.g,e.b),c.setXYZ(13,e.r,e.g,e.b),c.setXYZ(14,e.r,e.g,e.b),c.setXYZ(15,e.r,e.g,e.b),c.setXYZ(16,e.r,e.g,e.b),c.setXYZ(17,e.r,e.g,e.b),c.setXYZ(18,e.r,e.g,e.b),c.setXYZ(19,e.r,e.g,e.b),c.setXYZ(20,e.r,e.g,e.b),c.setXYZ(21,e.r,e.g,e.b),c.setXYZ(22,e.r,e.g,e.b),c.setXYZ(23,e.r,e.g,e.b),c.setXYZ(24,t.r,t.g,t.b),c.setXYZ(25,t.r,t.g,t.b),c.setXYZ(26,t.r,t.g,t.b),c.setXYZ(27,t.r,t.g,t.b),c.setXYZ(28,t.r,t.g,t.b),c.setXYZ(29,t.r,t.g,t.b),c.setXYZ(30,t.r,t.g,t.b),c.setXYZ(31,t.r,t.g,t.b),c.setXYZ(32,n.r,n.g,n.b),c.setXYZ(33,n.r,n.g,n.b),c.setXYZ(34,n.r,n.g,n.b),c.setXYZ(35,n.r,n.g,n.b),c.setXYZ(36,n.r,n.g,n.b),c.setXYZ(37,n.r,n.g,n.b),c.setXYZ(38,i.r,i.g,i.b),c.setXYZ(39,i.r,i.g,i.b),c.setXYZ(40,r.r,r.g,r.b),c.setXYZ(41,r.r,r.g,r.b),c.setXYZ(42,r.r,r.g,r.b),c.setXYZ(43,r.r,r.g,r.b),c.setXYZ(44,r.r,r.g,r.b),c.setXYZ(45,r.r,r.g,r.b),c.setXYZ(46,r.r,r.g,r.b),c.setXYZ(47,r.r,r.g,r.b),c.setXYZ(48,r.r,r.g,r.b),c.setXYZ(49,r.r,r.g,r.b),c.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,n=1,i=1;let r,l;if(Ii.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)r=1,l=0;else if(this.camera.coordinateSystem===xr)r=-1,l=1;else if(this.camera.coordinateSystem===Np)r=0,l=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);qi("c",t,e,Ii,0,0,r),qi("t",t,e,Ii,0,0,l),qi("n1",t,e,Ii,-n,-i,r),qi("n2",t,e,Ii,n,-i,r),qi("n3",t,e,Ii,-n,i,r),qi("n4",t,e,Ii,n,i,r),qi("f1",t,e,Ii,-n,-i,l),qi("f2",t,e,Ii,n,-i,l),qi("f3",t,e,Ii,-n,i,l),qi("f4",t,e,Ii,n,i,l),qi("u1",t,e,Ii,n*.7,i*1.1,r),qi("u2",t,e,Ii,-n*.7,i*1.1,r),qi("u3",t,e,Ii,0,i*2,r),qi("cf1",t,e,Ii,-n,0,l),qi("cf2",t,e,Ii,n,0,l),qi("cf3",t,e,Ii,0,-i,l),qi("cf4",t,e,Ii,0,i,l),qi("cn1",t,e,Ii,-n,0,r),qi("cn2",t,e,Ii,n,0,r),qi("cn3",t,e,Ii,0,-i,r),qi("cn4",t,e,Ii,0,i,r),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function qi(a,e,t,n,i,r,l){jx.set(i,r,l).unproject(n);const c=e[a];if(c!==void 0){const d=t.getAttribute("position");for(let p=0,g=c.length;p<g;p++)d.setXYZ(c[p],jx.x,jx.y,jx.z)}}const Zx=new Ga;class sN extends Go{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new qt;r.setIndex(new Dn(n,1)),r.setAttribute("position",new Dn(i,3)),super(r,new os({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Zx.setFromObject(this.object),Zx.isEmpty())return;const e=Zx.min,t=Zx.max,n=this.geometry.attributes.position,i=n.array;i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=e.x,i[4]=t.y,i[5]=t.z,i[6]=e.x,i[7]=e.y,i[8]=t.z,i[9]=t.x,i[10]=e.y,i[11]=t.z,i[12]=t.x,i[13]=t.y,i[14]=e.z,i[15]=e.x,i[16]=t.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=t.x,i[22]=e.y,i[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class rN extends Go{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new qt;r.setIndex(new Dn(n,1)),r.setAttribute("position",new At(i,3)),super(r,new os({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class oN extends Cu{constructor(e,t=1,n=16776960){const i=n,r=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],l=new qt;l.setAttribute("position",new At(r,3)),l.computeBoundingSphere(),super(l,new os({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const c=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],d=new qt;d.setAttribute("position",new At(c,3)),d.computeBoundingSphere(),this.add(new Wi(d,new _r({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const UT=new j;let Qx,EA;class lN extends Bn{constructor(e=new j(0,0,1),t=new j(0,0,0),n=1,i=16776960,r=n*.2,l=r*.2){super(),this.type="ArrowHelper",Qx===void 0&&(Qx=new qt,Qx.setAttribute("position",new At([0,0,0,0,1,0],3)),EA=new Fg(.5,1,5,1),EA.translate(0,-.5,0)),this.position.copy(t),this.line=new Cu(Qx,new os({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Wi(EA,new _r({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,l)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{UT.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(UT,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class uN extends Go{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new qt;i.setAttribute("position",new At(t,3)),i.setAttribute("color",new At(n,3));const r=new os({vertexColors:!0,toneMapped:!1});super(i,r),this.type="AxesHelper"}setColors(e,t,n){const i=new rt,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class cN{constructor(){this.type="ShapePath",this.color=new rt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Q_,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,r,l){return this.currentPath.bezierCurveTo(e,t,n,i,r,l),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(M){const B=[];for(let D=0,w=M.length;D<w;D++){const z=M[D],O=new _h;O.curves=z.curves,B.push(O)}return B}function n(M,B){const D=B.length;let w=!1;for(let z=D-1,O=0;O<D;z=O++){let P=B[z],G=B[O],L=G.x-P.x,I=G.y-P.y;if(Math.abs(I)>Number.EPSILON){if(I<0&&(P=B[O],L=-L,G=B[z],I=-I),M.y<P.y||M.y>G.y)continue;if(M.y===P.y){if(M.x===P.x)return!0}else{const Y=I*(M.x-P.x)-L*(M.y-P.y);if(Y===0)return!0;if(Y<0)continue;w=!w}}else{if(M.y!==P.y)continue;if(G.x<=M.x&&M.x<=P.x||P.x<=M.x&&M.x<=G.x)return!0}}return w}const i=Io.isClockWise,r=this.subPaths;if(r.length===0)return[];let l,c,d;const p=[];if(r.length===1)return c=r[0],d=new _h,d.curves=c.curves,p.push(d),p;let g=!i(r[0].getPoints());g=e?!g:g;const v=[],_=[];let y=[],S=0,E;_[S]=void 0,y[S]=[];for(let M=0,B=r.length;M<B;M++)c=r[M],E=c.getPoints(),l=i(E),l=e?!l:l,l?(!g&&_[S]&&S++,_[S]={s:new _h,p:E},_[S].s.curves=c.curves,g&&S++,y[S]=[]):y[S].push({h:c,p:E[0]});if(!_[0])return t(r);if(_.length>1){let M=!1,B=0;for(let D=0,w=_.length;D<w;D++)v[D]=[];for(let D=0,w=_.length;D<w;D++){const z=y[D];for(let O=0;O<z.length;O++){const P=z[O];let G=!0;for(let L=0;L<_.length;L++)n(P.p,_[L].p)&&(D!==L&&B++,G?(G=!1,v[L].push(P)):M=!0);G&&v[D].push(P)}}B>0&&M===!1&&(y=v)}let C;for(let M=0,B=_.length;M<B;M++){d=_[M].s,p.push(d),C=y[M];for(let D=0,w=C.length;D<w;D++)d.holes.push(C[D].h)}return p}}class fN extends Cr{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){ht("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function hN(a,e){const t=a.image&&a.image.width?a.image.width/a.image.height:1;return t>e?(a.repeat.x=1,a.repeat.y=t/e,a.offset.x=0,a.offset.y=(1-a.repeat.y)/2):(a.repeat.x=e/t,a.repeat.y=1,a.offset.x=(1-a.repeat.x)/2,a.offset.y=0),a}function dN(a,e){const t=a.image&&a.image.width?a.image.width/a.image.height:1;return t>e?(a.repeat.x=e/t,a.repeat.y=1,a.offset.x=(1-a.repeat.x)/2,a.offset.y=0):(a.repeat.x=1,a.repeat.y=t/e,a.offset.x=0,a.offset.y=(1-a.repeat.y)/2),a}function pN(a){return a.repeat.x=1,a.repeat.y=1,a.offset.x=0,a.offset.y=0,a}function BS(a,e,t,n){const i=mN(n);switch(t){case u1:return a*e;case vy:return a*e/i.components*i.byteLength;case Ng:return a*e/i.components*i.byteLength;case xy:return a*e*2/i.components*i.byteLength;case _y:return a*e*2/i.components*i.byteLength;case c1:return a*e*3/i.components*i.byteLength;case ss:return a*e*4/i.components*i.byteLength;case yy:return a*e*4/i.components*i.byteLength;case j0:case Z0:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*8;case Q0:case $0:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*16;case b_:case S_:return Math.max(a,16)*Math.max(e,8)/4;case y_:case A_:return Math.max(a,8)*Math.max(e,8)/2;case M_:case E_:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*8;case T_:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*16;case C_:return Math.floor((a+3)/4)*Math.floor((e+3)/4)*16;case R_:return Math.floor((a+4)/5)*Math.floor((e+3)/4)*16;case B_:return Math.floor((a+4)/5)*Math.floor((e+4)/5)*16;case D_:return Math.floor((a+5)/6)*Math.floor((e+4)/5)*16;case w_:return Math.floor((a+5)/6)*Math.floor((e+5)/6)*16;case U_:return Math.floor((a+7)/8)*Math.floor((e+4)/5)*16;case O_:return Math.floor((a+7)/8)*Math.floor((e+5)/6)*16;case N_:return Math.floor((a+7)/8)*Math.floor((e+7)/8)*16;case L_:return Math.floor((a+9)/10)*Math.floor((e+4)/5)*16;case I_:return Math.floor((a+9)/10)*Math.floor((e+5)/6)*16;case z_:return Math.floor((a+9)/10)*Math.floor((e+7)/8)*16;case P_:return Math.floor((a+9)/10)*Math.floor((e+9)/10)*16;case F_:return Math.floor((a+11)/12)*Math.floor((e+9)/10)*16;case H_:return Math.floor((a+11)/12)*Math.floor((e+11)/12)*16;case G_:case V_:case X_:return Math.ceil(a/4)*Math.ceil(e/4)*16;case k_:case Y_:return Math.ceil(a/4)*Math.ceil(e/4)*8;case q_:case J_:return Math.ceil(a/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function mN(a){switch(a){case ra:case s1:return{byteLength:1,components:1};case Dp:case r1:case Xc:return{byteLength:2,components:1};case my:case gy:return{byteLength:2,components:4};case Bl:case py:case Is:return{byteLength:4,components:1};case o1:case l1:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${a}.`)}class gN{static contain(e,t){return hN(e,t)}static cover(e,t){return dN(e,t)}static fill(e){return pN(e)}static getByteLength(e,t,n,i){return BS(e,t,n,i)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Nh}}));typeof window<"u"&&(window.__THREE__?ht("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Nh);function W3(){let a=null,e=!1,t=null,n=null;function i(r,l){t(r,l),n=a.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(n=a.requestAnimationFrame(i),e=!0)},stop:function(){a.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(r){t=r},setContext:function(r){a=r}}}function vN(a){const e=new WeakMap;function t(c,d){const p=c.array,g=c.usage,v=p.byteLength,_=a.createBuffer();a.bindBuffer(d,_),a.bufferData(d,p,g),c.onUploadCallback();let y;if(p instanceof Float32Array)y=a.FLOAT;else if(typeof Float16Array<"u"&&p instanceof Float16Array)y=a.HALF_FLOAT;else if(p instanceof Uint16Array)c.isFloat16BufferAttribute?y=a.HALF_FLOAT:y=a.UNSIGNED_SHORT;else if(p instanceof Int16Array)y=a.SHORT;else if(p instanceof Uint32Array)y=a.UNSIGNED_INT;else if(p instanceof Int32Array)y=a.INT;else if(p instanceof Int8Array)y=a.BYTE;else if(p instanceof Uint8Array)y=a.UNSIGNED_BYTE;else if(p instanceof Uint8ClampedArray)y=a.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+p);return{buffer:_,type:y,bytesPerElement:p.BYTES_PER_ELEMENT,version:c.version,size:v}}function n(c,d,p){const g=d.array,v=d.updateRanges;if(a.bindBuffer(p,c),v.length===0)a.bufferSubData(p,0,g);else{v.sort((y,S)=>y.start-S.start);let _=0;for(let y=1;y<v.length;y++){const S=v[_],E=v[y];E.start<=S.start+S.count+1?S.count=Math.max(S.count,E.start+E.count-S.start):(++_,v[_]=E)}v.length=_+1;for(let y=0,S=v.length;y<S;y++){const E=v[y];a.bufferSubData(p,E.start*g.BYTES_PER_ELEMENT,g,E.start,E.count)}d.clearUpdateRanges()}d.onUploadCallback()}function i(c){return c.isInterleavedBufferAttribute&&(c=c.data),e.get(c)}function r(c){c.isInterleavedBufferAttribute&&(c=c.data);const d=e.get(c);d&&(a.deleteBuffer(d.buffer),e.delete(c))}function l(c,d){if(c.isInterleavedBufferAttribute&&(c=c.data),c.isGLBufferAttribute){const g=e.get(c);(!g||g.version<c.version)&&e.set(c,{buffer:c.buffer,type:c.type,bytesPerElement:c.elementSize,version:c.version});return}const p=e.get(c);if(p===void 0)e.set(c,t(c,d));else if(p.version<c.version){if(p.size!==c.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(p.buffer,c,d),p.version=c.version}}return{get:i,remove:r,update:l}}var xN=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,_N=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,yN=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,bN=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,AN=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,SN=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,MN=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,EN=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,TN=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,CN=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,RN=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,BN=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,DN=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,wN=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,UN=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,ON=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,NN=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,LN=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,IN=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,zN=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,PN=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,FN=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,HN=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,GN=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,VN=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,XN=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,kN=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,YN=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,qN=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,JN=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,KN="gl_FragColor = linearToOutputTexel( gl_FragColor );",WN=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,jN=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,ZN=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,QN=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,$N=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,eL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,tL=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,nL=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,iL=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,aL=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,sL=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,rL=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,oL=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lL=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,uL=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,cL=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,fL=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,hL=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,dL=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,pL=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,mL=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,gL=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 uv = vec2( roughness, dotNV );
	return texture2D( dfgLUT, uv ).rg;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNV * dotNV), 0.0, dotNV), material.roughness );
	vec2 dfgL = DFGApprox( vec3(0.0, 0.0, 1.0), vec3(sqrt(1.0 - dotNL * dotNL), 0.0, dotNL), material.roughness );
	vec3 FssEss_V = material.specularColor * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColor * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColor + ( 1.0 - material.specularColor ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,vL=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,xL=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,_L=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,yL=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,bL=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,AL=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,SL=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,ML=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,EL=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,TL=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,CL=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,RL=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,BL=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,DL=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,wL=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,UL=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,OL=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,NL=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,LL=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,IL=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,zL=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,PL=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,FL=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,HL=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,GL=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,VL=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,XL=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,kL=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,YL=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,qL=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,JL=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,KL=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,WL=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,jL=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,ZL=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,QL=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,$L=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,eI=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,tI=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,nI=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,iI=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,aI=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,sI=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,rI=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,oI=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,lI=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,uI=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,cI=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,fI=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,hI=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,dI=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,pI=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,mI=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,gI=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vI=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,xI=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,_I=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,yI=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bI=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,AI=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,SI=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,MI=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,EI=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,TI=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,CI=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,RI=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,BI=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,DI=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,wI=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,UI=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OI=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,NI=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,LI=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,II=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,zI=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,PI=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,FI=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,HI=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,GI=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,VI=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XI=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,kI=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YI=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,qI=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,JI=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,KI=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,WI=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,jI=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,an={alphahash_fragment:xN,alphahash_pars_fragment:_N,alphamap_fragment:yN,alphamap_pars_fragment:bN,alphatest_fragment:AN,alphatest_pars_fragment:SN,aomap_fragment:MN,aomap_pars_fragment:EN,batching_pars_vertex:TN,batching_vertex:CN,begin_vertex:RN,beginnormal_vertex:BN,bsdfs:DN,iridescence_fragment:wN,bumpmap_pars_fragment:UN,clipping_planes_fragment:ON,clipping_planes_pars_fragment:NN,clipping_planes_pars_vertex:LN,clipping_planes_vertex:IN,color_fragment:zN,color_pars_fragment:PN,color_pars_vertex:FN,color_vertex:HN,common:GN,cube_uv_reflection_fragment:VN,defaultnormal_vertex:XN,displacementmap_pars_vertex:kN,displacementmap_vertex:YN,emissivemap_fragment:qN,emissivemap_pars_fragment:JN,colorspace_fragment:KN,colorspace_pars_fragment:WN,envmap_fragment:jN,envmap_common_pars_fragment:ZN,envmap_pars_fragment:QN,envmap_pars_vertex:$N,envmap_physical_pars_fragment:cL,envmap_vertex:eL,fog_vertex:tL,fog_pars_vertex:nL,fog_fragment:iL,fog_pars_fragment:aL,gradientmap_pars_fragment:sL,lightmap_pars_fragment:rL,lights_lambert_fragment:oL,lights_lambert_pars_fragment:lL,lights_pars_begin:uL,lights_toon_fragment:fL,lights_toon_pars_fragment:hL,lights_phong_fragment:dL,lights_phong_pars_fragment:pL,lights_physical_fragment:mL,lights_physical_pars_fragment:gL,lights_fragment_begin:vL,lights_fragment_maps:xL,lights_fragment_end:_L,logdepthbuf_fragment:yL,logdepthbuf_pars_fragment:bL,logdepthbuf_pars_vertex:AL,logdepthbuf_vertex:SL,map_fragment:ML,map_pars_fragment:EL,map_particle_fragment:TL,map_particle_pars_fragment:CL,metalnessmap_fragment:RL,metalnessmap_pars_fragment:BL,morphinstance_vertex:DL,morphcolor_vertex:wL,morphnormal_vertex:UL,morphtarget_pars_vertex:OL,morphtarget_vertex:NL,normal_fragment_begin:LL,normal_fragment_maps:IL,normal_pars_fragment:zL,normal_pars_vertex:PL,normal_vertex:FL,normalmap_pars_fragment:HL,clearcoat_normal_fragment_begin:GL,clearcoat_normal_fragment_maps:VL,clearcoat_pars_fragment:XL,iridescence_pars_fragment:kL,opaque_fragment:YL,packing:qL,premultiplied_alpha_fragment:JL,project_vertex:KL,dithering_fragment:WL,dithering_pars_fragment:jL,roughnessmap_fragment:ZL,roughnessmap_pars_fragment:QL,shadowmap_pars_fragment:$L,shadowmap_pars_vertex:eI,shadowmap_vertex:tI,shadowmask_pars_fragment:nI,skinbase_vertex:iI,skinning_pars_vertex:aI,skinning_vertex:sI,skinnormal_vertex:rI,specularmap_fragment:oI,specularmap_pars_fragment:lI,tonemapping_fragment:uI,tonemapping_pars_fragment:cI,transmission_fragment:fI,transmission_pars_fragment:hI,uv_pars_fragment:dI,uv_pars_vertex:pI,uv_vertex:mI,worldpos_vertex:gI,background_vert:vI,background_frag:xI,backgroundCube_vert:_I,backgroundCube_frag:yI,cube_vert:bI,cube_frag:AI,depth_vert:SI,depth_frag:MI,distanceRGBA_vert:EI,distanceRGBA_frag:TI,equirect_vert:CI,equirect_frag:RI,linedashed_vert:BI,linedashed_frag:DI,meshbasic_vert:wI,meshbasic_frag:UI,meshlambert_vert:OI,meshlambert_frag:NI,meshmatcap_vert:LI,meshmatcap_frag:II,meshnormal_vert:zI,meshnormal_frag:PI,meshphong_vert:FI,meshphong_frag:HI,meshphysical_vert:GI,meshphysical_frag:VI,meshtoon_vert:XI,meshtoon_frag:kI,points_vert:YI,points_frag:qI,shadow_vert:JI,shadow_frag:KI,sprite_vert:WI,sprite_frag:jI},ft={common:{diffuse:{value:new rt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Qt},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Qt}},envmap:{envMap:{value:null},envMapRotation:{value:new Qt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Qt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Qt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Qt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Qt},normalScale:{value:new De(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Qt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Qt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Qt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Qt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new rt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new rt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0},uvTransform:{value:new Qt}},sprite:{diffuse:{value:new rt(16777215)},opacity:{value:1},center:{value:new De(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Qt},alphaMap:{value:null},alphaMapTransform:{value:new Qt},alphaTest:{value:0}}},No={basic:{uniforms:Bs([ft.common,ft.specularmap,ft.envmap,ft.aomap,ft.lightmap,ft.fog]),vertexShader:an.meshbasic_vert,fragmentShader:an.meshbasic_frag},lambert:{uniforms:Bs([ft.common,ft.specularmap,ft.envmap,ft.aomap,ft.lightmap,ft.emissivemap,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.fog,ft.lights,{emissive:{value:new rt(0)}}]),vertexShader:an.meshlambert_vert,fragmentShader:an.meshlambert_frag},phong:{uniforms:Bs([ft.common,ft.specularmap,ft.envmap,ft.aomap,ft.lightmap,ft.emissivemap,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.fog,ft.lights,{emissive:{value:new rt(0)},specular:{value:new rt(1118481)},shininess:{value:30}}]),vertexShader:an.meshphong_vert,fragmentShader:an.meshphong_frag},standard:{uniforms:Bs([ft.common,ft.envmap,ft.aomap,ft.lightmap,ft.emissivemap,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.roughnessmap,ft.metalnessmap,ft.fog,ft.lights,{emissive:{value:new rt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:an.meshphysical_vert,fragmentShader:an.meshphysical_frag},toon:{uniforms:Bs([ft.common,ft.aomap,ft.lightmap,ft.emissivemap,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.gradientmap,ft.fog,ft.lights,{emissive:{value:new rt(0)}}]),vertexShader:an.meshtoon_vert,fragmentShader:an.meshtoon_frag},matcap:{uniforms:Bs([ft.common,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.fog,{matcap:{value:null}}]),vertexShader:an.meshmatcap_vert,fragmentShader:an.meshmatcap_frag},points:{uniforms:Bs([ft.points,ft.fog]),vertexShader:an.points_vert,fragmentShader:an.points_frag},dashed:{uniforms:Bs([ft.common,ft.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:an.linedashed_vert,fragmentShader:an.linedashed_frag},depth:{uniforms:Bs([ft.common,ft.displacementmap]),vertexShader:an.depth_vert,fragmentShader:an.depth_frag},normal:{uniforms:Bs([ft.common,ft.bumpmap,ft.normalmap,ft.displacementmap,{opacity:{value:1}}]),vertexShader:an.meshnormal_vert,fragmentShader:an.meshnormal_frag},sprite:{uniforms:Bs([ft.sprite,ft.fog]),vertexShader:an.sprite_vert,fragmentShader:an.sprite_frag},background:{uniforms:{uvTransform:{value:new Qt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:an.background_vert,fragmentShader:an.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Qt}},vertexShader:an.backgroundCube_vert,fragmentShader:an.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:an.cube_vert,fragmentShader:an.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:an.equirect_vert,fragmentShader:an.equirect_frag},distanceRGBA:{uniforms:Bs([ft.common,ft.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:an.distanceRGBA_vert,fragmentShader:an.distanceRGBA_frag},shadow:{uniforms:Bs([ft.lights,ft.fog,{color:{value:new rt(0)},opacity:{value:1}}]),vertexShader:an.shadow_vert,fragmentShader:an.shadow_frag}};No.physical={uniforms:Bs([No.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Qt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Qt},clearcoatNormalScale:{value:new De(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Qt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Qt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Qt},sheen:{value:0},sheenColor:{value:new rt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Qt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Qt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Qt},transmissionSamplerSize:{value:new De},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Qt},attenuationDistance:{value:0},attenuationColor:{value:new rt(0)},specularColor:{value:new rt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Qt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Qt},anisotropyVector:{value:new De},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Qt}}]),vertexShader:an.meshphysical_vert,fragmentShader:an.meshphysical_frag};const $x={r:0,b:0,g:0},eh=new Sr,ZI=new zt;function QI(a,e,t,n,i,r,l){const c=new rt(0);let d=r===!0?0:1,p,g,v=null,_=0,y=null;function S(D){let w=D.isScene===!0?D.background:null;return w&&w.isTexture&&(w=(D.backgroundBlurriness>0?t:e).get(w)),w}function E(D){let w=!1;const z=S(D);z===null?M(c,d):z&&z.isColor&&(M(z,1),w=!0);const O=a.xr.getEnvironmentBlendMode();O==="additive"?n.buffers.color.setClear(0,0,0,1,l):O==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,l),(a.autoClear||w)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),a.clear(a.autoClearColor,a.autoClearDepth,a.autoClearStencil))}function C(D,w){const z=S(w);z&&(z.isCubeTexture||z.mapping===Wp)?(g===void 0&&(g=new Wi(new Ih(1,1,1),new ji({name:"BackgroundCubeMaterial",uniforms:Pp(No.backgroundCube.uniforms),vertexShader:No.backgroundCube.vertexShader,fragmentShader:No.backgroundCube.fragmentShader,side:pa,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),g.geometry.deleteAttribute("normal"),g.geometry.deleteAttribute("uv"),g.onBeforeRender=function(O,P,G){this.matrixWorld.copyPosition(G.matrixWorld)},Object.defineProperty(g.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(g)),eh.copy(w.backgroundRotation),eh.x*=-1,eh.y*=-1,eh.z*=-1,z.isCubeTexture&&z.isRenderTargetTexture===!1&&(eh.y*=-1,eh.z*=-1),g.material.uniforms.envMap.value=z,g.material.uniforms.flipEnvMap.value=z.isCubeTexture&&z.isRenderTargetTexture===!1?-1:1,g.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,g.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,g.material.uniforms.backgroundRotation.value.setFromMatrix4(ZI.makeRotationFromEuler(eh)),g.material.toneMapped=Tn.getTransfer(z.colorSpace)!==Wn,(v!==z||_!==z.version||y!==a.toneMapping)&&(g.material.needsUpdate=!0,v=z,_=z.version,y=a.toneMapping),g.layers.enableAll(),D.unshift(g,g.geometry,g.material,0,0,null)):z&&z.isTexture&&(p===void 0&&(p=new Wi(new Zp(2,2),new ji({name:"BackgroundMaterial",uniforms:Pp(No.background.uniforms),vertexShader:No.background.vertexShader,fragmentShader:No.background.fragmentShader,side:Fo,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),p.geometry.deleteAttribute("normal"),Object.defineProperty(p.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(p)),p.material.uniforms.t2D.value=z,p.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,p.material.toneMapped=Tn.getTransfer(z.colorSpace)!==Wn,z.matrixAutoUpdate===!0&&z.updateMatrix(),p.material.uniforms.uvTransform.value.copy(z.matrix),(v!==z||_!==z.version||y!==a.toneMapping)&&(p.material.needsUpdate=!0,v=z,_=z.version,y=a.toneMapping),p.layers.enableAll(),D.unshift(p,p.geometry,p.material,0,0,null))}function M(D,w){D.getRGB($x,a3(a)),n.buffers.color.setClear($x.r,$x.g,$x.b,w,l)}function B(){g!==void 0&&(g.geometry.dispose(),g.material.dispose(),g=void 0),p!==void 0&&(p.geometry.dispose(),p.material.dispose(),p=void 0)}return{getClearColor:function(){return c},setClearColor:function(D,w=1){c.set(D),d=w,M(c,d)},getClearAlpha:function(){return d},setClearAlpha:function(D){d=D,M(c,d)},render:E,addToRenderList:C,dispose:B}}function $I(a,e){const t=a.getParameter(a.MAX_VERTEX_ATTRIBS),n={},i=_(null);let r=i,l=!1;function c(I,Y,ee,te,le){let re=!1;const F=v(te,ee,Y);r!==F&&(r=F,p(r.object)),re=y(I,te,ee,le),re&&S(I,te,ee,le),le!==null&&e.update(le,a.ELEMENT_ARRAY_BUFFER),(re||l)&&(l=!1,w(I,Y,ee,te),le!==null&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e.get(le).buffer))}function d(){return a.createVertexArray()}function p(I){return a.bindVertexArray(I)}function g(I){return a.deleteVertexArray(I)}function v(I,Y,ee){const te=ee.wireframe===!0;let le=n[I.id];le===void 0&&(le={},n[I.id]=le);let re=le[Y.id];re===void 0&&(re={},le[Y.id]=re);let F=re[te];return F===void 0&&(F=_(d()),re[te]=F),F}function _(I){const Y=[],ee=[],te=[];for(let le=0;le<t;le++)Y[le]=0,ee[le]=0,te[le]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Y,enabledAttributes:ee,attributeDivisors:te,object:I,attributes:{},index:null}}function y(I,Y,ee,te){const le=r.attributes,re=Y.attributes;let F=0;const J=ee.getAttributes();for(const Z in J)if(J[Z].location>=0){const pe=le[Z];let q=re[Z];if(q===void 0&&(Z==="instanceMatrix"&&I.instanceMatrix&&(q=I.instanceMatrix),Z==="instanceColor"&&I.instanceColor&&(q=I.instanceColor)),pe===void 0||pe.attribute!==q||q&&pe.data!==q.data)return!0;F++}return r.attributesNum!==F||r.index!==te}function S(I,Y,ee,te){const le={},re=Y.attributes;let F=0;const J=ee.getAttributes();for(const Z in J)if(J[Z].location>=0){let pe=re[Z];pe===void 0&&(Z==="instanceMatrix"&&I.instanceMatrix&&(pe=I.instanceMatrix),Z==="instanceColor"&&I.instanceColor&&(pe=I.instanceColor));const q={};q.attribute=pe,pe&&pe.data&&(q.data=pe.data),le[Z]=q,F++}r.attributes=le,r.attributesNum=F,r.index=te}function E(){const I=r.newAttributes;for(let Y=0,ee=I.length;Y<ee;Y++)I[Y]=0}function C(I){M(I,0)}function M(I,Y){const ee=r.newAttributes,te=r.enabledAttributes,le=r.attributeDivisors;ee[I]=1,te[I]===0&&(a.enableVertexAttribArray(I),te[I]=1),le[I]!==Y&&(a.vertexAttribDivisor(I,Y),le[I]=Y)}function B(){const I=r.newAttributes,Y=r.enabledAttributes;for(let ee=0,te=Y.length;ee<te;ee++)Y[ee]!==I[ee]&&(a.disableVertexAttribArray(ee),Y[ee]=0)}function D(I,Y,ee,te,le,re,F){F===!0?a.vertexAttribIPointer(I,Y,ee,le,re):a.vertexAttribPointer(I,Y,ee,te,le,re)}function w(I,Y,ee,te){E();const le=te.attributes,re=ee.getAttributes(),F=Y.defaultAttributeValues;for(const J in re){const Z=re[J];if(Z.location>=0){let oe=le[J];if(oe===void 0&&(J==="instanceMatrix"&&I.instanceMatrix&&(oe=I.instanceMatrix),J==="instanceColor"&&I.instanceColor&&(oe=I.instanceColor)),oe!==void 0){const pe=oe.normalized,q=oe.itemSize,se=e.get(oe);if(se===void 0)continue;const Ce=se.buffer,Ee=se.type,Ye=se.bytesPerElement,ge=Ee===a.INT||Ee===a.UNSIGNED_INT||oe.gpuType===py;if(oe.isInterleavedBufferAttribute){const Re=oe.data,$e=Re.stride,ut=oe.offset;if(Re.isInstancedInterleavedBuffer){for(let vt=0;vt<Z.locationSize;vt++)M(Z.location+vt,Re.meshPerAttribute);I.isInstancedMesh!==!0&&te._maxInstanceCount===void 0&&(te._maxInstanceCount=Re.meshPerAttribute*Re.count)}else for(let vt=0;vt<Z.locationSize;vt++)C(Z.location+vt);a.bindBuffer(a.ARRAY_BUFFER,Ce);for(let vt=0;vt<Z.locationSize;vt++)D(Z.location+vt,q/Z.locationSize,Ee,pe,$e*Ye,(ut+q/Z.locationSize*vt)*Ye,ge)}else{if(oe.isInstancedBufferAttribute){for(let Re=0;Re<Z.locationSize;Re++)M(Z.location+Re,oe.meshPerAttribute);I.isInstancedMesh!==!0&&te._maxInstanceCount===void 0&&(te._maxInstanceCount=oe.meshPerAttribute*oe.count)}else for(let Re=0;Re<Z.locationSize;Re++)C(Z.location+Re);a.bindBuffer(a.ARRAY_BUFFER,Ce);for(let Re=0;Re<Z.locationSize;Re++)D(Z.location+Re,q/Z.locationSize,Ee,pe,q*Ye,q/Z.locationSize*Re*Ye,ge)}}else if(F!==void 0){const pe=F[J];if(pe!==void 0)switch(pe.length){case 2:a.vertexAttrib2fv(Z.location,pe);break;case 3:a.vertexAttrib3fv(Z.location,pe);break;case 4:a.vertexAttrib4fv(Z.location,pe);break;default:a.vertexAttrib1fv(Z.location,pe)}}}}B()}function z(){G();for(const I in n){const Y=n[I];for(const ee in Y){const te=Y[ee];for(const le in te)g(te[le].object),delete te[le];delete Y[ee]}delete n[I]}}function O(I){if(n[I.id]===void 0)return;const Y=n[I.id];for(const ee in Y){const te=Y[ee];for(const le in te)g(te[le].object),delete te[le];delete Y[ee]}delete n[I.id]}function P(I){for(const Y in n){const ee=n[Y];if(ee[I.id]===void 0)continue;const te=ee[I.id];for(const le in te)g(te[le].object),delete te[le];delete ee[I.id]}}function G(){L(),l=!0,r!==i&&(r=i,p(r.object))}function L(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:c,reset:G,resetDefaultState:L,dispose:z,releaseStatesOfGeometry:O,releaseStatesOfProgram:P,initAttributes:E,enableAttribute:C,disableUnusedAttributes:B}}function ez(a,e,t){let n;function i(p){n=p}function r(p,g){a.drawArrays(n,p,g),t.update(g,n,1)}function l(p,g,v){v!==0&&(a.drawArraysInstanced(n,p,g,v),t.update(g,n,v))}function c(p,g,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,p,0,g,0,v);let y=0;for(let S=0;S<v;S++)y+=g[S];t.update(y,n,1)}function d(p,g,v,_){if(v===0)return;const y=e.get("WEBGL_multi_draw");if(y===null)for(let S=0;S<p.length;S++)l(p[S],g[S],_[S]);else{y.multiDrawArraysInstancedWEBGL(n,p,0,g,0,_,0,v);let S=0;for(let E=0;E<v;E++)S+=g[E]*_[E];t.update(S,n,1)}}this.setMode=i,this.render=r,this.renderInstances=l,this.renderMultiDraw=c,this.renderMultiDrawInstances=d}function tz(a,e,t,n){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const P=e.get("EXT_texture_filter_anisotropic");i=a.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function l(P){return!(P!==ss&&n.convert(P)!==a.getParameter(a.IMPLEMENTATION_COLOR_READ_FORMAT))}function c(P){const G=P===Xc&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(P!==ra&&n.convert(P)!==a.getParameter(a.IMPLEMENTATION_COLOR_READ_TYPE)&&P!==Is&&!G)}function d(P){if(P==="highp"){if(a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.HIGH_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.HIGH_FLOAT).precision>0)return"highp";P="mediump"}return P==="mediump"&&a.getShaderPrecisionFormat(a.VERTEX_SHADER,a.MEDIUM_FLOAT).precision>0&&a.getShaderPrecisionFormat(a.FRAGMENT_SHADER,a.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let p=t.precision!==void 0?t.precision:"highp";const g=d(p);g!==p&&(ht("WebGLRenderer:",p,"not supported, using",g,"instead."),p=g);const v=t.logarithmicDepthBuffer===!0,_=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),y=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),S=a.getParameter(a.MAX_VERTEX_TEXTURE_IMAGE_UNITS),E=a.getParameter(a.MAX_TEXTURE_SIZE),C=a.getParameter(a.MAX_CUBE_MAP_TEXTURE_SIZE),M=a.getParameter(a.MAX_VERTEX_ATTRIBS),B=a.getParameter(a.MAX_VERTEX_UNIFORM_VECTORS),D=a.getParameter(a.MAX_VARYING_VECTORS),w=a.getParameter(a.MAX_FRAGMENT_UNIFORM_VECTORS),z=S>0,O=a.getParameter(a.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:r,getMaxPrecision:d,textureFormatReadable:l,textureTypeReadable:c,precision:p,logarithmicDepthBuffer:v,reversedDepthBuffer:_,maxTextures:y,maxVertexTextures:S,maxTextureSize:E,maxCubemapSize:C,maxAttributes:M,maxVertexUniforms:B,maxVaryings:D,maxFragmentUniforms:w,vertexTextures:z,maxSamples:O}}function nz(a){const e=this;let t=null,n=0,i=!1,r=!1;const l=new yu,c=new Qt,d={value:null,needsUpdate:!1};this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(v,_){const y=v.length!==0||_||n!==0||i;return i=_,n=v.length,y},this.beginShadows=function(){r=!0,g(null)},this.endShadows=function(){r=!1},this.setGlobalState=function(v,_){t=g(v,_,0)},this.setState=function(v,_,y){const S=v.clippingPlanes,E=v.clipIntersection,C=v.clipShadows,M=a.get(v);if(!i||S===null||S.length===0||r&&!C)r?g(null):p();else{const B=r?0:n,D=B*4;let w=M.clippingState||null;d.value=w,w=g(S,_,D,y);for(let z=0;z!==D;++z)w[z]=t[z];M.clippingState=w,this.numIntersection=E?this.numPlanes:0,this.numPlanes+=B}};function p(){d.value!==t&&(d.value=t,d.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function g(v,_,y,S){const E=v!==null?v.length:0;let C=null;if(E!==0){if(C=d.value,S!==!0||C===null){const M=y+E*4,B=_.matrixWorldInverse;c.getNormalMatrix(B),(C===null||C.length<M)&&(C=new Float32Array(M));for(let D=0,w=y;D!==E;++D,w+=4)l.copy(v[D]).applyMatrix4(B,c),l.normal.toArray(C,w),C[w+3]=l.constant}d.value=C,d.needsUpdate=!0}return e.numPlanes=E,e.numIntersection=0,C}}function iz(a){let e=new WeakMap;function t(l,c){return c===hg?l.mapping=Tu:c===dg&&(l.mapping=zc),l}function n(l){if(l&&l.isTexture){const c=l.mapping;if(c===hg||c===dg)if(e.has(l)){const d=e.get(l).texture;return t(d,l.mapping)}else{const d=l.image;if(d&&d.height>0){const p=new o3(d.height);return p.fromEquirectangularTexture(a,l),e.set(l,p),l.addEventListener("dispose",i),t(p.texture,l.mapping)}else return null}}return l}function i(l){const c=l.target;c.removeEventListener("dispose",i);const d=e.get(c);d!==void 0&&(e.delete(c),d.dispose())}function r(){e=new WeakMap}return{get:n,dispose:r}}const Rc=4,OT=[.125,.215,.35,.446,.526,.582],uh=20,az=256,G0=new Rl,NT=new rt;let TA=null,CA=0,RA=0,BA=!1;const sz=new j;class DS{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(e,t=0,n=.1,i=100,r={}){const{size:l=256,position:c=sz}=r;TA=this._renderer.getRenderTarget(),CA=this._renderer.getActiveCubeFace(),RA=this._renderer.getActiveMipmapLevel(),BA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(l);const d=this._allocateTargets();return d.depthBuffer=!0,this._sceneToCubeUV(e,n,i,d,c),t>0&&this._blur(d,0,0,t),this._applyPMREM(d),this._cleanup(d),d}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=zT(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=IT(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodMeshes.length;e++)this._lodMeshes[e].geometry.dispose()}_cleanup(e){this._renderer.setRenderTarget(TA,CA,RA),this._renderer.xr.enabled=BA,e.scissorTest=!1,hp(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Tu||e.mapping===zc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),TA=this._renderer.getRenderTarget(),CA=this._renderer.getActiveCubeFace(),RA=this._renderer.getActiveMipmapLevel(),BA=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:oi,minFilter:oi,generateMipmaps:!1,type:Xc,format:ss,colorSpace:Dl,depthBuffer:!1},i=LT(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=LT(e,t,n);const{_lodMax:r}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=rz(r)),this._blurMaterial=lz(r,e,t)}return i}_compileMaterial(e){const t=new Wi(new qt,e);this._renderer.compile(t,G0)}_sceneToCubeUV(e,t,n,i,r){const d=new _i(90,1,t,n),p=[1,-1,1,1,1,1],g=[1,1,1,-1,-1,-1],v=this._renderer,_=v.autoClear,y=v.toneMapping;v.getClearColor(NT),v.toneMapping=zo,v.autoClear=!1,v.state.buffers.depth.getReversed()&&(v.setRenderTarget(i),v.clearDepth(),v.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new Wi(new Ih,new _r({name:"PMREM.Background",side:pa,depthWrite:!1,depthTest:!1})));const E=this._backgroundBox,C=E.material;let M=!1;const B=e.background;B?B.isColor&&(C.color.copy(B),e.background=null,M=!0):(C.color.copy(NT),M=!0);for(let D=0;D<6;D++){const w=D%3;w===0?(d.up.set(0,p[D],0),d.position.set(r.x,r.y,r.z),d.lookAt(r.x+g[D],r.y,r.z)):w===1?(d.up.set(0,0,p[D]),d.position.set(r.x,r.y,r.z),d.lookAt(r.x,r.y+g[D],r.z)):(d.up.set(0,p[D],0),d.position.set(r.x,r.y,r.z),d.lookAt(r.x,r.y,r.z+g[D]));const z=this._cubeSize;hp(i,w*z,D>2?z:0,z,z),v.setRenderTarget(i),M&&v.render(E,d),v.render(e,d)}v.toneMapping=y,v.autoClear=_,e.background=B}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===Tu||e.mapping===zc;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=zT()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=IT());const r=i?this._cubemapMaterial:this._equirectMaterial,l=this._lodMeshes[0];l.material=r;const c=r.uniforms;c.envMap.value=e;const d=this._cubeSize;hp(t,0,0,3*d,2*d),n.setRenderTarget(t),n.render(l,G0)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const i=this._lodMeshes.length;for(let r=1;r<i;r++)this._applyGGXFilter(e,r-1,r);t.autoClear=n}_applyGGXFilter(e,t,n){const i=this._renderer,r=this._pingPongRenderTarget;if(this._ggxMaterial===null){const B=3*Math.max(this._cubeSize,16),D=4*this._cubeSize;this._ggxMaterial=oz(this._lodMax,B,D)}const l=this._ggxMaterial,c=this._lodMeshes[n];c.material=l;const d=l.uniforms,p=n/(this._lodMeshes.length-1),g=t/(this._lodMeshes.length-1),v=Math.sqrt(p*p-g*g),_=.05+p*.95,y=v*_,{_lodMax:S}=this,E=this._sizeLods[n],C=3*E*(n>S-Rc?n-S+Rc:0),M=4*(this._cubeSize-E);d.envMap.value=e.texture,d.roughness.value=y,d.mipInt.value=S-t,hp(r,C,M,3*E,2*E),i.setRenderTarget(r),i.render(c,G0),d.envMap.value=r.texture,d.roughness.value=0,d.mipInt.value=S-n,hp(e,C,M,3*E,2*E),i.setRenderTarget(e),i.render(c,G0)}_blur(e,t,n,i,r){const l=this._pingPongRenderTarget;this._halfBlur(e,l,t,n,i,"latitudinal",r),this._halfBlur(l,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,l,c){const d=this._renderer,p=this._blurMaterial;l!=="latitudinal"&&l!=="longitudinal"&&kt("blur direction must be either latitudinal or longitudinal!");const g=3,v=this._lodMeshes[i];v.material=p;const _=p.uniforms,y=this._sizeLods[n]-1,S=isFinite(r)?Math.PI/(2*y):2*Math.PI/(2*uh-1),E=r/S,C=isFinite(r)?1+Math.floor(g*E):uh;C>uh&&ht(`sigmaRadians, ${r}, is too large and will clip, as it requested ${C} samples when the maximum is set to ${uh}`);const M=[];let B=0;for(let P=0;P<uh;++P){const G=P/E,L=Math.exp(-G*G/2);M.push(L),P===0?B+=L:P<C&&(B+=2*L)}for(let P=0;P<M.length;P++)M[P]=M[P]/B;_.envMap.value=e.texture,_.samples.value=C,_.weights.value=M,_.latitudinal.value=l==="latitudinal",c&&(_.poleAxis.value=c);const{_lodMax:D}=this;_.dTheta.value=S,_.mipInt.value=D-n;const w=this._sizeLods[i],z=3*w*(i>D-Rc?i-D+Rc:0),O=4*(this._cubeSize-w);hp(t,z,O,3*w,2*w),d.setRenderTarget(t),d.render(v,G0)}}function rz(a){const e=[],t=[],n=[];let i=a;const r=a-Rc+1+OT.length;for(let l=0;l<r;l++){const c=Math.pow(2,i);e.push(c);let d=1/c;l>a-Rc?d=OT[l-a+Rc-1]:l===0&&(d=0),t.push(d);const p=1/(c-2),g=-p,v=1+p,_=[g,g,v,g,v,v,g,g,v,v,g,v],y=6,S=6,E=3,C=2,M=1,B=new Float32Array(E*S*y),D=new Float32Array(C*S*y),w=new Float32Array(M*S*y);for(let O=0;O<y;O++){const P=O%3*2/3-1,G=O>2?0:-1,L=[P,G,0,P+2/3,G,0,P+2/3,G+1,0,P,G,0,P+2/3,G+1,0,P,G+1,0];B.set(L,E*S*O),D.set(_,C*S*O);const I=[O,O,O,O,O,O];w.set(I,M*S*O)}const z=new qt;z.setAttribute("position",new Dn(B,E)),z.setAttribute("uv",new Dn(D,C)),z.setAttribute("faceIndex",new Dn(w,M)),n.push(new Wi(z,null)),i>Rc&&i--}return{lodMeshes:n,sizeLods:e,sigmas:t}}function LT(a,e,t){const n=new Pi(a,e,t);return n.texture.mapping=Wp,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function hp(a,e,t,n,i){a.viewport.set(e,t,n,i),a.scissor.set(e,t,n,i)}function oz(a,e,t){return new ji({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:az,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${a}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:Ky(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:Ba,depthTest:!1,depthWrite:!1})}function lz(a,e,t){const n=new Float32Array(uh),i=new j(0,1,0);return new ji({name:"SphericalGaussianBlur",defines:{n:uh,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${a}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Ky(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ba,depthTest:!1,depthWrite:!1})}function IT(){return new ji({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Ky(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ba,depthTest:!1,depthWrite:!1})}function zT(){return new ji({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Ky(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ba,depthTest:!1,depthWrite:!1})}function Ky(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function uz(a){let e=new WeakMap,t=null;function n(c){if(c&&c.isTexture){const d=c.mapping,p=d===hg||d===dg,g=d===Tu||d===zc;if(p||g){let v=e.get(c);const _=v!==void 0?v.texture.pmremVersion:0;if(c.isRenderTargetTexture&&c.pmremVersion!==_)return t===null&&(t=new DS(a)),v=p?t.fromEquirectangular(c,v):t.fromCubemap(c,v),v.texture.pmremVersion=c.pmremVersion,e.set(c,v),v.texture;if(v!==void 0)return v.texture;{const y=c.image;return p&&y&&y.height>0||g&&y&&i(y)?(t===null&&(t=new DS(a)),v=p?t.fromEquirectangular(c):t.fromCubemap(c),v.texture.pmremVersion=c.pmremVersion,e.set(c,v),c.addEventListener("dispose",r),v.texture):null}}}return c}function i(c){let d=0;const p=6;for(let g=0;g<p;g++)c[g]!==void 0&&d++;return d===p}function r(c){const d=c.target;d.removeEventListener("dispose",r);const p=e.get(d);p!==void 0&&(e.delete(d),p.dispose())}function l(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:l}}function cz(a){const e={};function t(n){if(e[n]!==void 0)return e[n];const i=a.getExtension(n);return e[n]=i,i}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const i=t(n);return i===null&&Lp("WebGLRenderer: "+n+" extension not supported."),i}}}function fz(a,e,t,n){const i={},r=new WeakMap;function l(v){const _=v.target;_.index!==null&&e.remove(_.index);for(const S in _.attributes)e.remove(_.attributes[S]);_.removeEventListener("dispose",l),delete i[_.id];const y=r.get(_);y&&(e.remove(y),r.delete(_)),n.releaseStatesOfGeometry(_),_.isInstancedBufferGeometry===!0&&delete _._maxInstanceCount,t.memory.geometries--}function c(v,_){return i[_.id]===!0||(_.addEventListener("dispose",l),i[_.id]=!0,t.memory.geometries++),_}function d(v){const _=v.attributes;for(const y in _)e.update(_[y],a.ARRAY_BUFFER)}function p(v){const _=[],y=v.index,S=v.attributes.position;let E=0;if(y!==null){const B=y.array;E=y.version;for(let D=0,w=B.length;D<w;D+=3){const z=B[D+0],O=B[D+1],P=B[D+2];_.push(z,O,O,P,P,z)}}else if(S!==void 0){const B=S.array;E=S.version;for(let D=0,w=B.length/3-1;D<w;D+=3){const z=D+0,O=D+1,P=D+2;_.push(z,O,O,P,P,z)}}else return;const C=new($2(_)?v1:g1)(_,1);C.version=E;const M=r.get(v);M&&e.remove(M),r.set(v,C)}function g(v){const _=r.get(v);if(_){const y=v.index;y!==null&&_.version<y.version&&p(v)}else p(v);return r.get(v)}return{get:c,update:d,getWireframeAttribute:g}}function hz(a,e,t){let n;function i(_){n=_}let r,l;function c(_){r=_.type,l=_.bytesPerElement}function d(_,y){a.drawElements(n,y,r,_*l),t.update(y,n,1)}function p(_,y,S){S!==0&&(a.drawElementsInstanced(n,y,r,_*l,S),t.update(y,n,S))}function g(_,y,S){if(S===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,y,0,r,_,0,S);let C=0;for(let M=0;M<S;M++)C+=y[M];t.update(C,n,1)}function v(_,y,S,E){if(S===0)return;const C=e.get("WEBGL_multi_draw");if(C===null)for(let M=0;M<_.length;M++)p(_[M]/l,y[M],E[M]);else{C.multiDrawElementsInstancedWEBGL(n,y,0,r,_,0,E,0,S);let M=0;for(let B=0;B<S;B++)M+=y[B]*E[B];t.update(M,n,1)}}this.setMode=i,this.setIndex=c,this.render=d,this.renderInstances=p,this.renderMultiDraw=g,this.renderMultiDrawInstances=v}function dz(a){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(r,l,c){switch(t.calls++,l){case a.TRIANGLES:t.triangles+=c*(r/3);break;case a.LINES:t.lines+=c*(r/2);break;case a.LINE_STRIP:t.lines+=c*(r-1);break;case a.LINE_LOOP:t.lines+=c*r;break;case a.POINTS:t.points+=c*r;break;default:kt("WebGLInfo: Unknown draw mode:",l);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:n}}function pz(a,e,t){const n=new WeakMap,i=new Cn;function r(l,c,d){const p=l.morphTargetInfluences,g=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,v=g!==void 0?g.length:0;let _=n.get(c);if(_===void 0||_.count!==v){let I=function(){G.dispose(),n.delete(c),c.removeEventListener("dispose",I)};var y=I;_!==void 0&&_.texture.dispose();const S=c.morphAttributes.position!==void 0,E=c.morphAttributes.normal!==void 0,C=c.morphAttributes.color!==void 0,M=c.morphAttributes.position||[],B=c.morphAttributes.normal||[],D=c.morphAttributes.color||[];let w=0;S===!0&&(w=1),E===!0&&(w=2),C===!0&&(w=3);let z=c.attributes.position.count*w,O=1;z>e.maxTextureSize&&(O=Math.ceil(z/e.maxTextureSize),z=e.maxTextureSize);const P=new Float32Array(z*O*4*v),G=new Sy(P,z,O,v);G.type=Is,G.needsUpdate=!0;const L=w*4;for(let Y=0;Y<v;Y++){const ee=M[Y],te=B[Y],le=D[Y],re=z*O*4*Y;for(let F=0;F<ee.count;F++){const J=F*L;S===!0&&(i.fromBufferAttribute(ee,F),P[re+J+0]=i.x,P[re+J+1]=i.y,P[re+J+2]=i.z,P[re+J+3]=0),E===!0&&(i.fromBufferAttribute(te,F),P[re+J+4]=i.x,P[re+J+5]=i.y,P[re+J+6]=i.z,P[re+J+7]=0),C===!0&&(i.fromBufferAttribute(le,F),P[re+J+8]=i.x,P[re+J+9]=i.y,P[re+J+10]=i.z,P[re+J+11]=le.itemSize===4?i.w:1)}}_={count:v,texture:G,size:new De(z,O)},n.set(c,_),c.addEventListener("dispose",I)}if(l.isInstancedMesh===!0&&l.morphTexture!==null)d.getUniforms().setValue(a,"morphTexture",l.morphTexture,t);else{let S=0;for(let C=0;C<p.length;C++)S+=p[C];const E=c.morphTargetsRelative?1:1-S;d.getUniforms().setValue(a,"morphTargetBaseInfluence",E),d.getUniforms().setValue(a,"morphTargetInfluences",p)}d.getUniforms().setValue(a,"morphTargetsTexture",_.texture,t),d.getUniforms().setValue(a,"morphTargetsTextureSize",_.size)}return{update:r}}function mz(a,e,t,n){let i=new WeakMap;function r(d){const p=n.render.frame,g=d.geometry,v=e.get(d,g);if(i.get(v)!==p&&(e.update(v),i.set(v,p)),d.isInstancedMesh&&(d.hasEventListener("dispose",c)===!1&&d.addEventListener("dispose",c),i.get(d)!==p&&(t.update(d.instanceMatrix,a.ARRAY_BUFFER),d.instanceColor!==null&&t.update(d.instanceColor,a.ARRAY_BUFFER),i.set(d,p))),d.isSkinnedMesh){const _=d.skeleton;i.get(_)!==p&&(_.update(),i.set(_,p))}return v}function l(){i=new WeakMap}function c(d){const p=d.target;p.removeEventListener("dispose",c),t.remove(p.instanceMatrix),p.instanceColor!==null&&t.remove(p.instanceColor)}return{update:r,dispose:l}}const j3=new ei,PT=new Uy(1,1),Z3=new Sy,Q3=new My,$3=new Lg,FT=[],HT=[],GT=new Float32Array(16),VT=new Float32Array(9),XT=new Float32Array(4);function em(a,e,t){const n=a[0];if(n<=0||n>0)return a;const i=e*t;let r=FT[i];if(r===void 0&&(r=new Float32Array(i),FT[i]=r),e!==0){n.toArray(r,0);for(let l=1,c=0;l!==e;++l)c+=t,a[l].toArray(r,c)}return r}function ga(a,e){if(a.length!==e.length)return!1;for(let t=0,n=a.length;t<n;t++)if(a[t]!==e[t])return!1;return!0}function va(a,e){for(let t=0,n=e.length;t<n;t++)a[t]=e[t]}function Wy(a,e){let t=HT[e];t===void 0&&(t=new Int32Array(e),HT[e]=t);for(let n=0;n!==e;++n)t[n]=a.allocateTextureUnit();return t}function gz(a,e){const t=this.cache;t[0]!==e&&(a.uniform1f(this.addr,e),t[0]=e)}function vz(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(a.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ga(t,e))return;a.uniform2fv(this.addr,e),va(t,e)}}function xz(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(a.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(a.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ga(t,e))return;a.uniform3fv(this.addr,e),va(t,e)}}function _z(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(a.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ga(t,e))return;a.uniform4fv(this.addr,e),va(t,e)}}function yz(a,e){const t=this.cache,n=e.elements;if(n===void 0){if(ga(t,e))return;a.uniformMatrix2fv(this.addr,!1,e),va(t,e)}else{if(ga(t,n))return;XT.set(n),a.uniformMatrix2fv(this.addr,!1,XT),va(t,n)}}function bz(a,e){const t=this.cache,n=e.elements;if(n===void 0){if(ga(t,e))return;a.uniformMatrix3fv(this.addr,!1,e),va(t,e)}else{if(ga(t,n))return;VT.set(n),a.uniformMatrix3fv(this.addr,!1,VT),va(t,n)}}function Az(a,e){const t=this.cache,n=e.elements;if(n===void 0){if(ga(t,e))return;a.uniformMatrix4fv(this.addr,!1,e),va(t,e)}else{if(ga(t,n))return;GT.set(n),a.uniformMatrix4fv(this.addr,!1,GT),va(t,n)}}function Sz(a,e){const t=this.cache;t[0]!==e&&(a.uniform1i(this.addr,e),t[0]=e)}function Mz(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(a.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ga(t,e))return;a.uniform2iv(this.addr,e),va(t,e)}}function Ez(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(a.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ga(t,e))return;a.uniform3iv(this.addr,e),va(t,e)}}function Tz(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(a.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ga(t,e))return;a.uniform4iv(this.addr,e),va(t,e)}}function Cz(a,e){const t=this.cache;t[0]!==e&&(a.uniform1ui(this.addr,e),t[0]=e)}function Rz(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(a.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ga(t,e))return;a.uniform2uiv(this.addr,e),va(t,e)}}function Bz(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(a.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ga(t,e))return;a.uniform3uiv(this.addr,e),va(t,e)}}function Dz(a,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(a.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ga(t,e))return;a.uniform4uiv(this.addr,e),va(t,e)}}function wz(a,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(a.uniform1i(this.addr,i),n[0]=i);let r;this.type===a.SAMPLER_2D_SHADOW?(PT.compareFunction=d1,r=PT):r=j3,t.setTexture2D(e||r,i)}function Uz(a,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(a.uniform1i(this.addr,i),n[0]=i),t.setTexture3D(e||Q3,i)}function Oz(a,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(a.uniform1i(this.addr,i),n[0]=i),t.setTextureCube(e||$3,i)}function Nz(a,e,t){const n=this.cache,i=t.allocateTextureUnit();n[0]!==i&&(a.uniform1i(this.addr,i),n[0]=i),t.setTexture2DArray(e||Z3,i)}function Lz(a){switch(a){case 5126:return gz;case 35664:return vz;case 35665:return xz;case 35666:return _z;case 35674:return yz;case 35675:return bz;case 35676:return Az;case 5124:case 35670:return Sz;case 35667:case 35671:return Mz;case 35668:case 35672:return Ez;case 35669:case 35673:return Tz;case 5125:return Cz;case 36294:return Rz;case 36295:return Bz;case 36296:return Dz;case 35678:case 36198:case 36298:case 36306:case 35682:return wz;case 35679:case 36299:case 36307:return Uz;case 35680:case 36300:case 36308:case 36293:return Oz;case 36289:case 36303:case 36311:case 36292:return Nz}}function Iz(a,e){a.uniform1fv(this.addr,e)}function zz(a,e){const t=em(e,this.size,2);a.uniform2fv(this.addr,t)}function Pz(a,e){const t=em(e,this.size,3);a.uniform3fv(this.addr,t)}function Fz(a,e){const t=em(e,this.size,4);a.uniform4fv(this.addr,t)}function Hz(a,e){const t=em(e,this.size,4);a.uniformMatrix2fv(this.addr,!1,t)}function Gz(a,e){const t=em(e,this.size,9);a.uniformMatrix3fv(this.addr,!1,t)}function Vz(a,e){const t=em(e,this.size,16);a.uniformMatrix4fv(this.addr,!1,t)}function Xz(a,e){a.uniform1iv(this.addr,e)}function kz(a,e){a.uniform2iv(this.addr,e)}function Yz(a,e){a.uniform3iv(this.addr,e)}function qz(a,e){a.uniform4iv(this.addr,e)}function Jz(a,e){a.uniform1uiv(this.addr,e)}function Kz(a,e){a.uniform2uiv(this.addr,e)}function Wz(a,e){a.uniform3uiv(this.addr,e)}function jz(a,e){a.uniform4uiv(this.addr,e)}function Zz(a,e,t){const n=this.cache,i=e.length,r=Wy(t,i);ga(n,r)||(a.uniform1iv(this.addr,r),va(n,r));for(let l=0;l!==i;++l)t.setTexture2D(e[l]||j3,r[l])}function Qz(a,e,t){const n=this.cache,i=e.length,r=Wy(t,i);ga(n,r)||(a.uniform1iv(this.addr,r),va(n,r));for(let l=0;l!==i;++l)t.setTexture3D(e[l]||Q3,r[l])}function $z(a,e,t){const n=this.cache,i=e.length,r=Wy(t,i);ga(n,r)||(a.uniform1iv(this.addr,r),va(n,r));for(let l=0;l!==i;++l)t.setTextureCube(e[l]||$3,r[l])}function eP(a,e,t){const n=this.cache,i=e.length,r=Wy(t,i);ga(n,r)||(a.uniform1iv(this.addr,r),va(n,r));for(let l=0;l!==i;++l)t.setTexture2DArray(e[l]||Z3,r[l])}function tP(a){switch(a){case 5126:return Iz;case 35664:return zz;case 35665:return Pz;case 35666:return Fz;case 35674:return Hz;case 35675:return Gz;case 35676:return Vz;case 5124:case 35670:return Xz;case 35667:case 35671:return kz;case 35668:case 35672:return Yz;case 35669:case 35673:return qz;case 5125:return Jz;case 36294:return Kz;case 36295:return Wz;case 36296:return jz;case 35678:case 36198:case 36298:case 36306:case 35682:return Zz;case 35679:case 36299:case 36307:return Qz;case 35680:case 36300:case 36308:case 36293:return $z;case 36289:case 36303:case 36311:case 36292:return eP}}class nP{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=Lz(t.type)}}class iP{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=tP(t.type)}}class aP{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,l=i.length;r!==l;++r){const c=i[r];c.setValue(e,t[c.id],n)}}}const DA=/(\w+)(\])?(\[|\.)?/g;function kT(a,e){a.seq.push(e),a.map[e.id]=e}function sP(a,e,t){const n=a.name,i=n.length;for(DA.lastIndex=0;;){const r=DA.exec(n),l=DA.lastIndex;let c=r[1];const d=r[2]==="]",p=r[3];if(d&&(c=c|0),p===void 0||p==="["&&l+2===i){kT(t,p===void 0?new nP(c,a,e):new iP(c,a,e));break}else{let v=t.map[c];v===void 0&&(v=new aP(c),kT(t,v)),t=v}}}class d_{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;++i){const r=e.getActiveUniform(t,i),l=e.getUniformLocation(t,r.name);sP(r,l,this)}}setValue(e,t,n,i){const r=this.map[t];r!==void 0&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];i!==void 0&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,l=t.length;r!==l;++r){const c=t[r],d=n[c.id];d.needsUpdate!==!1&&c.setValue(e,d.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const l=e[i];l.id in t&&n.push(l)}return n}}function YT(a,e,t){const n=a.createShader(e);return a.shaderSource(n,t),a.compileShader(n),n}const rP=37297;let oP=0;function lP(a,e){const t=a.split(`
`),n=[],i=Math.max(e-6,0),r=Math.min(e+6,t.length);for(let l=i;l<r;l++){const c=l+1;n.push(`${c===e?">":" "} ${c}: ${t[l]}`)}return n.join(`
`)}const qT=new Qt;function uP(a){Tn._getMatrix(qT,Tn.workingColorSpace,a);const e=`mat3( ${qT.elements.map(t=>t.toFixed(4))} )`;switch(Tn.getTransfer(a)){case mg:return[e,"LinearTransferOETF"];case Wn:return[e,"sRGBTransferOETF"];default:return ht("WebGLProgram: Unsupported color space: ",a),[e,"LinearTransferOETF"]}}function JT(a,e,t){const n=a.getShaderParameter(e,a.COMPILE_STATUS),r=(a.getShaderInfoLog(e)||"").trim();if(n&&r==="")return"";const l=/ERROR: 0:(\d+)/.exec(r);if(l){const c=parseInt(l[1]);return t.toUpperCase()+`

`+r+`

`+lP(a.getShaderSource(e),c)}else return r}function cP(a,e){const t=uP(e);return[`vec4 ${a}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function fP(a,e){let t;switch(e){case N2:t="Linear";break;case L2:t="Reinhard";break;case I2:t="Cineon";break;case a1:t="ACESFilmic";break;case P2:t="AgX";break;case F2:t="Neutral";break;case z2:t="Custom";break;default:ht("WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+a+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const e_=new j;function hP(){Tn.getLuminanceCoefficients(e_);const a=e_.x.toFixed(4),e=e_.y.toFixed(4),t=e_.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${a}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function dP(a){return[a.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",a.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(q0).join(`
`)}function pP(a){const e=[];for(const t in a){const n=a[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function mP(a,e){const t={},n=a.getProgramParameter(e,a.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const r=a.getActiveAttrib(e,i),l=r.name;let c=1;r.type===a.FLOAT_MAT2&&(c=2),r.type===a.FLOAT_MAT3&&(c=3),r.type===a.FLOAT_MAT4&&(c=4),t[l]={type:r.type,location:a.getAttribLocation(e,l),locationSize:c}}return t}function q0(a){return a!==""}function KT(a,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return a.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function WT(a,e){return a.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const gP=/^[ \t]*#include +<([\w\d./]+)>/gm;function wS(a){return a.replace(gP,xP)}const vP=new Map;function xP(a,e){let t=an[e];if(t===void 0){const n=vP.get(e);if(n!==void 0)t=an[n],ht('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return wS(t)}const _P=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function jT(a){return a.replace(_P,yP)}function yP(a,e,t,n){let i="";for(let r=parseInt(e);r<parseInt(t);r++)i+=n.replace(/\[\s*i\s*\]/g,"[ "+r+" ]").replace(/UNROLLED_LOOP_INDEX/g,r);return i}function ZT(a){let e=`precision ${a.precision} float;
	precision ${a.precision} int;
	precision ${a.precision} sampler2D;
	precision ${a.precision} samplerCube;
	precision ${a.precision} sampler3D;
	precision ${a.precision} sampler2DArray;
	precision ${a.precision} sampler2DShadow;
	precision ${a.precision} samplerCubeShadow;
	precision ${a.precision} sampler2DArrayShadow;
	precision ${a.precision} isampler2D;
	precision ${a.precision} isampler3D;
	precision ${a.precision} isamplerCube;
	precision ${a.precision} isampler2DArray;
	precision ${a.precision} usampler2D;
	precision ${a.precision} usampler3D;
	precision ${a.precision} usamplerCube;
	precision ${a.precision} usampler2DArray;
	`;return a.precision==="highp"?e+=`
#define HIGH_PRECISION`:a.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:a.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function bP(a){let e="SHADOWMAP_TYPE_BASIC";return a.shadowMapType===fy?e="SHADOWMAP_TYPE_PCF":a.shadowMapType===W0?e="SHADOWMAP_TYPE_PCF_SOFT":a.shadowMapType===Uo&&(e="SHADOWMAP_TYPE_VSM"),e}function AP(a){let e="ENVMAP_TYPE_CUBE";if(a.envMap)switch(a.envMapMode){case Tu:case zc:e="ENVMAP_TYPE_CUBE";break;case Wp:e="ENVMAP_TYPE_CUBE_UV";break}return e}function SP(a){let e="ENVMAP_MODE_REFLECTION";if(a.envMap)switch(a.envMapMode){case zc:e="ENVMAP_MODE_REFRACTION";break}return e}function MP(a){let e="ENVMAP_BLENDING_NONE";if(a.envMap)switch(a.combine){case Og:e="ENVMAP_BLENDING_MULTIPLY";break;case U2:e="ENVMAP_BLENDING_MIX";break;case O2:e="ENVMAP_BLENDING_ADD";break}return e}function EP(a){const e=a.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),112)),texelHeight:n,maxMip:t}}function TP(a,e,t,n){const i=a.getContext(),r=t.defines;let l=t.vertexShader,c=t.fragmentShader;const d=bP(t),p=AP(t),g=SP(t),v=MP(t),_=EP(t),y=dP(t),S=pP(r),E=i.createProgram();let C,M,B=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(C=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(q0).join(`
`),C.length>0&&(C+=`
`),M=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(q0).join(`
`),M.length>0&&(M+=`
`)):(C=[ZT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+g:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(q0).join(`
`),M=[ZT(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",t.envMap?"#define "+v:"",_?"#define CUBEUV_TEXEL_WIDTH "+_.texelWidth:"",_?"#define CUBEUV_TEXEL_HEIGHT "+_.texelHeight:"",_?"#define CUBEUV_MAX_MIP "+_.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+d:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",t.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==zo?"#define TONE_MAPPING":"",t.toneMapping!==zo?an.tonemapping_pars_fragment:"",t.toneMapping!==zo?fP("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",an.colorspace_pars_fragment,cP("linearToOutputTexel",t.outputColorSpace),hP(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(q0).join(`
`)),l=wS(l),l=KT(l,t),l=WT(l,t),c=wS(c),c=KT(c,t),c=WT(c,t),l=jT(l),c=jT(c),t.isRawShaderMaterial!==!0&&(B=`#version 300 es
`,C=[y,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+C,M=["#define varying in",t.glslVersion===AS?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===AS?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const D=B+C+l,w=B+M+c,z=YT(i,i.VERTEX_SHADER,D),O=YT(i,i.FRAGMENT_SHADER,w);i.attachShader(E,z),i.attachShader(E,O),t.index0AttributeName!==void 0?i.bindAttribLocation(E,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(E,0,"position"),i.linkProgram(E);function P(Y){if(a.debug.checkShaderErrors){const ee=i.getProgramInfoLog(E)||"",te=i.getShaderInfoLog(z)||"",le=i.getShaderInfoLog(O)||"",re=ee.trim(),F=te.trim(),J=le.trim();let Z=!0,oe=!0;if(i.getProgramParameter(E,i.LINK_STATUS)===!1)if(Z=!1,typeof a.debug.onShaderError=="function")a.debug.onShaderError(i,E,z,O);else{const pe=JT(i,z,"vertex"),q=JT(i,O,"fragment");kt("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(E,i.VALIDATE_STATUS)+`

Material Name: `+Y.name+`
Material Type: `+Y.type+`

Program Info Log: `+re+`
`+pe+`
`+q)}else re!==""?ht("WebGLProgram: Program Info Log:",re):(F===""||J==="")&&(oe=!1);oe&&(Y.diagnostics={runnable:Z,programLog:re,vertexShader:{log:F,prefix:C},fragmentShader:{log:J,prefix:M}})}i.deleteShader(z),i.deleteShader(O),G=new d_(i,E),L=mP(i,E)}let G;this.getUniforms=function(){return G===void 0&&P(this),G};let L;this.getAttributes=function(){return L===void 0&&P(this),L};let I=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return I===!1&&(I=i.getProgramParameter(E,rP)),I},this.destroy=function(){n.releaseStatesOfProgram(this),i.deleteProgram(E),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=oP++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=z,this.fragmentShader=O,this}let CP=0;class RP{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),l=this._getShaderCacheForMaterial(e);return l.has(i)===!1&&(l.add(i),i.usedTimes++),l.has(r)===!1&&(l.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new BP(e),t.set(e,n)),n}}class BP{constructor(e){this.id=CP++,this.code=e,this.usedTimes=0}}function DP(a,e,t,n,i,r,l){const c=new zp,d=new RP,p=new Set,g=[],v=i.logarithmicDepthBuffer,_=i.vertexTextures;let y=i.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function E(L){return p.add(L),L===0?"uv":`uv${L}`}function C(L,I,Y,ee,te){const le=ee.fog,re=te.geometry,F=L.isMeshStandardMaterial?ee.environment:null,J=(L.isMeshStandardMaterial?t:e).get(L.envMap||F),Z=J&&J.mapping===Wp?J.image.height:null,oe=S[L.type];L.precision!==null&&(y=i.getMaxPrecision(L.precision),y!==L.precision&&ht("WebGLProgram.getParameters:",L.precision,"not supported, using",y,"instead."));const pe=re.morphAttributes.position||re.morphAttributes.normal||re.morphAttributes.color,q=pe!==void 0?pe.length:0;let se=0;re.morphAttributes.position!==void 0&&(se=1),re.morphAttributes.normal!==void 0&&(se=2),re.morphAttributes.color!==void 0&&(se=3);let Ce,Ee,Ye,ge;if(oe){const Wt=No[oe];Ce=Wt.vertexShader,Ee=Wt.fragmentShader}else Ce=L.vertexShader,Ee=L.fragmentShader,d.update(L),Ye=d.getVertexShaderID(L),ge=d.getFragmentShaderID(L);const Re=a.getRenderTarget(),$e=a.state.buffers.depth.getReversed(),ut=te.isInstancedMesh===!0,vt=te.isBatchedMesh===!0,Pt=!!L.map,sn=!!L.matcap,Ct=!!J,ze=!!L.aoMap,W=!!L.lightMap,He=!!L.bumpMap,ke=!!L.normalMap,et=!!L.displacementMap,Ve=!!L.emissiveMap,ot=!!L.metalnessMap,it=!!L.roughnessMap,dt=L.anisotropy>0,K=L.clearcoat>0,H=L.dispersion>0,me=L.iridescence>0,we=L.sheen>0,Fe=L.transmission>0,Te=dt&&!!L.anisotropyMap,yt=K&&!!L.clearcoatMap,at=K&&!!L.clearcoatNormalMap,St=K&&!!L.clearcoatRoughnessMap,xt=me&&!!L.iridescenceMap,Ie=me&&!!L.iridescenceThicknessMap,Ge=we&&!!L.sheenColorMap,_t=we&&!!L.sheenRoughnessMap,$=!!L.specularMap,ye=!!L.specularColorMap,qe=!!L.specularIntensityMap,Q=Fe&&!!L.transmissionMap,Je=Fe&&!!L.thicknessMap,We=!!L.gradientMap,Ze=!!L.alphaMap,Xe=L.alphaTest>0,Ne=!!L.alphaHash,lt=!!L.extensions;let Mt=zo;L.toneMapped&&(Re===null||Re.isXRRenderTarget===!0)&&(Mt=a.toneMapping);const rn={shaderID:oe,shaderType:L.type,shaderName:L.name,vertexShader:Ce,fragmentShader:Ee,defines:L.defines,customVertexShaderID:Ye,customFragmentShaderID:ge,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:y,batching:vt,batchingColor:vt&&te._colorsTexture!==null,instancing:ut,instancingColor:ut&&te.instanceColor!==null,instancingMorph:ut&&te.morphTexture!==null,supportsVertexTextures:_,outputColorSpace:Re===null?a.outputColorSpace:Re.isXRRenderTarget===!0?Re.texture.colorSpace:Dl,alphaToCoverage:!!L.alphaToCoverage,map:Pt,matcap:sn,envMap:Ct,envMapMode:Ct&&J.mapping,envMapCubeUVHeight:Z,aoMap:ze,lightMap:W,bumpMap:He,normalMap:ke,displacementMap:_&&et,emissiveMap:Ve,normalMapObjectSpace:ke&&L.normalMapType===Y2,normalMapTangentSpace:ke&&L.normalMapType===kc,metalnessMap:ot,roughnessMap:it,anisotropy:dt,anisotropyMap:Te,clearcoat:K,clearcoatMap:yt,clearcoatNormalMap:at,clearcoatRoughnessMap:St,dispersion:H,iridescence:me,iridescenceMap:xt,iridescenceThicknessMap:Ie,sheen:we,sheenColorMap:Ge,sheenRoughnessMap:_t,specularMap:$,specularColorMap:ye,specularIntensityMap:qe,transmission:Fe,transmissionMap:Q,thicknessMap:Je,gradientMap:We,opaque:L.transparent===!1&&L.blending===vh&&L.alphaToCoverage===!1,alphaMap:Ze,alphaTest:Xe,alphaHash:Ne,combine:L.combine,mapUv:Pt&&E(L.map.channel),aoMapUv:ze&&E(L.aoMap.channel),lightMapUv:W&&E(L.lightMap.channel),bumpMapUv:He&&E(L.bumpMap.channel),normalMapUv:ke&&E(L.normalMap.channel),displacementMapUv:et&&E(L.displacementMap.channel),emissiveMapUv:Ve&&E(L.emissiveMap.channel),metalnessMapUv:ot&&E(L.metalnessMap.channel),roughnessMapUv:it&&E(L.roughnessMap.channel),anisotropyMapUv:Te&&E(L.anisotropyMap.channel),clearcoatMapUv:yt&&E(L.clearcoatMap.channel),clearcoatNormalMapUv:at&&E(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:St&&E(L.clearcoatRoughnessMap.channel),iridescenceMapUv:xt&&E(L.iridescenceMap.channel),iridescenceThicknessMapUv:Ie&&E(L.iridescenceThicknessMap.channel),sheenColorMapUv:Ge&&E(L.sheenColorMap.channel),sheenRoughnessMapUv:_t&&E(L.sheenRoughnessMap.channel),specularMapUv:$&&E(L.specularMap.channel),specularColorMapUv:ye&&E(L.specularColorMap.channel),specularIntensityMapUv:qe&&E(L.specularIntensityMap.channel),transmissionMapUv:Q&&E(L.transmissionMap.channel),thicknessMapUv:Je&&E(L.thicknessMap.channel),alphaMapUv:Ze&&E(L.alphaMap.channel),vertexTangents:!!re.attributes.tangent&&(ke||dt),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!re.attributes.color&&re.attributes.color.itemSize===4,pointsUvs:te.isPoints===!0&&!!re.attributes.uv&&(Pt||Ze),fog:!!le,useFog:L.fog===!0,fogExp2:!!le&&le.isFogExp2,flatShading:L.flatShading===!0&&L.wireframe===!1,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:v,reversedDepthBuffer:$e,skinning:te.isSkinnedMesh===!0,morphTargets:re.morphAttributes.position!==void 0,morphNormals:re.morphAttributes.normal!==void 0,morphColors:re.morphAttributes.color!==void 0,morphTargetsCount:q,morphTextureStride:se,numDirLights:I.directional.length,numPointLights:I.point.length,numSpotLights:I.spot.length,numSpotLightMaps:I.spotLightMap.length,numRectAreaLights:I.rectArea.length,numHemiLights:I.hemi.length,numDirLightShadows:I.directionalShadowMap.length,numPointLightShadows:I.pointShadowMap.length,numSpotLightShadows:I.spotShadowMap.length,numSpotLightShadowsWithMaps:I.numSpotLightShadowsWithMaps,numLightProbes:I.numLightProbes,numClippingPlanes:l.numPlanes,numClipIntersection:l.numIntersection,dithering:L.dithering,shadowMapEnabled:a.shadowMap.enabled&&Y.length>0,shadowMapType:a.shadowMap.type,toneMapping:Mt,decodeVideoTexture:Pt&&L.map.isVideoTexture===!0&&Tn.getTransfer(L.map.colorSpace)===Wn,decodeVideoTextureEmissive:Ve&&L.emissiveMap.isVideoTexture===!0&&Tn.getTransfer(L.emissiveMap.colorSpace)===Wn,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===Us,flipSided:L.side===pa,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionClipCullDistance:lt&&L.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(lt&&L.extensions.multiDraw===!0||vt)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()};return rn.vertexUv1s=p.has(1),rn.vertexUv2s=p.has(2),rn.vertexUv3s=p.has(3),p.clear(),rn}function M(L){const I=[];if(L.shaderID?I.push(L.shaderID):(I.push(L.customVertexShaderID),I.push(L.customFragmentShaderID)),L.defines!==void 0)for(const Y in L.defines)I.push(Y),I.push(L.defines[Y]);return L.isRawShaderMaterial===!1&&(B(I,L),D(I,L),I.push(a.outputColorSpace)),I.push(L.customProgramCacheKey),I.join()}function B(L,I){L.push(I.precision),L.push(I.outputColorSpace),L.push(I.envMapMode),L.push(I.envMapCubeUVHeight),L.push(I.mapUv),L.push(I.alphaMapUv),L.push(I.lightMapUv),L.push(I.aoMapUv),L.push(I.bumpMapUv),L.push(I.normalMapUv),L.push(I.displacementMapUv),L.push(I.emissiveMapUv),L.push(I.metalnessMapUv),L.push(I.roughnessMapUv),L.push(I.anisotropyMapUv),L.push(I.clearcoatMapUv),L.push(I.clearcoatNormalMapUv),L.push(I.clearcoatRoughnessMapUv),L.push(I.iridescenceMapUv),L.push(I.iridescenceThicknessMapUv),L.push(I.sheenColorMapUv),L.push(I.sheenRoughnessMapUv),L.push(I.specularMapUv),L.push(I.specularColorMapUv),L.push(I.specularIntensityMapUv),L.push(I.transmissionMapUv),L.push(I.thicknessMapUv),L.push(I.combine),L.push(I.fogExp2),L.push(I.sizeAttenuation),L.push(I.morphTargetsCount),L.push(I.morphAttributeCount),L.push(I.numDirLights),L.push(I.numPointLights),L.push(I.numSpotLights),L.push(I.numSpotLightMaps),L.push(I.numHemiLights),L.push(I.numRectAreaLights),L.push(I.numDirLightShadows),L.push(I.numPointLightShadows),L.push(I.numSpotLightShadows),L.push(I.numSpotLightShadowsWithMaps),L.push(I.numLightProbes),L.push(I.shadowMapType),L.push(I.toneMapping),L.push(I.numClippingPlanes),L.push(I.numClipIntersection),L.push(I.depthPacking)}function D(L,I){c.disableAll(),I.supportsVertexTextures&&c.enable(0),I.instancing&&c.enable(1),I.instancingColor&&c.enable(2),I.instancingMorph&&c.enable(3),I.matcap&&c.enable(4),I.envMap&&c.enable(5),I.normalMapObjectSpace&&c.enable(6),I.normalMapTangentSpace&&c.enable(7),I.clearcoat&&c.enable(8),I.iridescence&&c.enable(9),I.alphaTest&&c.enable(10),I.vertexColors&&c.enable(11),I.vertexAlphas&&c.enable(12),I.vertexUv1s&&c.enable(13),I.vertexUv2s&&c.enable(14),I.vertexUv3s&&c.enable(15),I.vertexTangents&&c.enable(16),I.anisotropy&&c.enable(17),I.alphaHash&&c.enable(18),I.batching&&c.enable(19),I.dispersion&&c.enable(20),I.batchingColor&&c.enable(21),I.gradientMap&&c.enable(22),L.push(c.mask),c.disableAll(),I.fog&&c.enable(0),I.useFog&&c.enable(1),I.flatShading&&c.enable(2),I.logarithmicDepthBuffer&&c.enable(3),I.reversedDepthBuffer&&c.enable(4),I.skinning&&c.enable(5),I.morphTargets&&c.enable(6),I.morphNormals&&c.enable(7),I.morphColors&&c.enable(8),I.premultipliedAlpha&&c.enable(9),I.shadowMapEnabled&&c.enable(10),I.doubleSided&&c.enable(11),I.flipSided&&c.enable(12),I.useDepthPacking&&c.enable(13),I.dithering&&c.enable(14),I.transmission&&c.enable(15),I.sheen&&c.enable(16),I.opaque&&c.enable(17),I.pointsUvs&&c.enable(18),I.decodeVideoTexture&&c.enable(19),I.decodeVideoTextureEmissive&&c.enable(20),I.alphaToCoverage&&c.enable(21),L.push(c.mask)}function w(L){const I=S[L.type];let Y;if(I){const ee=No[I];Y=s3.clone(ee.uniforms)}else Y=L.uniforms;return Y}function z(L,I){let Y;for(let ee=0,te=g.length;ee<te;ee++){const le=g[ee];if(le.cacheKey===I){Y=le,++Y.usedTimes;break}}return Y===void 0&&(Y=new TP(a,I,L,r),g.push(Y)),Y}function O(L){if(--L.usedTimes===0){const I=g.indexOf(L);g[I]=g[g.length-1],g.pop(),L.destroy()}}function P(L){d.remove(L)}function G(){d.dispose()}return{getParameters:C,getProgramCacheKey:M,getUniforms:w,acquireProgram:z,releaseProgram:O,releaseShaderCache:P,programs:g,dispose:G}}function wP(){let a=new WeakMap;function e(l){return a.has(l)}function t(l){let c=a.get(l);return c===void 0&&(c={},a.set(l,c)),c}function n(l){a.delete(l)}function i(l,c,d){a.get(l)[c]=d}function r(){a=new WeakMap}return{has:e,get:t,remove:n,update:i,dispose:r}}function UP(a,e){return a.groupOrder!==e.groupOrder?a.groupOrder-e.groupOrder:a.renderOrder!==e.renderOrder?a.renderOrder-e.renderOrder:a.material.id!==e.material.id?a.material.id-e.material.id:a.z!==e.z?a.z-e.z:a.id-e.id}function QT(a,e){return a.groupOrder!==e.groupOrder?a.groupOrder-e.groupOrder:a.renderOrder!==e.renderOrder?a.renderOrder-e.renderOrder:a.z!==e.z?e.z-a.z:a.id-e.id}function $T(){const a=[];let e=0;const t=[],n=[],i=[];function r(){e=0,t.length=0,n.length=0,i.length=0}function l(v,_,y,S,E,C){let M=a[e];return M===void 0?(M={id:v.id,object:v,geometry:_,material:y,groupOrder:S,renderOrder:v.renderOrder,z:E,group:C},a[e]=M):(M.id=v.id,M.object=v,M.geometry=_,M.material=y,M.groupOrder=S,M.renderOrder=v.renderOrder,M.z=E,M.group=C),e++,M}function c(v,_,y,S,E,C){const M=l(v,_,y,S,E,C);y.transmission>0?n.push(M):y.transparent===!0?i.push(M):t.push(M)}function d(v,_,y,S,E,C){const M=l(v,_,y,S,E,C);y.transmission>0?n.unshift(M):y.transparent===!0?i.unshift(M):t.unshift(M)}function p(v,_){t.length>1&&t.sort(v||UP),n.length>1&&n.sort(_||QT),i.length>1&&i.sort(_||QT)}function g(){for(let v=e,_=a.length;v<_;v++){const y=a[v];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:n,transparent:i,init:r,push:c,unshift:d,finish:g,sort:p}}function OP(){let a=new WeakMap;function e(n,i){const r=a.get(n);let l;return r===void 0?(l=new $T,a.set(n,[l])):i>=r.length?(l=new $T,r.push(l)):l=r[i],l}function t(){a=new WeakMap}return{get:e,dispose:t}}function NP(){const a={};return{get:function(e){if(a[e.id]!==void 0)return a[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new j,color:new rt};break;case"SpotLight":t={position:new j,direction:new j,color:new rt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new j,color:new rt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new j,skyColor:new rt,groundColor:new rt};break;case"RectAreaLight":t={color:new rt,position:new j,halfWidth:new j,halfHeight:new j};break}return a[e.id]=t,t}}}function LP(){const a={};return{get:function(e){if(a[e.id]!==void 0)return a[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De,shadowCameraNear:1,shadowCameraFar:1e3};break}return a[e.id]=t,t}}}let IP=0;function zP(a,e){return(e.castShadow?2:0)-(a.castShadow?2:0)+(e.map?1:0)-(a.map?1:0)}function PP(a){const e=new NP,t=LP(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let p=0;p<9;p++)n.probe.push(new j);const i=new j,r=new zt,l=new zt;function c(p){let g=0,v=0,_=0;for(let L=0;L<9;L++)n.probe[L].set(0,0,0);let y=0,S=0,E=0,C=0,M=0,B=0,D=0,w=0,z=0,O=0,P=0;p.sort(zP);for(let L=0,I=p.length;L<I;L++){const Y=p[L],ee=Y.color,te=Y.intensity,le=Y.distance,re=Y.shadow&&Y.shadow.map?Y.shadow.map.texture:null;if(Y.isAmbientLight)g+=ee.r*te,v+=ee.g*te,_+=ee.b*te;else if(Y.isLightProbe){for(let F=0;F<9;F++)n.probe[F].addScaledVector(Y.sh.coefficients[F],te);P++}else if(Y.isDirectionalLight){const F=e.get(Y);if(F.color.copy(Y.color).multiplyScalar(Y.intensity),Y.castShadow){const J=Y.shadow,Z=t.get(Y);Z.shadowIntensity=J.intensity,Z.shadowBias=J.bias,Z.shadowNormalBias=J.normalBias,Z.shadowRadius=J.radius,Z.shadowMapSize=J.mapSize,n.directionalShadow[y]=Z,n.directionalShadowMap[y]=re,n.directionalShadowMatrix[y]=Y.shadow.matrix,B++}n.directional[y]=F,y++}else if(Y.isSpotLight){const F=e.get(Y);F.position.setFromMatrixPosition(Y.matrixWorld),F.color.copy(ee).multiplyScalar(te),F.distance=le,F.coneCos=Math.cos(Y.angle),F.penumbraCos=Math.cos(Y.angle*(1-Y.penumbra)),F.decay=Y.decay,n.spot[E]=F;const J=Y.shadow;if(Y.map&&(n.spotLightMap[z]=Y.map,z++,J.updateMatrices(Y),Y.castShadow&&O++),n.spotLightMatrix[E]=J.matrix,Y.castShadow){const Z=t.get(Y);Z.shadowIntensity=J.intensity,Z.shadowBias=J.bias,Z.shadowNormalBias=J.normalBias,Z.shadowRadius=J.radius,Z.shadowMapSize=J.mapSize,n.spotShadow[E]=Z,n.spotShadowMap[E]=re,w++}E++}else if(Y.isRectAreaLight){const F=e.get(Y);F.color.copy(ee).multiplyScalar(te),F.halfWidth.set(Y.width*.5,0,0),F.halfHeight.set(0,Y.height*.5,0),n.rectArea[C]=F,C++}else if(Y.isPointLight){const F=e.get(Y);if(F.color.copy(Y.color).multiplyScalar(Y.intensity),F.distance=Y.distance,F.decay=Y.decay,Y.castShadow){const J=Y.shadow,Z=t.get(Y);Z.shadowIntensity=J.intensity,Z.shadowBias=J.bias,Z.shadowNormalBias=J.normalBias,Z.shadowRadius=J.radius,Z.shadowMapSize=J.mapSize,Z.shadowCameraNear=J.camera.near,Z.shadowCameraFar=J.camera.far,n.pointShadow[S]=Z,n.pointShadowMap[S]=re,n.pointShadowMatrix[S]=Y.shadow.matrix,D++}n.point[S]=F,S++}else if(Y.isHemisphereLight){const F=e.get(Y);F.skyColor.copy(Y.color).multiplyScalar(te),F.groundColor.copy(Y.groundColor).multiplyScalar(te),n.hemi[M]=F,M++}}C>0&&(a.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=ft.LTC_FLOAT_1,n.rectAreaLTC2=ft.LTC_FLOAT_2):(n.rectAreaLTC1=ft.LTC_HALF_1,n.rectAreaLTC2=ft.LTC_HALF_2)),n.ambient[0]=g,n.ambient[1]=v,n.ambient[2]=_;const G=n.hash;(G.directionalLength!==y||G.pointLength!==S||G.spotLength!==E||G.rectAreaLength!==C||G.hemiLength!==M||G.numDirectionalShadows!==B||G.numPointShadows!==D||G.numSpotShadows!==w||G.numSpotMaps!==z||G.numLightProbes!==P)&&(n.directional.length=y,n.spot.length=E,n.rectArea.length=C,n.point.length=S,n.hemi.length=M,n.directionalShadow.length=B,n.directionalShadowMap.length=B,n.pointShadow.length=D,n.pointShadowMap.length=D,n.spotShadow.length=w,n.spotShadowMap.length=w,n.directionalShadowMatrix.length=B,n.pointShadowMatrix.length=D,n.spotLightMatrix.length=w+z-O,n.spotLightMap.length=z,n.numSpotLightShadowsWithMaps=O,n.numLightProbes=P,G.directionalLength=y,G.pointLength=S,G.spotLength=E,G.rectAreaLength=C,G.hemiLength=M,G.numDirectionalShadows=B,G.numPointShadows=D,G.numSpotShadows=w,G.numSpotMaps=z,G.numLightProbes=P,n.version=IP++)}function d(p,g){let v=0,_=0,y=0,S=0,E=0;const C=g.matrixWorldInverse;for(let M=0,B=p.length;M<B;M++){const D=p[M];if(D.isDirectionalLight){const w=n.directional[v];w.direction.setFromMatrixPosition(D.matrixWorld),i.setFromMatrixPosition(D.target.matrixWorld),w.direction.sub(i),w.direction.transformDirection(C),v++}else if(D.isSpotLight){const w=n.spot[y];w.position.setFromMatrixPosition(D.matrixWorld),w.position.applyMatrix4(C),w.direction.setFromMatrixPosition(D.matrixWorld),i.setFromMatrixPosition(D.target.matrixWorld),w.direction.sub(i),w.direction.transformDirection(C),y++}else if(D.isRectAreaLight){const w=n.rectArea[S];w.position.setFromMatrixPosition(D.matrixWorld),w.position.applyMatrix4(C),l.identity(),r.copy(D.matrixWorld),r.premultiply(C),l.extractRotation(r),w.halfWidth.set(D.width*.5,0,0),w.halfHeight.set(0,D.height*.5,0),w.halfWidth.applyMatrix4(l),w.halfHeight.applyMatrix4(l),S++}else if(D.isPointLight){const w=n.point[_];w.position.setFromMatrixPosition(D.matrixWorld),w.position.applyMatrix4(C),_++}else if(D.isHemisphereLight){const w=n.hemi[E];w.direction.setFromMatrixPosition(D.matrixWorld),w.direction.transformDirection(C),E++}}}return{setup:c,setupView:d,state:n}}function eC(a){const e=new PP(a),t=[],n=[];function i(g){p.camera=g,t.length=0,n.length=0}function r(g){t.push(g)}function l(g){n.push(g)}function c(){e.setup(t)}function d(g){e.setupView(t,g)}const p={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:i,state:p,setupLights:c,setupLightsView:d,pushLight:r,pushShadow:l}}function FP(a){let e=new WeakMap;function t(i,r=0){const l=e.get(i);let c;return l===void 0?(c=new eC(a),e.set(i,[c])):r>=l.length?(c=new eC(a),l.push(c)):c=l[r],c}function n(){e=new WeakMap}return{get:t,dispose:n}}const HP=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,GP=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function VP(a,e,t){let n=new jp;const i=new De,r=new De,l=new Cn,c=new qy({depthPacking:Ay}),d=new w1,p={},g=t.maxTextureSize,v={[Fo]:pa,[pa]:Fo,[Us]:Us},_=new ji({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new De},radius:{value:4}},vertexShader:HP,fragmentShader:GP}),y=_.clone();y.defines.HORIZONTAL_PASS=1;const S=new qt;S.setAttribute("position",new Dn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const E=new Wi(S,_),C=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=fy;let M=this.type;this.render=function(O,P,G){if(C.enabled===!1||C.autoUpdate===!1&&C.needsUpdate===!1||O.length===0)return;const L=a.getRenderTarget(),I=a.getActiveCubeFace(),Y=a.getActiveMipmapLevel(),ee=a.state;ee.setBlending(Ba),ee.buffers.depth.getReversed()===!0?ee.buffers.color.setClear(0,0,0,0):ee.buffers.color.setClear(1,1,1,1),ee.buffers.depth.setTest(!0),ee.setScissorTest(!1);const te=M!==Uo&&this.type===Uo,le=M===Uo&&this.type!==Uo;for(let re=0,F=O.length;re<F;re++){const J=O[re],Z=J.shadow;if(Z===void 0){ht("WebGLShadowMap:",J,"has no shadow.");continue}if(Z.autoUpdate===!1&&Z.needsUpdate===!1)continue;i.copy(Z.mapSize);const oe=Z.getFrameExtents();if(i.multiply(oe),r.copy(Z.mapSize),(i.x>g||i.y>g)&&(i.x>g&&(r.x=Math.floor(g/oe.x),i.x=r.x*oe.x,Z.mapSize.x=r.x),i.y>g&&(r.y=Math.floor(g/oe.y),i.y=r.y*oe.y,Z.mapSize.y=r.y)),Z.map===null||te===!0||le===!0){const q=this.type!==Uo?{minFilter:bi,magFilter:bi}:{};Z.map!==null&&Z.map.dispose(),Z.map=new Pi(i.x,i.y,q),Z.map.texture.name=J.name+".shadowMap",Z.camera.updateProjectionMatrix()}a.setRenderTarget(Z.map),a.clear();const pe=Z.getViewportCount();for(let q=0;q<pe;q++){const se=Z.getViewport(q);l.set(r.x*se.x,r.y*se.y,r.x*se.z,r.y*se.w),ee.viewport(l),Z.updateMatrices(J,q),n=Z.getFrustum(),w(P,G,Z.camera,J,this.type)}Z.isPointLightShadow!==!0&&this.type===Uo&&B(Z,G),Z.needsUpdate=!1}M=this.type,C.needsUpdate=!1,a.setRenderTarget(L,I,Y)};function B(O,P){const G=e.update(E);_.defines.VSM_SAMPLES!==O.blurSamples&&(_.defines.VSM_SAMPLES=O.blurSamples,y.defines.VSM_SAMPLES=O.blurSamples,_.needsUpdate=!0,y.needsUpdate=!0),O.mapPass===null&&(O.mapPass=new Pi(i.x,i.y)),_.uniforms.shadow_pass.value=O.map.texture,_.uniforms.resolution.value=O.mapSize,_.uniforms.radius.value=O.radius,a.setRenderTarget(O.mapPass),a.clear(),a.renderBufferDirect(P,null,G,_,E,null),y.uniforms.shadow_pass.value=O.mapPass.texture,y.uniforms.resolution.value=O.mapSize,y.uniforms.radius.value=O.radius,a.setRenderTarget(O.map),a.clear(),a.renderBufferDirect(P,null,G,y,E,null)}function D(O,P,G,L){let I=null;const Y=G.isPointLight===!0?O.customDistanceMaterial:O.customDepthMaterial;if(Y!==void 0)I=Y;else if(I=G.isPointLight===!0?d:c,a.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0||P.alphaToCoverage===!0){const ee=I.uuid,te=P.uuid;let le=p[ee];le===void 0&&(le={},p[ee]=le);let re=le[te];re===void 0&&(re=I.clone(),le[te]=re,P.addEventListener("dispose",z)),I=re}if(I.visible=P.visible,I.wireframe=P.wireframe,L===Uo?I.side=P.shadowSide!==null?P.shadowSide:P.side:I.side=P.shadowSide!==null?P.shadowSide:v[P.side],I.alphaMap=P.alphaMap,I.alphaTest=P.alphaToCoverage===!0?.5:P.alphaTest,I.map=P.map,I.clipShadows=P.clipShadows,I.clippingPlanes=P.clippingPlanes,I.clipIntersection=P.clipIntersection,I.displacementMap=P.displacementMap,I.displacementScale=P.displacementScale,I.displacementBias=P.displacementBias,I.wireframeLinewidth=P.wireframeLinewidth,I.linewidth=P.linewidth,G.isPointLight===!0&&I.isMeshDistanceMaterial===!0){const ee=a.properties.get(I);ee.light=G}return I}function w(O,P,G,L,I){if(O.visible===!1)return;if(O.layers.test(P.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&I===Uo)&&(!O.frustumCulled||n.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(G.matrixWorldInverse,O.matrixWorld);const te=e.update(O),le=O.material;if(Array.isArray(le)){const re=te.groups;for(let F=0,J=re.length;F<J;F++){const Z=re[F],oe=le[Z.materialIndex];if(oe&&oe.visible){const pe=D(O,oe,L,I);O.onBeforeShadow(a,O,P,G,te,pe,Z),a.renderBufferDirect(G,null,te,pe,O,Z),O.onAfterShadow(a,O,P,G,te,pe,Z)}}}else if(le.visible){const re=D(O,le,L,I);O.onBeforeShadow(a,O,P,G,te,re,null),a.renderBufferDirect(G,null,te,re,O,null),O.onAfterShadow(a,O,P,G,te,re,null)}}const ee=O.children;for(let te=0,le=ee.length;te<le;te++)w(ee[te],P,G,L,I)}function z(O){O.target.removeEventListener("dispose",z);for(const G in p){const L=p[G],I=O.target.uuid;I in L&&(L[I].dispose(),delete L[I])}}}const XP={[ug]:Tp,[Cp]:fg,[Mh]:Rp,[Ic]:cg,[Tp]:ug,[fg]:Cp,[Rp]:Mh,[cg]:Ic};function kP(a,e){function t(){let Q=!1;const Je=new Cn;let We=null;const Ze=new Cn(0,0,0,0);return{setMask:function(Xe){We!==Xe&&!Q&&(a.colorMask(Xe,Xe,Xe,Xe),We=Xe)},setLocked:function(Xe){Q=Xe},setClear:function(Xe,Ne,lt,Mt,rn){rn===!0&&(Xe*=Mt,Ne*=Mt,lt*=Mt),Je.set(Xe,Ne,lt,Mt),Ze.equals(Je)===!1&&(a.clearColor(Xe,Ne,lt,Mt),Ze.copy(Je))},reset:function(){Q=!1,We=null,Ze.set(-1,0,0,0)}}}function n(){let Q=!1,Je=!1,We=null,Ze=null,Xe=null;return{setReversed:function(Ne){if(Je!==Ne){const lt=e.get("EXT_clip_control");Ne?lt.clipControlEXT(lt.LOWER_LEFT_EXT,lt.ZERO_TO_ONE_EXT):lt.clipControlEXT(lt.LOWER_LEFT_EXT,lt.NEGATIVE_ONE_TO_ONE_EXT),Je=Ne;const Mt=Xe;Xe=null,this.setClear(Mt)}},getReversed:function(){return Je},setTest:function(Ne){Ne?Re(a.DEPTH_TEST):$e(a.DEPTH_TEST)},setMask:function(Ne){We!==Ne&&!Q&&(a.depthMask(Ne),We=Ne)},setFunc:function(Ne){if(Je&&(Ne=XP[Ne]),Ze!==Ne){switch(Ne){case ug:a.depthFunc(a.NEVER);break;case Tp:a.depthFunc(a.ALWAYS);break;case Cp:a.depthFunc(a.LESS);break;case Ic:a.depthFunc(a.LEQUAL);break;case Mh:a.depthFunc(a.EQUAL);break;case cg:a.depthFunc(a.GEQUAL);break;case fg:a.depthFunc(a.GREATER);break;case Rp:a.depthFunc(a.NOTEQUAL);break;default:a.depthFunc(a.LEQUAL)}Ze=Ne}},setLocked:function(Ne){Q=Ne},setClear:function(Ne){Xe!==Ne&&(Je&&(Ne=1-Ne),a.clearDepth(Ne),Xe=Ne)},reset:function(){Q=!1,We=null,Ze=null,Xe=null,Je=!1}}}function i(){let Q=!1,Je=null,We=null,Ze=null,Xe=null,Ne=null,lt=null,Mt=null,rn=null;return{setTest:function(Wt){Q||(Wt?Re(a.STENCIL_TEST):$e(a.STENCIL_TEST))},setMask:function(Wt){Je!==Wt&&!Q&&(a.stencilMask(Wt),Je=Wt)},setFunc:function(Wt,li,Fi){(We!==Wt||Ze!==li||Xe!==Fi)&&(a.stencilFunc(Wt,li,Fi),We=Wt,Ze=li,Xe=Fi)},setOp:function(Wt,li,Fi){(Ne!==Wt||lt!==li||Mt!==Fi)&&(a.stencilOp(Wt,li,Fi),Ne=Wt,lt=li,Mt=Fi)},setLocked:function(Wt){Q=Wt},setClear:function(Wt){rn!==Wt&&(a.clearStencil(Wt),rn=Wt)},reset:function(){Q=!1,Je=null,We=null,Ze=null,Xe=null,Ne=null,lt=null,Mt=null,rn=null}}}const r=new t,l=new n,c=new i,d=new WeakMap,p=new WeakMap;let g={},v={},_=new WeakMap,y=[],S=null,E=!1,C=null,M=null,B=null,D=null,w=null,z=null,O=null,P=new rt(0,0,0),G=0,L=!1,I=null,Y=null,ee=null,te=null,le=null;const re=a.getParameter(a.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let F=!1,J=0;const Z=a.getParameter(a.VERSION);Z.indexOf("WebGL")!==-1?(J=parseFloat(/^WebGL (\d)/.exec(Z)[1]),F=J>=1):Z.indexOf("OpenGL ES")!==-1&&(J=parseFloat(/^OpenGL ES (\d)/.exec(Z)[1]),F=J>=2);let oe=null,pe={};const q=a.getParameter(a.SCISSOR_BOX),se=a.getParameter(a.VIEWPORT),Ce=new Cn().fromArray(q),Ee=new Cn().fromArray(se);function Ye(Q,Je,We,Ze){const Xe=new Uint8Array(4),Ne=a.createTexture();a.bindTexture(Q,Ne),a.texParameteri(Q,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(Q,a.TEXTURE_MAG_FILTER,a.NEAREST);for(let lt=0;lt<We;lt++)Q===a.TEXTURE_3D||Q===a.TEXTURE_2D_ARRAY?a.texImage3D(Je,0,a.RGBA,1,1,Ze,0,a.RGBA,a.UNSIGNED_BYTE,Xe):a.texImage2D(Je+lt,0,a.RGBA,1,1,0,a.RGBA,a.UNSIGNED_BYTE,Xe);return Ne}const ge={};ge[a.TEXTURE_2D]=Ye(a.TEXTURE_2D,a.TEXTURE_2D,1),ge[a.TEXTURE_CUBE_MAP]=Ye(a.TEXTURE_CUBE_MAP,a.TEXTURE_CUBE_MAP_POSITIVE_X,6),ge[a.TEXTURE_2D_ARRAY]=Ye(a.TEXTURE_2D_ARRAY,a.TEXTURE_2D_ARRAY,1,1),ge[a.TEXTURE_3D]=Ye(a.TEXTURE_3D,a.TEXTURE_3D,1,1),r.setClear(0,0,0,1),l.setClear(1),c.setClear(0),Re(a.DEPTH_TEST),l.setFunc(Ic),He(!1),ke(gS),Re(a.CULL_FACE),ze(Ba);function Re(Q){g[Q]!==!0&&(a.enable(Q),g[Q]=!0)}function $e(Q){g[Q]!==!1&&(a.disable(Q),g[Q]=!1)}function ut(Q,Je){return v[Q]!==Je?(a.bindFramebuffer(Q,Je),v[Q]=Je,Q===a.DRAW_FRAMEBUFFER&&(v[a.FRAMEBUFFER]=Je),Q===a.FRAMEBUFFER&&(v[a.DRAW_FRAMEBUFFER]=Je),!0):!1}function vt(Q,Je){let We=y,Ze=!1;if(Q){We=_.get(Je),We===void 0&&(We=[],_.set(Je,We));const Xe=Q.textures;if(We.length!==Xe.length||We[0]!==a.COLOR_ATTACHMENT0){for(let Ne=0,lt=Xe.length;Ne<lt;Ne++)We[Ne]=a.COLOR_ATTACHMENT0+Ne;We.length=Xe.length,Ze=!0}}else We[0]!==a.BACK&&(We[0]=a.BACK,Ze=!0);Ze&&a.drawBuffers(We)}function Pt(Q){return S!==Q?(a.useProgram(Q),S=Q,!0):!1}const sn={[Ec]:a.FUNC_ADD,[m2]:a.FUNC_SUBTRACT,[g2]:a.FUNC_REVERSE_SUBTRACT};sn[v2]=a.MIN,sn[x2]=a.MAX;const Ct={[_2]:a.ZERO,[y2]:a.ONE,[b2]:a.SRC_COLOR,[x_]:a.SRC_ALPHA,[C2]:a.SRC_ALPHA_SATURATE,[E2]:a.DST_COLOR,[S2]:a.DST_ALPHA,[A2]:a.ONE_MINUS_SRC_COLOR,[__]:a.ONE_MINUS_SRC_ALPHA,[T2]:a.ONE_MINUS_DST_COLOR,[M2]:a.ONE_MINUS_DST_ALPHA,[R2]:a.CONSTANT_COLOR,[B2]:a.ONE_MINUS_CONSTANT_COLOR,[D2]:a.CONSTANT_ALPHA,[w2]:a.ONE_MINUS_CONSTANT_ALPHA};function ze(Q,Je,We,Ze,Xe,Ne,lt,Mt,rn,Wt){if(Q===Ba){E===!0&&($e(a.BLEND),E=!1);return}if(E===!1&&(Re(a.BLEND),E=!0),Q!==p2){if(Q!==C||Wt!==L){if((M!==Ec||w!==Ec)&&(a.blendEquation(a.FUNC_ADD),M=Ec,w=Ec),Wt)switch(Q){case vh:a.blendFuncSeparate(a.ONE,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case vS:a.blendFunc(a.ONE,a.ONE);break;case xS:a.blendFuncSeparate(a.ZERO,a.ONE_MINUS_SRC_COLOR,a.ZERO,a.ONE);break;case _S:a.blendFuncSeparate(a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA,a.ZERO,a.ONE);break;default:kt("WebGLState: Invalid blending: ",Q);break}else switch(Q){case vh:a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);break;case vS:a.blendFuncSeparate(a.SRC_ALPHA,a.ONE,a.ONE,a.ONE);break;case xS:kt("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case _S:kt("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:kt("WebGLState: Invalid blending: ",Q);break}B=null,D=null,z=null,O=null,P.set(0,0,0),G=0,C=Q,L=Wt}return}Xe=Xe||Je,Ne=Ne||We,lt=lt||Ze,(Je!==M||Xe!==w)&&(a.blendEquationSeparate(sn[Je],sn[Xe]),M=Je,w=Xe),(We!==B||Ze!==D||Ne!==z||lt!==O)&&(a.blendFuncSeparate(Ct[We],Ct[Ze],Ct[Ne],Ct[lt]),B=We,D=Ze,z=Ne,O=lt),(Mt.equals(P)===!1||rn!==G)&&(a.blendColor(Mt.r,Mt.g,Mt.b,rn),P.copy(Mt),G=rn),C=Q,L=!1}function W(Q,Je){Q.side===Us?$e(a.CULL_FACE):Re(a.CULL_FACE);let We=Q.side===pa;Je&&(We=!We),He(We),Q.blending===vh&&Q.transparent===!1?ze(Ba):ze(Q.blending,Q.blendEquation,Q.blendSrc,Q.blendDst,Q.blendEquationAlpha,Q.blendSrcAlpha,Q.blendDstAlpha,Q.blendColor,Q.blendAlpha,Q.premultipliedAlpha),l.setFunc(Q.depthFunc),l.setTest(Q.depthTest),l.setMask(Q.depthWrite),r.setMask(Q.colorWrite);const Ze=Q.stencilWrite;c.setTest(Ze),Ze&&(c.setMask(Q.stencilWriteMask),c.setFunc(Q.stencilFunc,Q.stencilRef,Q.stencilFuncMask),c.setOp(Q.stencilFail,Q.stencilZFail,Q.stencilZPass)),Ve(Q.polygonOffset,Q.polygonOffsetFactor,Q.polygonOffsetUnits),Q.alphaToCoverage===!0?Re(a.SAMPLE_ALPHA_TO_COVERAGE):$e(a.SAMPLE_ALPHA_TO_COVERAGE)}function He(Q){I!==Q&&(Q?a.frontFace(a.CW):a.frontFace(a.CCW),I=Q)}function ke(Q){Q!==f2?(Re(a.CULL_FACE),Q!==Y&&(Q===gS?a.cullFace(a.BACK):Q===h2?a.cullFace(a.FRONT):a.cullFace(a.FRONT_AND_BACK))):$e(a.CULL_FACE),Y=Q}function et(Q){Q!==ee&&(F&&a.lineWidth(Q),ee=Q)}function Ve(Q,Je,We){Q?(Re(a.POLYGON_OFFSET_FILL),(te!==Je||le!==We)&&(a.polygonOffset(Je,We),te=Je,le=We)):$e(a.POLYGON_OFFSET_FILL)}function ot(Q){Q?Re(a.SCISSOR_TEST):$e(a.SCISSOR_TEST)}function it(Q){Q===void 0&&(Q=a.TEXTURE0+re-1),oe!==Q&&(a.activeTexture(Q),oe=Q)}function dt(Q,Je,We){We===void 0&&(oe===null?We=a.TEXTURE0+re-1:We=oe);let Ze=pe[We];Ze===void 0&&(Ze={type:void 0,texture:void 0},pe[We]=Ze),(Ze.type!==Q||Ze.texture!==Je)&&(oe!==We&&(a.activeTexture(We),oe=We),a.bindTexture(Q,Je||ge[Q]),Ze.type=Q,Ze.texture=Je)}function K(){const Q=pe[oe];Q!==void 0&&Q.type!==void 0&&(a.bindTexture(Q.type,null),Q.type=void 0,Q.texture=void 0)}function H(){try{a.compressedTexImage2D(...arguments)}catch(Q){Q("WebGLState:",Q)}}function me(){try{a.compressedTexImage3D(...arguments)}catch(Q){Q("WebGLState:",Q)}}function we(){try{a.texSubImage2D(...arguments)}catch(Q){Q("WebGLState:",Q)}}function Fe(){try{a.texSubImage3D(...arguments)}catch(Q){Q("WebGLState:",Q)}}function Te(){try{a.compressedTexSubImage2D(...arguments)}catch(Q){Q("WebGLState:",Q)}}function yt(){try{a.compressedTexSubImage3D(...arguments)}catch(Q){Q("WebGLState:",Q)}}function at(){try{a.texStorage2D(...arguments)}catch(Q){Q("WebGLState:",Q)}}function St(){try{a.texStorage3D(...arguments)}catch(Q){Q("WebGLState:",Q)}}function xt(){try{a.texImage2D(...arguments)}catch(Q){Q("WebGLState:",Q)}}function Ie(){try{a.texImage3D(...arguments)}catch(Q){Q("WebGLState:",Q)}}function Ge(Q){Ce.equals(Q)===!1&&(a.scissor(Q.x,Q.y,Q.z,Q.w),Ce.copy(Q))}function _t(Q){Ee.equals(Q)===!1&&(a.viewport(Q.x,Q.y,Q.z,Q.w),Ee.copy(Q))}function $(Q,Je){let We=p.get(Je);We===void 0&&(We=new WeakMap,p.set(Je,We));let Ze=We.get(Q);Ze===void 0&&(Ze=a.getUniformBlockIndex(Je,Q.name),We.set(Q,Ze))}function ye(Q,Je){const Ze=p.get(Je).get(Q);d.get(Je)!==Ze&&(a.uniformBlockBinding(Je,Ze,Q.__bindingPointIndex),d.set(Je,Ze))}function qe(){a.disable(a.BLEND),a.disable(a.CULL_FACE),a.disable(a.DEPTH_TEST),a.disable(a.POLYGON_OFFSET_FILL),a.disable(a.SCISSOR_TEST),a.disable(a.STENCIL_TEST),a.disable(a.SAMPLE_ALPHA_TO_COVERAGE),a.blendEquation(a.FUNC_ADD),a.blendFunc(a.ONE,a.ZERO),a.blendFuncSeparate(a.ONE,a.ZERO,a.ONE,a.ZERO),a.blendColor(0,0,0,0),a.colorMask(!0,!0,!0,!0),a.clearColor(0,0,0,0),a.depthMask(!0),a.depthFunc(a.LESS),l.setReversed(!1),a.clearDepth(1),a.stencilMask(4294967295),a.stencilFunc(a.ALWAYS,0,4294967295),a.stencilOp(a.KEEP,a.KEEP,a.KEEP),a.clearStencil(0),a.cullFace(a.BACK),a.frontFace(a.CCW),a.polygonOffset(0,0),a.activeTexture(a.TEXTURE0),a.bindFramebuffer(a.FRAMEBUFFER,null),a.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),a.bindFramebuffer(a.READ_FRAMEBUFFER,null),a.useProgram(null),a.lineWidth(1),a.scissor(0,0,a.canvas.width,a.canvas.height),a.viewport(0,0,a.canvas.width,a.canvas.height),g={},oe=null,pe={},v={},_=new WeakMap,y=[],S=null,E=!1,C=null,M=null,B=null,D=null,w=null,z=null,O=null,P=new rt(0,0,0),G=0,L=!1,I=null,Y=null,ee=null,te=null,le=null,Ce.set(0,0,a.canvas.width,a.canvas.height),Ee.set(0,0,a.canvas.width,a.canvas.height),r.reset(),l.reset(),c.reset()}return{buffers:{color:r,depth:l,stencil:c},enable:Re,disable:$e,bindFramebuffer:ut,drawBuffers:vt,useProgram:Pt,setBlending:ze,setMaterial:W,setFlipSided:He,setCullFace:ke,setLineWidth:et,setPolygonOffset:Ve,setScissorTest:ot,activeTexture:it,bindTexture:dt,unbindTexture:K,compressedTexImage2D:H,compressedTexImage3D:me,texImage2D:xt,texImage3D:Ie,updateUBOMapping:$,uniformBlockBinding:ye,texStorage2D:at,texStorage3D:St,texSubImage2D:we,texSubImage3D:Fe,compressedTexSubImage2D:Te,compressedTexSubImage3D:yt,scissor:Ge,viewport:_t,reset:qe}}function YP(a,e,t,n,i,r,l){const c=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),p=new De,g=new WeakMap;let v;const _=new WeakMap;let y=!1;try{y=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(K,H){return y?new OffscreenCanvas(K,H):vg("canvas")}function E(K,H,me){let we=1;const Fe=dt(K);if((Fe.width>me||Fe.height>me)&&(we=me/Math.max(Fe.width,Fe.height)),we<1)if(typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&K instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&K instanceof ImageBitmap||typeof VideoFrame<"u"&&K instanceof VideoFrame){const Te=Math.floor(we*Fe.width),yt=Math.floor(we*Fe.height);v===void 0&&(v=S(Te,yt));const at=H?S(Te,yt):v;return at.width=Te,at.height=yt,at.getContext("2d").drawImage(K,0,0,Te,yt),ht("WebGLRenderer: Texture has been resized from ("+Fe.width+"x"+Fe.height+") to ("+Te+"x"+yt+")."),at}else return"data"in K&&ht("WebGLRenderer: Image in DataTexture is too big ("+Fe.width+"x"+Fe.height+")."),K;return K}function C(K){return K.generateMipmaps}function M(K){a.generateMipmap(K)}function B(K){return K.isWebGLCubeRenderTarget?a.TEXTURE_CUBE_MAP:K.isWebGL3DRenderTarget?a.TEXTURE_3D:K.isWebGLArrayRenderTarget||K.isCompressedArrayTexture?a.TEXTURE_2D_ARRAY:a.TEXTURE_2D}function D(K,H,me,we,Fe=!1){if(K!==null){if(a[K]!==void 0)return a[K];ht("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+K+"'")}let Te=H;if(H===a.RED&&(me===a.FLOAT&&(Te=a.R32F),me===a.HALF_FLOAT&&(Te=a.R16F),me===a.UNSIGNED_BYTE&&(Te=a.R8)),H===a.RED_INTEGER&&(me===a.UNSIGNED_BYTE&&(Te=a.R8UI),me===a.UNSIGNED_SHORT&&(Te=a.R16UI),me===a.UNSIGNED_INT&&(Te=a.R32UI),me===a.BYTE&&(Te=a.R8I),me===a.SHORT&&(Te=a.R16I),me===a.INT&&(Te=a.R32I)),H===a.RG&&(me===a.FLOAT&&(Te=a.RG32F),me===a.HALF_FLOAT&&(Te=a.RG16F),me===a.UNSIGNED_BYTE&&(Te=a.RG8)),H===a.RG_INTEGER&&(me===a.UNSIGNED_BYTE&&(Te=a.RG8UI),me===a.UNSIGNED_SHORT&&(Te=a.RG16UI),me===a.UNSIGNED_INT&&(Te=a.RG32UI),me===a.BYTE&&(Te=a.RG8I),me===a.SHORT&&(Te=a.RG16I),me===a.INT&&(Te=a.RG32I)),H===a.RGB_INTEGER&&(me===a.UNSIGNED_BYTE&&(Te=a.RGB8UI),me===a.UNSIGNED_SHORT&&(Te=a.RGB16UI),me===a.UNSIGNED_INT&&(Te=a.RGB32UI),me===a.BYTE&&(Te=a.RGB8I),me===a.SHORT&&(Te=a.RGB16I),me===a.INT&&(Te=a.RGB32I)),H===a.RGBA_INTEGER&&(me===a.UNSIGNED_BYTE&&(Te=a.RGBA8UI),me===a.UNSIGNED_SHORT&&(Te=a.RGBA16UI),me===a.UNSIGNED_INT&&(Te=a.RGBA32UI),me===a.BYTE&&(Te=a.RGBA8I),me===a.SHORT&&(Te=a.RGBA16I),me===a.INT&&(Te=a.RGBA32I)),H===a.RGB&&(me===a.UNSIGNED_INT_5_9_9_9_REV&&(Te=a.RGB9_E5),me===a.UNSIGNED_INT_10F_11F_11F_REV&&(Te=a.R11F_G11F_B10F)),H===a.RGBA){const yt=Fe?mg:Tn.getTransfer(we);me===a.FLOAT&&(Te=a.RGBA32F),me===a.HALF_FLOAT&&(Te=a.RGBA16F),me===a.UNSIGNED_BYTE&&(Te=yt===Wn?a.SRGB8_ALPHA8:a.RGBA8),me===a.UNSIGNED_SHORT_4_4_4_4&&(Te=a.RGBA4),me===a.UNSIGNED_SHORT_5_5_5_1&&(Te=a.RGB5_A1)}return(Te===a.R16F||Te===a.R32F||Te===a.RG16F||Te===a.RG32F||Te===a.RGBA16F||Te===a.RGBA32F)&&e.get("EXT_color_buffer_float"),Te}function w(K,H){let me;return K?H===null||H===Bl||H===Eh?me=a.DEPTH24_STENCIL8:H===Is?me=a.DEPTH32F_STENCIL8:H===Dp&&(me=a.DEPTH24_STENCIL8,ht("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):H===null||H===Bl||H===Eh?me=a.DEPTH_COMPONENT24:H===Is?me=a.DEPTH_COMPONENT32F:H===Dp&&(me=a.DEPTH_COMPONENT16),me}function z(K,H){return C(K)===!0||K.isFramebufferTexture&&K.minFilter!==bi&&K.minFilter!==oi?Math.log2(Math.max(H.width,H.height))+1:K.mipmaps!==void 0&&K.mipmaps.length>0?K.mipmaps.length:K.isCompressedTexture&&Array.isArray(K.image)?H.mipmaps.length:1}function O(K){const H=K.target;H.removeEventListener("dispose",O),G(H),H.isVideoTexture&&g.delete(H)}function P(K){const H=K.target;H.removeEventListener("dispose",P),I(H)}function G(K){const H=n.get(K);if(H.__webglInit===void 0)return;const me=K.source,we=_.get(me);if(we){const Fe=we[H.__cacheKey];Fe.usedTimes--,Fe.usedTimes===0&&L(K),Object.keys(we).length===0&&_.delete(me)}n.remove(K)}function L(K){const H=n.get(K);a.deleteTexture(H.__webglTexture);const me=K.source,we=_.get(me);delete we[H.__cacheKey],l.memory.textures--}function I(K){const H=n.get(K);if(K.depthTexture&&(K.depthTexture.dispose(),n.remove(K.depthTexture)),K.isWebGLCubeRenderTarget)for(let we=0;we<6;we++){if(Array.isArray(H.__webglFramebuffer[we]))for(let Fe=0;Fe<H.__webglFramebuffer[we].length;Fe++)a.deleteFramebuffer(H.__webglFramebuffer[we][Fe]);else a.deleteFramebuffer(H.__webglFramebuffer[we]);H.__webglDepthbuffer&&a.deleteRenderbuffer(H.__webglDepthbuffer[we])}else{if(Array.isArray(H.__webglFramebuffer))for(let we=0;we<H.__webglFramebuffer.length;we++)a.deleteFramebuffer(H.__webglFramebuffer[we]);else a.deleteFramebuffer(H.__webglFramebuffer);if(H.__webglDepthbuffer&&a.deleteRenderbuffer(H.__webglDepthbuffer),H.__webglMultisampledFramebuffer&&a.deleteFramebuffer(H.__webglMultisampledFramebuffer),H.__webglColorRenderbuffer)for(let we=0;we<H.__webglColorRenderbuffer.length;we++)H.__webglColorRenderbuffer[we]&&a.deleteRenderbuffer(H.__webglColorRenderbuffer[we]);H.__webglDepthRenderbuffer&&a.deleteRenderbuffer(H.__webglDepthRenderbuffer)}const me=K.textures;for(let we=0,Fe=me.length;we<Fe;we++){const Te=n.get(me[we]);Te.__webglTexture&&(a.deleteTexture(Te.__webglTexture),l.memory.textures--),n.remove(me[we])}n.remove(K)}let Y=0;function ee(){Y=0}function te(){const K=Y;return K>=i.maxTextures&&ht("WebGLTextures: Trying to use "+K+" texture units while this GPU supports only "+i.maxTextures),Y+=1,K}function le(K){const H=[];return H.push(K.wrapS),H.push(K.wrapT),H.push(K.wrapR||0),H.push(K.magFilter),H.push(K.minFilter),H.push(K.anisotropy),H.push(K.internalFormat),H.push(K.format),H.push(K.type),H.push(K.generateMipmaps),H.push(K.premultiplyAlpha),H.push(K.flipY),H.push(K.unpackAlignment),H.push(K.colorSpace),H.join()}function re(K,H){const me=n.get(K);if(K.isVideoTexture&&ot(K),K.isRenderTargetTexture===!1&&K.isExternalTexture!==!0&&K.version>0&&me.__version!==K.version){const we=K.image;if(we===null)ht("WebGLRenderer: Texture marked for update but no image data found.");else if(we.complete===!1)ht("WebGLRenderer: Texture marked for update but image is incomplete");else{ge(me,K,H);return}}else K.isExternalTexture&&(me.__webglTexture=K.sourceTexture?K.sourceTexture:null);t.bindTexture(a.TEXTURE_2D,me.__webglTexture,a.TEXTURE0+H)}function F(K,H){const me=n.get(K);if(K.isRenderTargetTexture===!1&&K.version>0&&me.__version!==K.version){ge(me,K,H);return}else K.isExternalTexture&&(me.__webglTexture=K.sourceTexture?K.sourceTexture:null);t.bindTexture(a.TEXTURE_2D_ARRAY,me.__webglTexture,a.TEXTURE0+H)}function J(K,H){const me=n.get(K);if(K.isRenderTargetTexture===!1&&K.version>0&&me.__version!==K.version){ge(me,K,H);return}t.bindTexture(a.TEXTURE_3D,me.__webglTexture,a.TEXTURE0+H)}function Z(K,H){const me=n.get(K);if(K.version>0&&me.__version!==K.version){Re(me,K,H);return}t.bindTexture(a.TEXTURE_CUBE_MAP,me.__webglTexture,a.TEXTURE0+H)}const oe={[Pc]:a.REPEAT,[Ls]:a.CLAMP_TO_EDGE,[Bp]:a.MIRRORED_REPEAT},pe={[bi]:a.NEAREST,[dy]:a.NEAREST_MIPMAP_NEAREST,[ch]:a.NEAREST_MIPMAP_LINEAR,[oi]:a.LINEAR,[yp]:a.LINEAR_MIPMAP_NEAREST,[Qr]:a.LINEAR_MIPMAP_LINEAR},q={[q2]:a.NEVER,[Q2]:a.ALWAYS,[J2]:a.LESS,[d1]:a.LEQUAL,[K2]:a.EQUAL,[Z2]:a.GEQUAL,[W2]:a.GREATER,[j2]:a.NOTEQUAL};function se(K,H){if(H.type===Is&&e.has("OES_texture_float_linear")===!1&&(H.magFilter===oi||H.magFilter===yp||H.magFilter===ch||H.magFilter===Qr||H.minFilter===oi||H.minFilter===yp||H.minFilter===ch||H.minFilter===Qr)&&ht("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),a.texParameteri(K,a.TEXTURE_WRAP_S,oe[H.wrapS]),a.texParameteri(K,a.TEXTURE_WRAP_T,oe[H.wrapT]),(K===a.TEXTURE_3D||K===a.TEXTURE_2D_ARRAY)&&a.texParameteri(K,a.TEXTURE_WRAP_R,oe[H.wrapR]),a.texParameteri(K,a.TEXTURE_MAG_FILTER,pe[H.magFilter]),a.texParameteri(K,a.TEXTURE_MIN_FILTER,pe[H.minFilter]),H.compareFunction&&(a.texParameteri(K,a.TEXTURE_COMPARE_MODE,a.COMPARE_REF_TO_TEXTURE),a.texParameteri(K,a.TEXTURE_COMPARE_FUNC,q[H.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(H.magFilter===bi||H.minFilter!==ch&&H.minFilter!==Qr||H.type===Is&&e.has("OES_texture_float_linear")===!1)return;if(H.anisotropy>1||n.get(H).__currentAnisotropy){const me=e.get("EXT_texture_filter_anisotropic");a.texParameterf(K,me.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(H.anisotropy,i.getMaxAnisotropy())),n.get(H).__currentAnisotropy=H.anisotropy}}}function Ce(K,H){let me=!1;K.__webglInit===void 0&&(K.__webglInit=!0,H.addEventListener("dispose",O));const we=H.source;let Fe=_.get(we);Fe===void 0&&(Fe={},_.set(we,Fe));const Te=le(H);if(Te!==K.__cacheKey){Fe[Te]===void 0&&(Fe[Te]={texture:a.createTexture(),usedTimes:0},l.memory.textures++,me=!0),Fe[Te].usedTimes++;const yt=Fe[K.__cacheKey];yt!==void 0&&(Fe[K.__cacheKey].usedTimes--,yt.usedTimes===0&&L(H)),K.__cacheKey=Te,K.__webglTexture=Fe[Te].texture}return me}function Ee(K,H,me){return Math.floor(Math.floor(K/me)/H)}function Ye(K,H,me,we){const Te=K.updateRanges;if(Te.length===0)t.texSubImage2D(a.TEXTURE_2D,0,0,0,H.width,H.height,me,we,H.data);else{Te.sort((Ie,Ge)=>Ie.start-Ge.start);let yt=0;for(let Ie=1;Ie<Te.length;Ie++){const Ge=Te[yt],_t=Te[Ie],$=Ge.start+Ge.count,ye=Ee(_t.start,H.width,4),qe=Ee(Ge.start,H.width,4);_t.start<=$+1&&ye===qe&&Ee(_t.start+_t.count-1,H.width,4)===ye?Ge.count=Math.max(Ge.count,_t.start+_t.count-Ge.start):(++yt,Te[yt]=_t)}Te.length=yt+1;const at=a.getParameter(a.UNPACK_ROW_LENGTH),St=a.getParameter(a.UNPACK_SKIP_PIXELS),xt=a.getParameter(a.UNPACK_SKIP_ROWS);a.pixelStorei(a.UNPACK_ROW_LENGTH,H.width);for(let Ie=0,Ge=Te.length;Ie<Ge;Ie++){const _t=Te[Ie],$=Math.floor(_t.start/4),ye=Math.ceil(_t.count/4),qe=$%H.width,Q=Math.floor($/H.width),Je=ye,We=1;a.pixelStorei(a.UNPACK_SKIP_PIXELS,qe),a.pixelStorei(a.UNPACK_SKIP_ROWS,Q),t.texSubImage2D(a.TEXTURE_2D,0,qe,Q,Je,We,me,we,H.data)}K.clearUpdateRanges(),a.pixelStorei(a.UNPACK_ROW_LENGTH,at),a.pixelStorei(a.UNPACK_SKIP_PIXELS,St),a.pixelStorei(a.UNPACK_SKIP_ROWS,xt)}}function ge(K,H,me){let we=a.TEXTURE_2D;(H.isDataArrayTexture||H.isCompressedArrayTexture)&&(we=a.TEXTURE_2D_ARRAY),H.isData3DTexture&&(we=a.TEXTURE_3D);const Fe=Ce(K,H),Te=H.source;t.bindTexture(we,K.__webglTexture,a.TEXTURE0+me);const yt=n.get(Te);if(Te.version!==yt.__version||Fe===!0){t.activeTexture(a.TEXTURE0+me);const at=Tn.getPrimaries(Tn.workingColorSpace),St=H.colorSpace===Lo?null:Tn.getPrimaries(H.colorSpace),xt=H.colorSpace===Lo||at===St?a.NONE:a.BROWSER_DEFAULT_WEBGL;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,H.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,H.unpackAlignment),a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,xt);let Ie=E(H.image,!1,i.maxTextureSize);Ie=it(H,Ie);const Ge=r.convert(H.format,H.colorSpace),_t=r.convert(H.type);let $=D(H.internalFormat,Ge,_t,H.colorSpace,H.isVideoTexture);se(we,H);let ye;const qe=H.mipmaps,Q=H.isVideoTexture!==!0,Je=yt.__version===void 0||Fe===!0,We=Te.dataReady,Ze=z(H,Ie);if(H.isDepthTexture)$=w(H.format===Th,H.type),Je&&(Q?t.texStorage2D(a.TEXTURE_2D,1,$,Ie.width,Ie.height):t.texImage2D(a.TEXTURE_2D,0,$,Ie.width,Ie.height,0,Ge,_t,null));else if(H.isDataTexture)if(qe.length>0){Q&&Je&&t.texStorage2D(a.TEXTURE_2D,Ze,$,qe[0].width,qe[0].height);for(let Xe=0,Ne=qe.length;Xe<Ne;Xe++)ye=qe[Xe],Q?We&&t.texSubImage2D(a.TEXTURE_2D,Xe,0,0,ye.width,ye.height,Ge,_t,ye.data):t.texImage2D(a.TEXTURE_2D,Xe,$,ye.width,ye.height,0,Ge,_t,ye.data);H.generateMipmaps=!1}else Q?(Je&&t.texStorage2D(a.TEXTURE_2D,Ze,$,Ie.width,Ie.height),We&&Ye(H,Ie,Ge,_t)):t.texImage2D(a.TEXTURE_2D,0,$,Ie.width,Ie.height,0,Ge,_t,Ie.data);else if(H.isCompressedTexture)if(H.isCompressedArrayTexture){Q&&Je&&t.texStorage3D(a.TEXTURE_2D_ARRAY,Ze,$,qe[0].width,qe[0].height,Ie.depth);for(let Xe=0,Ne=qe.length;Xe<Ne;Xe++)if(ye=qe[Xe],H.format!==ss)if(Ge!==null)if(Q){if(We)if(H.layerUpdates.size>0){const lt=BS(ye.width,ye.height,H.format,H.type);for(const Mt of H.layerUpdates){const rn=ye.data.subarray(Mt*lt/ye.data.BYTES_PER_ELEMENT,(Mt+1)*lt/ye.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(a.TEXTURE_2D_ARRAY,Xe,0,0,Mt,ye.width,ye.height,1,Ge,rn)}H.clearLayerUpdates()}else t.compressedTexSubImage3D(a.TEXTURE_2D_ARRAY,Xe,0,0,0,ye.width,ye.height,Ie.depth,Ge,ye.data)}else t.compressedTexImage3D(a.TEXTURE_2D_ARRAY,Xe,$,ye.width,ye.height,Ie.depth,0,ye.data,0,0);else ht("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Q?We&&t.texSubImage3D(a.TEXTURE_2D_ARRAY,Xe,0,0,0,ye.width,ye.height,Ie.depth,Ge,_t,ye.data):t.texImage3D(a.TEXTURE_2D_ARRAY,Xe,$,ye.width,ye.height,Ie.depth,0,Ge,_t,ye.data)}else{Q&&Je&&t.texStorage2D(a.TEXTURE_2D,Ze,$,qe[0].width,qe[0].height);for(let Xe=0,Ne=qe.length;Xe<Ne;Xe++)ye=qe[Xe],H.format!==ss?Ge!==null?Q?We&&t.compressedTexSubImage2D(a.TEXTURE_2D,Xe,0,0,ye.width,ye.height,Ge,ye.data):t.compressedTexImage2D(a.TEXTURE_2D,Xe,$,ye.width,ye.height,0,ye.data):ht("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Q?We&&t.texSubImage2D(a.TEXTURE_2D,Xe,0,0,ye.width,ye.height,Ge,_t,ye.data):t.texImage2D(a.TEXTURE_2D,Xe,$,ye.width,ye.height,0,Ge,_t,ye.data)}else if(H.isDataArrayTexture)if(Q){if(Je&&t.texStorage3D(a.TEXTURE_2D_ARRAY,Ze,$,Ie.width,Ie.height,Ie.depth),We)if(H.layerUpdates.size>0){const Xe=BS(Ie.width,Ie.height,H.format,H.type);for(const Ne of H.layerUpdates){const lt=Ie.data.subarray(Ne*Xe/Ie.data.BYTES_PER_ELEMENT,(Ne+1)*Xe/Ie.data.BYTES_PER_ELEMENT);t.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,Ne,Ie.width,Ie.height,1,Ge,_t,lt)}H.clearLayerUpdates()}else t.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,0,Ie.width,Ie.height,Ie.depth,Ge,_t,Ie.data)}else t.texImage3D(a.TEXTURE_2D_ARRAY,0,$,Ie.width,Ie.height,Ie.depth,0,Ge,_t,Ie.data);else if(H.isData3DTexture)Q?(Je&&t.texStorage3D(a.TEXTURE_3D,Ze,$,Ie.width,Ie.height,Ie.depth),We&&t.texSubImage3D(a.TEXTURE_3D,0,0,0,0,Ie.width,Ie.height,Ie.depth,Ge,_t,Ie.data)):t.texImage3D(a.TEXTURE_3D,0,$,Ie.width,Ie.height,Ie.depth,0,Ge,_t,Ie.data);else if(H.isFramebufferTexture){if(Je)if(Q)t.texStorage2D(a.TEXTURE_2D,Ze,$,Ie.width,Ie.height);else{let Xe=Ie.width,Ne=Ie.height;for(let lt=0;lt<Ze;lt++)t.texImage2D(a.TEXTURE_2D,lt,$,Xe,Ne,0,Ge,_t,null),Xe>>=1,Ne>>=1}}else if(qe.length>0){if(Q&&Je){const Xe=dt(qe[0]);t.texStorage2D(a.TEXTURE_2D,Ze,$,Xe.width,Xe.height)}for(let Xe=0,Ne=qe.length;Xe<Ne;Xe++)ye=qe[Xe],Q?We&&t.texSubImage2D(a.TEXTURE_2D,Xe,0,0,Ge,_t,ye):t.texImage2D(a.TEXTURE_2D,Xe,$,Ge,_t,ye);H.generateMipmaps=!1}else if(Q){if(Je){const Xe=dt(Ie);t.texStorage2D(a.TEXTURE_2D,Ze,$,Xe.width,Xe.height)}We&&t.texSubImage2D(a.TEXTURE_2D,0,0,0,Ge,_t,Ie)}else t.texImage2D(a.TEXTURE_2D,0,$,Ge,_t,Ie);C(H)&&M(we),yt.__version=Te.version,H.onUpdate&&H.onUpdate(H)}K.__version=H.version}function Re(K,H,me){if(H.image.length!==6)return;const we=Ce(K,H),Fe=H.source;t.bindTexture(a.TEXTURE_CUBE_MAP,K.__webglTexture,a.TEXTURE0+me);const Te=n.get(Fe);if(Fe.version!==Te.__version||we===!0){t.activeTexture(a.TEXTURE0+me);const yt=Tn.getPrimaries(Tn.workingColorSpace),at=H.colorSpace===Lo?null:Tn.getPrimaries(H.colorSpace),St=H.colorSpace===Lo||yt===at?a.NONE:a.BROWSER_DEFAULT_WEBGL;a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,H.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,H.unpackAlignment),a.pixelStorei(a.UNPACK_COLORSPACE_CONVERSION_WEBGL,St);const xt=H.isCompressedTexture||H.image[0].isCompressedTexture,Ie=H.image[0]&&H.image[0].isDataTexture,Ge=[];for(let Ne=0;Ne<6;Ne++)!xt&&!Ie?Ge[Ne]=E(H.image[Ne],!0,i.maxCubemapSize):Ge[Ne]=Ie?H.image[Ne].image:H.image[Ne],Ge[Ne]=it(H,Ge[Ne]);const _t=Ge[0],$=r.convert(H.format,H.colorSpace),ye=r.convert(H.type),qe=D(H.internalFormat,$,ye,H.colorSpace),Q=H.isVideoTexture!==!0,Je=Te.__version===void 0||we===!0,We=Fe.dataReady;let Ze=z(H,_t);se(a.TEXTURE_CUBE_MAP,H);let Xe;if(xt){Q&&Je&&t.texStorage2D(a.TEXTURE_CUBE_MAP,Ze,qe,_t.width,_t.height);for(let Ne=0;Ne<6;Ne++){Xe=Ge[Ne].mipmaps;for(let lt=0;lt<Xe.length;lt++){const Mt=Xe[lt];H.format!==ss?$!==null?Q?We&&t.compressedTexSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,lt,0,0,Mt.width,Mt.height,$,Mt.data):t.compressedTexImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,lt,qe,Mt.width,Mt.height,0,Mt.data):ht("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Q?We&&t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,lt,0,0,Mt.width,Mt.height,$,ye,Mt.data):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,lt,qe,Mt.width,Mt.height,0,$,ye,Mt.data)}}}else{if(Xe=H.mipmaps,Q&&Je){Xe.length>0&&Ze++;const Ne=dt(Ge[0]);t.texStorage2D(a.TEXTURE_CUBE_MAP,Ze,qe,Ne.width,Ne.height)}for(let Ne=0;Ne<6;Ne++)if(Ie){Q?We&&t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,0,0,Ge[Ne].width,Ge[Ne].height,$,ye,Ge[Ne].data):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,qe,Ge[Ne].width,Ge[Ne].height,0,$,ye,Ge[Ne].data);for(let lt=0;lt<Xe.length;lt++){const rn=Xe[lt].image[Ne].image;Q?We&&t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,lt+1,0,0,rn.width,rn.height,$,ye,rn.data):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,lt+1,qe,rn.width,rn.height,0,$,ye,rn.data)}}else{Q?We&&t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,0,0,$,ye,Ge[Ne]):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,0,qe,$,ye,Ge[Ne]);for(let lt=0;lt<Xe.length;lt++){const Mt=Xe[lt];Q?We&&t.texSubImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,lt+1,0,0,$,ye,Mt.image[Ne]):t.texImage2D(a.TEXTURE_CUBE_MAP_POSITIVE_X+Ne,lt+1,qe,$,ye,Mt.image[Ne])}}}C(H)&&M(a.TEXTURE_CUBE_MAP),Te.__version=Fe.version,H.onUpdate&&H.onUpdate(H)}K.__version=H.version}function $e(K,H,me,we,Fe,Te){const yt=r.convert(me.format,me.colorSpace),at=r.convert(me.type),St=D(me.internalFormat,yt,at,me.colorSpace),xt=n.get(H),Ie=n.get(me);if(Ie.__renderTarget=H,!xt.__hasExternalTextures){const Ge=Math.max(1,H.width>>Te),_t=Math.max(1,H.height>>Te);Fe===a.TEXTURE_3D||Fe===a.TEXTURE_2D_ARRAY?t.texImage3D(Fe,Te,St,Ge,_t,H.depth,0,yt,at,null):t.texImage2D(Fe,Te,St,Ge,_t,0,yt,at,null)}t.bindFramebuffer(a.FRAMEBUFFER,K),Ve(H)?c.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,we,Fe,Ie.__webglTexture,0,et(H)):(Fe===a.TEXTURE_2D||Fe>=a.TEXTURE_CUBE_MAP_POSITIVE_X&&Fe<=a.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&a.framebufferTexture2D(a.FRAMEBUFFER,we,Fe,Ie.__webglTexture,Te),t.bindFramebuffer(a.FRAMEBUFFER,null)}function ut(K,H,me){if(a.bindRenderbuffer(a.RENDERBUFFER,K),H.depthBuffer){const we=H.depthTexture,Fe=we&&we.isDepthTexture?we.type:null,Te=w(H.stencilBuffer,Fe),yt=H.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,at=et(H);Ve(H)?c.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,at,Te,H.width,H.height):me?a.renderbufferStorageMultisample(a.RENDERBUFFER,at,Te,H.width,H.height):a.renderbufferStorage(a.RENDERBUFFER,Te,H.width,H.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,yt,a.RENDERBUFFER,K)}else{const we=H.textures;for(let Fe=0;Fe<we.length;Fe++){const Te=we[Fe],yt=r.convert(Te.format,Te.colorSpace),at=r.convert(Te.type),St=D(Te.internalFormat,yt,at,Te.colorSpace),xt=et(H);me&&Ve(H)===!1?a.renderbufferStorageMultisample(a.RENDERBUFFER,xt,St,H.width,H.height):Ve(H)?c.renderbufferStorageMultisampleEXT(a.RENDERBUFFER,xt,St,H.width,H.height):a.renderbufferStorage(a.RENDERBUFFER,St,H.width,H.height)}}a.bindRenderbuffer(a.RENDERBUFFER,null)}function vt(K,H){if(H&&H.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(a.FRAMEBUFFER,K),!(H.depthTexture&&H.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const we=n.get(H.depthTexture);we.__renderTarget=H,(!we.__webglTexture||H.depthTexture.image.width!==H.width||H.depthTexture.image.height!==H.height)&&(H.depthTexture.image.width=H.width,H.depthTexture.image.height=H.height,H.depthTexture.needsUpdate=!0),re(H.depthTexture,0);const Fe=we.__webglTexture,Te=et(H);if(H.depthTexture.format===wp)Ve(H)?c.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,Fe,0,Te):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.TEXTURE_2D,Fe,0);else if(H.depthTexture.format===Th)Ve(H)?c.framebufferTexture2DMultisampleEXT(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,Fe,0,Te):a.framebufferTexture2D(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.TEXTURE_2D,Fe,0);else throw new Error("Unknown depthTexture format")}function Pt(K){const H=n.get(K),me=K.isWebGLCubeRenderTarget===!0;if(H.__boundDepthTexture!==K.depthTexture){const we=K.depthTexture;if(H.__depthDisposeCallback&&H.__depthDisposeCallback(),we){const Fe=()=>{delete H.__boundDepthTexture,delete H.__depthDisposeCallback,we.removeEventListener("dispose",Fe)};we.addEventListener("dispose",Fe),H.__depthDisposeCallback=Fe}H.__boundDepthTexture=we}if(K.depthTexture&&!H.__autoAllocateDepthBuffer){if(me)throw new Error("target.depthTexture not supported in Cube render targets");const we=K.texture.mipmaps;we&&we.length>0?vt(H.__webglFramebuffer[0],K):vt(H.__webglFramebuffer,K)}else if(me){H.__webglDepthbuffer=[];for(let we=0;we<6;we++)if(t.bindFramebuffer(a.FRAMEBUFFER,H.__webglFramebuffer[we]),H.__webglDepthbuffer[we]===void 0)H.__webglDepthbuffer[we]=a.createRenderbuffer(),ut(H.__webglDepthbuffer[we],K,!1);else{const Fe=K.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,Te=H.__webglDepthbuffer[we];a.bindRenderbuffer(a.RENDERBUFFER,Te),a.framebufferRenderbuffer(a.FRAMEBUFFER,Fe,a.RENDERBUFFER,Te)}}else{const we=K.texture.mipmaps;if(we&&we.length>0?t.bindFramebuffer(a.FRAMEBUFFER,H.__webglFramebuffer[0]):t.bindFramebuffer(a.FRAMEBUFFER,H.__webglFramebuffer),H.__webglDepthbuffer===void 0)H.__webglDepthbuffer=a.createRenderbuffer(),ut(H.__webglDepthbuffer,K,!1);else{const Fe=K.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,Te=H.__webglDepthbuffer;a.bindRenderbuffer(a.RENDERBUFFER,Te),a.framebufferRenderbuffer(a.FRAMEBUFFER,Fe,a.RENDERBUFFER,Te)}}t.bindFramebuffer(a.FRAMEBUFFER,null)}function sn(K,H,me){const we=n.get(K);H!==void 0&&$e(we.__webglFramebuffer,K,K.texture,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,0),me!==void 0&&Pt(K)}function Ct(K){const H=K.texture,me=n.get(K),we=n.get(H);K.addEventListener("dispose",P);const Fe=K.textures,Te=K.isWebGLCubeRenderTarget===!0,yt=Fe.length>1;if(yt||(we.__webglTexture===void 0&&(we.__webglTexture=a.createTexture()),we.__version=H.version,l.memory.textures++),Te){me.__webglFramebuffer=[];for(let at=0;at<6;at++)if(H.mipmaps&&H.mipmaps.length>0){me.__webglFramebuffer[at]=[];for(let St=0;St<H.mipmaps.length;St++)me.__webglFramebuffer[at][St]=a.createFramebuffer()}else me.__webglFramebuffer[at]=a.createFramebuffer()}else{if(H.mipmaps&&H.mipmaps.length>0){me.__webglFramebuffer=[];for(let at=0;at<H.mipmaps.length;at++)me.__webglFramebuffer[at]=a.createFramebuffer()}else me.__webglFramebuffer=a.createFramebuffer();if(yt)for(let at=0,St=Fe.length;at<St;at++){const xt=n.get(Fe[at]);xt.__webglTexture===void 0&&(xt.__webglTexture=a.createTexture(),l.memory.textures++)}if(K.samples>0&&Ve(K)===!1){me.__webglMultisampledFramebuffer=a.createFramebuffer(),me.__webglColorRenderbuffer=[],t.bindFramebuffer(a.FRAMEBUFFER,me.__webglMultisampledFramebuffer);for(let at=0;at<Fe.length;at++){const St=Fe[at];me.__webglColorRenderbuffer[at]=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,me.__webglColorRenderbuffer[at]);const xt=r.convert(St.format,St.colorSpace),Ie=r.convert(St.type),Ge=D(St.internalFormat,xt,Ie,St.colorSpace,K.isXRRenderTarget===!0),_t=et(K);a.renderbufferStorageMultisample(a.RENDERBUFFER,_t,Ge,K.width,K.height),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+at,a.RENDERBUFFER,me.__webglColorRenderbuffer[at])}a.bindRenderbuffer(a.RENDERBUFFER,null),K.depthBuffer&&(me.__webglDepthRenderbuffer=a.createRenderbuffer(),ut(me.__webglDepthRenderbuffer,K,!0)),t.bindFramebuffer(a.FRAMEBUFFER,null)}}if(Te){t.bindTexture(a.TEXTURE_CUBE_MAP,we.__webglTexture),se(a.TEXTURE_CUBE_MAP,H);for(let at=0;at<6;at++)if(H.mipmaps&&H.mipmaps.length>0)for(let St=0;St<H.mipmaps.length;St++)$e(me.__webglFramebuffer[at][St],K,H,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+at,St);else $e(me.__webglFramebuffer[at],K,H,a.COLOR_ATTACHMENT0,a.TEXTURE_CUBE_MAP_POSITIVE_X+at,0);C(H)&&M(a.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(yt){for(let at=0,St=Fe.length;at<St;at++){const xt=Fe[at],Ie=n.get(xt);let Ge=a.TEXTURE_2D;(K.isWebGL3DRenderTarget||K.isWebGLArrayRenderTarget)&&(Ge=K.isWebGL3DRenderTarget?a.TEXTURE_3D:a.TEXTURE_2D_ARRAY),t.bindTexture(Ge,Ie.__webglTexture),se(Ge,xt),$e(me.__webglFramebuffer,K,xt,a.COLOR_ATTACHMENT0+at,Ge,0),C(xt)&&M(Ge)}t.unbindTexture()}else{let at=a.TEXTURE_2D;if((K.isWebGL3DRenderTarget||K.isWebGLArrayRenderTarget)&&(at=K.isWebGL3DRenderTarget?a.TEXTURE_3D:a.TEXTURE_2D_ARRAY),t.bindTexture(at,we.__webglTexture),se(at,H),H.mipmaps&&H.mipmaps.length>0)for(let St=0;St<H.mipmaps.length;St++)$e(me.__webglFramebuffer[St],K,H,a.COLOR_ATTACHMENT0,at,St);else $e(me.__webglFramebuffer,K,H,a.COLOR_ATTACHMENT0,at,0);C(H)&&M(at),t.unbindTexture()}K.depthBuffer&&Pt(K)}function ze(K){const H=K.textures;for(let me=0,we=H.length;me<we;me++){const Fe=H[me];if(C(Fe)){const Te=B(K),yt=n.get(Fe).__webglTexture;t.bindTexture(Te,yt),M(Te),t.unbindTexture()}}}const W=[],He=[];function ke(K){if(K.samples>0){if(Ve(K)===!1){const H=K.textures,me=K.width,we=K.height;let Fe=a.COLOR_BUFFER_BIT;const Te=K.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT,yt=n.get(K),at=H.length>1;if(at)for(let xt=0;xt<H.length;xt++)t.bindFramebuffer(a.FRAMEBUFFER,yt.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+xt,a.RENDERBUFFER,null),t.bindFramebuffer(a.FRAMEBUFFER,yt.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+xt,a.TEXTURE_2D,null,0);t.bindFramebuffer(a.READ_FRAMEBUFFER,yt.__webglMultisampledFramebuffer);const St=K.texture.mipmaps;St&&St.length>0?t.bindFramebuffer(a.DRAW_FRAMEBUFFER,yt.__webglFramebuffer[0]):t.bindFramebuffer(a.DRAW_FRAMEBUFFER,yt.__webglFramebuffer);for(let xt=0;xt<H.length;xt++){if(K.resolveDepthBuffer&&(K.depthBuffer&&(Fe|=a.DEPTH_BUFFER_BIT),K.stencilBuffer&&K.resolveStencilBuffer&&(Fe|=a.STENCIL_BUFFER_BIT)),at){a.framebufferRenderbuffer(a.READ_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.RENDERBUFFER,yt.__webglColorRenderbuffer[xt]);const Ie=n.get(H[xt]).__webglTexture;a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,Ie,0)}a.blitFramebuffer(0,0,me,we,0,0,me,we,Fe,a.NEAREST),d===!0&&(W.length=0,He.length=0,W.push(a.COLOR_ATTACHMENT0+xt),K.depthBuffer&&K.resolveDepthBuffer===!1&&(W.push(Te),He.push(Te),a.invalidateFramebuffer(a.DRAW_FRAMEBUFFER,He)),a.invalidateFramebuffer(a.READ_FRAMEBUFFER,W))}if(t.bindFramebuffer(a.READ_FRAMEBUFFER,null),t.bindFramebuffer(a.DRAW_FRAMEBUFFER,null),at)for(let xt=0;xt<H.length;xt++){t.bindFramebuffer(a.FRAMEBUFFER,yt.__webglMultisampledFramebuffer),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0+xt,a.RENDERBUFFER,yt.__webglColorRenderbuffer[xt]);const Ie=n.get(H[xt]).__webglTexture;t.bindFramebuffer(a.FRAMEBUFFER,yt.__webglFramebuffer),a.framebufferTexture2D(a.DRAW_FRAMEBUFFER,a.COLOR_ATTACHMENT0+xt,a.TEXTURE_2D,Ie,0)}t.bindFramebuffer(a.DRAW_FRAMEBUFFER,yt.__webglMultisampledFramebuffer)}else if(K.depthBuffer&&K.resolveDepthBuffer===!1&&d){const H=K.stencilBuffer?a.DEPTH_STENCIL_ATTACHMENT:a.DEPTH_ATTACHMENT;a.invalidateFramebuffer(a.DRAW_FRAMEBUFFER,[H])}}}function et(K){return Math.min(i.maxSamples,K.samples)}function Ve(K){const H=n.get(K);return K.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&H.__useRenderToTexture!==!1}function ot(K){const H=l.render.frame;g.get(K)!==H&&(g.set(K,H),K.update())}function it(K,H){const me=K.colorSpace,we=K.format,Fe=K.type;return K.isCompressedTexture===!0||K.isVideoTexture===!0||me!==Dl&&me!==Lo&&(Tn.getTransfer(me)===Wn?(we!==ss||Fe!==ra)&&ht("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):kt("WebGLTextures: Unsupported texture color space:",me)),H}function dt(K){return typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement?(p.width=K.naturalWidth||K.width,p.height=K.naturalHeight||K.height):typeof VideoFrame<"u"&&K instanceof VideoFrame?(p.width=K.displayWidth,p.height=K.displayHeight):(p.width=K.width,p.height=K.height),p}this.allocateTextureUnit=te,this.resetTextureUnits=ee,this.setTexture2D=re,this.setTexture2DArray=F,this.setTexture3D=J,this.setTextureCube=Z,this.rebindTextures=sn,this.setupRenderTarget=Ct,this.updateRenderTargetMipmap=ze,this.updateMultisampleRenderTarget=ke,this.setupDepthRenderbuffer=Pt,this.setupFrameBufferTexture=$e,this.useMultisampledRTT=Ve}function eR(a,e){function t(n,i=Lo){let r;const l=Tn.getTransfer(i);if(n===ra)return a.UNSIGNED_BYTE;if(n===my)return a.UNSIGNED_SHORT_4_4_4_4;if(n===gy)return a.UNSIGNED_SHORT_5_5_5_1;if(n===o1)return a.UNSIGNED_INT_5_9_9_9_REV;if(n===l1)return a.UNSIGNED_INT_10F_11F_11F_REV;if(n===s1)return a.BYTE;if(n===r1)return a.SHORT;if(n===Dp)return a.UNSIGNED_SHORT;if(n===py)return a.INT;if(n===Bl)return a.UNSIGNED_INT;if(n===Is)return a.FLOAT;if(n===Xc)return a.HALF_FLOAT;if(n===u1)return a.ALPHA;if(n===c1)return a.RGB;if(n===ss)return a.RGBA;if(n===wp)return a.DEPTH_COMPONENT;if(n===Th)return a.DEPTH_STENCIL;if(n===vy)return a.RED;if(n===Ng)return a.RED_INTEGER;if(n===xy)return a.RG;if(n===_y)return a.RG_INTEGER;if(n===yy)return a.RGBA_INTEGER;if(n===j0||n===Z0||n===Q0||n===$0)if(l===Wn)if(r=e.get("WEBGL_compressed_texture_s3tc_srgb"),r!==null){if(n===j0)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Z0)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===Q0)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===$0)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(r=e.get("WEBGL_compressed_texture_s3tc"),r!==null){if(n===j0)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Z0)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===Q0)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===$0)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===y_||n===b_||n===A_||n===S_)if(r=e.get("WEBGL_compressed_texture_pvrtc"),r!==null){if(n===y_)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===b_)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===A_)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===S_)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===M_||n===E_||n===T_)if(r=e.get("WEBGL_compressed_texture_etc"),r!==null){if(n===M_||n===E_)return l===Wn?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===T_)return l===Wn?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===C_||n===R_||n===B_||n===D_||n===w_||n===U_||n===O_||n===N_||n===L_||n===I_||n===z_||n===P_||n===F_||n===H_)if(r=e.get("WEBGL_compressed_texture_astc"),r!==null){if(n===C_)return l===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===R_)return l===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===B_)return l===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===D_)return l===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===w_)return l===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===U_)return l===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===O_)return l===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===N_)return l===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===L_)return l===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===I_)return l===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===z_)return l===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===P_)return l===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===F_)return l===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===H_)return l===Wn?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===G_||n===V_||n===X_)if(r=e.get("EXT_texture_compression_bptc"),r!==null){if(n===G_)return l===Wn?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===V_)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===X_)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===k_||n===Y_||n===q_||n===J_)if(r=e.get("EXT_texture_compression_rgtc"),r!==null){if(n===k_)return r.COMPRESSED_RED_RGTC1_EXT;if(n===Y_)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===q_)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===J_)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Eh?a.UNSIGNED_INT_24_8:a[n]!==void 0?a[n]:null}return{convert:t}}const qP=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,JP=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class KP{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const n=new S1(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new ji({vertexShader:qP,fragmentShader:JP,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Wi(new Zp(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class WP extends Cr{constructor(e,t){super();const n=this;let i=null,r=1,l=null,c="local-floor",d=1,p=null,g=null,v=null,_=null,y=null,S=null;const E=typeof XRWebGLBinding<"u",C=new KP,M={},B=t.getContextAttributes();let D=null,w=null;const z=[],O=[],P=new De;let G=null;const L=new _i;L.viewport=new Cn;const I=new _i;I.viewport=new Cn;const Y=[L,I],ee=new X3;let te=null,le=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ge){let Re=z[ge];return Re===void 0&&(Re=new h_,z[ge]=Re),Re.getTargetRaySpace()},this.getControllerGrip=function(ge){let Re=z[ge];return Re===void 0&&(Re=new h_,z[ge]=Re),Re.getGripSpace()},this.getHand=function(ge){let Re=z[ge];return Re===void 0&&(Re=new h_,z[ge]=Re),Re.getHandSpace()};function re(ge){const Re=O.indexOf(ge.inputSource);if(Re===-1)return;const $e=z[Re];$e!==void 0&&($e.update(ge.inputSource,ge.frame,p||l),$e.dispatchEvent({type:ge.type,data:ge.inputSource}))}function F(){i.removeEventListener("select",re),i.removeEventListener("selectstart",re),i.removeEventListener("selectend",re),i.removeEventListener("squeeze",re),i.removeEventListener("squeezestart",re),i.removeEventListener("squeezeend",re),i.removeEventListener("end",F),i.removeEventListener("inputsourceschange",J);for(let ge=0;ge<z.length;ge++){const Re=O[ge];Re!==null&&(O[ge]=null,z[ge].disconnect(Re))}te=null,le=null,C.reset();for(const ge in M)delete M[ge];e.setRenderTarget(D),y=null,_=null,v=null,i=null,w=null,Ye.stop(),n.isPresenting=!1,e.setPixelRatio(G),e.setSize(P.width,P.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ge){r=ge,n.isPresenting===!0&&ht("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ge){c=ge,n.isPresenting===!0&&ht("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return p||l},this.setReferenceSpace=function(ge){p=ge},this.getBaseLayer=function(){return _!==null?_:y},this.getBinding=function(){return v===null&&E&&(v=new XRWebGLBinding(i,t)),v},this.getFrame=function(){return S},this.getSession=function(){return i},this.setSession=async function(ge){if(i=ge,i!==null){if(D=e.getRenderTarget(),i.addEventListener("select",re),i.addEventListener("selectstart",re),i.addEventListener("selectend",re),i.addEventListener("squeeze",re),i.addEventListener("squeezestart",re),i.addEventListener("squeezeend",re),i.addEventListener("end",F),i.addEventListener("inputsourceschange",J),B.xrCompatible!==!0&&await t.makeXRCompatible(),G=e.getPixelRatio(),e.getSize(P),E&&"createProjectionLayer"in XRWebGLBinding.prototype){let $e=null,ut=null,vt=null;B.depth&&(vt=B.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,$e=B.stencil?Th:wp,ut=B.stencil?Eh:Bl);const Pt={colorFormat:t.RGBA8,depthFormat:vt,scaleFactor:r};v=this.getBinding(),_=v.createProjectionLayer(Pt),i.updateRenderState({layers:[_]}),e.setPixelRatio(1),e.setSize(_.textureWidth,_.textureHeight,!1),w=new Pi(_.textureWidth,_.textureHeight,{format:ss,type:ra,depthTexture:new Uy(_.textureWidth,_.textureHeight,ut,void 0,void 0,void 0,void 0,void 0,void 0,$e),stencilBuffer:B.stencil,colorSpace:e.outputColorSpace,samples:B.antialias?4:0,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}else{const $e={antialias:B.antialias,alpha:!0,depth:B.depth,stencil:B.stencil,framebufferScaleFactor:r};y=new XRWebGLLayer(i,t,$e),i.updateRenderState({baseLayer:y}),e.setPixelRatio(1),e.setSize(y.framebufferWidth,y.framebufferHeight,!1),w=new Pi(y.framebufferWidth,y.framebufferHeight,{format:ss,type:ra,colorSpace:e.outputColorSpace,stencilBuffer:B.stencil,resolveDepthBuffer:y.ignoreDepthValues===!1,resolveStencilBuffer:y.ignoreDepthValues===!1})}w.isXRRenderTarget=!0,this.setFoveation(d),p=null,l=await i.requestReferenceSpace(c),Ye.setContext(i),Ye.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode},this.getDepthTexture=function(){return C.getDepthTexture()};function J(ge){for(let Re=0;Re<ge.removed.length;Re++){const $e=ge.removed[Re],ut=O.indexOf($e);ut>=0&&(O[ut]=null,z[ut].disconnect($e))}for(let Re=0;Re<ge.added.length;Re++){const $e=ge.added[Re];let ut=O.indexOf($e);if(ut===-1){for(let Pt=0;Pt<z.length;Pt++)if(Pt>=O.length){O.push($e),ut=Pt;break}else if(O[Pt]===null){O[Pt]=$e,ut=Pt;break}if(ut===-1)break}const vt=z[ut];vt&&vt.connect($e)}}const Z=new j,oe=new j;function pe(ge,Re,$e){Z.setFromMatrixPosition(Re.matrixWorld),oe.setFromMatrixPosition($e.matrixWorld);const ut=Z.distanceTo(oe),vt=Re.projectionMatrix.elements,Pt=$e.projectionMatrix.elements,sn=vt[14]/(vt[10]-1),Ct=vt[14]/(vt[10]+1),ze=(vt[9]+1)/vt[5],W=(vt[9]-1)/vt[5],He=(vt[8]-1)/vt[0],ke=(Pt[8]+1)/Pt[0],et=sn*He,Ve=sn*ke,ot=ut/(-He+ke),it=ot*-He;if(Re.matrixWorld.decompose(ge.position,ge.quaternion,ge.scale),ge.translateX(it),ge.translateZ(ot),ge.matrixWorld.compose(ge.position,ge.quaternion,ge.scale),ge.matrixWorldInverse.copy(ge.matrixWorld).invert(),vt[10]===-1)ge.projectionMatrix.copy(Re.projectionMatrix),ge.projectionMatrixInverse.copy(Re.projectionMatrixInverse);else{const dt=sn+ot,K=Ct+ot,H=et-it,me=Ve+(ut-it),we=ze*Ct/K*dt,Fe=W*Ct/K*dt;ge.projectionMatrix.makePerspective(H,me,we,Fe,dt,K),ge.projectionMatrixInverse.copy(ge.projectionMatrix).invert()}}function q(ge,Re){Re===null?ge.matrixWorld.copy(ge.matrix):ge.matrixWorld.multiplyMatrices(Re.matrixWorld,ge.matrix),ge.matrixWorldInverse.copy(ge.matrixWorld).invert()}this.updateCamera=function(ge){if(i===null)return;let Re=ge.near,$e=ge.far;C.texture!==null&&(C.depthNear>0&&(Re=C.depthNear),C.depthFar>0&&($e=C.depthFar)),ee.near=I.near=L.near=Re,ee.far=I.far=L.far=$e,(te!==ee.near||le!==ee.far)&&(i.updateRenderState({depthNear:ee.near,depthFar:ee.far}),te=ee.near,le=ee.far),ee.layers.mask=ge.layers.mask|6,L.layers.mask=ee.layers.mask&3,I.layers.mask=ee.layers.mask&5;const ut=ge.parent,vt=ee.cameras;q(ee,ut);for(let Pt=0;Pt<vt.length;Pt++)q(vt[Pt],ut);vt.length===2?pe(ee,L,I):ee.projectionMatrix.copy(L.projectionMatrix),se(ge,ee,ut)};function se(ge,Re,$e){$e===null?ge.matrix.copy(Re.matrixWorld):(ge.matrix.copy($e.matrixWorld),ge.matrix.invert(),ge.matrix.multiply(Re.matrixWorld)),ge.matrix.decompose(ge.position,ge.quaternion,ge.scale),ge.updateMatrixWorld(!0),ge.projectionMatrix.copy(Re.projectionMatrix),ge.projectionMatrixInverse.copy(Re.projectionMatrixInverse),ge.isPerspectiveCamera&&(ge.fov=Ip*2*Math.atan(1/ge.projectionMatrix.elements[5]),ge.zoom=1)}this.getCamera=function(){return ee},this.getFoveation=function(){if(!(_===null&&y===null))return d},this.setFoveation=function(ge){d=ge,_!==null&&(_.fixedFoveation=ge),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=ge)},this.hasDepthSensing=function(){return C.texture!==null},this.getDepthSensingMesh=function(){return C.getMesh(ee)},this.getCameraTexture=function(ge){return M[ge]};let Ce=null;function Ee(ge,Re){if(g=Re.getViewerPose(p||l),S=Re,g!==null){const $e=g.views;y!==null&&(e.setRenderTargetFramebuffer(w,y.framebuffer),e.setRenderTarget(w));let ut=!1;$e.length!==ee.cameras.length&&(ee.cameras.length=0,ut=!0);for(let Ct=0;Ct<$e.length;Ct++){const ze=$e[Ct];let W=null;if(y!==null)W=y.getViewport(ze);else{const ke=v.getViewSubImage(_,ze);W=ke.viewport,Ct===0&&(e.setRenderTargetTextures(w,ke.colorTexture,ke.depthStencilTexture),e.setRenderTarget(w))}let He=Y[Ct];He===void 0&&(He=new _i,He.layers.enable(Ct),He.viewport=new Cn,Y[Ct]=He),He.matrix.fromArray(ze.transform.matrix),He.matrix.decompose(He.position,He.quaternion,He.scale),He.projectionMatrix.fromArray(ze.projectionMatrix),He.projectionMatrixInverse.copy(He.projectionMatrix).invert(),He.viewport.set(W.x,W.y,W.width,W.height),Ct===0&&(ee.matrix.copy(He.matrix),ee.matrix.decompose(ee.position,ee.quaternion,ee.scale)),ut===!0&&ee.cameras.push(He)}const vt=i.enabledFeatures;if(vt&&vt.includes("depth-sensing")&&i.depthUsage=="gpu-optimized"&&E){v=n.getBinding();const Ct=v.getDepthInformation($e[0]);Ct&&Ct.isValid&&Ct.texture&&C.init(Ct,i.renderState)}if(vt&&vt.includes("camera-access")&&E){e.state.unbindTexture(),v=n.getBinding();for(let Ct=0;Ct<$e.length;Ct++){const ze=$e[Ct].camera;if(ze){let W=M[ze];W||(W=new S1,M[ze]=W);const He=v.getCameraImage(ze);W.sourceTexture=He}}}}for(let $e=0;$e<z.length;$e++){const ut=O[$e],vt=z[$e];ut!==null&&vt!==void 0&&vt.update(ut,Re,p||l)}Ce&&Ce(ge,Re),Re.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:Re}),S=null}const Ye=new W3;Ye.setAnimationLoop(Ee),this.setAnimationLoop=function(ge){Ce=ge},this.dispose=function(){}}}const th=new Sr,jP=new zt;function ZP(a,e){function t(C,M){C.matrixAutoUpdate===!0&&C.updateMatrix(),M.value.copy(C.matrix)}function n(C,M){M.color.getRGB(C.fogColor.value,a3(a)),M.isFog?(C.fogNear.value=M.near,C.fogFar.value=M.far):M.isFogExp2&&(C.fogDensity.value=M.density)}function i(C,M,B,D,w){M.isMeshBasicMaterial||M.isMeshLambertMaterial?r(C,M):M.isMeshToonMaterial?(r(C,M),v(C,M)):M.isMeshPhongMaterial?(r(C,M),g(C,M)):M.isMeshStandardMaterial?(r(C,M),_(C,M),M.isMeshPhysicalMaterial&&y(C,M,w)):M.isMeshMatcapMaterial?(r(C,M),S(C,M)):M.isMeshDepthMaterial?r(C,M):M.isMeshDistanceMaterial?(r(C,M),E(C,M)):M.isMeshNormalMaterial?r(C,M):M.isLineBasicMaterial?(l(C,M),M.isLineDashedMaterial&&c(C,M)):M.isPointsMaterial?d(C,M,B,D):M.isSpriteMaterial?p(C,M):M.isShadowMaterial?(C.color.value.copy(M.color),C.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function r(C,M){C.opacity.value=M.opacity,M.color&&C.diffuse.value.copy(M.color),M.emissive&&C.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(C.map.value=M.map,t(M.map,C.mapTransform)),M.alphaMap&&(C.alphaMap.value=M.alphaMap,t(M.alphaMap,C.alphaMapTransform)),M.bumpMap&&(C.bumpMap.value=M.bumpMap,t(M.bumpMap,C.bumpMapTransform),C.bumpScale.value=M.bumpScale,M.side===pa&&(C.bumpScale.value*=-1)),M.normalMap&&(C.normalMap.value=M.normalMap,t(M.normalMap,C.normalMapTransform),C.normalScale.value.copy(M.normalScale),M.side===pa&&C.normalScale.value.negate()),M.displacementMap&&(C.displacementMap.value=M.displacementMap,t(M.displacementMap,C.displacementMapTransform),C.displacementScale.value=M.displacementScale,C.displacementBias.value=M.displacementBias),M.emissiveMap&&(C.emissiveMap.value=M.emissiveMap,t(M.emissiveMap,C.emissiveMapTransform)),M.specularMap&&(C.specularMap.value=M.specularMap,t(M.specularMap,C.specularMapTransform)),M.alphaTest>0&&(C.alphaTest.value=M.alphaTest);const B=e.get(M),D=B.envMap,w=B.envMapRotation;D&&(C.envMap.value=D,th.copy(w),th.x*=-1,th.y*=-1,th.z*=-1,D.isCubeTexture&&D.isRenderTargetTexture===!1&&(th.y*=-1,th.z*=-1),C.envMapRotation.value.setFromMatrix4(jP.makeRotationFromEuler(th)),C.flipEnvMap.value=D.isCubeTexture&&D.isRenderTargetTexture===!1?-1:1,C.reflectivity.value=M.reflectivity,C.ior.value=M.ior,C.refractionRatio.value=M.refractionRatio),M.lightMap&&(C.lightMap.value=M.lightMap,C.lightMapIntensity.value=M.lightMapIntensity,t(M.lightMap,C.lightMapTransform)),M.aoMap&&(C.aoMap.value=M.aoMap,C.aoMapIntensity.value=M.aoMapIntensity,t(M.aoMap,C.aoMapTransform))}function l(C,M){C.diffuse.value.copy(M.color),C.opacity.value=M.opacity,M.map&&(C.map.value=M.map,t(M.map,C.mapTransform))}function c(C,M){C.dashSize.value=M.dashSize,C.totalSize.value=M.dashSize+M.gapSize,C.scale.value=M.scale}function d(C,M,B,D){C.diffuse.value.copy(M.color),C.opacity.value=M.opacity,C.size.value=M.size*B,C.scale.value=D*.5,M.map&&(C.map.value=M.map,t(M.map,C.uvTransform)),M.alphaMap&&(C.alphaMap.value=M.alphaMap,t(M.alphaMap,C.alphaMapTransform)),M.alphaTest>0&&(C.alphaTest.value=M.alphaTest)}function p(C,M){C.diffuse.value.copy(M.color),C.opacity.value=M.opacity,C.rotation.value=M.rotation,M.map&&(C.map.value=M.map,t(M.map,C.mapTransform)),M.alphaMap&&(C.alphaMap.value=M.alphaMap,t(M.alphaMap,C.alphaMapTransform)),M.alphaTest>0&&(C.alphaTest.value=M.alphaTest)}function g(C,M){C.specular.value.copy(M.specular),C.shininess.value=Math.max(M.shininess,1e-4)}function v(C,M){M.gradientMap&&(C.gradientMap.value=M.gradientMap)}function _(C,M){C.metalness.value=M.metalness,M.metalnessMap&&(C.metalnessMap.value=M.metalnessMap,t(M.metalnessMap,C.metalnessMapTransform)),C.roughness.value=M.roughness,M.roughnessMap&&(C.roughnessMap.value=M.roughnessMap,t(M.roughnessMap,C.roughnessMapTransform)),M.envMap&&(C.envMapIntensity.value=M.envMapIntensity)}function y(C,M,B){C.ior.value=M.ior,M.sheen>0&&(C.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),C.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(C.sheenColorMap.value=M.sheenColorMap,t(M.sheenColorMap,C.sheenColorMapTransform)),M.sheenRoughnessMap&&(C.sheenRoughnessMap.value=M.sheenRoughnessMap,t(M.sheenRoughnessMap,C.sheenRoughnessMapTransform))),M.clearcoat>0&&(C.clearcoat.value=M.clearcoat,C.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(C.clearcoatMap.value=M.clearcoatMap,t(M.clearcoatMap,C.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(C.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,t(M.clearcoatRoughnessMap,C.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(C.clearcoatNormalMap.value=M.clearcoatNormalMap,t(M.clearcoatNormalMap,C.clearcoatNormalMapTransform),C.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===pa&&C.clearcoatNormalScale.value.negate())),M.dispersion>0&&(C.dispersion.value=M.dispersion),M.iridescence>0&&(C.iridescence.value=M.iridescence,C.iridescenceIOR.value=M.iridescenceIOR,C.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],C.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(C.iridescenceMap.value=M.iridescenceMap,t(M.iridescenceMap,C.iridescenceMapTransform)),M.iridescenceThicknessMap&&(C.iridescenceThicknessMap.value=M.iridescenceThicknessMap,t(M.iridescenceThicknessMap,C.iridescenceThicknessMapTransform))),M.transmission>0&&(C.transmission.value=M.transmission,C.transmissionSamplerMap.value=B.texture,C.transmissionSamplerSize.value.set(B.width,B.height),M.transmissionMap&&(C.transmissionMap.value=M.transmissionMap,t(M.transmissionMap,C.transmissionMapTransform)),C.thickness.value=M.thickness,M.thicknessMap&&(C.thicknessMap.value=M.thicknessMap,t(M.thicknessMap,C.thicknessMapTransform)),C.attenuationDistance.value=M.attenuationDistance,C.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(C.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(C.anisotropyMap.value=M.anisotropyMap,t(M.anisotropyMap,C.anisotropyMapTransform))),C.specularIntensity.value=M.specularIntensity,C.specularColor.value.copy(M.specularColor),M.specularColorMap&&(C.specularColorMap.value=M.specularColorMap,t(M.specularColorMap,C.specularColorMapTransform)),M.specularIntensityMap&&(C.specularIntensityMap.value=M.specularIntensityMap,t(M.specularIntensityMap,C.specularIntensityMapTransform))}function S(C,M){M.matcap&&(C.matcap.value=M.matcap)}function E(C,M){const B=e.get(M).light;C.referencePosition.value.setFromMatrixPosition(B.matrixWorld),C.nearDistance.value=B.shadow.camera.near,C.farDistance.value=B.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:i}}function QP(a,e,t,n){let i={},r={},l=[];const c=a.getParameter(a.MAX_UNIFORM_BUFFER_BINDINGS);function d(B,D){const w=D.program;n.uniformBlockBinding(B,w)}function p(B,D){let w=i[B.id];w===void 0&&(S(B),w=g(B),i[B.id]=w,B.addEventListener("dispose",C));const z=D.program;n.updateUBOMapping(B,z);const O=e.render.frame;r[B.id]!==O&&(_(B),r[B.id]=O)}function g(B){const D=v();B.__bindingPointIndex=D;const w=a.createBuffer(),z=B.__size,O=B.usage;return a.bindBuffer(a.UNIFORM_BUFFER,w),a.bufferData(a.UNIFORM_BUFFER,z,O),a.bindBuffer(a.UNIFORM_BUFFER,null),a.bindBufferBase(a.UNIFORM_BUFFER,D,w),w}function v(){for(let B=0;B<c;B++)if(l.indexOf(B)===-1)return l.push(B),B;return kt("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function _(B){const D=i[B.id],w=B.uniforms,z=B.__cache;a.bindBuffer(a.UNIFORM_BUFFER,D);for(let O=0,P=w.length;O<P;O++){const G=Array.isArray(w[O])?w[O]:[w[O]];for(let L=0,I=G.length;L<I;L++){const Y=G[L];if(y(Y,O,L,z)===!0){const ee=Y.__offset,te=Array.isArray(Y.value)?Y.value:[Y.value];let le=0;for(let re=0;re<te.length;re++){const F=te[re],J=E(F);typeof F=="number"||typeof F=="boolean"?(Y.__data[0]=F,a.bufferSubData(a.UNIFORM_BUFFER,ee+le,Y.__data)):F.isMatrix3?(Y.__data[0]=F.elements[0],Y.__data[1]=F.elements[1],Y.__data[2]=F.elements[2],Y.__data[3]=0,Y.__data[4]=F.elements[3],Y.__data[5]=F.elements[4],Y.__data[6]=F.elements[5],Y.__data[7]=0,Y.__data[8]=F.elements[6],Y.__data[9]=F.elements[7],Y.__data[10]=F.elements[8],Y.__data[11]=0):(F.toArray(Y.__data,le),le+=J.storage/Float32Array.BYTES_PER_ELEMENT)}a.bufferSubData(a.UNIFORM_BUFFER,ee,Y.__data)}}}a.bindBuffer(a.UNIFORM_BUFFER,null)}function y(B,D,w,z){const O=B.value,P=D+"_"+w;if(z[P]===void 0)return typeof O=="number"||typeof O=="boolean"?z[P]=O:z[P]=O.clone(),!0;{const G=z[P];if(typeof O=="number"||typeof O=="boolean"){if(G!==O)return z[P]=O,!0}else if(G.equals(O)===!1)return G.copy(O),!0}return!1}function S(B){const D=B.uniforms;let w=0;const z=16;for(let P=0,G=D.length;P<G;P++){const L=Array.isArray(D[P])?D[P]:[D[P]];for(let I=0,Y=L.length;I<Y;I++){const ee=L[I],te=Array.isArray(ee.value)?ee.value:[ee.value];for(let le=0,re=te.length;le<re;le++){const F=te[le],J=E(F),Z=w%z,oe=Z%J.boundary,pe=Z+oe;w+=oe,pe!==0&&z-pe<J.storage&&(w+=z-pe),ee.__data=new Float32Array(J.storage/Float32Array.BYTES_PER_ELEMENT),ee.__offset=w,w+=J.storage}}}const O=w%z;return O>0&&(w+=z-O),B.__size=w,B.__cache={},this}function E(B){const D={boundary:0,storage:0};return typeof B=="number"||typeof B=="boolean"?(D.boundary=4,D.storage=4):B.isVector2?(D.boundary=8,D.storage=8):B.isVector3||B.isColor?(D.boundary=16,D.storage=12):B.isVector4?(D.boundary=16,D.storage=16):B.isMatrix3?(D.boundary=48,D.storage=48):B.isMatrix4?(D.boundary=64,D.storage=64):B.isTexture?ht("WebGLRenderer: Texture samplers can not be part of an uniforms group."):ht("WebGLRenderer: Unsupported uniform value type.",B),D}function C(B){const D=B.target;D.removeEventListener("dispose",C);const w=l.indexOf(D.__bindingPointIndex);l.splice(w,1),a.deleteBuffer(i[D.id]),delete i[D.id],delete r[D.id]}function M(){for(const B in i)a.deleteBuffer(i[B]);l=[],i={},r={}}return{bind:d,update:p,dispose:M}}const $P=new Uint16Array([11481,15204,11534,15171,11808,15015,12385,14843,12894,14716,13396,14600,13693,14483,13976,14366,14237,14171,14405,13961,14511,13770,14605,13598,14687,13444,14760,13305,14822,13066,14876,12857,14923,12675,14963,12517,14997,12379,15025,12230,15049,12023,15070,11843,15086,11687,15100,11551,15111,11433,15120,11330,15127,11217,15132,11060,15135,10922,15138,10801,15139,10695,15139,10600,13012,14923,13020,14917,13064,14886,13176,14800,13349,14666,13513,14526,13724,14398,13960,14230,14200,14020,14383,13827,14488,13651,14583,13491,14667,13348,14740,13132,14803,12908,14856,12713,14901,12542,14938,12394,14968,12241,14992,12017,15010,11822,15024,11654,15034,11507,15041,11380,15044,11269,15044,11081,15042,10913,15037,10764,15031,10635,15023,10520,15014,10419,15003,10330,13657,14676,13658,14673,13670,14660,13698,14622,13750,14547,13834,14442,13956,14317,14112,14093,14291,13889,14407,13704,14499,13538,14586,13389,14664,13201,14733,12966,14792,12758,14842,12577,14882,12418,14915,12272,14940,12033,14959,11826,14972,11646,14980,11490,14983,11355,14983,11212,14979,11008,14971,10830,14961,10675,14950,10540,14936,10420,14923,10315,14909,10204,14894,10041,14089,14460,14090,14459,14096,14452,14112,14431,14141,14388,14186,14305,14252,14130,14341,13941,14399,13756,14467,13585,14539,13430,14610,13272,14677,13026,14737,12808,14790,12617,14833,12449,14869,12303,14896,12065,14916,11845,14929,11655,14937,11490,14939,11347,14936,11184,14930,10970,14921,10783,14912,10621,14900,10480,14885,10356,14867,10247,14848,10062,14827,9894,14805,9745,14400,14208,14400,14206,14402,14198,14406,14174,14415,14122,14427,14035,14444,13913,14469,13767,14504,13613,14548,13463,14598,13324,14651,13082,14704,12858,14752,12658,14795,12483,14831,12330,14860,12106,14881,11875,14895,11675,14903,11501,14905,11351,14903,11178,14900,10953,14892,10757,14880,10589,14865,10442,14847,10313,14827,10162,14805,9965,14782,9792,14757,9642,14731,9507,14562,13883,14562,13883,14563,13877,14566,13862,14570,13830,14576,13773,14584,13689,14595,13582,14613,13461,14637,13336,14668,13120,14704,12897,14741,12695,14776,12516,14808,12358,14835,12150,14856,11910,14870,11701,14878,11519,14882,11361,14884,11187,14880,10951,14871,10748,14858,10572,14842,10418,14823,10286,14801,10099,14777,9897,14751,9722,14725,9567,14696,9430,14666,9309,14702,13604,14702,13604,14702,13600,14703,13591,14705,13570,14707,13533,14709,13477,14712,13400,14718,13305,14727,13106,14743,12907,14762,12716,14784,12539,14807,12380,14827,12190,14844,11943,14855,11727,14863,11539,14870,11376,14871,11204,14868,10960,14858,10748,14845,10565,14829,10406,14809,10269,14786,10058,14761,9852,14734,9671,14705,9512,14674,9374,14641,9253,14608,9076,14821,13366,14821,13365,14821,13364,14821,13358,14821,13344,14821,13320,14819,13252,14817,13145,14815,13011,14814,12858,14817,12698,14823,12539,14832,12389,14841,12214,14850,11968,14856,11750,14861,11558,14866,11390,14867,11226,14862,10972,14853,10754,14840,10565,14823,10401,14803,10259,14780,10032,14754,9820,14725,9635,14694,9473,14661,9333,14627,9203,14593,8988,14557,8798,14923,13014,14922,13014,14922,13012,14922,13004,14920,12987,14919,12957,14915,12907,14909,12834,14902,12738,14894,12623,14888,12498,14883,12370,14880,12203,14878,11970,14875,11759,14873,11569,14874,11401,14872,11243,14865,10986,14855,10762,14842,10568,14825,10401,14804,10255,14781,10017,14754,9799,14725,9611,14692,9445,14658,9301,14623,9139,14587,8920,14548,8729,14509,8562,15008,12672,15008,12672,15008,12671,15007,12667,15005,12656,15001,12637,14997,12605,14989,12556,14978,12490,14966,12407,14953,12313,14940,12136,14927,11934,14914,11742,14903,11563,14896,11401,14889,11247,14879,10992,14866,10767,14851,10570,14833,10400,14812,10252,14789,10007,14761,9784,14731,9592,14698,9424,14663,9279,14627,9088,14588,8868,14548,8676,14508,8508,14467,8360,15080,12386,15080,12386,15079,12385,15078,12383,15076,12378,15072,12367,15066,12347,15057,12315,15045,12253,15030,12138,15012,11998,14993,11845,14972,11685,14951,11530,14935,11383,14920,11228,14904,10981,14887,10762,14870,10567,14850,10397,14827,10248,14803,9997,14774,9771,14743,9578,14710,9407,14674,9259,14637,9048,14596,8826,14555,8632,14514,8464,14471,8317,14427,8182,15139,12008,15139,12008,15138,12008,15137,12007,15135,12003,15130,11990,15124,11969,15115,11929,15102,11872,15086,11794,15064,11693,15041,11581,15013,11459,14987,11336,14966,11170,14944,10944,14921,10738,14898,10552,14875,10387,14850,10239,14824,9983,14794,9758,14762,9563,14728,9392,14692,9244,14653,9014,14611,8791,14569,8597,14526,8427,14481,8281,14436,8110,14391,7885,15188,11617,15188,11617,15187,11617,15186,11618,15183,11617,15179,11612,15173,11601,15163,11581,15150,11546,15133,11495,15110,11427,15083,11346,15051,11246,15024,11057,14996,10868,14967,10687,14938,10517,14911,10362,14882,10206,14853,9956,14821,9737,14787,9543,14752,9375,14715,9228,14675,8980,14632,8760,14589,8565,14544,8395,14498,8248,14451,8049,14404,7824,14357,7630,15228,11298,15228,11298,15227,11299,15226,11301,15223,11303,15219,11302,15213,11299,15204,11290,15191,11271,15174,11217,15150,11129,15119,11015,15087,10886,15057,10744,15024,10599,14990,10455,14957,10318,14924,10143,14891,9911,14856,9701,14820,9516,14782,9352,14744,9200,14703,8946,14659,8725,14615,8533,14568,8366,14521,8220,14472,7992,14423,7770,14374,7578,14315,7408,15260,10819,15260,10819,15259,10822,15258,10826,15256,10832,15251,10836,15246,10841,15237,10838,15225,10821,15207,10788,15183,10734,15151,10660,15120,10571,15087,10469,15049,10359,15012,10249,14974,10041,14937,9837,14900,9647,14860,9475,14820,9320,14779,9147,14736,8902,14691,8688,14646,8499,14598,8335,14549,8189,14499,7940,14448,7720,14397,7529,14347,7363,14256,7218,15285,10410,15285,10411,15285,10413,15284,10418,15282,10425,15278,10434,15272,10442,15264,10449,15252,10445,15235,10433,15210,10403,15179,10358,15149,10301,15113,10218,15073,10059,15033,9894,14991,9726,14951,9565,14909,9413,14865,9273,14822,9073,14777,8845,14730,8641,14682,8459,14633,8300,14583,8129,14531,7883,14479,7670,14426,7482,14373,7321,14305,7176,14201,6939,15305,9939,15305,9940,15305,9945,15304,9955,15302,9967,15298,9989,15293,10010,15286,10033,15274,10044,15258,10045,15233,10022,15205,9975,15174,9903,15136,9808,15095,9697,15053,9578,15009,9451,14965,9327,14918,9198,14871,8973,14825,8766,14775,8579,14725,8408,14675,8259,14622,8058,14569,7821,14515,7615,14460,7435,14405,7276,14350,7108,14256,6866,14149,6653,15321,9444,15321,9445,15321,9448,15320,9458,15317,9470,15314,9490,15310,9515,15302,9540,15292,9562,15276,9579,15251,9577,15226,9559,15195,9519,15156,9463,15116,9389,15071,9304,15025,9208,14978,9023,14927,8838,14878,8661,14827,8496,14774,8344,14722,8206,14667,7973,14612,7749,14556,7555,14499,7382,14443,7229,14385,7025,14322,6791,14210,6588,14100,6409,15333,8920,15333,8921,15332,8927,15332,8943,15329,8965,15326,9002,15322,9048,15316,9106,15307,9162,15291,9204,15267,9221,15244,9221,15212,9196,15175,9134,15133,9043,15088,8930,15040,8801,14990,8665,14938,8526,14886,8391,14830,8261,14775,8087,14719,7866,14661,7664,14603,7482,14544,7322,14485,7178,14426,6936,14367,6713,14281,6517,14166,6348,14054,6198,15341,8360,15341,8361,15341,8366,15341,8379,15339,8399,15336,8431,15332,8473,15326,8527,15318,8585,15302,8632,15281,8670,15258,8690,15227,8690,15191,8664,15149,8612,15104,8543,15055,8456,15001,8360,14948,8259,14892,8122,14834,7923,14776,7734,14716,7558,14656,7397,14595,7250,14534,7070,14472,6835,14410,6628,14350,6443,14243,6283,14125,6135,14010,5889,15348,7715,15348,7717,15348,7725,15347,7745,15345,7780,15343,7836,15339,7905,15334,8e3,15326,8103,15310,8193,15293,8239,15270,8270,15240,8287,15204,8283,15163,8260,15118,8223,15067,8143,15014,8014,14958,7873,14899,7723,14839,7573,14778,7430,14715,7293,14652,7164,14588,6931,14524,6720,14460,6531,14396,6362,14330,6210,14207,6015,14086,5781,13969,5576,15352,7114,15352,7116,15352,7128,15352,7159,15350,7195,15348,7237,15345,7299,15340,7374,15332,7457,15317,7544,15301,7633,15280,7703,15251,7754,15216,7775,15176,7767,15131,7733,15079,7670,15026,7588,14967,7492,14906,7387,14844,7278,14779,7171,14714,6965,14648,6770,14581,6587,14515,6420,14448,6269,14382,6123,14299,5881,14172,5665,14049,5477,13929,5310,15355,6329,15355,6330,15355,6339,15355,6362,15353,6410,15351,6472,15349,6572,15344,6688,15337,6835,15323,6985,15309,7142,15287,7220,15260,7277,15226,7310,15188,7326,15142,7318,15090,7285,15036,7239,14976,7177,14914,7045,14849,6892,14782,6736,14714,6581,14645,6433,14576,6293,14506,6164,14438,5946,14369,5733,14270,5540,14140,5369,14014,5216,13892,5043,15357,5483,15357,5484,15357,5496,15357,5528,15356,5597,15354,5692,15351,5835,15347,6011,15339,6195,15328,6317,15314,6446,15293,6566,15268,6668,15235,6746,15197,6796,15152,6811,15101,6790,15046,6748,14985,6673,14921,6583,14854,6479,14785,6371,14714,6259,14643,6149,14571,5946,14499,5750,14428,5567,14358,5401,14242,5250,14109,5111,13980,4870,13856,4657,15359,4555,15359,4557,15358,4573,15358,4633,15357,4715,15355,4841,15353,5061,15349,5216,15342,5391,15331,5577,15318,5770,15299,5967,15274,6150,15243,6223,15206,6280,15161,6310,15111,6317,15055,6300,14994,6262,14928,6208,14860,6141,14788,5994,14715,5838,14641,5684,14566,5529,14492,5384,14418,5247,14346,5121,14216,4892,14079,4682,13948,4496,13822,4330,15359,3498,15359,3501,15359,3520,15359,3598,15358,3719,15356,3860,15355,4137,15351,4305,15344,4563,15334,4809,15321,5116,15303,5273,15280,5418,15250,5547,15214,5653,15170,5722,15120,5761,15064,5763,15002,5733,14935,5673,14865,5597,14792,5504,14716,5400,14640,5294,14563,5185,14486,5041,14410,4841,14335,4655,14191,4482,14051,4325,13918,4183,13790,4012,15360,2282,15360,2285,15360,2306,15360,2401,15359,2547,15357,2748,15355,3103,15352,3349,15345,3675,15336,4020,15324,4272,15307,4496,15285,4716,15255,4908,15220,5086,15178,5170,15128,5214,15072,5234,15010,5231,14943,5206,14871,5166,14796,5102,14718,4971,14639,4833,14559,4687,14480,4541,14402,4401,14315,4268,14167,4142,14025,3958,13888,3747,13759,3556,15360,923,15360,925,15360,946,15360,1052,15359,1214,15357,1494,15356,1892,15352,2274,15346,2663,15338,3099,15326,3393,15309,3679,15288,3980,15260,4183,15226,4325,15185,4437,15136,4517,15080,4570,15018,4591,14950,4581,14877,4545,14800,4485,14720,4411,14638,4325,14556,4231,14475,4136,14395,3988,14297,3803,14145,3628,13999,3465,13861,3314,13729,3177,15360,263,15360,264,15360,272,15360,325,15359,407,15358,548,15356,780,15352,1144,15347,1580,15339,2099,15328,2425,15312,2795,15292,3133,15264,3329,15232,3517,15191,3689,15143,3819,15088,3923,15025,3978,14956,3999,14882,3979,14804,3931,14722,3855,14639,3756,14554,3645,14470,3529,14388,3409,14279,3289,14124,3173,13975,3055,13834,2848,13701,2658,15360,49,15360,49,15360,52,15360,75,15359,111,15358,201,15356,283,15353,519,15348,726,15340,1045,15329,1415,15314,1795,15295,2173,15269,2410,15237,2649,15197,2866,15150,3054,15095,3140,15032,3196,14963,3228,14888,3236,14808,3224,14725,3191,14639,3146,14553,3088,14466,2976,14382,2836,14262,2692,14103,2549,13952,2409,13808,2278,13674,2154,15360,4,15360,4,15360,4,15360,13,15359,33,15358,59,15357,112,15353,199,15348,302,15341,456,15331,628,15316,827,15297,1082,15272,1332,15241,1601,15202,1851,15156,2069,15101,2172,15039,2256,14970,2314,14894,2348,14813,2358,14728,2344,14640,2311,14551,2263,14463,2203,14376,2133,14247,2059,14084,1915,13930,1761,13784,1609,13648,1464,15360,0,15360,0,15360,0,15360,3,15359,18,15358,26,15357,53,15354,80,15348,97,15341,165,15332,238,15318,326,15299,427,15275,529,15245,654,15207,771,15161,885,15108,994,15046,1089,14976,1170,14900,1229,14817,1266,14731,1284,14641,1282,14550,1260,14460,1223,14370,1174,14232,1116,14066,1050,13909,981,13761,910,13623,839]);let vu=null;function e4(){return vu===null&&(vu=new Po($P,32,32,xy,Xc),vu.minFilter=oi,vu.magFilter=oi,vu.wrapS=Ls,vu.wrapT=Ls,vu.generateMipmaps=!1,vu.needsUpdate=!0),vu}class tR{constructor(e={}){const{canvas:t=e3(),context:n=null,depth:i=!0,stencil:r=!1,alpha:l=!1,antialias:c=!1,premultipliedAlpha:d=!0,preserveDrawingBuffer:p=!1,powerPreference:g="default",failIfMajorPerformanceCaveat:v=!1,reversedDepthBuffer:_=!1}=e;this.isWebGLRenderer=!0;let y;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");y=n.getContextAttributes().alpha}else y=l;const S=new Set([yy,_y,Ng]),E=new Set([ra,Bl,Dp,Eh,my,gy]),C=new Uint32Array(4),M=new Int32Array(4);let B=null,D=null;const w=[],z=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=zo,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const O=this;let P=!1;this._outputColorSpace=Un;let G=0,L=0,I=null,Y=-1,ee=null;const te=new Cn,le=new Cn;let re=null;const F=new rt(0);let J=0,Z=t.width,oe=t.height,pe=1,q=null,se=null;const Ce=new Cn(0,0,Z,oe),Ee=new Cn(0,0,Z,oe);let Ye=!1;const ge=new jp;let Re=!1,$e=!1;const ut=new zt,vt=new j,Pt=new Cn,sn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ct=!1;function ze(){return I===null?pe:1}let W=n;function He(V,ue){return t.getContext(V,ue)}try{const V={alpha:!0,depth:i,stencil:r,antialias:c,premultipliedAlpha:d,preserveDrawingBuffer:p,powerPreference:g,failIfMajorPerformanceCaveat:v};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Nh}`),t.addEventListener("webglcontextlost",Xe,!1),t.addEventListener("webglcontextrestored",Ne,!1),t.addEventListener("webglcontextcreationerror",lt,!1),W===null){const ue="webgl2";if(W=He(ue,V),W===null)throw He(ue)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(V){throw V("WebGLRenderer: "+V.message),V}let ke,et,Ve,ot,it,dt,K,H,me,we,Fe,Te,yt,at,St,xt,Ie,Ge,_t,$,ye,qe,Q,Je;function We(){ke=new cz(W),ke.init(),qe=new eR(W,ke),et=new tz(W,ke,e,qe),Ve=new kP(W,ke),et.reversedDepthBuffer&&_&&Ve.buffers.depth.setReversed(!0),ot=new dz(W),it=new wP,dt=new YP(W,ke,Ve,it,et,qe,ot),K=new iz(O),H=new uz(O),me=new vN(W),Q=new $I(W,me),we=new fz(W,me,ot,Q),Fe=new mz(W,we,me,ot),_t=new pz(W,et,dt),xt=new nz(it),Te=new DP(O,K,H,ke,et,Q,xt),yt=new ZP(O,it),at=new OP,St=new FP(ke),Ge=new QI(O,K,H,Ve,Fe,y,d),Ie=new VP(O,Fe,et),Je=new QP(W,ot,et,Ve),$=new ez(W,ke,ot),ye=new hz(W,ke,ot),ot.programs=Te.programs,O.capabilities=et,O.extensions=ke,O.properties=it,O.renderLists=at,O.shadowMap=Ie,O.state=Ve,O.info=ot}We();const Ze=new WP(O,W);this.xr=Ze,this.getContext=function(){return W},this.getContextAttributes=function(){return W.getContextAttributes()},this.forceContextLoss=function(){const V=ke.get("WEBGL_lose_context");V&&V.loseContext()},this.forceContextRestore=function(){const V=ke.get("WEBGL_lose_context");V&&V.restoreContext()},this.getPixelRatio=function(){return pe},this.setPixelRatio=function(V){V!==void 0&&(pe=V,this.setSize(Z,oe,!1))},this.getSize=function(V){return V.set(Z,oe)},this.setSize=function(V,ue,Ae=!0){if(Ze.isPresenting){ht("WebGLRenderer: Can't change size while VR device is presenting.");return}Z=V,oe=ue,t.width=Math.floor(V*pe),t.height=Math.floor(ue*pe),Ae===!0&&(t.style.width=V+"px",t.style.height=ue+"px"),this.setViewport(0,0,V,ue)},this.getDrawingBufferSize=function(V){return V.set(Z*pe,oe*pe).floor()},this.setDrawingBufferSize=function(V,ue,Ae){Z=V,oe=ue,pe=Ae,t.width=Math.floor(V*Ae),t.height=Math.floor(ue*Ae),this.setViewport(0,0,V,ue)},this.getCurrentViewport=function(V){return V.copy(te)},this.getViewport=function(V){return V.copy(Ce)},this.setViewport=function(V,ue,Ae,ve){V.isVector4?Ce.set(V.x,V.y,V.z,V.w):Ce.set(V,ue,Ae,ve),Ve.viewport(te.copy(Ce).multiplyScalar(pe).round())},this.getScissor=function(V){return V.copy(Ee)},this.setScissor=function(V,ue,Ae,ve){V.isVector4?Ee.set(V.x,V.y,V.z,V.w):Ee.set(V,ue,Ae,ve),Ve.scissor(le.copy(Ee).multiplyScalar(pe).round())},this.getScissorTest=function(){return Ye},this.setScissorTest=function(V){Ve.setScissorTest(Ye=V)},this.setOpaqueSort=function(V){q=V},this.setTransparentSort=function(V){se=V},this.getClearColor=function(V){return V.copy(Ge.getClearColor())},this.setClearColor=function(){Ge.setClearColor(...arguments)},this.getClearAlpha=function(){return Ge.getClearAlpha()},this.setClearAlpha=function(){Ge.setClearAlpha(...arguments)},this.clear=function(V=!0,ue=!0,Ae=!0){let ve=0;if(V){let ce=!1;if(I!==null){const tt=I.texture.format;ce=S.has(tt)}if(ce){const tt=I.texture.type,st=E.has(tt),mt=Ge.getClearColor(),gt=Ge.getClearAlpha(),Ut=mt.r,Nt=mt.g,Rt=mt.b;st?(C[0]=Ut,C[1]=Nt,C[2]=Rt,C[3]=gt,W.clearBufferuiv(W.COLOR,0,C)):(M[0]=Ut,M[1]=Nt,M[2]=Rt,M[3]=gt,W.clearBufferiv(W.COLOR,0,M))}else ve|=W.COLOR_BUFFER_BIT}ue&&(ve|=W.DEPTH_BUFFER_BIT),Ae&&(ve|=W.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),W.clear(ve)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Xe,!1),t.removeEventListener("webglcontextrestored",Ne,!1),t.removeEventListener("webglcontextcreationerror",lt,!1),Ge.dispose(),at.dispose(),St.dispose(),it.dispose(),K.dispose(),H.dispose(),Fe.dispose(),Q.dispose(),Je.dispose(),Te.dispose(),Ze.dispose(),Ze.removeEventListener("sessionstart",Ul),Ze.removeEventListener("sessionend",Ol),Zi.stop()};function Xe(V){V.preventDefault(),xg("WebGLRenderer: Context Lost."),P=!0}function Ne(){xg("WebGLRenderer: Context Restored."),P=!1;const V=ot.autoReset,ue=Ie.enabled,Ae=Ie.autoUpdate,ve=Ie.needsUpdate,ce=Ie.type;We(),ot.autoReset=V,Ie.enabled=ue,Ie.autoUpdate=Ae,Ie.needsUpdate=ve,Ie.type=ce}function lt(V){kt("WebGLRenderer: A WebGL context could not be created. Reason: ",V.statusMessage)}function Mt(V){const ue=V.target;ue.removeEventListener("dispose",Mt),rn(ue)}function rn(V){Wt(V),it.remove(V)}function Wt(V){const ue=it.get(V).programs;ue!==void 0&&(ue.forEach(function(Ae){Te.releaseProgram(Ae)}),V.isShaderMaterial&&Te.releaseShaderCache(V))}this.renderBufferDirect=function(V,ue,Ae,ve,ce,tt){ue===null&&(ue=sn);const st=ce.isMesh&&ce.matrixWorld.determinant()<0,mt=Hh(V,ue,Ae,ve,ce);Ve.setMaterial(ve,st);let gt=Ae.index,Ut=1;if(ve.wireframe===!0){if(gt=we.getWireframeAttribute(Ae),gt===void 0)return;Ut=2}const Nt=Ae.drawRange,Rt=Ae.attributes.position;let Jt=Nt.start*Ut,gn=(Nt.start+Nt.count)*Ut;tt!==null&&(Jt=Math.max(Jt,tt.start*Ut),gn=Math.min(gn,(tt.start+tt.count)*Ut)),gt!==null?(Jt=Math.max(Jt,0),gn=Math.min(gn,gt.count)):Rt!=null&&(Jt=Math.max(Jt,0),gn=Math.min(gn,Rt.count));const vn=gn-Jt;if(vn<0||vn===1/0)return;Q.setup(ce,ve,mt,Ae,gt);let un,Nn=$;if(gt!==null&&(un=me.get(gt),Nn=ye,Nn.setIndex(un)),ce.isMesh)ve.wireframe===!0?(Ve.setLineWidth(ve.wireframeLinewidth*ze()),Nn.setMode(W.LINES)):Nn.setMode(W.TRIANGLES);else if(ce.isLine){let wt=ve.linewidth;wt===void 0&&(wt=1),Ve.setLineWidth(wt*ze()),ce.isLineSegments?Nn.setMode(W.LINES):ce.isLineLoop?Nn.setMode(W.LINE_LOOP):Nn.setMode(W.LINE_STRIP)}else ce.isPoints?Nn.setMode(W.POINTS):ce.isSprite&&Nn.setMode(W.TRIANGLES);if(ce.isBatchedMesh)if(ce._multiDrawInstances!==null)Lp("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Nn.renderMultiDrawInstances(ce._multiDrawStarts,ce._multiDrawCounts,ce._multiDrawCount,ce._multiDrawInstances);else if(ke.get("WEBGL_multi_draw"))Nn.renderMultiDraw(ce._multiDrawStarts,ce._multiDrawCounts,ce._multiDrawCount);else{const wt=ce._multiDrawStarts,Xn=ce._multiDrawCounts,cn=ce._multiDrawCount,Ui=gt?me.get(gt).bytesPerElement:1,so=it.get(ve).currentProgram.getUniforms();for(let qn=0;qn<cn;qn++)so.setValue(W,"_gl_DrawID",qn),Nn.render(wt[qn]/Ui,Xn[qn])}else if(ce.isInstancedMesh)Nn.renderInstances(Jt,vn,ce.count);else if(Ae.isInstancedBufferGeometry){const wt=Ae._maxInstanceCount!==void 0?Ae._maxInstanceCount:1/0,Xn=Math.min(Ae.instanceCount,wt);Nn.renderInstances(Jt,vn,Xn)}else Nn.render(Jt,vn)};function li(V,ue,Ae){V.transparent===!0&&V.side===Us&&V.forceSinglePass===!1?(V.side=pa,V.needsUpdate=!0,Ai(V,ue,Ae),V.side=Fo,V.needsUpdate=!0,Ai(V,ue,Ae),V.side=Us):Ai(V,ue,Ae)}this.compile=function(V,ue,Ae=null){Ae===null&&(Ae=V),D=St.get(Ae),D.init(ue),z.push(D),Ae.traverseVisible(function(ce){ce.isLight&&ce.layers.test(ue.layers)&&(D.pushLight(ce),ce.castShadow&&D.pushShadow(ce))}),V!==Ae&&V.traverseVisible(function(ce){ce.isLight&&ce.layers.test(ue.layers)&&(D.pushLight(ce),ce.castShadow&&D.pushShadow(ce))}),D.setupLights();const ve=new Set;return V.traverse(function(ce){if(!(ce.isMesh||ce.isPoints||ce.isLine||ce.isSprite))return;const tt=ce.material;if(tt)if(Array.isArray(tt))for(let st=0;st<tt.length;st++){const mt=tt[st];li(mt,Ae,ce),ve.add(mt)}else li(tt,Ae,ce),ve.add(tt)}),D=z.pop(),ve},this.compileAsync=function(V,ue,Ae=null){const ve=this.compile(V,ue,Ae);return new Promise(ce=>{function tt(){if(ve.forEach(function(st){it.get(st).currentProgram.isReady()&&ve.delete(st)}),ve.size===0){ce(V);return}setTimeout(tt,10)}ke.get("KHR_parallel_shader_compile")!==null?tt():setTimeout(tt,10)})};let Fi=null;function Wc(V){Fi&&Fi(V)}function Ul(){Zi.stop()}function Ol(){Zi.start()}const Zi=new W3;Zi.setAnimationLoop(Wc),typeof self<"u"&&Zi.setContext(self),this.setAnimationLoop=function(V){Fi=V,Ze.setAnimationLoop(V),V===null?Zi.stop():Zi.start()},Ze.addEventListener("sessionstart",Ul),Ze.addEventListener("sessionend",Ol),this.render=function(V,ue){if(ue!==void 0&&ue.isCamera!==!0){kt("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(P===!0)return;if(V.matrixWorldAutoUpdate===!0&&V.updateMatrixWorld(),ue.parent===null&&ue.matrixWorldAutoUpdate===!0&&ue.updateMatrixWorld(),Ze.enabled===!0&&Ze.isPresenting===!0&&(Ze.cameraAutoUpdate===!0&&Ze.updateCamera(ue),ue=Ze.getCamera()),V.isScene===!0&&V.onBeforeRender(O,V,ue,I),D=St.get(V,z.length),D.init(ue),z.push(D),ut.multiplyMatrices(ue.projectionMatrix,ue.matrixWorldInverse),ge.setFromProjectionMatrix(ut,xr,ue.reversedDepth),$e=this.localClippingEnabled,Re=xt.init(this.clippingPlanes,$e),B=at.get(V,w.length),B.init(),w.push(B),Ze.enabled===!0&&Ze.isPresenting===!0){const tt=O.xr.getDepthSensingMesh();tt!==null&&Xo(tt,ue,-1/0,O.sortObjects)}Xo(V,ue,0,O.sortObjects),B.finish(),O.sortObjects===!0&&B.sort(q,se),Ct=Ze.enabled===!1||Ze.isPresenting===!1||Ze.hasDepthSensing()===!1,Ct&&Ge.addToRenderList(B,V),this.info.render.frame++,Re===!0&&xt.beginShadows();const Ae=D.state.shadowsArray;Ie.render(Ae,V,ue),Re===!0&&xt.endShadows(),this.info.autoReset===!0&&this.info.reset();const ve=B.opaque,ce=B.transmissive;if(D.setupLights(),ue.isArrayCamera){const tt=ue.cameras;if(ce.length>0)for(let st=0,mt=tt.length;st<mt;st++){const gt=tt[st];cs(ve,ce,V,gt)}Ct&&Ge.render(V);for(let st=0,mt=tt.length;st<mt;st++){const gt=tt[st];zs(B,V,gt,gt.viewport)}}else ce.length>0&&cs(ve,ce,V,ue),Ct&&Ge.render(V),zs(B,V,ue);I!==null&&L===0&&(dt.updateMultisampleRenderTarget(I),dt.updateRenderTargetMipmap(I)),V.isScene===!0&&V.onAfterRender(O,V,ue),Q.resetDefaultState(),Y=-1,ee=null,z.pop(),z.length>0?(D=z[z.length-1],Re===!0&&xt.setGlobalState(O.clippingPlanes,D.state.camera)):D=null,w.pop(),w.length>0?B=w[w.length-1]:B=null};function Xo(V,ue,Ae,ve){if(V.visible===!1)return;if(V.layers.test(ue.layers)){if(V.isGroup)Ae=V.renderOrder;else if(V.isLOD)V.autoUpdate===!0&&V.update(ue);else if(V.isLight)D.pushLight(V),V.castShadow&&D.pushShadow(V);else if(V.isSprite){if(!V.frustumCulled||ge.intersectsSprite(V)){ve&&Pt.setFromMatrixPosition(V.matrixWorld).applyMatrix4(ut);const st=Fe.update(V),mt=V.material;mt.visible&&B.push(V,st,mt,Ae,Pt.z,null)}}else if((V.isMesh||V.isLine||V.isPoints)&&(!V.frustumCulled||ge.intersectsObject(V))){const st=Fe.update(V),mt=V.material;if(ve&&(V.boundingSphere!==void 0?(V.boundingSphere===null&&V.computeBoundingSphere(),Pt.copy(V.boundingSphere.center)):(st.boundingSphere===null&&st.computeBoundingSphere(),Pt.copy(st.boundingSphere.center)),Pt.applyMatrix4(V.matrixWorld).applyMatrix4(ut)),Array.isArray(mt)){const gt=st.groups;for(let Ut=0,Nt=gt.length;Ut<Nt;Ut++){const Rt=gt[Ut],Jt=mt[Rt.materialIndex];Jt&&Jt.visible&&B.push(V,st,Jt,Ae,Pt.z,Rt)}}else mt.visible&&B.push(V,st,mt,Ae,Pt.z,null)}}const tt=V.children;for(let st=0,mt=tt.length;st<mt;st++)Xo(tt[st],ue,Ae,ve)}function zs(V,ue,Ae,ve){const{opaque:ce,transmissive:tt,transparent:st}=V;D.setupLightsView(Ae),Re===!0&&xt.setGlobalState(O.clippingPlanes,Ae),ve&&Ve.viewport(te.copy(ve)),ce.length>0&&xa(ce,ue,Ae),tt.length>0&&xa(tt,ue,Ae),st.length>0&&xa(st,ue,Ae),Ve.buffers.depth.setTest(!0),Ve.buffers.depth.setMask(!0),Ve.buffers.color.setMask(!0),Ve.setPolygonOffset(!1)}function cs(V,ue,Ae,ve){if((Ae.isScene===!0?Ae.overrideMaterial:null)!==null)return;D.state.transmissionRenderTarget[ve.id]===void 0&&(D.state.transmissionRenderTarget[ve.id]=new Pi(1,1,{generateMipmaps:!0,type:ke.has("EXT_color_buffer_half_float")||ke.has("EXT_color_buffer_float")?Xc:ra,minFilter:Qr,samples:4,stencilBuffer:r,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Tn.workingColorSpace}));const tt=D.state.transmissionRenderTarget[ve.id],st=ve.viewport||te;tt.setSize(st.z*O.transmissionResolutionScale,st.w*O.transmissionResolutionScale);const mt=O.getRenderTarget(),gt=O.getActiveCubeFace(),Ut=O.getActiveMipmapLevel();O.setRenderTarget(tt),O.getClearColor(F),J=O.getClearAlpha(),J<1&&O.setClearColor(16777215,.5),O.clear(),Ct&&Ge.render(Ae);const Nt=O.toneMapping;O.toneMapping=zo;const Rt=ve.viewport;if(ve.viewport!==void 0&&(ve.viewport=void 0),D.setupLightsView(ve),Re===!0&&xt.setGlobalState(O.clippingPlanes,ve),xa(V,Ae,ve),dt.updateMultisampleRenderTarget(tt),dt.updateRenderTargetMipmap(tt),ke.has("WEBGL_multisampled_render_to_texture")===!1){let Jt=!1;for(let gn=0,vn=ue.length;gn<vn;gn++){const un=ue[gn],{object:Nn,geometry:wt,material:Xn,group:cn}=un;if(Xn.side===Us&&Nn.layers.test(ve.layers)){const Ui=Xn.side;Xn.side=pa,Xn.needsUpdate=!0,$t(Nn,Ae,ve,wt,Xn,cn),Xn.side=Ui,Xn.needsUpdate=!0,Jt=!0}}Jt===!0&&(dt.updateMultisampleRenderTarget(tt),dt.updateRenderTargetMipmap(tt))}O.setRenderTarget(mt,gt,Ut),O.setClearColor(F,J),Rt!==void 0&&(ve.viewport=Rt),O.toneMapping=Nt}function xa(V,ue,Ae){const ve=ue.isScene===!0?ue.overrideMaterial:null;for(let ce=0,tt=V.length;ce<tt;ce++){const st=V[ce],{object:mt,geometry:gt,group:Ut}=st;let Nt=st.material;Nt.allowOverride===!0&&ve!==null&&(Nt=ve),mt.layers.test(Ae.layers)&&$t(mt,ue,Ae,gt,Nt,Ut)}}function $t(V,ue,Ae,ve,ce,tt){V.onBeforeRender(O,ue,Ae,ve,ce,tt),V.modelViewMatrix.multiplyMatrices(Ae.matrixWorldInverse,V.matrixWorld),V.normalMatrix.getNormalMatrix(V.modelViewMatrix),ce.onBeforeRender(O,ue,Ae,ve,V,tt),ce.transparent===!0&&ce.side===Us&&ce.forceSinglePass===!1?(ce.side=pa,ce.needsUpdate=!0,O.renderBufferDirect(Ae,ue,ve,ce,V,tt),ce.side=Fo,ce.needsUpdate=!0,O.renderBufferDirect(Ae,ue,ve,ce,V,tt),ce.side=Us):O.renderBufferDirect(Ae,ue,ve,ce,V,tt),V.onAfterRender(O,ue,Ae,ve,ce,tt)}function Ai(V,ue,Ae){ue.isScene!==!0&&(ue=sn);const ve=it.get(V),ce=D.state.lights,tt=D.state.shadowsArray,st=ce.state.version,mt=Te.getParameters(V,ce.state,tt,ue,Ae),gt=Te.getProgramCacheKey(mt);let Ut=ve.programs;ve.environment=V.isMeshStandardMaterial?ue.environment:null,ve.fog=ue.fog,ve.envMap=(V.isMeshStandardMaterial?H:K).get(V.envMap||ve.environment),ve.envMapRotation=ve.environment!==null&&V.envMap===null?ue.environmentRotation:V.envMapRotation,Ut===void 0&&(V.addEventListener("dispose",Mt),Ut=new Map,ve.programs=Ut);let Nt=Ut.get(gt);if(Nt!==void 0){if(ve.currentProgram===Nt&&ve.lightsStateVersion===st)return Nl(V,mt),Nt}else mt.uniforms=Te.getUniforms(V),V.onBeforeCompile(mt,O),Nt=Te.acquireProgram(mt,gt),Ut.set(gt,Nt),ve.uniforms=mt.uniforms;const Rt=ve.uniforms;return(!V.isShaderMaterial&&!V.isRawShaderMaterial||V.clipping===!0)&&(Rt.clippingPlanes=xt.uniform),Nl(V,mt),ve.needsLights=Du(V),ve.lightsStateVersion=st,ve.needsLights&&(Rt.ambientLightColor.value=ce.state.ambient,Rt.lightProbe.value=ce.state.probe,Rt.directionalLights.value=ce.state.directional,Rt.directionalLightShadows.value=ce.state.directionalShadow,Rt.spotLights.value=ce.state.spot,Rt.spotLightShadows.value=ce.state.spotShadow,Rt.rectAreaLights.value=ce.state.rectArea,Rt.ltc_1.value=ce.state.rectAreaLTC1,Rt.ltc_2.value=ce.state.rectAreaLTC2,Rt.pointLights.value=ce.state.point,Rt.pointLightShadows.value=ce.state.pointShadow,Rt.hemisphereLights.value=ce.state.hemi,Rt.directionalShadowMap.value=ce.state.directionalShadowMap,Rt.directionalShadowMatrix.value=ce.state.directionalShadowMatrix,Rt.spotShadowMap.value=ce.state.spotShadowMap,Rt.spotLightMatrix.value=ce.state.spotLightMatrix,Rt.spotLightMap.value=ce.state.spotLightMap,Rt.pointShadowMap.value=ce.state.pointShadowMap,Rt.pointShadowMatrix.value=ce.state.pointShadowMatrix),ve.currentProgram=Nt,ve.uniformsList=null,Nt}function tr(V){if(V.uniformsList===null){const ue=V.currentProgram.getUniforms();V.uniformsList=d_.seqWithValue(ue.seq,V.uniforms)}return V.uniformsList}function Nl(V,ue){const Ae=it.get(V);Ae.outputColorSpace=ue.outputColorSpace,Ae.batching=ue.batching,Ae.batchingColor=ue.batchingColor,Ae.instancing=ue.instancing,Ae.instancingColor=ue.instancingColor,Ae.instancingMorph=ue.instancingMorph,Ae.skinning=ue.skinning,Ae.morphTargets=ue.morphTargets,Ae.morphNormals=ue.morphNormals,Ae.morphColors=ue.morphColors,Ae.morphTargetsCount=ue.morphTargetsCount,Ae.numClippingPlanes=ue.numClippingPlanes,Ae.numIntersection=ue.numClipIntersection,Ae.vertexAlphas=ue.vertexAlphas,Ae.vertexTangents=ue.vertexTangents,Ae.toneMapping=ue.toneMapping}function Hh(V,ue,Ae,ve,ce){ue.isScene!==!0&&(ue=sn),dt.resetTextureUnits();const tt=ue.fog,st=ve.isMeshStandardMaterial?ue.environment:null,mt=I===null?O.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:Dl,gt=(ve.isMeshStandardMaterial?H:K).get(ve.envMap||st),Ut=ve.vertexColors===!0&&!!Ae.attributes.color&&Ae.attributes.color.itemSize===4,Nt=!!Ae.attributes.tangent&&(!!ve.normalMap||ve.anisotropy>0),Rt=!!Ae.morphAttributes.position,Jt=!!Ae.morphAttributes.normal,gn=!!Ae.morphAttributes.color;let vn=zo;ve.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(vn=O.toneMapping);const un=Ae.morphAttributes.position||Ae.morphAttributes.normal||Ae.morphAttributes.color,Nn=un!==void 0?un.length:0,wt=it.get(ve),Xn=D.state.lights;if(Re===!0&&($e===!0||V!==ee)){const Vi=V===ee&&ve.id===Y;xt.setState(ve,V,Vi)}let cn=!1;ve.version===wt.__version?(wt.needsLights&&wt.lightsStateVersion!==Xn.state.version||wt.outputColorSpace!==mt||ce.isBatchedMesh&&wt.batching===!1||!ce.isBatchedMesh&&wt.batching===!0||ce.isBatchedMesh&&wt.batchingColor===!0&&ce.colorTexture===null||ce.isBatchedMesh&&wt.batchingColor===!1&&ce.colorTexture!==null||ce.isInstancedMesh&&wt.instancing===!1||!ce.isInstancedMesh&&wt.instancing===!0||ce.isSkinnedMesh&&wt.skinning===!1||!ce.isSkinnedMesh&&wt.skinning===!0||ce.isInstancedMesh&&wt.instancingColor===!0&&ce.instanceColor===null||ce.isInstancedMesh&&wt.instancingColor===!1&&ce.instanceColor!==null||ce.isInstancedMesh&&wt.instancingMorph===!0&&ce.morphTexture===null||ce.isInstancedMesh&&wt.instancingMorph===!1&&ce.morphTexture!==null||wt.envMap!==gt||ve.fog===!0&&wt.fog!==tt||wt.numClippingPlanes!==void 0&&(wt.numClippingPlanes!==xt.numPlanes||wt.numIntersection!==xt.numIntersection)||wt.vertexAlphas!==Ut||wt.vertexTangents!==Nt||wt.morphTargets!==Rt||wt.morphNormals!==Jt||wt.morphColors!==gn||wt.toneMapping!==vn||wt.morphTargetsCount!==Nn)&&(cn=!0):(cn=!0,wt.__version=ve.version);let Ui=wt.currentProgram;cn===!0&&(Ui=Ai(ve,ue,ce));let so=!1,qn=!1,Rr=!1;const Jn=Ui.getUniforms(),Hi=wt.uniforms;if(Ve.useProgram(Ui.program)&&(so=!0,qn=!0,Rr=!0),ve.id!==Y&&(Y=ve.id,qn=!0),so||ee!==V){Ve.buffers.depth.getReversed()&&V.reversedDepth!==!0&&(V._reversedDepth=!0,V.updateProjectionMatrix()),Jn.setValue(W,"projectionMatrix",V.projectionMatrix),Jn.setValue(W,"viewMatrix",V.matrixWorldInverse);const fi=Jn.map.cameraPosition;fi!==void 0&&fi.setValue(W,vt.setFromMatrixPosition(V.matrixWorld)),et.logarithmicDepthBuffer&&Jn.setValue(W,"logDepthBufFC",2/(Math.log(V.far+1)/Math.LN2)),(ve.isMeshPhongMaterial||ve.isMeshToonMaterial||ve.isMeshLambertMaterial||ve.isMeshBasicMaterial||ve.isMeshStandardMaterial||ve.isShaderMaterial)&&Jn.setValue(W,"isOrthographic",V.isOrthographicCamera===!0),ee!==V&&(ee=V,qn=!0,Rr=!0)}if(ce.isSkinnedMesh){Jn.setOptional(W,ce,"bindMatrix"),Jn.setOptional(W,ce,"bindMatrixInverse");const Vi=ce.skeleton;Vi&&(Vi.boneTexture===null&&Vi.computeBoneTexture(),Jn.setValue(W,"boneTexture",Vi.boneTexture,dt))}ce.isBatchedMesh&&(Jn.setOptional(W,ce,"batchingTexture"),Jn.setValue(W,"batchingTexture",ce._matricesTexture,dt),Jn.setOptional(W,ce,"batchingIdTexture"),Jn.setValue(W,"batchingIdTexture",ce._indirectTexture,dt),Jn.setOptional(W,ce,"batchingColorTexture"),ce._colorsTexture!==null&&Jn.setValue(W,"batchingColorTexture",ce._colorsTexture,dt));const Gi=Ae.morphAttributes;if((Gi.position!==void 0||Gi.normal!==void 0||Gi.color!==void 0)&&_t.update(ce,Ae,Ui),(qn||wt.receiveShadow!==ce.receiveShadow)&&(wt.receiveShadow=ce.receiveShadow,Jn.setValue(W,"receiveShadow",ce.receiveShadow)),ve.isMeshGouraudMaterial&&ve.envMap!==null&&(Hi.envMap.value=gt,Hi.flipEnvMap.value=gt.isCubeTexture&&gt.isRenderTargetTexture===!1?-1:1),ve.isMeshStandardMaterial&&ve.envMap===null&&ue.environment!==null&&(Hi.envMapIntensity.value=ue.environmentIntensity),Hi.dfgLUT!==void 0&&(Hi.dfgLUT.value=e4()),qn&&(Jn.setValue(W,"toneMappingExposure",O.toneMappingExposure),wt.needsLights&&nm(Hi,Rr),tt&&ve.fog===!0&&yt.refreshFogUniforms(Hi,tt),yt.refreshMaterialUniforms(Hi,ve,pe,oe,D.state.transmissionRenderTarget[V.id]),d_.upload(W,tr(wt),Hi,dt)),ve.isShaderMaterial&&ve.uniformsNeedUpdate===!0&&(d_.upload(W,tr(wt),Hi,dt),ve.uniformsNeedUpdate=!1),ve.isSpriteMaterial&&Jn.setValue(W,"center",ce.center),Jn.setValue(W,"modelViewMatrix",ce.modelViewMatrix),Jn.setValue(W,"normalMatrix",ce.normalMatrix),Jn.setValue(W,"modelMatrix",ce.matrixWorld),ve.isShaderMaterial||ve.isRawShaderMaterial){const Vi=ve.uniformsGroups;for(let fi=0,nr=Vi.length;fi<nr;fi++){const Ps=Vi[fi];Je.update(Ps,Ui),Je.bind(Ps,Ui)}}return Ui}function nm(V,ue){V.ambientLightColor.needsUpdate=ue,V.lightProbe.needsUpdate=ue,V.directionalLights.needsUpdate=ue,V.directionalLightShadows.needsUpdate=ue,V.pointLights.needsUpdate=ue,V.pointLightShadows.needsUpdate=ue,V.spotLights.needsUpdate=ue,V.spotLightShadows.needsUpdate=ue,V.rectAreaLights.needsUpdate=ue,V.hemisphereLights.needsUpdate=ue}function Du(V){return V.isMeshLambertMaterial||V.isMeshToonMaterial||V.isMeshPhongMaterial||V.isMeshStandardMaterial||V.isShadowMaterial||V.isShaderMaterial&&V.lights===!0}this.getActiveCubeFace=function(){return G},this.getActiveMipmapLevel=function(){return L},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(V,ue,Ae){const ve=it.get(V);ve.__autoAllocateDepthBuffer=V.resolveDepthBuffer===!1,ve.__autoAllocateDepthBuffer===!1&&(ve.__useRenderToTexture=!1),it.get(V.texture).__webglTexture=ue,it.get(V.depthTexture).__webglTexture=ve.__autoAllocateDepthBuffer?void 0:Ae,ve.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(V,ue){const Ae=it.get(V);Ae.__webglFramebuffer=ue,Ae.__useDefaultFramebuffer=ue===void 0};const ao=W.createFramebuffer();this.setRenderTarget=function(V,ue=0,Ae=0){I=V,G=ue,L=Ae;let ve=!0,ce=null,tt=!1,st=!1;if(V){const gt=it.get(V);if(gt.__useDefaultFramebuffer!==void 0)Ve.bindFramebuffer(W.FRAMEBUFFER,null),ve=!1;else if(gt.__webglFramebuffer===void 0)dt.setupRenderTarget(V);else if(gt.__hasExternalTextures)dt.rebindTextures(V,it.get(V.texture).__webglTexture,it.get(V.depthTexture).__webglTexture);else if(V.depthBuffer){const Rt=V.depthTexture;if(gt.__boundDepthTexture!==Rt){if(Rt!==null&&it.has(Rt)&&(V.width!==Rt.image.width||V.height!==Rt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");dt.setupDepthRenderbuffer(V)}}const Ut=V.texture;(Ut.isData3DTexture||Ut.isDataArrayTexture||Ut.isCompressedArrayTexture)&&(st=!0);const Nt=it.get(V).__webglFramebuffer;V.isWebGLCubeRenderTarget?(Array.isArray(Nt[ue])?ce=Nt[ue][Ae]:ce=Nt[ue],tt=!0):V.samples>0&&dt.useMultisampledRTT(V)===!1?ce=it.get(V).__webglMultisampledFramebuffer:Array.isArray(Nt)?ce=Nt[Ae]:ce=Nt,te.copy(V.viewport),le.copy(V.scissor),re=V.scissorTest}else te.copy(Ce).multiplyScalar(pe).floor(),le.copy(Ee).multiplyScalar(pe).floor(),re=Ye;if(Ae!==0&&(ce=ao),Ve.bindFramebuffer(W.FRAMEBUFFER,ce)&&ve&&Ve.drawBuffers(V,ce),Ve.viewport(te),Ve.scissor(le),Ve.setScissorTest(re),tt){const gt=it.get(V.texture);W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_CUBE_MAP_POSITIVE_X+ue,gt.__webglTexture,Ae)}else if(st){const gt=ue;for(let Ut=0;Ut<V.textures.length;Ut++){const Nt=it.get(V.textures[Ut]);W.framebufferTextureLayer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0+Ut,Nt.__webglTexture,Ae,gt)}}else if(V!==null&&Ae!==0){const gt=it.get(V.texture);W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,gt.__webglTexture,Ae)}Y=-1},this.readRenderTargetPixels=function(V,ue,Ae,ve,ce,tt,st,mt=0){if(!(V&&V.isWebGLRenderTarget)){kt("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let gt=it.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&st!==void 0&&(gt=gt[st]),gt){Ve.bindFramebuffer(W.FRAMEBUFFER,gt);try{const Ut=V.textures[mt],Nt=Ut.format,Rt=Ut.type;if(!et.textureFormatReadable(Nt)){kt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!et.textureTypeReadable(Rt)){kt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ue>=0&&ue<=V.width-ve&&Ae>=0&&Ae<=V.height-ce&&(V.textures.length>1&&W.readBuffer(W.COLOR_ATTACHMENT0+mt),W.readPixels(ue,Ae,ve,ce,qe.convert(Nt),qe.convert(Rt),tt))}finally{const Ut=I!==null?it.get(I).__webglFramebuffer:null;Ve.bindFramebuffer(W.FRAMEBUFFER,Ut)}}},this.readRenderTargetPixelsAsync=async function(V,ue,Ae,ve,ce,tt,st,mt=0){if(!(V&&V.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let gt=it.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&st!==void 0&&(gt=gt[st]),gt)if(ue>=0&&ue<=V.width-ve&&Ae>=0&&Ae<=V.height-ce){Ve.bindFramebuffer(W.FRAMEBUFFER,gt);const Ut=V.textures[mt],Nt=Ut.format,Rt=Ut.type;if(!et.textureFormatReadable(Nt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!et.textureTypeReadable(Rt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const Jt=W.createBuffer();W.bindBuffer(W.PIXEL_PACK_BUFFER,Jt),W.bufferData(W.PIXEL_PACK_BUFFER,tt.byteLength,W.STREAM_READ),V.textures.length>1&&W.readBuffer(W.COLOR_ATTACHMENT0+mt),W.readPixels(ue,Ae,ve,ce,qe.convert(Nt),qe.convert(Rt),0);const gn=I!==null?it.get(I).__webglFramebuffer:null;Ve.bindFramebuffer(W.FRAMEBUFFER,gn);const vn=W.fenceSync(W.SYNC_GPU_COMMANDS_COMPLETE,0);return W.flush(),await bw(W,vn,4),W.bindBuffer(W.PIXEL_PACK_BUFFER,Jt),W.getBufferSubData(W.PIXEL_PACK_BUFFER,0,tt),W.deleteBuffer(Jt),W.deleteSync(vn),tt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(V,ue=null,Ae=0){const ve=Math.pow(2,-Ae),ce=Math.floor(V.image.width*ve),tt=Math.floor(V.image.height*ve),st=ue!==null?ue.x:0,mt=ue!==null?ue.y:0;dt.setTexture2D(V,0),W.copyTexSubImage2D(W.TEXTURE_2D,Ae,0,0,st,mt,ce,tt),Ve.unbindTexture()};const Ll=W.createFramebuffer(),Si=W.createFramebuffer();this.copyTextureToTexture=function(V,ue,Ae=null,ve=null,ce=0,tt=null){tt===null&&(ce!==0?(Lp("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),tt=ce,ce=0):tt=0);let st,mt,gt,Ut,Nt,Rt,Jt,gn,vn;const un=V.isCompressedTexture?V.mipmaps[tt]:V.image;if(Ae!==null)st=Ae.max.x-Ae.min.x,mt=Ae.max.y-Ae.min.y,gt=Ae.isBox3?Ae.max.z-Ae.min.z:1,Ut=Ae.min.x,Nt=Ae.min.y,Rt=Ae.isBox3?Ae.min.z:0;else{const Gi=Math.pow(2,-ce);st=Math.floor(un.width*Gi),mt=Math.floor(un.height*Gi),V.isDataArrayTexture?gt=un.depth:V.isData3DTexture?gt=Math.floor(un.depth*Gi):gt=1,Ut=0,Nt=0,Rt=0}ve!==null?(Jt=ve.x,gn=ve.y,vn=ve.z):(Jt=0,gn=0,vn=0);const Nn=qe.convert(ue.format),wt=qe.convert(ue.type);let Xn;ue.isData3DTexture?(dt.setTexture3D(ue,0),Xn=W.TEXTURE_3D):ue.isDataArrayTexture||ue.isCompressedArrayTexture?(dt.setTexture2DArray(ue,0),Xn=W.TEXTURE_2D_ARRAY):(dt.setTexture2D(ue,0),Xn=W.TEXTURE_2D),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,ue.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ue.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,ue.unpackAlignment);const cn=W.getParameter(W.UNPACK_ROW_LENGTH),Ui=W.getParameter(W.UNPACK_IMAGE_HEIGHT),so=W.getParameter(W.UNPACK_SKIP_PIXELS),qn=W.getParameter(W.UNPACK_SKIP_ROWS),Rr=W.getParameter(W.UNPACK_SKIP_IMAGES);W.pixelStorei(W.UNPACK_ROW_LENGTH,un.width),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,un.height),W.pixelStorei(W.UNPACK_SKIP_PIXELS,Ut),W.pixelStorei(W.UNPACK_SKIP_ROWS,Nt),W.pixelStorei(W.UNPACK_SKIP_IMAGES,Rt);const Jn=V.isDataArrayTexture||V.isData3DTexture,Hi=ue.isDataArrayTexture||ue.isData3DTexture;if(V.isDepthTexture){const Gi=it.get(V),Vi=it.get(ue),fi=it.get(Gi.__renderTarget),nr=it.get(Vi.__renderTarget);Ve.bindFramebuffer(W.READ_FRAMEBUFFER,fi.__webglFramebuffer),Ve.bindFramebuffer(W.DRAW_FRAMEBUFFER,nr.__webglFramebuffer);for(let Ps=0;Ps<gt;Ps++)Jn&&(W.framebufferTextureLayer(W.READ_FRAMEBUFFER,W.COLOR_ATTACHMENT0,it.get(V).__webglTexture,ce,Rt+Ps),W.framebufferTextureLayer(W.DRAW_FRAMEBUFFER,W.COLOR_ATTACHMENT0,it.get(ue).__webglTexture,tt,vn+Ps)),W.blitFramebuffer(Ut,Nt,st,mt,Jt,gn,st,mt,W.DEPTH_BUFFER_BIT,W.NEAREST);Ve.bindFramebuffer(W.READ_FRAMEBUFFER,null),Ve.bindFramebuffer(W.DRAW_FRAMEBUFFER,null)}else if(ce!==0||V.isRenderTargetTexture||it.has(V)){const Gi=it.get(V),Vi=it.get(ue);Ve.bindFramebuffer(W.READ_FRAMEBUFFER,Ll),Ve.bindFramebuffer(W.DRAW_FRAMEBUFFER,Si);for(let fi=0;fi<gt;fi++)Jn?W.framebufferTextureLayer(W.READ_FRAMEBUFFER,W.COLOR_ATTACHMENT0,Gi.__webglTexture,ce,Rt+fi):W.framebufferTexture2D(W.READ_FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,Gi.__webglTexture,ce),Hi?W.framebufferTextureLayer(W.DRAW_FRAMEBUFFER,W.COLOR_ATTACHMENT0,Vi.__webglTexture,tt,vn+fi):W.framebufferTexture2D(W.DRAW_FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,Vi.__webglTexture,tt),ce!==0?W.blitFramebuffer(Ut,Nt,st,mt,Jt,gn,st,mt,W.COLOR_BUFFER_BIT,W.NEAREST):Hi?W.copyTexSubImage3D(Xn,tt,Jt,gn,vn+fi,Ut,Nt,st,mt):W.copyTexSubImage2D(Xn,tt,Jt,gn,Ut,Nt,st,mt);Ve.bindFramebuffer(W.READ_FRAMEBUFFER,null),Ve.bindFramebuffer(W.DRAW_FRAMEBUFFER,null)}else Hi?V.isDataTexture||V.isData3DTexture?W.texSubImage3D(Xn,tt,Jt,gn,vn,st,mt,gt,Nn,wt,un.data):ue.isCompressedArrayTexture?W.compressedTexSubImage3D(Xn,tt,Jt,gn,vn,st,mt,gt,Nn,un.data):W.texSubImage3D(Xn,tt,Jt,gn,vn,st,mt,gt,Nn,wt,un):V.isDataTexture?W.texSubImage2D(W.TEXTURE_2D,tt,Jt,gn,st,mt,Nn,wt,un.data):V.isCompressedTexture?W.compressedTexSubImage2D(W.TEXTURE_2D,tt,Jt,gn,un.width,un.height,Nn,un.data):W.texSubImage2D(W.TEXTURE_2D,tt,Jt,gn,st,mt,Nn,wt,un);W.pixelStorei(W.UNPACK_ROW_LENGTH,cn),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,Ui),W.pixelStorei(W.UNPACK_SKIP_PIXELS,so),W.pixelStorei(W.UNPACK_SKIP_ROWS,qn),W.pixelStorei(W.UNPACK_SKIP_IMAGES,Rr),tt===0&&ue.generateMipmaps&&W.generateMipmap(Xn),Ve.unbindTexture()},this.initRenderTarget=function(V){it.get(V).__webglFramebuffer===void 0&&dt.setupRenderTarget(V)},this.initTexture=function(V){V.isCubeTexture?dt.setTextureCube(V,0):V.isData3DTexture?dt.setTexture3D(V,0):V.isDataArrayTexture||V.isCompressedArrayTexture?dt.setTexture2DArray(V,0):dt.setTexture2D(V,0),Ve.unbindTexture()},this.resetState=function(){G=0,L=0,I=null,Ve.reset(),Q.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return xr}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Tn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Tn._getUnpackColorSpace()}}const t4=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:a1,AddEquation:Ec,AddOperation:O2,AdditiveAnimationBlendMode:f1,AdditiveBlending:vS,AgXToneMapping:P2,AlphaFormat:u1,AlwaysCompare:Q2,AlwaysDepth:Tp,AlwaysStencilFunc:bS,AmbientLight:z3,AnimationAction:q3,AnimationClip:Hp,AnimationLoader:cO,AnimationMixer:zO,AnimationObjectGroup:LO,AnimationUtils:rO,ArcCurve:p3,ArrayCamera:X3,ArrowHelper:lN,AttachedBindMode:yS,Audio:k3,AudioAnalyser:EO,AudioContext:G1,AudioListener:AO,AudioLoader:_O,AxesHelper:uN,BackSide:pa,BasicDepthPacking:Ho,BasicShadowMap:d2,BatchedMesh:f3,Bone:Ry,BooleanKeyframeTrack:zh,Box2:qO,Box3:Ga,Box3Helper:rN,BoxGeometry:Ih,BoxHelper:sN,BufferAttribute:Dn,BufferGeometry:qt,BufferGeometryLoader:G3,ByteType:s1,Cache:Tl,Camera:Ey,CameraHelper:aN,CanvasTexture:BU,CapsuleGeometry:Oy,CatmullRomCurve3:m3,CineonToneMapping:I2,CircleGeometry:Ny,ClampToEdgeWrapping:Ls,Clock:V1,Color:rt,ColorKeyframeTrack:N1,ColorManagement:Tn,CompressedArrayTexture:CU,CompressedCubeTexture:RU,CompressedTexture:wy,CompressedTextureLoader:fO,ConeGeometry:Fg,ConstantAlphaFactor:D2,ConstantColorFactor:R2,Controls:fN,CubeCamera:r3,CubeReflectionMapping:Tu,CubeRefractionMapping:zc,CubeTexture:Lg,CubeTextureLoader:hO,CubeUVReflectionMapping:Wp,CubicBezierCurve:E1,CubicBezierCurve3:g3,CubicInterpolant:U3,CullFaceBack:gS,CullFaceFront:h2,CullFaceFrontBack:PD,CullFaceNone:f2,Curve:Vo,CurvePath:x3,CustomBlending:p2,CustomToneMapping:z2,CylinderGeometry:Pg,Cylindrical:YO,Data3DTexture:My,DataArrayTexture:Sy,DataTexture:Po,DataTextureLoader:dO,DataUtils:Qw,DecrementStencilOp:WD,DecrementWrapStencilOp:ZD,DefaultLoadingManager:L3,DepthFormat:wp,DepthStencilFormat:Th,DepthTexture:Uy,DetachedBindMode:H2,DirectionalLight:F1,DirectionalLightHelper:iN,DiscreteInterpolant:O3,DodecahedronGeometry:Ly,DoubleSide:Us,DstAlphaFactor:S2,DstColorFactor:E2,DynamicCopyUsage:hw,DynamicDrawUsage:rw,DynamicReadUsage:uw,EdgesGeometry:d3,EllipseCurve:Iy,EqualCompare:K2,EqualDepth:Mh,EqualStencilFunc:tw,EquirectangularReflectionMapping:hg,EquirectangularRefractionMapping:dg,Euler:Sr,EventDispatcher:Cr,ExternalTexture:S1,ExtrudeGeometry:zy,FileLoader:Mr,Float16BufferAttribute:sU,Float32BufferAttribute:At,FloatType:Is,Fog:Cy,FogExp2:Ty,FramebufferTexture:TU,FrontSide:Fo,Frustum:jp,FrustumArray:By,GLBufferAttribute:VO,GLSL1:pw,GLSL3:AS,GreaterCompare:W2,GreaterDepth:fg,GreaterEqualCompare:Z2,GreaterEqualDepth:cg,GreaterEqualStencilFunc:sw,GreaterStencilFunc:iw,GridHelper:tN,Group:Su,HalfFloatType:Xc,HemisphereLight:I3,HemisphereLightHelper:eN,IcosahedronGeometry:Py,ImageBitmapLoader:V3,ImageLoader:Sg,ImageUtils:n3,IncrementStencilOp:KD,IncrementWrapStencilOp:jD,InstancedBufferAttribute:Ch,InstancedBufferGeometry:H3,InstancedInterleavedBuffer:GO,InstancedMesh:y1,Int16BufferAttribute:iU,Int32BufferAttribute:aU,Int8BufferAttribute:eU,IntType:py,InterleavedBuffer:Ig,InterleavedBufferAttribute:Hc,Interpolant:$p,InterpolateDiscrete:Up,InterpolateLinear:Op,InterpolateSmooth:f_,InterpolationSamplingMode:vw,InterpolationSamplingType:gw,InvertStencilOp:QD,KeepStencilOp:oh,KeyframeTrack:io,LOD:c3,LatheGeometry:Fy,Layers:zp,LessCompare:J2,LessDepth:Cp,LessEqualCompare:d1,LessEqualDepth:Ic,LessEqualStencilFunc:nw,LessStencilFunc:ew,Light:qc,LightProbe:F3,Line:Cu,Line3:WO,LineBasicMaterial:os,LineCurve:T1,LineCurve3:v3,LineDashedMaterial:B3,LineLoop:b1,LineSegments:Go,LinearFilter:oi,LinearInterpolant:O1,LinearMipMapLinearFilter:VD,LinearMipMapNearestFilter:GD,LinearMipmapLinearFilter:Qr,LinearMipmapNearestFilter:yp,LinearSRGBColorSpace:Dl,LinearToneMapping:N2,LinearTransfer:mg,Loader:ls,LoaderUtils:Uc,LoadingManager:L1,LoopOnce:G2,LoopPingPong:X2,LoopRepeat:V2,MOUSE:sh,Material:Ki,MaterialLoader:Jy,MathUtils:t3,Matrix2:Y1,Matrix3:Qt,Matrix4:zt,MaxEquation:x2,Mesh:Wi,MeshBasicMaterial:_r,MeshDepthMaterial:qy,MeshDistanceMaterial:w1,MeshLambertMaterial:C3,MeshMatcapMaterial:R3,MeshNormalMaterial:D1,MeshPhongMaterial:Mc,MeshPhysicalMaterial:no,MeshStandardMaterial:Qp,MeshToonMaterial:T3,MinEquation:v2,MirroredRepeatWrapping:Bp,MixOperation:U2,MultiplyBlending:_S,MultiplyOperation:Og,NearestFilter:bi,NearestMipMapLinearFilter:HD,NearestMipMapNearestFilter:FD,NearestMipmapLinearFilter:ch,NearestMipmapNearestFilter:dy,NeutralToneMapping:F2,NeverCompare:q2,NeverDepth:ug,NeverStencilFunc:$D,NoBlending:Ba,NoColorSpace:Lo,NoToneMapping:zo,NormalAnimationBlendMode:by,NormalBlending:vh,NotEqualCompare:j2,NotEqualDepth:Rp,NotEqualStencilFunc:aw,NumberKeyframeTrack:Bh,Object3D:Bn,ObjectLoader:vO,ObjectSpaceNormalMap:Y2,OctahedronGeometry:Hg,OneFactor:y2,OneMinusConstantAlphaFactor:w2,OneMinusConstantColorFactor:B2,OneMinusDstAlphaFactor:M2,OneMinusDstColorFactor:T2,OneMinusSrcAlphaFactor:__,OneMinusSrcColorFactor:A2,OrthographicCamera:Rl,PCFShadowMap:fy,PCFSoftShadowMap:W0,PMREMGenerator:DS,Path:Q_,PerspectiveCamera:_i,Plane:yu,PlaneGeometry:Zp,PlaneHelper:oN,PointLight:P1,PointLightHelper:QO,Points:A1,PointsMaterial:Dy,PolarGridHelper:nN,PolyhedronGeometry:Yc,PositionalAudio:MO,PropertyBinding:wn,PropertyMixer:Y3,QuadraticBezierCurve:C1,QuadraticBezierCurve3:R1,Quaternion:Da,QuaternionKeyframeTrack:Dh,QuaternionLinearInterpolant:N3,RED_GREEN_RGTC2_Format:q_,RED_RGTC1_Format:k_,REVISION:Nh,RGBADepthPacking:Ay,RGBAFormat:ss,RGBAIntegerFormat:yy,RGBA_ASTC_10x10_Format:P_,RGBA_ASTC_10x5_Format:L_,RGBA_ASTC_10x6_Format:I_,RGBA_ASTC_10x8_Format:z_,RGBA_ASTC_12x10_Format:F_,RGBA_ASTC_12x12_Format:H_,RGBA_ASTC_4x4_Format:C_,RGBA_ASTC_5x4_Format:R_,RGBA_ASTC_5x5_Format:B_,RGBA_ASTC_6x5_Format:D_,RGBA_ASTC_6x6_Format:w_,RGBA_ASTC_8x5_Format:U_,RGBA_ASTC_8x6_Format:O_,RGBA_ASTC_8x8_Format:N_,RGBA_BPTC_Format:G_,RGBA_ETC2_EAC_Format:T_,RGBA_PVRTC_2BPPV1_Format:S_,RGBA_PVRTC_4BPPV1_Format:A_,RGBA_S3TC_DXT1_Format:Z0,RGBA_S3TC_DXT3_Format:Q0,RGBA_S3TC_DXT5_Format:$0,RGBDepthPacking:kD,RGBFormat:c1,RGBIntegerFormat:XD,RGB_BPTC_SIGNED_Format:V_,RGB_BPTC_UNSIGNED_Format:X_,RGB_ETC1_Format:M_,RGB_ETC2_Format:E_,RGB_PVRTC_2BPPV1_Format:b_,RGB_PVRTC_4BPPV1_Format:y_,RGB_S3TC_DXT1_Format:j0,RGDepthPacking:YD,RGFormat:xy,RGIntegerFormat:_y,RawShaderMaterial:E3,Ray:Lh,Raycaster:J3,RectAreaLight:H1,RedFormat:vy,RedIntegerFormat:Ng,ReinhardToneMapping:L2,RenderTarget:m1,RenderTarget3D:PO,RepeatWrapping:Pc,ReplaceStencilOp:JD,ReverseSubtractEquation:g2,RingGeometry:Hy,SIGNED_RED_GREEN_RGTC2_Format:J_,SIGNED_RED_RGTC1_Format:Y_,SRGBColorSpace:Un,SRGBTransfer:Wn,Scene:_g,ShaderChunk:an,ShaderLib:No,ShaderMaterial:ji,ShadowMaterial:M3,Shape:_h,ShapeGeometry:Gy,ShapePath:cN,ShapeUtils:Io,ShortType:r1,Skeleton:zg,SkeletonHelper:ZO,SkinnedMesh:_1,Source:Cc,Sphere:wa,SphereGeometry:Gg,Spherical:RS,SphericalHarmonics3:P3,SplineCurve:B1,SpotLight:z1,SpotLightHelper:jO,Sprite:u3,SpriteMaterial:x1,SrcAlphaFactor:x_,SrcAlphaSaturateFactor:C2,SrcColorFactor:b2,StaticCopyUsage:fw,StaticDrawUsage:gg,StaticReadUsage:lw,StereoCamera:yO,StreamCopyUsage:dw,StreamDrawUsage:ow,StreamReadUsage:cw,StringKeyframeTrack:Ph,SubtractEquation:m2,SubtractiveBlending:xS,TOUCH:rh,TangentSpaceNormalMap:kc,TetrahedronGeometry:Vy,Texture:ei,TextureLoader:Vg,TextureUtils:gN,Timer:XO,TimestampQuery:mw,TorusGeometry:Xy,TorusKnotGeometry:ky,Triangle:Ws,TriangleFanDrawMode:K_,TriangleStripDrawMode:h1,TrianglesDrawMode:k2,TubeGeometry:Yy,UVMapping:hy,Uint16BufferAttribute:g1,Uint32BufferAttribute:v1,Uint8BufferAttribute:tU,Uint8ClampedBufferAttribute:nU,Uniform:ln,UniformsGroup:HO,UniformsLib:ft,UniformsUtils:s3,UnsignedByteType:ra,UnsignedInt101111Type:l1,UnsignedInt248Type:Eh,UnsignedInt5999Type:o1,UnsignedIntType:Bl,UnsignedShort4444Type:my,UnsignedShort5551Type:gy,UnsignedShortType:Dp,VSMShadowMap:Uo,Vector2:De,Vector3:j,Vector4:Cn,VectorKeyframeTrack:wh,VideoFrameTexture:EU,VideoTexture:h3,WebGL3DRenderTarget:Vw,WebGLArrayRenderTarget:Gw,WebGLCoordinateSystem:xr,WebGLCubeRenderTarget:o3,WebGLRenderTarget:Pi,WebGLRenderer:tR,WebGLUtils:eR,WebGPUCoordinateSystem:Np,WebXRController:h_,WireframeGeometry:S3,WrapAroundEnding:pg,ZeroCurvatureEnding:fh,ZeroFactor:_2,ZeroSlopeEnding:hh,ZeroStencilOp:qD,createCanvasElement:e3,error:kt,getConsoleFunction:yw,log:xg,setConsoleFunction:_w,warn:ht,warnOnce:Lp},Symbol.toStringTag,{value:"Module"}));var wA={exports:{}},UA={},OA={exports:{}},NA={};var tC;function n4(){if(tC)return NA;tC=1;var a=Kp();function e(v,_){return v===_&&(v!==0||1/v===1/_)||v!==v&&_!==_}var t=typeof Object.is=="function"?Object.is:e,n=a.useState,i=a.useEffect,r=a.useLayoutEffect,l=a.useDebugValue;function c(v,_){var y=_(),S=n({inst:{value:y,getSnapshot:_}}),E=S[0].inst,C=S[1];return r(function(){E.value=y,E.getSnapshot=_,d(E)&&C({inst:E})},[v,y,_]),i(function(){return d(E)&&C({inst:E}),v(function(){d(E)&&C({inst:E})})},[v]),l(y),y}function d(v){var _=v.getSnapshot;v=v.value;try{var y=_();return!t(v,y)}catch{return!0}}function p(v,_){return _()}var g=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:c;return NA.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:g,NA}var nC;function i4(){return nC||(nC=1,OA.exports=n4()),OA.exports}var iC;function a4(){if(iC)return UA;iC=1;var a=Kp(),e=i4();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:t,i=e.useSyncExternalStore,r=a.useRef,l=a.useEffect,c=a.useMemo,d=a.useDebugValue;return UA.useSyncExternalStoreWithSelector=function(p,g,v,_,y){var S=r(null);if(S.current===null){var E={hasValue:!1,value:null};S.current=E}else E=S.current;S=c(function(){function M(O){if(!B){if(B=!0,D=O,O=_(O),y!==void 0&&E.hasValue){var P=E.value;if(y(P,O))return w=P}return w=O}if(P=w,n(D,O))return P;var G=_(O);return y!==void 0&&y(P,G)?(D=O,P):(D=O,w=G)}var B=!1,D,w,z=v===void 0?null:v;return[function(){return M(g())},z===null?void 0:function(){return M(z())}]},[g,v,_,y]);var C=i(p,S[0],S[1]);return l(function(){E.hasValue=!0,E.value=C},[C]),d(C),C},UA}var aC;function s4(){return aC||(aC=1,wA.exports=a4()),wA.exports}var r4=s4();const o4=Ug(r4),sC=a=>{let e;const t=new Set,n=(p,g)=>{const v=typeof p=="function"?p(e):p;if(!Object.is(v,e)){const _=e;e=g??(typeof v!="object"||v===null)?v:Object.assign({},e,v),t.forEach(y=>y(e,_))}},i=()=>e,c={setState:n,getState:i,getInitialState:()=>d,subscribe:p=>(t.add(p),()=>t.delete(p))},d=e=a(n,i,c);return c},l4=(a=>a?sC(a):sC),{useSyncExternalStoreWithSelector:u4}=o4,c4=a=>a;function f4(a,e=c4,t){const n=u4(a.subscribe,a.getState,a.getInitialState,e,t);return TD.useDebugValue(n),n}const rC=(a,e)=>{const t=l4(a),n=(i,r=e)=>f4(t,i,r);return Object.assign(n,t),n},h4=((a,e)=>a?rC(a,e):rC),d4=a=>typeof a=="object"&&typeof a.then=="function",ph=[];function nR(a,e,t=(n,i)=>n===i){if(a===e)return!0;if(!a||!e)return!1;const n=a.length;if(e.length!==n)return!1;for(let i=0;i<n;i++)if(!t(a[i],e[i]))return!1;return!0}function iR(a,e=null,t=!1,n={}){e===null&&(e=[a]);for(const r of ph)if(nR(e,r.keys,r.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(r,"error"))throw r.error;if(Object.prototype.hasOwnProperty.call(r,"response"))return n.lifespan&&n.lifespan>0&&(r.timeout&&clearTimeout(r.timeout),r.timeout=setTimeout(r.remove,n.lifespan)),r.response;if(!t)throw r.promise}const i={keys:e,equal:n.equal,remove:()=>{const r=ph.indexOf(i);r!==-1&&ph.splice(r,1)},promise:(d4(a)?a:a(...e)).then(r=>{i.response=r,n.lifespan&&n.lifespan>0&&(i.timeout=setTimeout(i.remove,n.lifespan))}).catch(r=>i.error=r)};if(ph.push(i),!t)throw i.promise}const p4=(a,e,t)=>iR(a,e,!1,t),m4=(a,e,t)=>void iR(a,e,!0,t),g4=a=>{if(a===void 0||a.length===0)ph.splice(0,ph.length);else{const e=ph.find(t=>nR(a,t.keys,t.equal));e&&e.remove()}};var LA={exports:{}},IA={exports:{}},zA={exports:{}},PA={};var oC;function v4(){return oC||(oC=1,(function(a){function e(F,J){var Z=F.length;F.push(J);e:for(;0<Z;){var oe=Z-1>>>1,pe=F[oe];if(0<i(pe,J))F[oe]=J,F[Z]=pe,Z=oe;else break e}}function t(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var J=F[0],Z=F.pop();if(Z!==J){F[0]=Z;e:for(var oe=0,pe=F.length,q=pe>>>1;oe<q;){var se=2*(oe+1)-1,Ce=F[se],Ee=se+1,Ye=F[Ee];if(0>i(Ce,Z))Ee<pe&&0>i(Ye,Ce)?(F[oe]=Ye,F[Ee]=Z,oe=Ee):(F[oe]=Ce,F[se]=Z,oe=se);else if(Ee<pe&&0>i(Ye,Z))F[oe]=Ye,F[Ee]=Z,oe=Ee;else break e}}return J}function i(F,J){var Z=F.sortIndex-J.sortIndex;return Z!==0?Z:F.id-J.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;a.unstable_now=function(){return r.now()}}else{var l=Date,c=l.now();a.unstable_now=function(){return l.now()-c}}var d=[],p=[],g=1,v=null,_=3,y=!1,S=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function D(F){for(var J=t(p);J!==null;){if(J.callback===null)n(p);else if(J.startTime<=F)n(p),J.sortIndex=J.expirationTime,e(d,J);else break;J=t(p)}}function w(F){if(E=!1,D(F),!S)if(t(d)!==null)S=!0,le();else{var J=t(p);J!==null&&re(w,J.startTime-F)}}var z=!1,O=-1,P=5,G=-1;function L(){return!(a.unstable_now()-G<P)}function I(){if(z){var F=a.unstable_now();G=F;var J=!0;try{e:{S=!1,E&&(E=!1,M(O),O=-1),y=!0;var Z=_;try{t:{for(D(F),v=t(d);v!==null&&!(v.expirationTime>F&&L());){var oe=v.callback;if(typeof oe=="function"){v.callback=null,_=v.priorityLevel;var pe=oe(v.expirationTime<=F);if(F=a.unstable_now(),typeof pe=="function"){v.callback=pe,D(F),J=!0;break t}v===t(d)&&n(d),D(F)}else n(d);v=t(d)}if(v!==null)J=!0;else{var q=t(p);q!==null&&re(w,q.startTime-F),J=!1}}break e}finally{v=null,_=Z,y=!1}J=void 0}}finally{J?Y():z=!1}}}var Y;if(typeof B=="function")Y=function(){B(I)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,te=ee.port2;ee.port1.onmessage=I,Y=function(){te.postMessage(null)}}else Y=function(){C(I,0)};function le(){z||(z=!0,Y())}function re(F,J){O=C(function(){F(a.unstable_now())},J)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(F){F.callback=null},a.unstable_continueExecution=function(){S||y||(S=!0,le())},a.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<F?Math.floor(1e3/F):5},a.unstable_getCurrentPriorityLevel=function(){return _},a.unstable_getFirstCallbackNode=function(){return t(d)},a.unstable_next=function(F){switch(_){case 1:case 2:case 3:var J=3;break;default:J=_}var Z=_;_=J;try{return F()}finally{_=Z}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(F,J){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Z=_;_=F;try{return J()}finally{_=Z}},a.unstable_scheduleCallback=function(F,J,Z){var oe=a.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?oe+Z:oe):Z=oe,F){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=Z+pe,F={id:g++,callback:J,priorityLevel:F,startTime:Z,expirationTime:pe,sortIndex:-1},Z>oe?(F.sortIndex=Z,e(p,F),t(d)===null&&F===t(p)&&(E?(M(O),O=-1):E=!0,re(w,Z-oe))):(F.sortIndex=pe,e(d,F),S||y||(S=!0,le())),F},a.unstable_shouldYield=L,a.unstable_wrapCallback=function(F){var J=_;return function(){var Z=_;_=J;try{return F.apply(this,arguments)}finally{_=Z}}}})(PA)),PA}var lC;function x4(){return lC||(lC=1,zA.exports=v4()),zA.exports}var uC;function _4(){return uC||(uC=1,(function(a){a.exports=function(e){function t(u,f,x,A){return new Rm(u,f,x,A)}function n(){}function i(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)f+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(u){return u===null||typeof u!="object"?null:(u=Lm&&u[Lm]||u["@@iterator"],typeof u=="function"?u:null)}function l(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===Wl?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case qu:return"Fragment";case rr:return"Portal";case Nm:return"Profiler";case Om:return"StrictMode";case hd:return"Suspense";case ll:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case Ir:return(u.displayName||"Context")+".Provider";case ol:return(u._context.displayName||"Context")+".Consumer";case Ju:var f=u.render;return u=u.displayName,u||(u=f.displayName||f.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case xf:return f=u.displayName||null,f!==null?f:l(u.type)||"Memo";case or:f=u._payload,u=u._init;try{return l(u(f))}catch{}}return null}function c(u){if(dd===void 0)try{throw Error()}catch(x){var f=x.stack.trim().match(/\n( *(at )?)/);dd=f&&f[1]||"",Im=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+dd+u+Im}function d(u,f){if(!u||ul)return"";ul=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var A={DetermineComponentFrameRoot:function(){try{if(f){var ct=function(){throw Error()};if(Object.defineProperty(ct.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ct,[])}catch(Xt){var pt=Xt}Reflect.construct(u,[],ct)}else{try{ct.call()}catch(Xt){pt=Xt}u.call(ct.prototype)}}else{try{throw Error()}catch(Xt){pt=Xt}(ct=u())&&typeof ct.catch=="function"&&ct.catch(function(){})}}catch(Xt){if(Xt&&pt&&typeof Xt.stack=="string")return[Xt.stack,pt.stack]}return[null,null]}};A.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var R=Object.getOwnPropertyDescriptor(A.DetermineComponentFrameRoot,"name");R&&R.configurable&&Object.defineProperty(A.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var U=A.DetermineComponentFrameRoot(),k=U[0],ne=U[1];if(k&&ne){var de=k.split(`
`),Oe=ne.split(`
`);for(R=A=0;A<de.length&&!de[A].includes("DetermineComponentFrameRoot");)A++;for(;R<Oe.length&&!Oe[R].includes("DetermineComponentFrameRoot");)R++;if(A===de.length||R===Oe.length)for(A=de.length-1,R=Oe.length-1;1<=A&&0<=R&&de[A]!==Oe[R];)R--;for(;1<=A&&0<=R;A--,R--)if(de[A]!==Oe[R]){if(A!==1||R!==1)do if(A--,R--,0>R||de[A]!==Oe[R]){var nt=`
`+de[A].replace(" at new "," at ");return u.displayName&&nt.includes("<anonymous>")&&(nt=nt.replace("<anonymous>",u.displayName)),nt}while(1<=A&&0<=R);break}}}finally{ul=!1,Error.prepareStackTrace=x}return(x=u?u.displayName||u.name:"")?c(x):""}function p(u){switch(u.tag){case 26:case 27:case 5:return c(u.type);case 16:return c("Lazy");case 13:return c("Suspense");case 19:return c("SuspenseList");case 0:case 15:return u=d(u.type,!1),u;case 11:return u=d(u.type.render,!1),u;case 1:return u=d(u.type,!0),u;default:return""}}function g(u){try{var f="";do f+=p(u),u=u.return;while(u);return f}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function v(u){var f=u,x=u;if(u.alternate)for(;f.return;)f=f.return;else{u=f;do f=u,(f.flags&4098)!==0&&(x=f.return),u=f.return;while(u)}return f.tag===3?x:null}function _(u){if(v(u)!==u)throw Error(i(188))}function y(u){var f=u.alternate;if(!f){if(f=v(u),f===null)throw Error(i(188));return f!==u?null:u}for(var x=u,A=f;;){var R=x.return;if(R===null)break;var U=R.alternate;if(U===null){if(A=R.return,A!==null){x=A;continue}break}if(R.child===U.child){for(U=R.child;U;){if(U===x)return _(R),u;if(U===A)return _(R),f;U=U.sibling}throw Error(i(188))}if(x.return!==A.return)x=R,A=U;else{for(var k=!1,ne=R.child;ne;){if(ne===x){k=!0,x=R,A=U;break}if(ne===A){k=!0,A=R,x=U;break}ne=ne.sibling}if(!k){for(ne=U.child;ne;){if(ne===x){k=!0,x=U,A=R;break}if(ne===A){k=!0,A=U,x=R;break}ne=ne.sibling}if(!k)throw Error(i(189))}}if(x.alternate!==A)throw Error(i(190))}if(x.tag!==3)throw Error(i(188));return x.stateNode.current===x?u:f}function S(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(f=S(u),f!==null)return f;u=u.sibling}return null}function E(u){var f=u.tag;if(f===5||f===26||f===27||f===6)return u;for(u=u.child;u!==null;){if(u.tag!==4&&(f=E(u),f!==null))return f;u=u.sibling}return null}function C(u){return{current:u}}function M(u){0>yo||(u.current=Cf[yo],Cf[yo]=null,yo--)}function B(u,f){yo++,Cf[yo]=u.current,u.current=f}function D(u){return u>>>=0,u===0?32:31-(Rf(u)/Fv|0)|0}function w(u){var f=u&42;if(f!==0)return f;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function z(u,f){var x=u.pendingLanes;if(x===0)return 0;var A=0,R=u.suspendedLanes,U=u.pingedLanes,k=u.warmLanes;u=u.finishedLanes!==0;var ne=x&134217727;return ne!==0?(x=ne&~R,x!==0?A=w(x):(U&=ne,U!==0?A=w(U):u||(k=ne&~k,k!==0&&(A=w(k))))):(ne=x&~R,ne!==0?A=w(ne):U!==0?A=w(U):u||(k=x&~k,k!==0&&(A=w(k)))),A===0?0:f!==0&&f!==A&&(f&R)===0&&(R=A&-A,k=f&-f,R>=k||R===32&&(k&4194176)!==0)?f:A}function O(u,f){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&f)===0}function P(u,f){switch(u){case 1:case 2:case 4:case 8:return f+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function G(){var u=Zu;return Zu<<=1,(Zu&4194176)===0&&(Zu=128),u}function L(){var u=Bf;return Bf<<=1,(Bf&62914560)===0&&(Bf=4194304),u}function I(u){for(var f=[],x=0;31>x;x++)f.push(u);return f}function Y(u,f){u.pendingLanes|=f,f!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function ee(u,f,x,A,R,U){var k=u.pendingLanes;u.pendingLanes=x,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=x,u.entangledLanes&=x,u.errorRecoveryDisabledLanes&=x,u.shellSuspendCounter=0;var ne=u.entanglements,de=u.expirationTimes,Oe=u.hiddenUpdates;for(x=k&~x;0<x;){var nt=31-Ja(x),ct=1<<nt;ne[nt]=0,de[nt]=-1;var pt=Oe[nt];if(pt!==null)for(Oe[nt]=null,nt=0;nt<pt.length;nt++){var Xt=pt[nt];Xt!==null&&(Xt.lane&=-536870913)}x&=~ct}A!==0&&te(u,A,0),U!==0&&R===0&&u.tag!==0&&(u.suspendedLanes|=U&~(k&~f))}function te(u,f,x){u.pendingLanes|=f,u.suspendedLanes&=~f;var A=31-Ja(f);u.entangledLanes|=f,u.entanglements[A]=u.entanglements[A]|1073741824|x&4194218}function le(u,f){var x=u.entangledLanes|=f;for(u=u.entanglements;x;){var A=31-Ja(x),R=1<<A;R&f|u[A]&f&&(u[A]|=f),x&=~R}}function re(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function F(u){if(Ka&&typeof Ka.onCommitFiberRoot=="function")try{Ka.onCommitFiberRoot($u,u,void 0,(u.current.flags&128)===128)}catch{}}function J(u){if(typeof Xv=="function"&&d0(u),Ka&&typeof Ka.setStrictMode=="function")try{Ka.setStrictMode($u,u)}catch{}}function Z(u,f){return u===f&&(u!==0||1/u===1/f)||u!==u&&f!==f}function oe(u,f){if(typeof u=="object"&&u!==null){var x=Dd.get(u);return x!==void 0?x:(f={value:u,source:f,stack:g(f)},Dd.set(u,f),f)}return{value:u,source:f,stack:g(f)}}function pe(u,f){ii[pi++]=Uf,ii[pi++]=wf,wf=u,Uf=f}function q(u,f,x){xs[_s++]=Gr,xs[_s++]=Gs,xs[_s++]=lr,lr=u;var A=Gr;u=Gs;var R=32-Ja(A)-1;A&=~(1<<R),x+=1;var U=32-Ja(f)+R;if(30<U){var k=R-R%5;U=(A&(1<<k)-1).toString(32),A>>=k,R-=k,Gr=1<<32-Ja(f)+R|x<<R|A,Gs=U+u}else Gr=1<<U|x<<R|A,Gs=u}function se(u){u.return!==null&&(pe(u,1),q(u,1,0))}function Ce(u){for(;u===wf;)wf=ii[--pi],ii[pi]=null,Uf=ii[--pi],ii[pi]=null;for(;u===lr;)lr=xs[--_s],xs[_s]=null,Gs=xs[--_s],xs[_s]=null,Gr=xs[--_s],xs[_s]=null}function Ee(u,f){B(ur,f),B(Of,u),B(na,null),u=jl(f),M(na),B(na,u)}function Ye(){M(na),M(Of),M(ur)}function ge(u){u.memoizedState!==null&&B(ec,u);var f=na.current,x=xv(f,u.type);f!==x&&(B(Of,u),B(na,x))}function Re(u){Of.current===u&&(M(na),M(Of)),ec.current===u&&(M(ec),Pr?Ht._currentValue=qa:Ht._currentValue2=qa)}function $e(u){var f=Error(i(418,""));throw Ct(oe(f,u)),Nf}function ut(u,f){if(!Ia)throw Error(i(175));ab(u.stateNode,u.type,u.memoizedProps,f,u)||$e(u)}function vt(u){for(Ma=u.return;Ma;)switch(Ma.tag){case 3:case 27:Vs=!0;return;case 5:case 13:Vs=!1;return;default:Ma=Ma.return}}function Pt(u){if(!Ia||u!==Ma)return!1;if(!An)return vt(u),An=!0,!1;var f=!1;if(fa?u.tag!==3&&u.tag!==27&&(u.tag!==5||Nv(u.type)&&!hl(u.type,u.memoizedProps))&&(f=!0):u.tag!==3&&(u.tag!==5||Nv(u.type)&&!hl(u.type,u.memoizedProps))&&(f=!0),f&&da&&$e(u),vt(u),u.tag===13){if(!Ia)throw Error(i(316));if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));da=Uv(u)}else da=Ma?e0(u.stateNode):null;return!0}function sn(){Ia&&(da=Ma=null,An=!1)}function Ct(u){ys===null?ys=[u]:ys.push(u)}function ze(){for(var u=pl,f=tc=pl=0;f<u;){var x=bs[f];bs[f++]=null;var A=bs[f];bs[f++]=null;var R=bs[f];bs[f++]=null;var U=bs[f];if(bs[f++]=null,A!==null&&R!==null){var k=A.pending;k===null?R.next=R:(R.next=k.next,k.next=R),A.pending=R}U!==0&&et(x,R,U)}}function W(u,f,x,A){bs[pl++]=u,bs[pl++]=f,bs[pl++]=x,bs[pl++]=A,tc|=A,u.lanes|=A,u=u.alternate,u!==null&&(u.lanes|=A)}function He(u,f,x,A){return W(u,f,x,A),Ve(u)}function ke(u,f){return W(u,null,null,f),Ve(u)}function et(u,f,x){u.lanes|=x;var A=u.alternate;A!==null&&(A.lanes|=x);for(var R=!1,U=u.return;U!==null;)U.childLanes|=x,A=U.alternate,A!==null&&(A.childLanes|=x),U.tag===22&&(u=U.stateNode,u===null||u._visibility&1||(R=!0)),u=U,U=U.return;R&&f!==null&&u.tag===3&&(U=u.stateNode,R=31-Ja(x),U=U.hiddenUpdates,u=U[R],u===null?U[R]=[f]:u.push(f),f.lane=x|536870912)}function Ve(u){if(50<ou)throw ou=0,Fa=null,Error(i(185));for(var f=u.return;f!==null;)u=f,f=u.return;return u.tag===3?u.stateNode:null}function ot(u){u!==eu&&u.next===null&&(eu===null?nc=eu=u:eu=eu.next=u),If=!0,Lf||(Lf=!0,we(dt))}function it(u,f){if(!cr&&If){cr=!0;do for(var x=!1,A=nc;A!==null;){if(u!==0){var R=A.pendingLanes;if(R===0)var U=0;else{var k=A.suspendedLanes,ne=A.pingedLanes;U=(1<<31-Ja(42|u)+1)-1,U&=R&~(k&~ne),U=U&201326677?U&201326677|1:U?U|2:0}U!==0&&(x=!0,me(A,U))}else U=tn,U=z(A,A===on?U:0),(U&3)===0||O(A,U)||(x=!0,me(A,U));A=A.next}while(x);cr=!1}}function dt(){If=Lf=!1;var u=0;ml!==0&&(dl()&&(u=ml),ml=0);for(var f=ha(),x=null,A=nc;A!==null;){var R=A.next,U=K(A,f);U===0?(A.next=null,x===null?nc=R:x.next=R,R===null&&(eu=x)):(x=A,(u!==0||(U&3)!==0)&&(If=!0)),A=R}it(u)}function K(u,f){for(var x=u.suspendedLanes,A=u.pingedLanes,R=u.expirationTimes,U=u.pendingLanes&-62914561;0<U;){var k=31-Ja(U),ne=1<<k,de=R[k];de===-1?((ne&x)===0||(ne&A)!==0)&&(R[k]=P(ne,f)):de<=f&&(u.expiredLanes|=ne),U&=~ne}if(f=on,x=tn,x=z(u,u===f?x:0),A=u.callbackNode,x===0||u===f&&Yn===2||u.cancelPendingCommit!==null)return A!==null&&A!==null&&Df(A),u.callbackNode=null,u.callbackPriority=0;if((x&3)===0||O(u,x)){if(f=x&-x,f===u.callbackPriority)return f;switch(A!==null&&Df(A),re(x)){case 2:case 8:x=Vv;break;case 32:x=Rd;break;case 268435456:x=Bd;break;default:x=Rd}return A=H.bind(null,u),x=Qu(x,A),u.callbackPriority=f,u.callbackNode=x,f}return A!==null&&A!==null&&Df(A),u.callbackPriority=2,u.callbackNode=null,2}function H(u,f){var x=u.callbackNode;if(ea()&&u.callbackNode!==x)return null;var A=tn;return A=z(u,u===on?A:0),A===0?null:(df(u,A,f),K(u,ha()),u.callbackNode!=null&&u.callbackNode===x?H.bind(null,u):null)}function me(u,f){if(ea())return null;df(u,f,!0)}function we(u){Oi?vd(function(){(Dt&6)!==0?Qu(h0,u):u()}):Qu(h0,u)}function Fe(){return ml===0&&(ml=G()),ml}function Te(u,f){if(zf===null){var x=zf=[];wd=0,Wa=Fe(),gl={status:"pending",value:void 0,then:function(A){x.push(A)}}}return wd++,f.then(yt,yt),f}function yt(){if(--wd===0&&zf!==null){gl!==null&&(gl.status="fulfilled");var u=zf;zf=null,Wa=0,gl=null;for(var f=0;f<u.length;f++)(0,u[f])()}}function at(u,f){var x=[],A={status:"pending",value:null,reason:null,then:function(R){x.push(R)}};return u.then(function(){A.status="fulfilled",A.value=f;for(var R=0;R<x.length;R++)(0,x[R])(f)},function(R){for(A.status="rejected",A.reason=R,R=0;R<x.length;R++)(0,x[R])(void 0)}),A}function St(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xt(u,f){u=u.updateQueue,f.updateQueue===u&&(f.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function Ie(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function Ge(u,f,x){var A=u.updateQueue;if(A===null)return null;if(A=A.shared,(Dt&2)!==0){var R=A.pending;return R===null?f.next=f:(f.next=R.next,R.next=f),A.pending=f,f=Ve(u),et(u,null,x),f}return W(u,A,f,x),Ve(u)}function _t(u,f,x){if(f=f.updateQueue,f!==null&&(f=f.shared,(x&4194176)!==0)){var A=f.lanes;A&=u.pendingLanes,x|=A,f.lanes=x,le(u,x)}}function $(u,f){var x=u.updateQueue,A=u.alternate;if(A!==null&&(A=A.updateQueue,x===A)){var R=null,U=null;if(x=x.firstBaseUpdate,x!==null){do{var k={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};U===null?R=U=k:U=U.next=k,x=x.next}while(x!==null);U===null?R=U=f:U=U.next=f}else R=U=f;x={baseState:A.baseState,firstBaseUpdate:R,lastBaseUpdate:U,shared:A.shared,callbacks:A.callbacks},u.updateQueue=x;return}u=x.lastBaseUpdate,u===null?x.firstBaseUpdate=f:u.next=f,x.lastBaseUpdate=f}function ye(){if(ic){var u=gl;if(u!==null)throw u}}function qe(u,f,x,A){ic=!1;var R=u.updateQueue;bo=!1;var U=R.firstBaseUpdate,k=R.lastBaseUpdate,ne=R.shared.pending;if(ne!==null){R.shared.pending=null;var de=ne,Oe=de.next;de.next=null,k===null?U=Oe:k.next=Oe,k=de;var nt=u.alternate;nt!==null&&(nt=nt.updateQueue,ne=nt.lastBaseUpdate,ne!==k&&(ne===null?nt.firstBaseUpdate=Oe:ne.next=Oe,nt.lastBaseUpdate=de))}if(U!==null){var ct=R.baseState;k=0,nt=Oe=de=null,ne=U;do{var pt=ne.lane&-536870913,Xt=pt!==ne.lane;if(Xt?(tn&pt)===pt:(A&pt)===pt){pt!==0&&pt===Wa&&(ic=!0),nt!==null&&(nt=nt.next={lane:0,tag:ne.tag,payload:ne.payload,callback:null,next:null});e:{var $a=u,Gf=ne;pt=f;var lu=x;switch(Gf.tag){case 1:if($a=Gf.payload,typeof $a=="function"){ct=$a.call(lu,ct,pt);break e}ct=$a;break e;case 3:$a.flags=$a.flags&-65537|128;case 0:if($a=Gf.payload,pt=typeof $a=="function"?$a.call(lu,ct,pt):$a,pt==null)break e;ct=Kl({},ct,pt);break e;case 2:bo=!0}}pt=ne.callback,pt!==null&&(u.flags|=64,Xt&&(u.flags|=8192),Xt=R.callbacks,Xt===null?R.callbacks=[pt]:Xt.push(pt))}else Xt={lane:pt,tag:ne.tag,payload:ne.payload,callback:ne.callback,next:null},nt===null?(Oe=nt=Xt,de=ct):nt=nt.next=Xt,k|=pt;if(ne=ne.next,ne===null){if(ne=R.shared.pending,ne===null)break;Xt=ne,ne=Xt.next,Xt.next=null,R.lastBaseUpdate=Xt,R.shared.pending=null}}while(!0);nt===null&&(de=ct),R.baseState=de,R.firstBaseUpdate=Oe,R.lastBaseUpdate=nt,U===null&&(R.shared.lanes=0),Es|=k,u.lanes=k,u.memoizedState=ct}}function Q(u,f){if(typeof u!="function")throw Error(i(191,u));u.call(f)}function Je(u,f){var x=u.callbacks;if(x!==null)for(u.callbacks=null,u=0;u<x.length;u++)Q(x[u],f)}function We(u,f){if(vs(u,f))return!0;if(typeof u!="object"||u===null||typeof f!="object"||f===null)return!1;var x=Object.keys(u),A=Object.keys(f);if(x.length!==A.length)return!1;for(A=0;A<x.length;A++){var R=x[A];if(!Pf.call(f,R)||!vs(u[R],f[R]))return!1}return!0}function Ze(u){return u=u.status,u==="fulfilled"||u==="rejected"}function Xe(){}function Ne(u,f,x){switch(x=u[x],x===void 0?u.push(f):x!==f&&(f.then(Xe,Xe),f=x),f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,u===Gn?Error(i(483)):u;default:if(typeof f.status=="string")f.then(Xe,Xe);else{if(u=on,u!==null&&100<u.shellSuspendCounter)throw Error(i(482));u=f,u.status="pending",u.then(function(A){if(f.status==="pending"){var R=f;R.status="fulfilled",R.value=A}},function(A){if(f.status==="pending"){var R=f;R.status="rejected",R.reason=A}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw u=f.reason,u===Gn?Error(i(483)):u}throw tu=f,Gn}}function lt(){if(tu===null)throw Error(i(459));var u=tu;return tu=null,u}function Mt(u){var f=Xs;return Xs+=1,Vr===null&&(Vr=[]),Ne(Vr,u,f)}function rn(u,f){f=f.props.ref,u.ref=f!==void 0?f:null}function Wt(u,f){throw f.$$typeof===Um?Error(i(525)):(u=Object.prototype.toString.call(f),Error(i(31,u==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":u)))}function li(u){var f=u._init;return f(u._payload)}function Fi(u){function f(be,fe){if(u){var Me=be.deletions;Me===null?(be.deletions=[fe],be.flags|=16):Me.push(fe)}}function x(be,fe){if(!u)return null;for(;fe!==null;)f(be,fe),fe=fe.sibling;return null}function A(be){for(var fe=new Map;be!==null;)be.key!==null?fe.set(be.key,be):fe.set(be.index,be),be=be.sibling;return fe}function R(be,fe){return be=Aa(be,fe),be.index=0,be.sibling=null,be}function U(be,fe,Me){return be.index=Me,u?(Me=be.alternate,Me!==null?(Me=Me.index,Me<fe?(be.flags|=33554434,fe):Me):(be.flags|=33554434,fe)):(be.flags|=1048576,fe)}function k(be){return u&&be.alternate===null&&(be.flags|=33554434),be}function ne(be,fe,Me,je){return fe===null||fe.tag!==6?(fe=rl(Me,be.mode,je),fe.return=be,fe):(fe=R(fe,Me),fe.return=be,fe)}function de(be,fe,Me,je){var Tt=Me.type;return Tt===qu?nt(be,fe,Me.props.children,je,Me.key):fe!==null&&(fe.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===or&&li(Tt)===fe.type)?(fe=R(fe,Me.props),rn(fe,Me),fe.return=be,fe):(fe=Fs(Me.type,Me.key,Me.props,null,be.mode,je),rn(fe,Me),fe.return=be,fe)}function Oe(be,fe,Me,je){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==Me.containerInfo||fe.stateNode.implementation!==Me.implementation?(fe=Yu(Me,be.mode,je),fe.return=be,fe):(fe=R(fe,Me.children||[]),fe.return=be,fe)}function nt(be,fe,Me,je,Tt){return fe===null||fe.tag!==7?(fe=mo(Me,be.mode,je,Tt),fe.return=be,fe):(fe=R(fe,Me),fe.return=be,fe)}function ct(be,fe,Me){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return fe=rl(""+fe,be.mode,Me),fe.return=be,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case go:return Me=Fs(fe.type,fe.key,fe.props,null,be.mode,Me),rn(Me,fe),Me.return=be,Me;case rr:return fe=Yu(fe,be.mode,Me),fe.return=be,fe;case or:var je=fe._init;return fe=je(fe._payload),ct(be,fe,Me)}if(cl(fe)||r(fe))return fe=mo(fe,be.mode,Me,null),fe.return=be,fe;if(typeof fe.then=="function")return ct(be,Mt(fe),Me);if(fe.$$typeof===Ir)return ct(be,lf(be,fe),Me);Wt(be,fe)}return null}function pt(be,fe,Me,je){var Tt=fe!==null?fe.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint")return Tt!==null?null:ne(be,fe,""+Me,je);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case go:return Me.key===Tt?de(be,fe,Me,je):null;case rr:return Me.key===Tt?Oe(be,fe,Me,je):null;case or:return Tt=Me._init,Me=Tt(Me._payload),pt(be,fe,Me,je)}if(cl(Me)||r(Me))return Tt!==null?null:nt(be,fe,Me,je,null);if(typeof Me.then=="function")return pt(be,fe,Mt(Me),je);if(Me.$$typeof===Ir)return pt(be,fe,lf(be,Me),je);Wt(be,Me)}return null}function Xt(be,fe,Me,je,Tt){if(typeof je=="string"&&je!==""||typeof je=="number"||typeof je=="bigint")return be=be.get(Me)||null,ne(fe,be,""+je,Tt);if(typeof je=="object"&&je!==null){switch(je.$$typeof){case go:return be=be.get(je.key===null?Me:je.key)||null,de(fe,be,je,Tt);case rr:return be=be.get(je.key===null?Me:je.key)||null,Oe(fe,be,je,Tt);case or:var Zn=je._init;return je=Zn(je._payload),Xt(be,fe,Me,je,Tt)}if(cl(je)||r(je))return be=be.get(Me)||null,nt(fe,be,je,Tt,null);if(typeof je.then=="function")return Xt(be,fe,Me,Mt(je),Tt);if(je.$$typeof===Ir)return Xt(be,fe,Me,lf(fe,je),Tt);Wt(fe,je)}return null}function $a(be,fe,Me,je){for(var Tt=null,Zn=null,Gt=fe,Mn=fe=0,Yi=null;Gt!==null&&Mn<Me.length;Mn++){Gt.index>Mn?(Yi=Gt,Gt=null):Yi=Gt.sibling;var En=pt(be,Gt,Me[Mn],je);if(En===null){Gt===null&&(Gt=Yi);break}u&&Gt&&En.alternate===null&&f(be,Gt),fe=U(En,fe,Mn),Zn===null?Tt=En:Zn.sibling=En,Zn=En,Gt=Yi}if(Mn===Me.length)return x(be,Gt),An&&pe(be,Mn),Tt;if(Gt===null){for(;Mn<Me.length;Mn++)Gt=ct(be,Me[Mn],je),Gt!==null&&(fe=U(Gt,fe,Mn),Zn===null?Tt=Gt:Zn.sibling=Gt,Zn=Gt);return An&&pe(be,Mn),Tt}for(Gt=A(Gt);Mn<Me.length;Mn++)Yi=Xt(Gt,be,Mn,Me[Mn],je),Yi!==null&&(u&&Yi.alternate!==null&&Gt.delete(Yi.key===null?Mn:Yi.key),fe=U(Yi,fe,Mn),Zn===null?Tt=Yi:Zn.sibling=Yi,Zn=Yi);return u&&Gt.forEach(function(Ro){return f(be,Ro)}),An&&pe(be,Mn),Tt}function Gf(be,fe,Me,je){if(Me==null)throw Error(i(151));for(var Tt=null,Zn=null,Gt=fe,Mn=fe=0,Yi=null,En=Me.next();Gt!==null&&!En.done;Mn++,En=Me.next()){Gt.index>Mn?(Yi=Gt,Gt=null):Yi=Gt.sibling;var Ro=pt(be,Gt,En.value,je);if(Ro===null){Gt===null&&(Gt=Yi);break}u&&Gt&&Ro.alternate===null&&f(be,Gt),fe=U(Ro,fe,Mn),Zn===null?Tt=Ro:Zn.sibling=Ro,Zn=Ro,Gt=Yi}if(En.done)return x(be,Gt),An&&pe(be,Mn),Tt;if(Gt===null){for(;!En.done;Mn++,En=Me.next())En=ct(be,En.value,je),En!==null&&(fe=U(En,fe,Mn),Zn===null?Tt=En:Zn.sibling=En,Zn=En);return An&&pe(be,Mn),Tt}for(Gt=A(Gt);!En.done;Mn++,En=Me.next())En=Xt(Gt,be,Mn,En.value,je),En!==null&&(u&&En.alternate!==null&&Gt.delete(En.key===null?Mn:En.key),fe=U(En,fe,Mn),Zn===null?Tt=En:Zn.sibling=En,Zn=En);return u&&Gt.forEach(function(Hd){return f(be,Hd)}),An&&pe(be,Mn),Tt}function lu(be,fe,Me,je){if(typeof Me=="object"&&Me!==null&&Me.type===qu&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case go:e:{for(var Tt=Me.key;fe!==null;){if(fe.key===Tt){if(Tt=Me.type,Tt===qu){if(fe.tag===7){x(be,fe.sibling),je=R(fe,Me.props.children),je.return=be,be=je;break e}}else if(fe.elementType===Tt||typeof Tt=="object"&&Tt!==null&&Tt.$$typeof===or&&li(Tt)===fe.type){x(be,fe.sibling),je=R(fe,Me.props),rn(je,Me),je.return=be,be=je;break e}x(be,fe);break}else f(be,fe);fe=fe.sibling}Me.type===qu?(je=mo(Me.props.children,be.mode,je,Me.key),je.return=be,be=je):(je=Fs(Me.type,Me.key,Me.props,null,be.mode,je),rn(je,Me),je.return=be,be=je)}return k(be);case rr:e:{for(Tt=Me.key;fe!==null;){if(fe.key===Tt)if(fe.tag===4&&fe.stateNode.containerInfo===Me.containerInfo&&fe.stateNode.implementation===Me.implementation){x(be,fe.sibling),je=R(fe,Me.children||[]),je.return=be,be=je;break e}else{x(be,fe);break}else f(be,fe);fe=fe.sibling}je=Yu(Me,be.mode,je),je.return=be,be=je}return k(be);case or:return Tt=Me._init,Me=Tt(Me._payload),lu(be,fe,Me,je)}if(cl(Me))return $a(be,fe,Me,je);if(r(Me)){if(Tt=r(Me),typeof Tt!="function")throw Error(i(150));return Me=Tt.call(Me),Gf(be,fe,Me,je)}if(typeof Me.then=="function")return lu(be,fe,Mt(Me),je);if(Me.$$typeof===Ir)return lu(be,fe,lf(be,Me),je);Wt(be,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"||typeof Me=="bigint"?(Me=""+Me,fe!==null&&fe.tag===6?(x(be,fe.sibling),je=R(fe,Me),je.return=be,be=je):(x(be,fe),je=rl(Me,be.mode,je),je.return=be,be=je),k(be)):x(be,fe)}return function(be,fe,Me,je){try{Xs=0;var Tt=lu(be,fe,Me,je);return Vr=null,Tt}catch(Gt){if(Gt===Gn)throw Gt;var Zn=t(29,Gt,null,be.mode);return Zn.lanes=je,Zn.return=be,Zn}finally{}}}function Wc(u,f){u=fr,B(As,u),B(Xr,f),fr=u|f.baseLanes}function Ul(){B(As,fr),B(Xr,Xr.current)}function Ol(){fr=As.current,M(Xr),M(As)}function Zi(u){var f=u.alternate;B(Ni,Ni.current&1),B(Ss,u),ks===null&&(f===null||Xr.current!==null||f.memoizedState!==null)&&(ks=u)}function Xo(u){if(u.tag===22){if(B(Ni,Ni.current),B(Ss,u),ks===null){var f=u.alternate;f!==null&&f.memoizedState!==null&&(ks=u)}}else zs()}function zs(){B(Ni,Ni.current),B(Ss,Ss.current)}function cs(u){M(Ss),ks===u&&(ks=null),M(Ni)}function xa(u){for(var f=u;f!==null;){if(f.tag===13){var x=f.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||Ad(x)||Tf(x)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function $t(){throw Error(i(321))}function Ai(u,f){if(f===null)return!1;for(var x=0;x<f.length&&x<u.length;x++)if(!vs(u[x],f[x]))return!1;return!0}function tr(u,f,x,A,R,U){return kr=U,jt=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,Lt.H=u===null||u.memoizedState===null?Li:Ea,Ao=!1,U=x(A,R),Ao=!1,ai&&(U=Hh(f,x,A,R)),Nl(u),U}function Nl(u){Lt.H=Sn;var f=On!==null&&On.next!==null;if(kr=0,Ei=On=jt=null,Ys=!1,mi=0,ac=null,f)throw Error(i(300));u===null||Ti||(u=u.dependencies,u!==null&&Wo(u)&&(Ti=!0))}function Hh(u,f,x,A){jt=u;var R=0;do{if(ai&&(ac=null),mi=0,ai=!1,25<=R)throw Error(i(301));if(R+=1,Ei=On=null,u.updateQueue!=null){var U=u.updateQueue;U.lastEffect=null,U.events=null,U.stores=null,U.memoCache!=null&&(U.memoCache.index=0)}Lt.H=xl,U=f(x,A)}while(ai);return U}function nm(){var u=Lt.H,f=u.useState()[0];return f=typeof f.then=="function"?ue(f):f,u=u.useState()[0],(On!==null?On.memoizedState:null)!==u&&(jt.flags|=1024),f}function Du(){var u=Ff!==0;return Ff=0,u}function ao(u,f,x){f.updateQueue=u.updateQueue,f.flags&=-2053,u.lanes&=~x}function Ll(u){if(Ys){for(u=u.memoizedState;u!==null;){var f=u.queue;f!==null&&(f.pending=null),u=u.next}Ys=!1}kr=0,Ei=On=jt=null,ai=!1,mi=Ff=0,ac=null}function Si(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ei===null?jt.memoizedState=Ei=u:Ei=Ei.next=u,Ei}function V(){if(On===null){var u=jt.alternate;u=u!==null?u.memoizedState:null}else u=On.next;var f=Ei===null?jt.memoizedState:Ei.next;if(f!==null)Ei=f,On=u;else{if(u===null)throw jt.alternate===null?Error(i(467)):Error(i(310));On=u,u={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},Ei===null?jt.memoizedState=Ei=u:Ei=Ei.next=u}return Ei}function ue(u){var f=mi;return mi+=1,ac===null&&(ac=[]),u=Ne(ac,u,f),f=jt,(Ei===null?f.memoizedState:Ei.next)===null&&(f=f.alternate,Lt.H=f===null||f.memoizedState===null?Li:Ea),u}function Ae(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return ue(u);if(u.$$typeof===Ir)return la(u)}throw Error(i(438,String(u)))}function ve(u){var f=null,x=jt.updateQueue;if(x!==null&&(f=x.memoCache),f==null){var A=jt.alternate;A!==null&&(A=A.updateQueue,A!==null&&(A=A.memoCache,A!=null&&(f={data:A.data.map(function(R){return R.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),x===null&&(x=Od(),jt.updateQueue=x),x.memoCache=f,x=f.data[f.index],x===void 0)for(x=f.data[f.index]=Array(u),A=0;A<u;A++)x[A]=vv;return f.index++,x}function ce(u,f){return typeof f=="function"?f(u):f}function tt(u){var f=V();return st(f,On,u)}function st(u,f,x){var A=u.queue;if(A===null)throw Error(i(311));A.lastRenderedReducer=x;var R=u.baseQueue,U=A.pending;if(U!==null){if(R!==null){var k=R.next;R.next=U.next,U.next=k}f.baseQueue=R=U,A.pending=null}if(U=u.baseState,R===null)u.memoizedState=U;else{f=R.next;var ne=k=null,de=null,Oe=f,nt=!1;do{var ct=Oe.lane&-536870913;if(ct!==Oe.lane?(tn&ct)===ct:(kr&ct)===ct){var pt=Oe.revertLane;if(pt===0)de!==null&&(de=de.next={lane:0,revertLane:0,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null}),ct===Wa&&(nt=!0);else if((kr&pt)===pt){Oe=Oe.next,pt===Wa&&(nt=!0);continue}else ct={lane:0,revertLane:Oe.revertLane,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},de===null?(ne=de=ct,k=U):de=de.next=ct,jt.lanes|=pt,Es|=pt;ct=Oe.action,Ao&&x(U,ct),U=Oe.hasEagerState?Oe.eagerState:x(U,ct)}else pt={lane:ct,revertLane:Oe.revertLane,action:Oe.action,hasEagerState:Oe.hasEagerState,eagerState:Oe.eagerState,next:null},de===null?(ne=de=pt,k=U):de=de.next=pt,jt.lanes|=ct,Es|=ct;Oe=Oe.next}while(Oe!==null&&Oe!==f);if(de===null?k=U:de.next=ne,!vs(U,u.memoizedState)&&(Ti=!0,nt&&(x=gl,x!==null)))throw x;u.memoizedState=U,u.baseState=k,u.baseQueue=de,A.lastRenderedState=U}return R===null&&(A.lanes=0),[u.memoizedState,A.dispatch]}function mt(u){var f=V(),x=f.queue;if(x===null)throw Error(i(311));x.lastRenderedReducer=u;var A=x.dispatch,R=x.pending,U=f.memoizedState;if(R!==null){x.pending=null;var k=R=R.next;do U=u(U,k.action),k=k.next;while(k!==R);vs(U,f.memoizedState)||(Ti=!0),f.memoizedState=U,f.baseQueue===null&&(f.baseState=U),x.lastRenderedState=U}return[U,A]}function gt(u,f,x){var A=jt,R=V(),U=An;if(U){if(x===void 0)throw Error(i(407));x=x()}else x=f();var k=!vs((On||R).memoizedState,x);if(k&&(R.memoizedState=x,Ti=!0),R=R.queue,Zc(Rt.bind(null,A,R,u),[u]),R.getSnapshot!==f||k||Ei!==null&&Ei.memoizedState.tag&1){if(A.flags|=2048,fi(9,Nt.bind(null,A,R,x,f),{destroy:void 0},null),on===null)throw Error(i(349));U||(kr&60)!==0||Ut(A,f,x)}return x}function Ut(u,f,x){u.flags|=16384,u={getSnapshot:f,value:x},f=jt.updateQueue,f===null?(f=Od(),jt.updateQueue=f,f.stores=[u]):(x=f.stores,x===null?f.stores=[u]:x.push(u))}function Nt(u,f,x,A){f.value=x,f.getSnapshot=A,Jt(f)&&gn(u)}function Rt(u,f,x){return x(function(){Jt(f)&&gn(u)})}function Jt(u){var f=u.getSnapshot;u=u.value;try{var x=f();return!vs(u,x)}catch{return!0}}function gn(u){var f=ke(u,2);f!==null&&ba(f,u,2)}function vn(u){var f=Si();if(typeof u=="function"){var x=u;if(u=x(),Ao){J(!0);try{x()}finally{J(!1)}}}return f.memoizedState=f.baseState=u,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ce,lastRenderedState:u},f}function un(u,f,x,A){return u.baseState=x,st(u,On,typeof A=="function"?A:ce)}function Nn(u,f,x,A,R){if(Pl(u))throw Error(i(485));if(u=f.action,u!==null){var U={payload:R,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){U.listeners.push(k)}};Lt.T!==null?x(!0):U.isTransition=!1,A(U),x=f.pending,x===null?(U.next=f.pending=U,wt(f,U)):(U.next=x.next,f.pending=x.next=U)}}function wt(u,f){var x=f.action,A=f.payload,R=u.state;if(f.isTransition){var U=Lt.T,k={};Lt.T=k;try{var ne=x(R,A),de=Lt.S;de!==null&&de(k,ne),Xn(u,f,ne)}catch(Oe){Ui(u,f,Oe)}finally{Lt.T=U}}else try{U=x(R,A),Xn(u,f,U)}catch(Oe){Ui(u,f,Oe)}}function Xn(u,f,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(A){cn(u,f,A)},function(A){return Ui(u,f,A)}):cn(u,f,x)}function cn(u,f,x){f.status="fulfilled",f.value=x,so(f),u.state=x,f=u.pending,f!==null&&(x=f.next,x===f?u.pending=null:(x=x.next,f.next=x,wt(u,x)))}function Ui(u,f,x){var A=u.pending;if(u.pending=null,A!==null){A=A.next;do f.status="rejected",f.reason=x,so(f),f=f.next;while(f!==A)}u.action=null}function so(u){u=u.listeners;for(var f=0;f<u.length;f++)(0,u[f])()}function qn(u,f){return f}function Rr(u,f){if(An){var x=on.formState;if(x!==null){e:{var A=jt;if(An){if(da){var R=Mv(da,Vs);if(R){da=e0(R),A=Ev(R);break e}}$e(A)}A=!1}A&&(f=x[0])}}x=Si(),x.memoizedState=x.baseState=f,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qn,lastRenderedState:f},x.queue=A,x=kh.bind(null,jt,A),A.dispatch=x,A=vn(!1);var U=Yh.bind(null,jt,!1,A.queue);return A=Si(),R={state:f,dispatch:null,action:u,pending:null},A.queue=R,x=Nn.bind(null,jt,R,U,x),R.dispatch=x,A.memoizedState=u,[f,x,!1]}function Jn(u){var f=V();return Hi(f,On,u)}function Hi(u,f,x){f=st(u,f,qn)[0],u=tt(ce)[0],f=typeof f=="object"&&f!==null&&typeof f.then=="function"?ue(f):f;var A=V(),R=A.queue,U=R.dispatch;return x!==A.memoizedState&&(jt.flags|=2048,fi(9,Gi.bind(null,R,x),{destroy:void 0},null)),[f,U,u]}function Gi(u,f){u.action=f}function Vi(u){var f=V(),x=On;if(x!==null)return Hi(f,x,u);V(),f=f.memoizedState,x=V();var A=x.queue.dispatch;return x.memoizedState=u,[f,A,!1]}function fi(u,f,x,A){return u={tag:u,create:f,inst:x,deps:A,next:null},f=jt.updateQueue,f===null&&(f=Od(),jt.updateQueue=f),x=f.lastEffect,x===null?f.lastEffect=u.next=u:(A=x.next,x.next=u,u.next=A,f.lastEffect=u),u}function nr(){return V().memoizedState}function Ps(u,f,x,A){var R=Si();jt.flags|=u,R.memoizedState=fi(1|f,x,{destroy:void 0},A===void 0?null:A)}function jc(u,f,x,A){var R=V();A=A===void 0?null:A;var U=R.memoizedState.inst;On!==null&&A!==null&&Ai(A,On.memoizedState.deps)?R.memoizedState=fi(f,x,U,A):(jt.flags|=u,R.memoizedState=fi(1|f,x,U,A))}function im(u,f){Ps(8390656,8,u,f)}function Zc(u,f){jc(2048,8,u,f)}function qg(u,f){return jc(4,2,u,f)}function Jg(u,f){return jc(4,4,u,f)}function Qc(u,f){if(typeof f=="function"){u=u();var x=f(u);return function(){typeof x=="function"?x():f(null)}}if(f!=null)return u=u(),f.current=u,function(){f.current=null}}function Br(u,f,x){x=x!=null?x.concat([u]):null,jc(4,4,Qc.bind(null,f,u),x)}function $c(){}function Gh(u,f){var x=V();f=f===void 0?null:f;var A=x.memoizedState;return f!==null&&Ai(f,A[1])?A[0]:(x.memoizedState=[u,f],u)}function Il(u,f){var x=V();f=f===void 0?null:f;var A=x.memoizedState;if(f!==null&&Ai(f,A[1]))return A[0];if(A=u(),Ao){J(!0);try{u()}finally{J(!1)}}return x.memoizedState=[A,f],A}function ko(u,f,x){return x===void 0||(kr&1073741824)!==0?u.memoizedState=f:(u.memoizedState=x,u=Ur(),jt.lanes|=u,Es|=u,x)}function am(u,f,x,A){return vs(x,f)?x:Xr.current!==null?(u=ko(u,x,A),vs(u,f)||(Ti=!0),u):(kr&42)===0?(Ti=!0,u.memoizedState=x):(u=Ur(),jt.lanes|=u,Es|=u,f)}function Vh(u,f,x,A,R){var U=Xi();Sa(U!==0&&8>U?U:8);var k=Lt.T,ne={};Lt.T=ne,Yh(u,!1,f,x);try{var de=R(),Oe=Lt.S;if(Oe!==null&&Oe(ne,de),de!==null&&typeof de=="object"&&typeof de.then=="function"){var nt=at(de,A);qo(u,f,nt,La(u))}else qo(u,f,A,La(u))}catch(ct){qo(u,f,{then:function(){},status:"rejected",reason:ct},La())}finally{Sa(U),Lt.T=k}}function sm(u){var f=u.memoizedState;if(f!==null)return f;f={memoizedState:qa,baseState:qa,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ce,lastRenderedState:qa},next:null};var x={};return f.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ce,lastRenderedState:x},next:null},u.memoizedState=f,u=u.alternate,u!==null&&(u.memoizedState=f),f}function zl(){return la(Ht)}function Dr(){return V().memoizedState}function Xh(){return V().memoizedState}function ef(u){for(var f=u.return;f!==null;){switch(f.tag){case 24:case 3:var x=La();u=Ie(x);var A=Ge(f,u,x);A!==null&&(ba(A,f,x),_t(A,f,x)),f={cache:jh()},u.payload=f;return}f=f.return}}function Yo(u,f,x){var A=La();x={lane:A,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},Pl(u)?tf(f,x):(x=He(u,f,x,A),x!==null&&(ba(x,u,A),rm(x,f,A)))}function kh(u,f,x){var A=La();qo(u,f,x,A)}function qo(u,f,x,A){var R={lane:A,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(Pl(u))tf(f,R);else{var U=u.alternate;if(u.lanes===0&&(U===null||U.lanes===0)&&(U=f.lastRenderedReducer,U!==null))try{var k=f.lastRenderedState,ne=U(k,x);if(R.hasEagerState=!0,R.eagerState=ne,vs(ne,k))return W(u,f,R,0),on===null&&ze(),!1}catch{}finally{}if(x=He(u,f,R,A),x!==null)return ba(x,u,A),rm(x,f,A),!0}return!1}function Yh(u,f,x,A){if(A={lane:2,revertLane:Fe(),action:A,hasEagerState:!1,eagerState:null,next:null},Pl(u)){if(f)throw Error(i(479))}else f=He(u,x,A,2),f!==null&&ba(f,u,2)}function Pl(u){var f=u.alternate;return u===jt||f!==null&&f===jt}function tf(u,f){ai=Ys=!0;var x=u.pending;x===null?f.next=f:(f.next=x.next,x.next=f),u.pending=f}function rm(u,f,x){if((x&4194176)!==0){var A=f.lanes;A&=u.pendingLanes,x|=A,f.lanes=x,le(u,x)}}function _a(u,f,x,A){f=u.memoizedState,x=x(A,f),x=x==null?f:Kl({},f,x),u.memoizedState=x,u.lanes===0&&(u.updateQueue.baseState=x)}function Jo(u,f,x,A,R,U,k){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(A,U,k):f.prototype&&f.prototype.isPureReactComponent?!We(x,A)||!We(R,U):!0}function nf(u,f,x,A){u=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(x,A),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(x,A),f.state!==u&&Nd.enqueueReplaceState(f,f.state,null)}function ir(u,f){var x=f;if("ref"in f){x={};for(var A in f)A!=="ref"&&(x[A]=f[A])}if(u=u.defaultProps){x===f&&(x=Kl({},x));for(var R in u)x[R]===void 0&&(x[R]=u[R])}return x}function qh(u,f){try{var x=u.onUncaughtError;x(f.value,{componentStack:f.stack})}catch(A){setTimeout(function(){throw A})}}function Jh(u,f,x){try{var A=u.onCaughtError;A(x.value,{componentStack:x.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(R){setTimeout(function(){throw R})}}function af(u,f,x){return x=Ie(x),x.tag=3,x.payload={element:null},x.callback=function(){qh(u,f)},x}function wu(u){return u=Ie(u),u.tag=3,u}function sf(u,f,x,A){var R=x.type.getDerivedStateFromError;if(typeof R=="function"){var U=A.value;u.payload=function(){return R(U)},u.callback=function(){Jh(f,x,A)}}var k=x.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(u.callback=function(){Jh(f,x,A),typeof R!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var ne=A.stack;this.componentDidCatch(A.value,{componentStack:ne!==null?ne:""})})}function Kg(u,f,x,A,R){if(x.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){if(f=x.alternate,f!==null&&Fl(f,x,R,!0),x=Ss.current,x!==null){switch(x.tag){case 13:return ks===null?Ya():x.alternate===null&&_n===0&&(_n=3),x.flags&=-257,x.flags|=65536,x.lanes=R,A===Ud?x.flags|=16384:(f=x.updateQueue,f===null?x.updateQueue=new Set([A]):f.add(A),cd(u,A,R)),!1;case 22:return x.flags|=65536,A===Ud?x.flags|=16384:(f=x.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([A])},x.updateQueue=f):(x=f.retryQueue,x===null?f.retryQueue=new Set([A]):x.add(A)),cd(u,A,R)),!1}throw Error(i(435,x.tag))}return cd(u,A,R),Ya(),!1}if(An)return f=Ss.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=R,A!==Nf&&(u=Error(i(422),{cause:A}),Ct(oe(u,x)))):(A!==Nf&&(f=Error(i(423),{cause:A}),Ct(oe(f,x))),u=u.current.alternate,u.flags|=65536,R&=-R,u.lanes|=R,A=oe(A,x),R=af(u.stateNode,A,R),$(u,R),_n!==4&&(_n=2)),!1;var U=Error(i(520),{cause:A});if(U=oe(U,x),rc===null?rc=[U]:rc.push(U),_n!==4&&(_n=2),f===null)return!0;A=oe(A,x),x=f;do{switch(x.tag){case 3:return x.flags|=65536,u=R&-R,x.lanes|=u,u=af(x.stateNode,A,u),$(x,u),!1;case 1:if(f=x.type,U=x.stateNode,(x.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||U!==null&&typeof U.componentDidCatch=="function"&&(Cs===null||!Cs.has(U))))return x.flags|=65536,R&=-R,x.lanes|=R,R=wu(R),sf(R,u,x,A),$(x,R),!1}x=x.return}while(x!==null);return!1}function oa(u,f,x,A){f.child=u===null?m0(f,null,x,A):vl(f,u.child,x,A)}function Wg(u,f,x,A,R){x=x.render;var U=f.ref;if("ref"in A){var k={};for(var ne in A)ne!=="ref"&&(k[ne]=A[ne])}else k=A;return Hl(f),A=tr(u,f,x,k,U,R),ne=Du(),u!==null&&!Ti?(ao(u,f,R),ro(u,f,R)):(An&&ne&&se(f),f.flags|=1,oa(u,f,A,R),f.child)}function jg(u,f,x,A,R){if(u===null){var U=x.type;return typeof U=="function"&&!ho(U)&&U.defaultProps===void 0&&x.compare===null?(f.tag=15,f.type=U,Kh(u,f,U,A,R)):(u=Fs(x.type,null,A,f,f.mode,R),u.ref=f.ref,u.return=f,f.child=u)}if(U=u.child,!dm(u,R)){var k=U.memoizedProps;if(x=x.compare,x=x!==null?x:We,x(k,A)&&u.ref===f.ref)return ro(u,f,R)}return f.flags|=1,u=Aa(U,A),u.ref=f.ref,u.return=f,f.child=u}function Kh(u,f,x,A,R){if(u!==null){var U=u.memoizedProps;if(We(U,A)&&u.ref===f.ref)if(Ti=!1,f.pendingProps=A=U,dm(u,R))(u.flags&131072)!==0&&(Ti=!0);else return f.lanes=u.lanes,ro(u,f,R)}return om(u,f,x,A,R)}function Zg(u,f,x){var A=f.pendingProps,R=A.children,U=(f.stateNode._pendingVisibility&2)!==0,k=u!==null?u.memoizedState:null;if(rf(u,f),A.mode==="hidden"||U){if((f.flags&128)!==0){if(A=k!==null?k.baseLanes|x:x,u!==null){for(R=f.child=u.child,U=0;R!==null;)U=U|R.lanes|R.childLanes,R=R.sibling;f.childLanes=U&~A}else f.childLanes=0,f.child=null;return Qg(u,f,A,x)}if((x&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},u!==null&&Zh(f,k!==null?k.cachePool:null),k!==null?Wc(f,k):Ul(),Xo(f);else return f.lanes=f.childLanes=536870912,Qg(u,f,k!==null?k.baseLanes|x:x,x)}else k!==null?(Zh(f,k.cachePool),Wc(f,k),zs(),f.memoizedState=null):(u!==null&&Zh(f,null),Ul(),zs());return oa(u,f,R,x),f.child}function Qg(u,f,x,A){var R=jo();return R=R===null?null:{parent:Pr?Ln._currentValue:Ln._currentValue2,pool:R},f.memoizedState={baseLanes:x,cachePool:R},u!==null&&Zh(f,null),Ul(),Xo(f),u!==null&&Fl(u,f,A,!0),null}function rf(u,f){var x=f.ref;if(x===null)u!==null&&u.ref!==null&&(f.flags|=2097664);else{if(typeof x!="function"&&typeof x!="object")throw Error(i(284));(u===null||u.ref!==x)&&(f.flags|=2097664)}}function om(u,f,x,A,R){return Hl(f),x=tr(u,f,x,A,void 0,R),A=Du(),u!==null&&!Ti?(ao(u,f,R),ro(u,f,R)):(An&&A&&se(f),f.flags|=1,oa(u,f,x,R),f.child)}function $g(u,f,x,A,R,U){return Hl(f),f.updateQueue=null,x=Hh(f,A,x,R),Nl(u),A=Du(),u!==null&&!Ti?(ao(u,f,U),ro(u,f,U)):(An&&A&&se(f),f.flags|=1,oa(u,f,x,U),f.child)}function lm(u,f,x,A,R){if(Hl(f),f.stateNode===null){var U=$l,k=x.contextType;typeof k=="object"&&k!==null&&(U=la(k)),U=new x(A,U),f.memoizedState=U.state!==null&&U.state!==void 0?U.state:null,U.updater=Nd,f.stateNode=U,U._reactInternals=f,U=f.stateNode,U.props=A,U.state=f.memoizedState,U.refs={},St(f),k=x.contextType,U.context=typeof k=="object"&&k!==null?la(k):$l,U.state=f.memoizedState,k=x.getDerivedStateFromProps,typeof k=="function"&&(_a(f,x,k,A),U.state=f.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof U.getSnapshotBeforeUpdate=="function"||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(k=U.state,typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount(),k!==U.state&&Nd.enqueueReplaceState(U,U.state,null),qe(f,A,U,R),ye(),U.state=f.memoizedState),typeof U.componentDidMount=="function"&&(f.flags|=4194308),A=!0}else if(u===null){U=f.stateNode;var ne=f.memoizedProps,de=ir(x,ne);U.props=de;var Oe=U.context,nt=x.contextType;k=$l,typeof nt=="object"&&nt!==null&&(k=la(nt));var ct=x.getDerivedStateFromProps;nt=typeof ct=="function"||typeof U.getSnapshotBeforeUpdate=="function",ne=f.pendingProps!==ne,nt||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(ne||Oe!==k)&&nf(f,U,A,k),bo=!1;var pt=f.memoizedState;U.state=pt,qe(f,A,U,R),ye(),Oe=f.memoizedState,ne||pt!==Oe||bo?(typeof ct=="function"&&(_a(f,x,ct,A),Oe=f.memoizedState),(de=bo||Jo(f,x,de,A,pt,Oe,k))?(nt||typeof U.UNSAFE_componentWillMount!="function"&&typeof U.componentWillMount!="function"||(typeof U.componentWillMount=="function"&&U.componentWillMount(),typeof U.UNSAFE_componentWillMount=="function"&&U.UNSAFE_componentWillMount()),typeof U.componentDidMount=="function"&&(f.flags|=4194308)):(typeof U.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=A,f.memoizedState=Oe),U.props=A,U.state=Oe,U.context=k,A=de):(typeof U.componentDidMount=="function"&&(f.flags|=4194308),A=!1)}else{U=f.stateNode,xt(u,f),k=f.memoizedProps,nt=ir(x,k),U.props=nt,ct=f.pendingProps,pt=U.context,Oe=x.contextType,de=$l,typeof Oe=="object"&&Oe!==null&&(de=la(Oe)),ne=x.getDerivedStateFromProps,(Oe=typeof ne=="function"||typeof U.getSnapshotBeforeUpdate=="function")||typeof U.UNSAFE_componentWillReceiveProps!="function"&&typeof U.componentWillReceiveProps!="function"||(k!==ct||pt!==de)&&nf(f,U,A,de),bo=!1,pt=f.memoizedState,U.state=pt,qe(f,A,U,R),ye();var Xt=f.memoizedState;k!==ct||pt!==Xt||bo||u!==null&&u.dependencies!==null&&Wo(u.dependencies)?(typeof ne=="function"&&(_a(f,x,ne,A),Xt=f.memoizedState),(nt=bo||Jo(f,x,nt,A,pt,Xt,de)||u!==null&&u.dependencies!==null&&Wo(u.dependencies))?(Oe||typeof U.UNSAFE_componentWillUpdate!="function"&&typeof U.componentWillUpdate!="function"||(typeof U.componentWillUpdate=="function"&&U.componentWillUpdate(A,Xt,de),typeof U.UNSAFE_componentWillUpdate=="function"&&U.UNSAFE_componentWillUpdate(A,Xt,de)),typeof U.componentDidUpdate=="function"&&(f.flags|=4),typeof U.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof U.componentDidUpdate!="function"||k===u.memoizedProps&&pt===u.memoizedState||(f.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||k===u.memoizedProps&&pt===u.memoizedState||(f.flags|=1024),f.memoizedProps=A,f.memoizedState=Xt),U.props=A,U.state=Xt,U.context=de,A=nt):(typeof U.componentDidUpdate!="function"||k===u.memoizedProps&&pt===u.memoizedState||(f.flags|=4),typeof U.getSnapshotBeforeUpdate!="function"||k===u.memoizedProps&&pt===u.memoizedState||(f.flags|=1024),A=!1)}return U=A,rf(u,f),A=(f.flags&128)!==0,U||A?(U=f.stateNode,x=A&&typeof x.getDerivedStateFromError!="function"?null:U.render(),f.flags|=1,u!==null&&A?(f.child=vl(f,u.child,null,R),f.child=vl(f,null,x,R)):oa(u,f,x,R),f.memoizedState=U.state,u=f.child):u=ro(u,f,R),u}function ev(u,f,x,A){return sn(),f.flags|=256,oa(u,f,x,A),f.child}function um(u){return{baseLanes:u,cachePool:sv()}}function cm(u,f,x){return u=u!==null?u.childLanes&~x:0,f&&(u|=Qa),u}function tv(u,f,x){var A=f.pendingProps,R=!1,U=(f.flags&128)!==0,k;if((k=U)||(k=u!==null&&u.memoizedState===null?!1:(Ni.current&2)!==0),k&&(R=!0,f.flags&=-129),k=(f.flags&32)!==0,f.flags&=-33,u===null){if(An){if(R?Zi(f):zs(),An){var ne=da,de;(de=ne)&&(ne=Dv(ne,Vs),ne!==null?(f.memoizedState={dehydrated:ne,treeContext:lr!==null?{id:Gr,overflow:Gs}:null,retryLane:536870912},de=t(18,null,null,0),de.stateNode=ne,de.return=f,f.child=de,Ma=f,da=null,de=!0):de=!1),de||$e(f)}if(ne=f.memoizedState,ne!==null&&(ne=ne.dehydrated,ne!==null))return Tf(ne)?f.lanes=16:f.lanes=536870912,null;cs(f)}return ne=A.children,A=A.fallback,R?(zs(),R=f.mode,ne=fm({mode:"hidden",children:ne},R),A=mo(A,R,x,null),ne.return=f,A.return=f,ne.sibling=A,f.child=ne,R=f.child,R.memoizedState=um(x),R.childLanes=cm(u,k,x),f.memoizedState=Ta,A):(Zi(f),of(f,ne))}if(de=u.memoizedState,de!==null&&(ne=de.dehydrated,ne!==null)){if(U)f.flags&256?(Zi(f),f.flags&=-257,f=hm(u,f,x)):f.memoizedState!==null?(zs(),f.child=u.child,f.flags|=128,f=null):(zs(),R=A.fallback,ne=f.mode,A=fm({mode:"visible",children:A.children},ne),R=mo(R,ne,x,null),R.flags|=2,A.return=f,R.return=f,A.sibling=R,f.child=A,vl(f,u.child,null,x),A=f.child,A.memoizedState=um(x),A.childLanes=cm(u,k,x),f.memoizedState=Ta,f=R);else if(Zi(f),Tf(ne))k=Sv(ne).digest,A=Error(i(419)),A.stack="",A.digest=k,Ct({value:A,source:null,stack:null}),f=hm(u,f,x);else if(Ti||Fl(u,f,x,!1),k=(x&u.childLanes)!==0,Ti||k){if(k=on,k!==null){if(A=x&-x,(A&42)!==0)A=1;else switch(A){case 2:A=1;break;case 8:A=4;break;case 32:A=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:A=64;break;case 268435456:A=134217728;break;default:A=0}if(A=(A&(k.suspendedLanes|x))!==0?0:A,A!==0&&A!==de.retryLane)throw de.retryLane=A,ke(u,A),ba(k,u,A),Yv}Ad(ne)||Ya(),f=hm(u,f,x)}else Ad(ne)?(f.flags|=128,f.child=u.child,f=ql.bind(null,u),ib(ne,f),f=null):(u=de.treeContext,Ia&&(da=Cv(ne),Ma=f,An=!0,ys=null,Vs=!1,u!==null&&(xs[_s++]=Gr,xs[_s++]=Gs,xs[_s++]=lr,Gr=u.id,Gs=u.overflow,lr=f)),f=of(f,A.children),f.flags|=4096);return f}return R?(zs(),R=A.fallback,ne=f.mode,de=u.child,U=de.sibling,A=Aa(de,{mode:"hidden",children:A.children}),A.subtreeFlags=de.subtreeFlags&31457280,U!==null?R=Aa(U,R):(R=mo(R,ne,x,null),R.flags|=2),R.return=f,A.return=f,A.sibling=R,f.child=A,A=R,R=f.child,ne=u.child.memoizedState,ne===null?ne=um(x):(de=ne.cachePool,de!==null?(U=Pr?Ln._currentValue:Ln._currentValue2,de=de.parent!==U?{parent:U,pool:U}:de):de=sv(),ne={baseLanes:ne.baseLanes|x,cachePool:de}),R.memoizedState=ne,R.childLanes=cm(u,k,x),f.memoizedState=Ta,A):(Zi(f),x=u.child,u=x.sibling,x=Aa(x,{mode:"visible",children:A.children}),x.return=f,x.sibling=null,u!==null&&(k=f.deletions,k===null?(f.deletions=[u],f.flags|=16):k.push(u)),f.child=x,f.memoizedState=null,x)}function of(u,f){return f=fm({mode:"visible",children:f},u.mode),f.return=u,u.child=f}function fm(u,f){return fd(u,f,0,null)}function hm(u,f,x){return vl(f,u.child,null,x),u=of(f,f.pendingProps.children),u.flags|=2,f.memoizedState=null,u}function nv(u,f,x){u.lanes|=f;var A=u.alternate;A!==null&&(A.lanes|=f),pm(u.return,f,x)}function Wh(u,f,x,A,R){var U=u.memoizedState;U===null?u.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:A,tail:x,tailMode:R}:(U.isBackwards=f,U.rendering=null,U.renderingStartTime=0,U.last=A,U.tail=x,U.tailMode=R)}function iv(u,f,x){var A=f.pendingProps,R=A.revealOrder,U=A.tail;if(oa(u,f,A.children,x),A=Ni.current,(A&2)!==0)A=A&1|2,f.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=f.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&nv(u,x,f);else if(u.tag===19)nv(u,x,f);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===f)break e;for(;u.sibling===null;){if(u.return===null||u.return===f)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}A&=1}switch(B(Ni,A),R){case"forwards":for(x=f.child,R=null;x!==null;)u=x.alternate,u!==null&&xa(u)===null&&(R=x),x=x.sibling;x=R,x===null?(R=f.child,f.child=null):(R=x.sibling,x.sibling=null),Wh(f,!1,R,x,U);break;case"backwards":for(x=null,R=f.child,f.child=null;R!==null;){if(u=R.alternate,u!==null&&xa(u)===null){f.child=R;break}u=R.sibling,R.sibling=x,x=R,R=u}Wh(f,!0,x,null,U);break;case"together":Wh(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function ro(u,f,x){if(u!==null&&(f.dependencies=u.dependencies),Es|=f.lanes,(x&f.childLanes)===0)if(u!==null){if(Fl(u,f,x,!1),(x&f.childLanes)===0)return null}else return null;if(u!==null&&f.child!==u.child)throw Error(i(153));if(f.child!==null){for(u=f.child,x=Aa(u,u.pendingProps),f.child=x,x.return=f;u.sibling!==null;)u=u.sibling,x=x.sibling=Aa(u,u.pendingProps),x.return=f;x.sibling=null}return f.child}function dm(u,f){return(u.lanes&f)!==0?!0:(u=u.dependencies,!!(u!==null&&Wo(u)))}function eb(u,f,x){switch(f.tag){case 3:Ee(f,f.stateNode.containerInfo),Ko(f,Ln,u.memoizedState.cache),sn();break;case 27:case 5:ge(f);break;case 4:Ee(f,f.stateNode.containerInfo);break;case 10:Ko(f,f.type,f.memoizedProps.value);break;case 13:var A=f.memoizedState;if(A!==null)return A.dehydrated!==null?(Zi(f),f.flags|=128,null):(x&f.child.childLanes)!==0?tv(u,f,x):(Zi(f),u=ro(u,f,x),u!==null?u.sibling:null);Zi(f);break;case 19:var R=(u.flags&128)!==0;if(A=(x&f.childLanes)!==0,A||(Fl(u,f,x,!1),A=(x&f.childLanes)!==0),R){if(A)return iv(u,f,x);f.flags|=128}if(R=f.memoizedState,R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),B(Ni,Ni.current),A)break;return null;case 22:case 23:return f.lanes=0,Zg(u,f,x);case 24:Ko(f,Ln,u.memoizedState.cache)}return ro(u,f,x)}function av(u,f,x){if(u!==null)if(u.memoizedProps!==f.pendingProps)Ti=!0;else{if(!dm(u,x)&&(f.flags&128)===0)return Ti=!1,eb(u,f,x);Ti=(u.flags&131072)!==0}else Ti=!1,An&&(f.flags&1048576)!==0&&q(f,Uf,f.index);switch(f.lanes=0,f.tag){case 16:e:{u=f.pendingProps;var A=f.elementType,R=A._init;if(A=R(A._payload),f.type=A,typeof A=="function")ho(A)?(u=ir(A,u),f.tag=1,f=lm(null,f,A,u,x)):(f.tag=0,f=om(null,f,A,u,x));else{if(A!=null){if(R=A.$$typeof,R===Ju){f.tag=11,f=Wg(null,f,A,u,x);break e}else if(R===xf){f.tag=14,f=jg(null,f,A,u,x);break e}}throw f=l(A)||A,Error(i(306,f,""))}}return f;case 0:return om(u,f,f.type,f.pendingProps,x);case 1:return A=f.type,R=ir(A,f.pendingProps),lm(u,f,A,R,x);case 3:e:{if(Ee(f,f.stateNode.containerInfo),u===null)throw Error(i(387));var U=f.pendingProps;R=f.memoizedState,A=R.element,xt(u,f),qe(f,U,null,x);var k=f.memoizedState;if(U=k.cache,Ko(f,Ln,U),U!==R.cache&&mm(f,[Ln],x,!0),ye(),U=k.element,Ia&&R.isDehydrated)if(R={element:U,isDehydrated:!1,cache:k.cache},f.updateQueue.baseState=R,f.memoizedState=R,f.flags&256){f=ev(u,f,U,x);break e}else if(U!==A){A=oe(Error(i(424)),f),Ct(A),f=ev(u,f,U,x);break e}else for(Ia&&(da=Tv(f.stateNode.containerInfo),Ma=f,An=!0,ys=null,Vs=!0),x=m0(f,null,U,x),f.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(sn(),U===A){f=ro(u,f,x);break e}oa(u,f,U,x)}f=f.child}return f;case 26:if(gs)return rf(u,f),u===null?(x=Cd(f.type,null,f.pendingProps,null))?f.memoizedState=x:An||(f.stateNode=sb(f.type,f.pendingProps,ur.current,f)):f.memoizedState=Cd(f.type,u.memoizedProps,f.pendingProps,u.memoizedState),null;case 27:if(fa)return ge(f),u===null&&fa&&An&&(A=f.stateNode=f0(f.type,f.pendingProps,ur.current,na.current,!1),Ma=f,Vs=!0,da=Sd(A)),A=f.pendingProps.children,u!==null||An?oa(u,f,A,x):f.child=vl(f,null,A,x),rf(u,f),f.child;case 5:return u===null&&An&&(Lv(f.type,f.pendingProps,na.current),(R=A=da)&&(A=Rv(A,f.type,f.pendingProps,Vs),A!==null?(f.stateNode=A,Ma=f,da=Sd(A),Vs=!1,R=!0):R=!1),R||$e(f)),ge(f),R=f.type,U=f.pendingProps,k=u!==null?u.memoizedProps:null,A=U.children,hl(R,U)?A=null:k!==null&&hl(R,k)&&(f.flags|=32),f.memoizedState!==null&&(R=tr(u,f,nm,null,null,x),Pr?Ht._currentValue=R:Ht._currentValue2=R),rf(u,f),oa(u,f,A,x),f.child;case 6:return u===null&&An&&(Iv(f.pendingProps,na.current),(u=x=da)&&(x=Bv(x,f.pendingProps,Vs),x!==null?(f.stateNode=x,Ma=f,da=null,u=!0):u=!1),u||$e(f)),null;case 13:return tv(u,f,x);case 4:return Ee(f,f.stateNode.containerInfo),A=f.pendingProps,u===null?f.child=vl(f,null,A,x):oa(u,f,A,x),f.child;case 11:return Wg(u,f,f.type,f.pendingProps,x);case 7:return oa(u,f,f.pendingProps,x),f.child;case 8:return oa(u,f,f.pendingProps.children,x),f.child;case 12:return oa(u,f,f.pendingProps.children,x),f.child;case 10:return A=f.pendingProps,Ko(f,f.type,A.value),oa(u,f,A.children,x),f.child;case 9:return R=f.type._context,A=f.pendingProps.children,Hl(f),R=la(R),A=A(R),f.flags|=1,oa(u,f,A,x),f.child;case 14:return jg(u,f,f.type,f.pendingProps,x);case 15:return Kh(u,f,f.type,f.pendingProps,x);case 19:return iv(u,f,x);case 22:return Zg(u,f,x);case 24:return Hl(f),A=la(Ln),u===null?(R=jo(),R===null&&(R=on,U=jh(),R.pooledCache=U,U.refCount++,U!==null&&(R.pooledCacheLanes|=x),R=U),f.memoizedState={parent:A,cache:R},St(f),Ko(f,Ln,R)):((u.lanes&x)!==0&&(xt(u,f),qe(f,null,null,x),ye()),R=u.memoizedState,U=f.memoizedState,R.parent!==A?(R={parent:A,cache:A},f.memoizedState=R,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=R),Ko(f,Ln,A)):(A=U.cache,Ko(f,Ln,A),A!==R.cache&&mm(f,[Ln],x,!0))),oa(u,f,f.pendingProps.children,x),f.child;case 29:throw f.pendingProps}throw Error(i(156,f.tag))}function Ko(u,f,x){Pr?(B(ja,f._currentValue),f._currentValue=x):(B(ja,f._currentValue2),f._currentValue2=x)}function oo(u){var f=ja.current;Pr?u._currentValue=f:u._currentValue2=f,M(ja)}function pm(u,f,x){for(;u!==null;){var A=u.alternate;if((u.childLanes&f)!==f?(u.childLanes|=f,A!==null&&(A.childLanes|=f)):A!==null&&(A.childLanes&f)!==f&&(A.childLanes|=f),u===x)break;u=u.return}}function mm(u,f,x,A){var R=u.child;for(R!==null&&(R.return=u);R!==null;){var U=R.dependencies;if(U!==null){var k=R.child;U=U.firstContext;e:for(;U!==null;){var ne=U;U=R;for(var de=0;de<f.length;de++)if(ne.context===f[de]){U.lanes|=x,ne=U.alternate,ne!==null&&(ne.lanes|=x),pm(U.return,x,u),A||(k=null);break e}U=ne.next}}else if(R.tag===18){if(k=R.return,k===null)throw Error(i(341));k.lanes|=x,U=k.alternate,U!==null&&(U.lanes|=x),pm(k,x,u),k=null}else k=R.child;if(k!==null)k.return=R;else for(k=R;k!==null;){if(k===u){k=null;break}if(R=k.sibling,R!==null){R.return=k.return,k=R;break}k=k.return}R=k}}function Fl(u,f,x,A){u=null;for(var R=f,U=!1;R!==null;){if(!U){if((R.flags&524288)!==0)U=!0;else if((R.flags&262144)!==0)break}if(R.tag===10){var k=R.alternate;if(k===null)throw Error(i(387));if(k=k.memoizedProps,k!==null){var ne=R.type;vs(R.pendingProps.value,k.value)||(u!==null?u.push(ne):u=[ne])}}else if(R===ec.current){if(k=R.alternate,k===null)throw Error(i(387));k.memoizedState.memoizedState!==R.memoizedState.memoizedState&&(u!==null?u.push(Ht):u=[Ht])}R=R.return}u!==null&&mm(f,u,x,A),f.flags|=262144}function Wo(u){for(u=u.firstContext;u!==null;){var f=u.context;if(!vs(Pr?f._currentValue:f._currentValue2,u.memoizedValue))return!0;u=u.next}return!1}function Hl(u){_l=u,gi=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function la(u){return gm(_l,u)}function lf(u,f){return _l===null&&Hl(u),gm(u,f)}function gm(u,f){var x=Pr?f._currentValue:f._currentValue2;if(f={context:f,memoizedValue:x,next:null},gi===null){if(u===null)throw Error(i(308));gi=f,u.dependencies={lanes:0,firstContext:f},u.flags|=524288}else gi=gi.next=f;return x}function jh(){return{controller:new qv,data:new Map,refCount:0}}function Uu(u){u.refCount--,u.refCount===0&&So(nu,function(){u.controller.abort()})}function jo(){var u=Mo.current;return u!==null?u:on.pooledCache}function Zh(u,f){f===null?B(Mo,Mo.current):B(Mo,f.pool)}function sv(){var u=jo();return u===null?null:{parent:Pr?Ln._currentValue:Ln._currentValue2,pool:u}}function fs(u){u.flags|=4}function vm(u,f){if(u!==null&&u.child===f.child)return!1;if((f.flags&16)!==0)return!0;for(u=f.child;u!==null;){if((u.flags&13878)!==0||(u.subtreeFlags&13878)!==0)return!0;u=u.sibling}return!1}function Qh(u,f,x,A){if(ca)for(x=f.child;x!==null;){if(x.tag===5||x.tag===6)zr(u,x.stateNode);else if(!(x.tag===4||fa&&x.tag===27)&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===f)break;for(;x.sibling===null;){if(x.return===null||x.return===f)return;x=x.return}x.sibling.return=x.return,x=x.sibling}else if(ps)for(var R=f.child;R!==null;){if(R.tag===5){var U=R.stateNode;x&&A&&(U=Qm(U,R.type,R.memoizedProps)),zr(u,U)}else if(R.tag===6)U=R.stateNode,x&&A&&(U=$m(U,R.memoizedProps)),zr(u,U);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)U=R.child,U!==null&&(U.return=R),Qh(u,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===f)break;for(;R.sibling===null;){if(R.return===null||R.return===f)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function Ou(u,f,x,A){if(ps)for(var R=f.child;R!==null;){if(R.tag===5){var U=R.stateNode;x&&A&&(U=Qm(U,R.type,R.memoizedProps)),jm(u,U)}else if(R.tag===6)U=R.stateNode,x&&A&&(U=$m(U,R.memoizedProps)),jm(u,U);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)U=R.child,U!==null&&(U.return=R),Ou(u,R,!(R.memoizedProps!==null&&R.memoizedProps.mode==="manual"),!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===f)break;for(;R.sibling===null;){if(R.return===null||R.return===f)return;R=R.return}R.sibling.return=R.return,R=R.sibling}}function Nu(u,f){if(ps&&vm(u,f)){u=f.stateNode;var x=u.containerInfo,A=bd();Ou(A,f,!1,!1),u.pendingChildren=A,fs(f),Av(x,A)}}function xm(u,f,x,A){if(ca)u.memoizedProps!==A&&fs(f);else if(ps){var R=u.stateNode,U=u.memoizedProps;if((u=vm(u,f))||U!==A){var k=na.current;U=Wm(R,x,U,A,!u,null),U===R?f.stateNode=R:(vo(U,x,A,k)&&fs(f),f.stateNode=U,u?Qh(U,f,!1,!1):fs(f))}else f.stateNode=R}}function Lu(u,f,x){if(_v(f,x)){if(u.flags|=16777216,!xo(f,x))if(pf())u.flags|=8192;else throw tu=Ud,p0}else u.flags&=-16777217}function _m(u,f){if(zv(f)){if(u.flags|=16777216,!u0(f))if(pf())u.flags|=8192;else throw tu=Ud,p0}else u.flags&=-16777217}function uf(u,f){f!==null&&(u.flags|=4),u.flags&16384&&(f=u.tag!==22?L():536870912,u.lanes|=f,To|=f)}function Gl(u,f){if(!An)switch(u.tailMode){case"hidden":f=u.tail;for(var x=null;f!==null;)f.alternate!==null&&(x=f),f=f.sibling;x===null?u.tail=null:x.sibling=null;break;case"collapsed":x=u.tail;for(var A=null;x!==null;)x.alternate!==null&&(A=x),x=x.sibling;A===null?f||u.tail===null?u.tail=null:u.tail.sibling=null:A.sibling=null}}function ti(u){var f=u.alternate!==null&&u.alternate.child===u.child,x=0,A=0;if(f)for(var R=u.child;R!==null;)x|=R.lanes|R.childLanes,A|=R.subtreeFlags&31457280,A|=R.flags&31457280,R.return=u,R=R.sibling;else for(R=u.child;R!==null;)x|=R.lanes|R.childLanes,A|=R.subtreeFlags,A|=R.flags,R.return=u,R=R.sibling;return u.subtreeFlags|=A,u.childLanes=x,f}function rv(u,f,x){var A=f.pendingProps;switch(Ce(f),f.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ti(f),null;case 1:return ti(f),null;case 3:return x=f.stateNode,A=null,u!==null&&(A=u.memoizedState.cache),f.memoizedState.cache!==A&&(f.flags|=2048),oo(Ln),Ye(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(u===null||u.child===null)&&(Pt(f)?fs(f):u===null||u.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,ys!==null&&(uo(ys),ys=null))),Nu(u,f),ti(f),null;case 26:if(gs){x=f.type;var R=f.memoizedState;return u===null?(fs(f),R!==null?(ti(f),_m(f,R)):(ti(f),Lu(f,x,A))):R?R!==u.memoizedState?(fs(f),ti(f),_m(f,R)):(ti(f),f.flags&=-16777217):(ca?u.memoizedProps!==A&&fs(f):xm(u,f,x,A),ti(f),Lu(f,x,A)),null}case 27:if(fa){if(Re(f),x=ur.current,R=f.type,u!==null&&f.stateNode!=null)ca?u.memoizedProps!==A&&fs(f):xm(u,f,R,A);else{if(!A){if(f.stateNode===null)throw Error(i(166));return ti(f),null}u=na.current,Pt(f)?ut(f,u):(u=f0(R,A,x,u,!0),f.stateNode=u,fs(f))}return ti(f),null}case 5:if(Re(f),x=f.type,u!==null&&f.stateNode!=null)xm(u,f,x,A);else{if(!A){if(f.stateNode===null)throw Error(i(166));return ti(f),null}u=na.current,Pt(f)?ut(f,u):(R=Pm(x,A,ur.current,u,f),Qh(R,f,!1,!1),f.stateNode=R,vo(R,x,A,u)&&fs(f))}return ti(f),Lu(f,f.type,f.pendingProps),null;case 6:if(u&&f.stateNode!=null)x=u.memoizedProps,ca?x!==A&&fs(f):ps&&(x!==A?(f.stateNode=md(A,ur.current,na.current,f),fs(f)):f.stateNode=u.stateNode);else{if(typeof A!="string"&&f.stateNode===null)throw Error(i(166));if(u=ur.current,x=na.current,Pt(f)){if(!Ia)throw Error(i(176));if(u=f.stateNode,x=f.memoizedProps,A=null,R=Ma,R!==null)switch(R.tag){case 27:case 5:A=R.memoizedProps}wv(u,x,f,A)||$e(f)}else f.stateNode=md(A,u,x,f)}return ti(f),null;case 13:if(A=f.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(R=Pt(f),A!==null&&A.dehydrated!==null){if(u===null){if(!R)throw Error(i(318));if(!Ia)throw Error(i(344));if(R=f.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(i(317));Wu(R,f)}else sn(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;ti(f),R=!1}else ys!==null&&(uo(ys),ys=null),R=!0;if(!R)return f.flags&256?(cs(f),f):(cs(f),null)}if(cs(f),(f.flags&128)!==0)return f.lanes=x,f;if(x=A!==null,u=u!==null&&u.memoizedState!==null,x){A=f.child,R=null,A.alternate!==null&&A.alternate.memoizedState!==null&&A.alternate.memoizedState.cachePool!==null&&(R=A.alternate.memoizedState.cachePool.pool);var U=null;A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(U=A.memoizedState.cachePool.pool),U!==R&&(A.flags|=2048)}return x!==u&&x&&(f.child.flags|=8192),uf(f,f.updateQueue),ti(f),null;case 4:return Ye(),Nu(u,f),u===null&&Gm(f.stateNode.containerInfo),ti(f),null;case 10:return oo(f.type),ti(f),null;case 19:if(M(Ni),R=f.memoizedState,R===null)return ti(f),null;if(A=(f.flags&128)!==0,U=R.rendering,U===null)if(A)Gl(R,!1);else{if(_n!==0||u!==null&&(u.flags&128)!==0)for(u=f.child;u!==null;){if(U=xa(u),U!==null){for(f.flags|=128,Gl(R,!1),u=U.updateQueue,f.updateQueue=u,uf(f,u),f.subtreeFlags=0,u=x,x=f.child;x!==null;)po(x,u),x=x.sibling;return B(Ni,Ni.current&1|2),f.child}u=u.sibling}R.tail!==null&&ha()>ci&&(f.flags|=128,A=!0,Gl(R,!1),f.lanes=4194304)}else{if(!A)if(u=xa(U),u!==null){if(f.flags|=128,A=!0,u=u.updateQueue,f.updateQueue=u,uf(f,u),Gl(R,!0),R.tail===null&&R.tailMode==="hidden"&&!U.alternate&&!An)return ti(f),null}else 2*ha()-R.renderingStartTime>ci&&x!==536870912&&(f.flags|=128,A=!0,Gl(R,!1),f.lanes=4194304);R.isBackwards?(U.sibling=f.child,f.child=U):(u=R.last,u!==null?u.sibling=U:f.child=U,R.last=U)}return R.tail!==null?(f=R.tail,R.rendering=f,R.tail=f.sibling,R.renderingStartTime=ha(),f.sibling=null,u=Ni.current,B(Ni,A?u&1|2:u&1),f):(ti(f),null);case 22:case 23:return cs(f),Ol(),A=f.memoizedState!==null,u!==null?u.memoizedState!==null!==A&&(f.flags|=8192):A&&(f.flags|=8192),A?(x&536870912)!==0&&(f.flags&128)===0&&(ti(f),f.subtreeFlags&6&&(f.flags|=8192)):ti(f),x=f.updateQueue,x!==null&&uf(f,x.retryQueue),x=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),A=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(A=f.memoizedState.cachePool.pool),A!==x&&(f.flags|=2048),u!==null&&M(Mo),null;case 24:return x=null,u!==null&&(x=u.memoizedState.cache),f.memoizedState.cache!==x&&(f.flags|=2048),oo(Ln),ti(f),null;case 25:return null}throw Error(i(156,f.tag))}function ov(u,f){switch(Ce(f),f.tag){case 1:return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 3:return oo(Ln),Ye(),u=f.flags,(u&65536)!==0&&(u&128)===0?(f.flags=u&-65537|128,f):null;case 26:case 27:case 5:return Re(f),null;case 13:if(cs(f),u=f.memoizedState,u!==null&&u.dehydrated!==null){if(f.alternate===null)throw Error(i(340));sn()}return u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 19:return M(Ni),null;case 4:return Ye(),null;case 10:return oo(f.type),null;case 22:case 23:return cs(f),Ol(),u!==null&&M(Mo),u=f.flags,u&65536?(f.flags=u&-65537|128,f):null;case 24:return oo(Ln),null;case 25:return null;default:return null}}function ym(u,f){switch(Ce(f),f.tag){case 3:oo(Ln),Ye();break;case 26:case 27:case 5:Re(f);break;case 4:Ye();break;case 13:cs(f);break;case 19:M(Ni);break;case 10:oo(f.type);break;case 22:case 23:cs(f),Ol(),u!==null&&M(Mo);break;case 24:oo(Ln)}}function cf(u,f){try{var x=f.updateQueue,A=x!==null?x.lastEffect:null;if(A!==null){var R=A.next;x=R;do{if((x.tag&u)===u){A=void 0;var U=x.create,k=x.inst;A=U(),k.destroy=A}x=x.next}while(x!==R)}}catch(ne){fn(f,f.return,ne)}}function Zo(u,f,x){try{var A=f.updateQueue,R=A!==null?A.lastEffect:null;if(R!==null){var U=R.next;A=U;do{if((A.tag&u)===u){var k=A.inst,ne=k.destroy;if(ne!==void 0){k.destroy=void 0,R=f;var de=x;try{ne()}catch(Oe){fn(R,de,Oe)}}}A=A.next}while(A!==U)}}catch(Oe){fn(f,f.return,Oe)}}function lv(u){var f=u.updateQueue;if(f!==null){var x=u.stateNode;try{Je(f,x)}catch(A){fn(u,u.return,A)}}}function uv(u,f,x){x.props=ir(u.type,u.memoizedProps),x.state=u.memoizedState;try{x.componentWillUnmount()}catch(A){fn(u,f,A)}}function Vl(u,f){try{var x=u.ref;if(x!==null){var A=u.stateNode;switch(u.tag){case 26:case 27:case 5:var R=Ku(A);break;default:R=A}typeof x=="function"?u.refCleanup=x(R):x.current=R}}catch(U){fn(u,f,U)}}function ni(u,f){var x=u.ref,A=u.refCleanup;if(x!==null)if(typeof A=="function")try{A()}catch(R){fn(u,f,R)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(R){fn(u,f,R)}else x.current=null}function Iu(u){var f=u.type,x=u.memoizedProps,A=u.stateNode;try{nb(A,f,x,u)}catch(R){fn(u,u.return,R)}}function bm(u,f,x){try{Ym(u.stateNode,u.type,x,f,u)}catch(A){fn(u,u.return,A)}}function Am(u){return u.tag===5||u.tag===3||(gs?u.tag===26:!1)||(fa?u.tag===27:!1)||u.tag===4}function $h(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||Am(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&(!fa||u.tag!==27)&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function ed(u,f,x){var A=u.tag;if(A===5||A===6)u=u.stateNode,f?Jm(x,u,f):yv(x,u);else if(!(A===4||fa&&A===27)&&(u=u.child,u!==null))for(ed(u,f,x),u=u.sibling;u!==null;)ed(u,f,x),u=u.sibling}function zu(u,f,x){var A=u.tag;if(A===5||A===6)u=u.stateNode,f?qm(x,u,f):km(x,u);else if(!(A===4||fa&&A===27)&&(u=u.child,u!==null))for(zu(u,f,x),u=u.sibling;u!==null;)zu(u,f,x),u=u.sibling}function cv(u,f,x){u=u.containerInfo;try{Zm(u,x)}catch(A){fn(f,f.return,A)}}function Pu(u,f){for(fl(u.containerInfo),vi=f;vi!==null;)if(u=vi,f=u.child,(u.subtreeFlags&1028)!==0&&f!==null)f.return=u,vi=f;else for(;vi!==null;){u=vi;var x=u.alternate;switch(f=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((f&1024)!==0&&x!==null){f=void 0;var A=u,R=x.memoizedProps;x=x.memoizedState;var U=A.stateNode;try{var k=ir(A.type,R,A.elementType===A.type);f=U.getSnapshotBeforeUpdate(k,x),U.__reactInternalSnapshotBeforeUpdate=f}catch(ne){fn(A,A.return,ne)}}break;case 3:(f&1024)!==0&&ca&&yd(u.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((f&1024)!==0)throw Error(i(163))}if(f=u.sibling,f!==null){f.return=u.return,vi=f;break}vi=u.return}return k=iu,iu=!1,k}function td(u,f,x){var A=x.flags;switch(x.tag){case 0:case 11:case 15:wr(u,x),A&4&&cf(5,x);break;case 1:if(wr(u,x),A&4)if(u=x.stateNode,f===null)try{u.componentDidMount()}catch(ne){fn(x,x.return,ne)}else{var R=ir(x.type,f.memoizedProps);f=f.memoizedState;try{u.componentDidUpdate(R,f,u.__reactInternalSnapshotBeforeUpdate)}catch(ne){fn(x,x.return,ne)}}A&64&&lv(x),A&512&&Vl(x,x.return);break;case 3:if(wr(u,x),A&64&&(A=x.updateQueue,A!==null)){if(u=null,x.child!==null)switch(x.child.tag){case 27:case 5:u=Ku(x.child.stateNode);break;case 1:u=x.child.stateNode}try{Je(A,u)}catch(ne){fn(x,x.return,ne)}}break;case 26:if(gs){wr(u,x),A&512&&Vl(x,x.return);break}case 27:case 5:wr(u,x),f===null&&A&4&&Iu(x),A&512&&Vl(x,x.return);break;case 12:wr(u,x);break;case 13:wr(u,x),A&4&&Qo(u,x);break;case 22:if(R=x.memoizedState!==null||ki,!R){f=f!==null&&f.memoizedState!==null||ui;var U=ki,k=ui;ki=R,(ui=f)&&!k?el(u,x,(x.subtreeFlags&8772)!==0):wr(u,x),ki=U,ui=k}A&512&&(x.memoizedProps.mode==="manual"?Vl(x,x.return):ni(x,x.return));break;default:wr(u,x)}}function Fu(u){var f=u.alternate;f!==null&&(u.alternate=null,Fu(f)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(f=u.stateNode,f!==null&&Vm(f)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function hs(u,f,x){for(x=x.child;x!==null;)nd(u,f,x),x=x.sibling}function nd(u,f,x){if(Ka&&typeof Ka.onCommitFiberUnmount=="function")try{Ka.onCommitFiberUnmount($u,x)}catch{}switch(x.tag){case 26:if(gs){ui||ni(x,f),hs(u,f,x),x.memoizedState?a0(x.memoizedState):x.stateNode&&o0(x.stateNode);break}case 27:if(fa){ui||ni(x,f);var A=Ci,R=Za;Ci=x.stateNode,hs(u,f,x),Pv(x.stateNode),Ci=A,Za=R;break}case 5:ui||ni(x,f);case 6:if(ca){if(A=Ci,R=Za,Ci=null,hs(u,f,x),Ci=A,Za=R,Ci!==null)if(Za)try{Mi(Ci,x.stateNode)}catch(U){fn(x,f,U)}else try{za(Ci,x.stateNode)}catch(U){fn(x,f,U)}}else hs(u,f,x);break;case 18:ca&&Ci!==null&&(Za?t0(Ci,x.stateNode):Ov(Ci,x.stateNode));break;case 4:ca?(A=Ci,R=Za,Ci=x.stateNode.containerInfo,Za=!0,hs(u,f,x),Ci=A,Za=R):(ps&&cv(x.stateNode,x,bd()),hs(u,f,x));break;case 0:case 11:case 14:case 15:ui||Zo(2,x,f),ui||Zo(4,x,f),hs(u,f,x);break;case 1:ui||(ni(x,f),A=x.stateNode,typeof A.componentWillUnmount=="function"&&uv(x,f,A)),hs(u,f,x);break;case 21:hs(u,f,x);break;case 22:ui||ni(x,f),ui=(A=ui)||x.memoizedState!==null,hs(u,f,x),ui=A;break;default:hs(u,f,x)}}function Qo(u,f){if(Ia&&f.memoizedState===null&&(u=f.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Ed(u)}catch(x){fn(f,f.return,x)}}function Hu(u){switch(u.tag){case 13:case 19:var f=u.stateNode;return f===null&&(f=u.stateNode=new sc),f;case 22:return u=u.stateNode,f=u._retryCache,f===null&&(f=u._retryCache=new sc),f;default:throw Error(i(435,u.tag))}}function ff(u,f){var x=Hu(u);f.forEach(function(A){var R=Cm.bind(null,u,A);x.has(A)||(x.add(A),A.then(R,R))})}function Oa(u,f){var x=f.deletions;if(x!==null)for(var A=0;A<x.length;A++){var R=x[A],U=u,k=f;if(ca){var ne=k;e:for(;ne!==null;){switch(ne.tag){case 27:case 5:Ci=ne.stateNode,Za=!1;break e;case 3:Ci=ne.stateNode.containerInfo,Za=!0;break e;case 4:Ci=ne.stateNode.containerInfo,Za=!0;break e}ne=ne.return}if(Ci===null)throw Error(i(160));nd(U,k,R),Ci=null,Za=!1}else nd(U,k,R);U=R.alternate,U!==null&&(U.return=null),R.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)$o(f,u),f=f.sibling}function $o(u,f){var x=u.alternate,A=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Oa(f,u),Xa(u),A&4&&(Zo(3,u,u.return),cf(3,u),Zo(5,u,u.return));break;case 1:Oa(f,u),Xa(u),A&512&&(ui||x===null||ni(x,x.return)),A&64&&ki&&(u=u.updateQueue,u!==null&&(A=u.callbacks,A!==null&&(x=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=x===null?A:x.concat(A))));break;case 26:if(gs){var R=Pa;Oa(f,u),Xa(u),A&512&&(ui||x===null||ni(x,x.return)),A&4&&(A=x!==null?x.memoizedState:null,f=u.memoizedState,x===null?f===null?u.stateNode===null?u.stateNode=s0(R,u.type,u.memoizedProps,u):r0(R,u.type,u.stateNode):u.stateNode=i0(R,f,u.memoizedProps):A!==f?(A===null?x.stateNode!==null&&o0(x.stateNode):a0(A),f===null?r0(R,u.type,u.stateNode):i0(R,f,u.memoizedProps)):f===null&&u.stateNode!==null&&bm(u,u.memoizedProps,x.memoizedProps));break}case 27:if(fa&&A&4&&u.alternate===null){R=u.stateNode;var U=u.memoizedProps;try{rb(R),ob(u.type,U,R,u)}catch(nt){fn(u,u.return,nt)}}case 5:if(Oa(f,u),Xa(u),A&512&&(ui||x===null||ni(x,x.return)),ca){if(u.flags&32){f=u.stateNode;try{Mf(f)}catch(nt){fn(u,u.return,nt)}}A&4&&u.stateNode!=null&&(f=u.memoizedProps,bm(u,f,x!==null?x.memoizedProps:f)),A&1024&&(yl=!0)}break;case 6:if(Oa(f,u),Xa(u),A&4&&ca){if(u.stateNode===null)throw Error(i(162));A=u.memoizedProps,x=x!==null?x.memoizedProps:A,f=u.stateNode;try{bv(f,x,A)}catch(nt){fn(u,u.return,nt)}}break;case 3:if(gs?(l0(),R=Pa,Pa=Td(f.containerInfo),Oa(f,u),Pa=R):Oa(f,u),Xa(u),A&4){if(ca&&Ia&&x!==null&&x.memoizedState.isDehydrated)try{Md(f.containerInfo)}catch(nt){fn(u,u.return,nt)}if(ps){A=f.containerInfo,x=f.pendingChildren;try{Zm(A,x)}catch(nt){fn(u,u.return,nt)}}}yl&&(yl=!1,Sm(u));break;case 4:gs?(x=Pa,Pa=Td(u.stateNode.containerInfo),Oa(f,u),Xa(u),Pa=x):(Oa(f,u),Xa(u)),A&4&&ps&&cv(u.stateNode,u,u.stateNode.pendingChildren);break;case 12:Oa(f,u),Xa(u);break;case 13:Oa(f,u),Xa(u),u.child.flags&8192&&u.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(Yr=ha()),A&4&&(A=u.updateQueue,A!==null&&(u.updateQueue=null,ff(u,A)));break;case 22:A&512&&(ui||x===null||ni(x,x.return)),R=u.memoizedState!==null;var k=x!==null&&x.memoizedState!==null,ne=ki,de=ui;if(ki=ne||R,ui=de||k,Oa(f,u),ui=de,ki=ne,Xa(u),f=u.stateNode,f._current=u,f._visibility&=-3,f._visibility|=f._pendingVisibility&2,A&8192&&(f._visibility=R?f._visibility&-2:f._visibility|1,R&&(f=ki||ui,x===null||k||f||Gu(u)),ca&&(u.memoizedProps===null||u.memoizedProps.mode!=="manual"))){e:if(x=null,ca)for(f=u;;){if(f.tag===5||gs&&f.tag===26||fa&&f.tag===27){if(x===null){k=x=f;try{U=k.stateNode,R?Ef(U):Km(k.stateNode,k.memoizedProps)}catch(nt){fn(k,k.return,nt)}}}else if(f.tag===6){if(x===null){k=f;try{var Oe=k.stateNode;R?_d(Oe):_o(Oe,k.memoizedProps)}catch(nt){fn(k,k.return,nt)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===u)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===u)break e;for(;f.sibling===null;){if(f.return===null||f.return===u)break e;x===f&&(x=null),f=f.return}x===f&&(x=null),f.sibling.return=f.return,f=f.sibling}}A&4&&(A=u.updateQueue,A!==null&&(x=A.retryQueue,x!==null&&(A.retryQueue=null,ff(u,x))));break;case 19:Oa(f,u),Xa(u),A&4&&(A=u.updateQueue,A!==null&&(u.updateQueue=null,ff(u,A)));break;case 21:break;default:Oa(f,u),Xa(u)}}function Xa(u){var f=u.flags;if(f&2){try{if(ca&&(!fa||u.tag!==27)){e:{for(var x=u.return;x!==null;){if(Am(x)){var A=x;break e}x=x.return}throw Error(i(160))}switch(A.tag){case 27:if(fa){var R=A.stateNode,U=$h(u);zu(u,U,R);break}case 5:var k=A.stateNode;A.flags&32&&(Mf(k),A.flags&=-33);var ne=$h(u);zu(u,ne,k);break;case 3:case 4:var de=A.stateNode.containerInfo,Oe=$h(u);ed(u,Oe,de);break;default:throw Error(i(161))}}}catch(nt){fn(u,u.return,nt)}u.flags&=-3}f&4096&&(u.flags&=-4097)}function Sm(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var f=u;Sm(f),f.tag===5&&f.flags&1024&&kn(f.stateNode),u=u.sibling}}function wr(u,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)td(u,f.alternate,f),f=f.sibling}function Gu(u){for(u=u.child;u!==null;){var f=u;switch(f.tag){case 0:case 11:case 14:case 15:Zo(4,f,f.return),Gu(f);break;case 1:ni(f,f.return);var x=f.stateNode;typeof x.componentWillUnmount=="function"&&uv(f,f.return,x),Gu(f);break;case 26:case 27:case 5:ni(f,f.return),Gu(f);break;case 22:ni(f,f.return),f.memoizedState===null&&Gu(f);break;default:Gu(f)}u=u.sibling}}function el(u,f,x){for(x=x&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var A=f.alternate,R=u,U=f,k=U.flags;switch(U.tag){case 0:case 11:case 15:el(R,U,x),cf(4,U);break;case 1:if(el(R,U,x),A=U,R=A.stateNode,typeof R.componentDidMount=="function")try{R.componentDidMount()}catch(Oe){fn(A,A.return,Oe)}if(A=U,R=A.updateQueue,R!==null){var ne=A.stateNode;try{var de=R.shared.hiddenCallbacks;if(de!==null)for(R.shared.hiddenCallbacks=null,R=0;R<de.length;R++)Q(de[R],ne)}catch(Oe){fn(A,A.return,Oe)}}x&&k&64&&lv(U),Vl(U,U.return);break;case 26:case 27:case 5:el(R,U,x),x&&A===null&&k&4&&Iu(U),Vl(U,U.return);break;case 12:el(R,U,x);break;case 13:el(R,U,x),x&&k&4&&Qo(R,U);break;case 22:U.memoizedState===null&&el(R,U,x),Vl(U,U.return);break;default:el(R,U,x)}f=f.sibling}}function Mm(u,f){var x=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(x=u.memoizedState.cachePool.pool),u=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(u=f.memoizedState.cachePool.pool),u!==x&&(u!=null&&u.refCount++,x!=null&&Uu(x))}function id(u,f){u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Uu(u))}function lo(u,f,x,A){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)ad(u,f,x,A),f=f.sibling}function ad(u,f,x,A){var R=f.flags;switch(f.tag){case 0:case 11:case 15:lo(u,f,x,A),R&2048&&cf(9,f);break;case 3:lo(u,f,x,A),R&2048&&(u=null,f.alternate!==null&&(u=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==u&&(f.refCount++,u!=null&&Uu(u)));break;case 12:if(R&2048){lo(u,f,x,A),u=f.stateNode;try{var U=f.memoizedProps,k=U.id,ne=U.onPostCommit;typeof ne=="function"&&ne(k,f.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(de){fn(f,f.return,de)}}else lo(u,f,x,A);break;case 23:break;case 22:U=f.stateNode,f.memoizedState!==null?U._visibility&4?lo(u,f,x,A):tl(u,f):U._visibility&4?lo(u,f,x,A):(U._visibility|=4,ya(u,f,x,A,(f.subtreeFlags&10256)!==0)),R&2048&&Mm(f.alternate,f);break;case 24:lo(u,f,x,A),R&2048&&id(f.alternate,f);break;default:lo(u,f,x,A)}}function ya(u,f,x,A,R){for(R=R&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var U=u,k=f,ne=x,de=A,Oe=k.flags;switch(k.tag){case 0:case 11:case 15:ya(U,k,ne,de,R),cf(8,k);break;case 23:break;case 22:var nt=k.stateNode;k.memoizedState!==null?nt._visibility&4?ya(U,k,ne,de,R):tl(U,k):(nt._visibility|=4,ya(U,k,ne,de,R)),R&&Oe&2048&&Mm(k.alternate,k);break;case 24:ya(U,k,ne,de,R),R&&Oe&2048&&id(k.alternate,k);break;default:ya(U,k,ne,de,R)}f=f.sibling}}function tl(u,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var x=u,A=f,R=A.flags;switch(A.tag){case 22:tl(x,A),R&2048&&Mm(A.alternate,A);break;case 24:tl(x,A),R&2048&&id(A.alternate,A);break;default:tl(x,A)}f=f.sibling}}function Qi(u){if(u.subtreeFlags&au)for(u=u.child;u!==null;)Xl(u),u=u.sibling}function Xl(u){switch(u.tag){case 26:Qi(u),u.flags&au&&(u.memoizedState!==null?c0(Pa,u.memoizedState,u.memoizedProps):hi(u.type,u.memoizedProps));break;case 5:Qi(u),u.flags&au&&hi(u.type,u.memoizedProps);break;case 3:case 4:if(gs){var f=Pa;Pa=Td(u.stateNode.containerInfo),Qi(u),Pa=f}else Qi(u);break;case 22:u.memoizedState===null&&(f=u.alternate,f!==null&&f.memoizedState!==null?(f=au,au=16777216,Qi(u),au=f):Qi(u));break;default:Qi(u)}}function sd(u){var f=u.alternate;if(f!==null&&(u=f.child,u!==null)){f.child=null;do f=u.sibling,u.sibling=null,u=f;while(u!==null)}}function nl(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var x=0;x<f.length;x++){var A=f[x];vi=A,il(A,u)}sd(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)hf(u),u=u.sibling}function hf(u){switch(u.tag){case 0:case 11:case 15:nl(u),u.flags&2048&&Zo(9,u,u.return);break;case 3:nl(u);break;case 12:nl(u);break;case 22:var f=u.stateNode;u.memoizedState!==null&&f._visibility&4&&(u.return===null||u.return.tag!==13)?(f._visibility&=-5,Vu(u)):nl(u);break;default:nl(u)}}function Vu(u){var f=u.deletions;if((u.flags&16)!==0){if(f!==null)for(var x=0;x<f.length;x++){var A=f[x];vi=A,il(A,u)}sd(u)}for(u=u.child;u!==null;){switch(f=u,f.tag){case 0:case 11:case 15:Zo(8,f,f.return),Vu(f);break;case 22:x=f.stateNode,x._visibility&4&&(x._visibility&=-5,Vu(f));break;default:Vu(f)}u=u.sibling}}function il(u,f){for(;vi!==null;){var x=vi;switch(x.tag){case 0:case 11:case 15:Zo(8,x,f);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var A=x.memoizedState.cachePool.pool;A!=null&&A.refCount++}break;case 24:Uu(x.memoizedState.cache)}if(A=x.child,A!==null)A.return=x,vi=A;else e:for(x=u;vi!==null;){A=vi;var R=A.sibling,U=A.return;if(Fu(A),A===x){vi=null;break e}if(R!==null){R.return=U,vi=R;break e}vi=U}}}function rd(u){var f=Hm(u);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(i(364));return f}if(u=Ql(u),u===null)throw Error(i(362));return u.stateNode.current}function Xu(u,f){var x=u.tag;switch(f.$$typeof){case Hf:if(u.type===f.value)return!0;break;case zd:e:{for(f=f.value,u=[u,0],x=0;x<u.length;){var A=u[x++],R=A.tag,U=u[x++],k=f[U];if(R!==5&&R!==26&&R!==27||!Hr(A)){for(;k!=null&&Xu(A,k);)U++,k=f[U];if(U===f.length){f=!0;break e}else for(A=A.child;A!==null;)u.push(A,U),A=A.sibling}}f=!1}return f;case Pd:if((x===5||x===26||x===27)&&tb(u.stateNode,f.value))return!0;break;case In:if((x===5||x===6||x===26||x===27)&&(u=Sf(u),u!==null&&0<=u.indexOf(f.value)))return!0;break;case xn:if((x===5||x===26||x===27)&&(u=u.memoizedProps["data-testname"],typeof u=="string"&&u.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(i(365))}return!1}function al(u){switch(u.$$typeof){case Hf:return"<"+(l(u.value)||"Unknown")+">";case zd:return":has("+(al(u)||"")+")";case Pd:return'[role="'+u.value+'"]';case In:return'"'+u.value+'"';case xn:return'[data-testname="'+u.value+'"]';default:throw Error(i(365))}}function fv(u,f){var x=[];u=[u,0];for(var A=0;A<u.length;){var R=u[A++],U=R.tag,k=u[A++],ne=f[k];if(U!==5&&U!==26&&U!==27||!Hr(R)){for(;ne!=null&&Xu(R,ne);)k++,ne=f[k];if(k===f.length)x.push(R);else for(R=R.child;R!==null;)u.push(R,k),R=R.sibling}}return x}function Na(u,f){if(!Fr)throw Error(i(363));u=rd(u),u=fv(u,f),f=[],u=Array.from(u);for(var x=0;x<u.length;){var A=u[x++],R=A.tag;if(R===5||R===26||R===27)Hr(A)||f.push(A.stateNode);else for(A=A.child;A!==null;)u.push(A),A=A.sibling}return f}function La(){if((Dt&2)!==0&&tn!==0)return tn&-tn;if(Lt.T!==null){var u=Wa;return u!==0?u:Fe()}return Hs()}function Ur(){Qa===0&&(Qa=(tn&536870912)===0||An?G():536870912);var u=Ss.current;return u!==null&&(u.flags|=32),Qa}function ba(u,f,x){(u===on&&Yn===2||u.cancelPendingCommit!==null)&&(sr(u,0),ar(u,tn,Qa,!1)),Y(u,x),((Dt&2)===0||u!==on)&&(u===on&&((Dt&2)===0&&(hr|=x),_n===4&&ar(u,tn,Qa,!1)),ot(u))}function df(u,f,x){if((Dt&6)!==0)throw Error(i(327));var A=!x&&(f&60)===0&&(f&u.expiredLanes)===0||O(u,f),R=A?Lr(u,f):Or(u,f,!0),U=A;do{if(R===0){Ms&&!A&&ar(u,f,0,!1);break}else if(R===6)ar(u,f,0,!zn);else{if(x=u.current.alternate,U&&!hv(x)){R=Or(u,f,!1),U=!1;continue}if(R===2){if(U=f,u.errorRecoveryDisabledLanes&U)var k=0;else k=u.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){f=k;e:{var ne=u;R=rc;var de=Ia&&ne.current.memoizedState.isDehydrated;if(de&&(sr(ne,k).flags|=256),k=Or(ne,k,!1),k!==2){if(Eo&&!de){ne.errorRecoveryDisabledLanes|=U,hr|=U,R=4;break e}U=Ts,Ts=R,U!==null&&uo(U)}R=k}if(U=!1,R!==2)continue}}if(R===1){sr(u,0),ar(u,f,0,!0);break}e:{switch(A=u,R){case 0:case 1:throw Error(i(345));case 4:if((f&4194176)===f){ar(A,f,Qa,!zn);break e}break;case 2:Ts=null;break;case 3:case 5:break;default:throw Error(i(329))}if(A.finishedWork=x,A.finishedLanes=f,(f&62914560)===f&&(U=Yr+300-ha(),10<U)){if(ar(A,f,Qa,!zn),z(A,0)!==0)break e;A.timeoutHandle=Fm(od.bind(null,A,x,Ts,dr,oc,f,Qa,hr,To,zn,2,-0,0),U);break e}od(A,x,Ts,dr,oc,f,Qa,hr,To,zn,0,-0,0)}}break}while(!0);ot(u)}function uo(u){Ts===null?Ts=u:Ts.push.apply(Ts,u)}function od(u,f,x,A,R,U,k,ne,de,Oe,nt,ct,pt){var Xt=f.subtreeFlags;if((Xt&8192||(Xt&16785408)===16785408)&&(ms(),Xl(f),f=gd(),f!==null)){u.cancelPendingCommit=f(jn.bind(null,u,x,A,R,k,ne,de,1,ct,pt)),ar(u,U,k,!Oe);return}jn(u,x,A,R,k,ne,de,nt,ct,pt)}function hv(u){for(var f=u;;){var x=f.tag;if((x===0||x===11||x===15)&&f.flags&16384&&(x=f.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var A=0;A<x.length;A++){var R=x[A],U=R.getSnapshot;R=R.value;try{if(!vs(U(),R))return!1}catch{return!1}}if(x=f.child,f.subtreeFlags&16384&&x!==null)x.return=f,f=x;else{if(f===u)break;for(;f.sibling===null;){if(f.return===null||f.return===u)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function ar(u,f,x,A){f&=~Ca,f&=~hr,u.suspendedLanes|=f,u.pingedLanes&=~f,A&&(u.warmLanes|=f),A=u.expirationTimes;for(var R=f;0<R;){var U=31-Ja(R),k=1<<U;A[U]=-1,R&=~k}x!==0&&te(u,x,f)}function Em(){return(Dt&6)===0?(it(0),!1):!0}function ka(){if(Yt!==null){if(Yn===0)var u=Yt.return;else u=Yt,gi=_l=null,Ll(u),Vr=null,Xs=0,u=Yt;for(;u!==null;)ym(u.alternate,u),u=u.return;Yt=null}}function sr(u,f){u.finishedWork=null,u.finishedLanes=0;var x=u.timeoutHandle;x!==Zl&&(u.timeoutHandle=Zl,Af(x)),x=u.cancelPendingCommit,x!==null&&(u.cancelPendingCommit=null,x()),ka(),on=u,Yt=x=Aa(u.current,null),tn=f,Yn=0,Ri=null,zn=!1,Ms=O(u,f),Eo=!1,To=Qa=Ca=hr=Es=_n=0,Ts=rc=null,oc=!1,(f&8)!==0&&(f|=f&32);var A=u.entangledLanes;if(A!==0)for(u=u.entanglements,A&=f;0<A;){var R=31-Ja(A),U=1<<R;f|=u[R],A&=~U}return fr=f,ze(),x}function kl(u,f){jt=null,Lt.H=Sn,f===Gn?(f=lt(),Yn=3):f===p0?(f=lt(),Yn=4):Yn=f===Yv?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,Ri=f,Yt===null&&(_n=1,qh(u,oe(f,u.current)))}function pf(){var u=Ss.current;return u===null?!0:(tn&4194176)===tn?ks===null:(tn&62914560)===tn||(tn&536870912)!==0?u===ks:!1}function ku(){var u=Lt.H;return Lt.H=Sn,u===null?Sn:u}function ds(){var u=Lt.A;return Lt.A=Id,u}function Ya(){_n=4,zn||(tn&4194176)!==tn&&Ss.current!==null||(Ms=!0),(Es&134217727)===0&&(hr&134217727)===0||on===null||ar(on,tn,Qa,!1)}function Or(u,f,x){var A=Dt;Dt|=2;var R=ku(),U=ds();(on!==u||tn!==f)&&(dr=null,sr(u,f)),f=!1;var k=_n;e:do try{if(Yn!==0&&Yt!==null){var ne=Yt,de=Ri;switch(Yn){case 8:ka(),k=6;break e;case 3:case 2:case 6:Ss.current===null&&(f=!0);var Oe=Yn;if(Yn=0,Ri=null,sl(u,ne,de,Oe),x&&Ms){k=0;break e}break;default:Oe=Yn,Yn=0,Ri=null,sl(u,ne,de,Oe)}}Nr(),k=_n;break}catch(nt){kl(u,nt)}while(!0);return f&&u.shellSuspendCounter++,gi=_l=null,Dt=A,Lt.H=R,Lt.A=U,Yt===null&&(on=null,tn=0,ze()),k}function Nr(){for(;Yt!==null;)Tm(Yt)}function Lr(u,f){var x=Dt;Dt|=2;var A=ku(),R=ds();on!==u||tn!==f?(dr=null,ci=ha()+500,sr(u,f)):Ms=O(u,f);e:do try{if(Yn!==0&&Yt!==null){f=Yt;var U=Ri;t:switch(Yn){case 1:Yn=0,Ri=null,sl(u,f,U,1);break;case 2:if(Ze(U)){Yn=0,Ri=null,ld(f);break}f=function(){Yn===2&&on===u&&(Yn=7),ot(u)},U.then(f,f);break e;case 3:Yn=7;break e;case 4:Yn=5;break e;case 7:Ze(U)?(Yn=0,Ri=null,ld(f)):(Yn=0,Ri=null,sl(u,f,U,7));break;case 5:var k=null;switch(Yt.tag){case 26:k=Yt.memoizedState;case 5:case 27:var ne=Yt,de=ne.type,Oe=ne.pendingProps;if(k?u0(k):xo(de,Oe)){Yn=0,Ri=null;var nt=ne.sibling;if(nt!==null)Yt=nt;else{var ct=ne.return;ct!==null?(Yt=ct,mf(ct)):Yt=null}break t}}Yn=0,Ri=null,sl(u,f,U,5);break;case 6:Yn=0,Ri=null,sl(u,f,U,6);break;case 8:ka(),_n=6;break e;default:throw Error(i(462))}}co();break}catch(pt){kl(u,pt)}while(!0);return gi=_l=null,Lt.H=A,Lt.A=R,Dt=x,Yt!==null?0:(on=null,tn=0,ze(),_n)}function co(){for(;Yt!==null&&!Hv();)Tm(Yt)}function Tm(u){var f=av(u.alternate,u,fr);u.memoizedProps=u.pendingProps,f===null?mf(u):Yt=f}function ld(u){var f=u,x=f.alternate;switch(f.tag){case 15:case 0:f=$g(x,f,f.pendingProps,f.type,void 0,tn);break;case 11:f=$g(x,f,f.pendingProps,f.type.render,f.ref,tn);break;case 5:Ll(f);default:ym(x,f),f=Yt=po(f,fr),f=av(x,f,fr)}u.memoizedProps=u.pendingProps,f===null?mf(u):Yt=f}function sl(u,f,x,A){gi=_l=null,Ll(f),Vr=null,Xs=0;var R=f.return;try{if(Kg(u,R,f,x,tn)){_n=1,qh(u,oe(x,u.current)),Yt=null;return}}catch(U){if(R!==null)throw Yt=R,U;_n=1,qh(u,oe(x,u.current)),Yt=null;return}f.flags&32768?(An||A===1?u=!0:Ms||(tn&536870912)!==0?u=!1:(zn=u=!0,(A===2||A===3||A===6)&&(A=Ss.current,A!==null&&A.tag===13&&(A.flags|=16384))),$i(f,u)):mf(f)}function mf(u){var f=u;do{if((f.flags&32768)!==0){$i(f,zn);return}u=f.return;var x=rv(f.alternate,f,fr);if(x!==null){Yt=x;return}if(f=f.sibling,f!==null){Yt=f;return}Yt=f=u}while(f!==null);_n===0&&(_n=5)}function $i(u,f){do{var x=ov(u.alternate,u);if(x!==null){x.flags&=32767,Yt=x;return}if(x=u.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!f&&(u=u.sibling,u!==null)){Yt=u;return}Yt=u=x}while(u!==null);_n=6,Yt=null}function jn(u,f,x,A,R,U,k,ne,de,Oe){var nt=Lt.T,ct=Xi();try{Sa(2),Lt.T=null,dn(u,f,x,A,ct,R,U,k,ne,de,Oe)}finally{Lt.T=nt,Sa(ct)}}function dn(u,f,x,A,R,U,k,ne){do ea();while(Co!==null);if((Dt&6)!==0)throw Error(i(327));var de=u.finishedWork;if(A=u.finishedLanes,de===null)return null;if(u.finishedWork=null,u.finishedLanes=0,de===u.current)throw Error(i(177));u.callbackNode=null,u.callbackPriority=0,u.cancelPendingCommit=null;var Oe=de.lanes|de.childLanes;if(Oe|=tc,ee(u,A,Oe,U,k,ne),u===on&&(Yt=on=null,tn=0),(de.subtreeFlags&10256)===0&&(de.flags&10256)===0||qs||(qs=!0,Fd=Oe,ru=x,gf(Rd,function(){return ea(),null})),x=(de.flags&15990)!==0,(de.subtreeFlags&15990)!==0||x?(x=Lt.T,Lt.T=null,U=Xi(),Sa(2),k=Dt,Dt|=4,Pu(u,de),$o(de,u),zm(u.containerInfo),u.current=de,td(u,de.alternate,de),Gv(),Dt=k,Sa(U),Lt.T=x):u.current=de,qs?(qs=!1,Co=u,su=A):fo(u,Oe),Oe=u.pendingLanes,Oe===0&&(Cs=null),F(de.stateNode),ot(u),f!==null)for(R=u.onRecoverableError,de=0;de<f.length;de++)Oe=f[de],R(Oe.value,{componentStack:Oe.stack});return(su&3)!==0&&ea(),Oe=u.pendingLanes,(A&4194218)!==0&&(Oe&42)!==0?u===Fa?ou++:(ou=0,Fa=u):ou=0,it(0),null}function fo(u,f){(u.pooledCacheLanes&=f)===0&&(f=u.pooledCache,f!=null&&(u.pooledCache=null,Uu(f)))}function ea(){if(Co!==null){var u=Co,f=Fd;Fd=0;var x=re(su),A=32>x?32:x;x=Lt.T;var R=Xi();try{if(Sa(A),Lt.T=null,Co===null)var U=!1;else{A=ru,ru=null;var k=Co,ne=su;if(Co=null,su=0,(Dt&6)!==0)throw Error(i(331));var de=Dt;if(Dt|=4,hf(k.current),ad(k,k.current,ne,A),Dt=de,it(0,!1),Ka&&typeof Ka.onPostCommitFiberRoot=="function")try{Ka.onPostCommitFiberRoot($u,k)}catch{}U=!0}return U}finally{Sa(R),Lt.T=x,fo(u,f)}}return!1}function ud(u,f,x){f=oe(x,f),f=af(u.stateNode,f,2),u=Ge(u,f,2),u!==null&&(Y(u,2),ot(u))}function fn(u,f,x){if(u.tag===3)ud(u,u,x);else for(;f!==null;){if(f.tag===3){ud(f,u,x);break}else if(f.tag===1){var A=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(Cs===null||!Cs.has(A))){u=oe(x,u),x=wu(2),A=Ge(f,x,2),A!==null&&(sf(x,A,f,u),Y(A,2),ot(A));break}}f=f.return}}function cd(u,f,x){var A=u.pingCache;if(A===null){A=u.pingCache=new hn;var R=new Set;A.set(f,R)}else R=A.get(f),R===void 0&&(R=new Set,A.set(f,R));R.has(x)||(Eo=!0,R.add(x),u=dv.bind(null,u,f,x),f.then(u,u))}function dv(u,f,x){var A=u.pingCache;A!==null&&A.delete(f),u.pingedLanes|=u.suspendedLanes&x,u.warmLanes&=~x,on===u&&(tn&x)===x&&(_n===4||_n===3&&(tn&62914560)===tn&&300>ha()-Yr?(Dt&2)===0&&sr(u,0):Ca|=x,To===tn&&(To=0)),ot(u)}function Yl(u,f){f===0&&(f=L()),u=ke(u,f),u!==null&&(Y(u,f),ot(u))}function ql(u){var f=u.memoizedState,x=0;f!==null&&(x=f.retryLane),Yl(u,x)}function Cm(u,f){var x=0;switch(u.tag){case 13:var A=u.stateNode,R=u.memoizedState;R!==null&&(x=R.retryLane);break;case 19:A=u.stateNode;break;case 22:A=u.stateNode._retryCache;break;default:throw Error(i(314))}A!==null&&A.delete(f),Yl(u,x)}function gf(u,f){return Qu(u,f)}function Rm(u,f,x,A){this.tag=u,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ho(u){return u=u.prototype,!(!u||!u.isReactComponent)}function Aa(u,f){var x=u.alternate;return x===null?(x=t(u.tag,f,u.key,u.mode),x.elementType=u.elementType,x.type=u.type,x.stateNode=u.stateNode,x.alternate=u,u.alternate=x):(x.pendingProps=f,x.type=u.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=u.flags&31457280,x.childLanes=u.childLanes,x.lanes=u.lanes,x.child=u.child,x.memoizedProps=u.memoizedProps,x.memoizedState=u.memoizedState,x.updateQueue=u.updateQueue,f=u.dependencies,x.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},x.sibling=u.sibling,x.index=u.index,x.ref=u.ref,x.refCleanup=u.refCleanup,x}function po(u,f){u.flags&=31457282;var x=u.alternate;return x===null?(u.childLanes=0,u.lanes=f,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=x.childLanes,u.lanes=x.lanes,u.child=x.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=x.memoizedProps,u.memoizedState=x.memoizedState,u.updateQueue=x.updateQueue,u.type=x.type,f=x.dependencies,u.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),u}function Fs(u,f,x,A,R,U){var k=0;if(A=u,typeof u=="function")ho(u)&&(k=1);else if(typeof u=="string")k=gs&&fa?n0(u,x,na.current)?26:ju(u)?27:5:gs?n0(u,x,na.current)?26:5:fa&&ju(u)?27:5;else e:switch(u){case qu:return mo(x.children,R,U,f);case Om:k=8,R|=24;break;case Nm:return u=t(12,x,f,R|2),u.elementType=Nm,u.lanes=U,u;case hd:return u=t(13,x,f,R),u.elementType=hd,u.lanes=U,u;case ll:return u=t(19,x,f,R),u.elementType=ll,u.lanes=U,u;case _f:return fd(x,R,U,f);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case gv:case Ir:k=10;break e;case ol:k=9;break e;case Ju:k=11;break e;case xf:k=14;break e;case or:k=16,A=null;break e}k=29,x=Error(i(130,u===null?"null":typeof u,"")),A=null}return f=t(k,x,f,R),f.elementType=u,f.type=A,f.lanes=U,f}function mo(u,f,x,A){return u=t(7,u,A,f),u.lanes=x,u}function fd(u,f,x,A){u=t(22,u,A,f),u.elementType=_f,u.lanes=x;var R={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var U=R._current;if(U===null)throw Error(i(456));if((R._pendingVisibility&2)===0){var k=ke(U,2);k!==null&&(R._pendingVisibility|=2,ba(k,U,2))}},attach:function(){var U=R._current;if(U===null)throw Error(i(456));if((R._pendingVisibility&2)!==0){var k=ke(U,2);k!==null&&(R._pendingVisibility&=-3,ba(k,U,2))}}};return u.stateNode=R,u}function rl(u,f,x){return u=t(6,u,null,f),u.lanes=x,u}function Yu(u,f,x){return f=t(4,u.children!==null?u.children:[],u.key,f),f.lanes=x,f.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},f}function Jl(u,f,x,A,R,U,k,ne){this.tag=1,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Zl,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=I(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=I(0),this.hiddenUpdates=I(null),this.identifierPrefix=A,this.onUncaughtError=R,this.onCaughtError=U,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function ta(u,f,x,A,R,U,k,ne,de,Oe,nt,ct){return u=new Jl(u,f,x,k,ne,de,Oe,ct),f=1,U===!0&&(f|=24),U=t(3,null,null,f),u.current=U,U.stateNode=u,f=jh(),f.refCount++,u.pooledCache=f,f.refCount++,U.memoizedState={element:A,isDehydrated:x,cache:f},St(U),u}function vf(u){return u?(u=$l,u):$l}function Bm(u){var f=u._reactInternals;if(f===void 0)throw typeof u.render=="function"?Error(i(188)):(u=Object.keys(u).join(","),Error(i(268,u)));return u=y(f),u=u!==null?S(u):null,u===null?null:Ku(u.stateNode)}function pv(u,f,x,A,R,U){R=vf(R),A.context===null?A.context=R:A.pendingContext=R,A=Ie(f),A.payload={element:x},U=U===void 0?null:U,U!==null&&(A.callback=U),x=Ge(u,A,f),x!==null&&(ba(x,u,f),_t(x,u,f))}function mv(u,f){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var x=u.retryLane;u.retryLane=x!==0&&x<f?x:f}}function Dm(u,f){mv(u,f),(u=u.alternate)&&mv(u,f)}var Bt={},wm=Kp(),ua=x4(),Kl=Object.assign,Um=Symbol.for("react.element"),go=Symbol.for("react.transitional.element"),rr=Symbol.for("react.portal"),qu=Symbol.for("react.fragment"),Om=Symbol.for("react.strict_mode"),Nm=Symbol.for("react.profiler"),gv=Symbol.for("react.provider"),ol=Symbol.for("react.consumer"),Ir=Symbol.for("react.context"),Ju=Symbol.for("react.forward_ref"),hd=Symbol.for("react.suspense"),ll=Symbol.for("react.suspense_list"),xf=Symbol.for("react.memo"),or=Symbol.for("react.lazy"),_f=Symbol.for("react.offscreen"),vv=Symbol.for("react.memo_cache_sentinel"),Lm=Symbol.iterator,Wl=Symbol.for("react.client.reference"),Lt=wm.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,dd,Im,ul=!1,cl=Array.isArray,pd=e.rendererVersion,yf=e.rendererPackageName,bf=e.extraDevToolsConfig,Ku=e.getPublicInstance,jl=e.getRootHostContext,xv=e.getChildHostContext,fl=e.prepareForCommit,zm=e.resetAfterCommit,Pm=e.createInstance,zr=e.appendInitialChild,vo=e.finalizeInitialChildren,hl=e.shouldSetTextContent,md=e.createTextInstance,Fm=e.scheduleTimeout,Af=e.cancelTimeout,Zl=e.noTimeout,Pr=e.isPrimaryRenderer;e.warnsIfNotActing;var ca=e.supportsMutation,ps=e.supportsPersistence,Ia=e.supportsHydration,Hm=e.getInstanceFromNode;e.beforeActiveInstanceBlur,e.afterActiveInstanceBlur;var Gm=e.preparePortalMount;e.prepareScopeUpdate,e.getInstanceFromScope;var Sa=e.setCurrentUpdatePriority,Xi=e.getCurrentUpdatePriority,Hs=e.resolveUpdatePriority;e.resolveEventType,e.resolveEventTimeStamp;var dl=e.shouldAttemptEagerTransition,Vm=e.detachDeletedInstance;e.requestPostPaintCallback;var _v=e.maySuspendCommit,xo=e.preloadInstance,ms=e.startSuspendingCommit,hi=e.suspendInstance,gd=e.waitForCommitToBeReady,qa=e.NotPendingTransition,Ht=e.HostTransitionContext,kn=e.resetFormInstance;e.bindToConsole;var Oi=e.supportsMicrotasks,vd=e.scheduleMicrotask,Fr=e.supportsTestSelectors,Ql=e.findFiberRoot,xd=e.getBoundingRect,Sf=e.getTextContent,Hr=e.isHiddenSubtree,tb=e.matchAccessibilityRole,di=e.setFocusIfFocusable,Xm=e.setupIntersectionObserver,km=e.appendChild,yv=e.appendChildToContainer,bv=e.commitTextUpdate,nb=e.commitMount,Ym=e.commitUpdate,qm=e.insertBefore,Jm=e.insertInContainerBefore,za=e.removeChild,Mi=e.removeChildFromContainer,Mf=e.resetTextContent,Ef=e.hideInstance,_d=e.hideTextInstance,Km=e.unhideInstance,_o=e.unhideTextInstance,yd=e.clearContainer,Wm=e.cloneInstance,bd=e.createContainerChildSet,jm=e.appendChildToContainerChildSet,Av=e.finalizeContainerChildren,Zm=e.replaceContainerChildren,Qm=e.cloneHiddenInstance,$m=e.cloneHiddenTextInstance,Ad=e.isSuspenseInstancePending,Tf=e.isSuspenseInstanceFallback,Sv=e.getSuspenseInstanceFallbackErrorDetails,ib=e.registerSuspenseInstanceRetry,Mv=e.canHydrateFormStateMarker,Ev=e.isFormStateMarkerMatching,e0=e.getNextHydratableSibling,Sd=e.getFirstHydratableChild,Tv=e.getFirstHydratableChildWithinContainer,Cv=e.getFirstHydratableChildWithinSuspenseInstance,Rv=e.canHydrateInstance,Bv=e.canHydrateTextInstance,Dv=e.canHydrateSuspenseInstance,ab=e.hydrateInstance,wv=e.hydrateTextInstance,Wu=e.hydrateSuspenseInstance,Uv=e.getNextHydratableInstanceAfterSuspenseInstance,Md=e.commitHydratedContainer,Ed=e.commitHydratedSuspenseInstance,Ov=e.clearSuspenseBoundary,t0=e.clearSuspenseBoundaryFromContainer,Nv=e.shouldDeleteUnhydratedTailInstances;e.diffHydratedPropsForDevWarnings,e.diffHydratedTextForDevWarnings,e.describeHydratableInstanceForDevWarnings;var Lv=e.validateHydratableInstance,Iv=e.validateHydratableTextInstance,gs=e.supportsResources,n0=e.isHostHoistableType,Td=e.getHoistableRoot,Cd=e.getResource,i0=e.acquireResource,a0=e.releaseResource,s0=e.hydrateHoistable,r0=e.mountHoistable,o0=e.unmountHoistable,sb=e.createHoistableInstance,l0=e.prepareToCommitHoistables,zv=e.mayResourceSuspendCommit,u0=e.preloadResource,c0=e.suspendResource,fa=e.supportsSingletons,f0=e.resolveSingletonInstance,rb=e.clearSingleton,ob=e.acquireSingletonInstance,Pv=e.releaseSingletonInstance,ju=e.isHostSingletonType,Cf=[],yo=-1,$l={},Ja=Math.clz32?Math.clz32:D,Rf=Math.log,Fv=Math.LN2,Zu=128,Bf=4194304,Qu=ua.unstable_scheduleCallback,Df=ua.unstable_cancelCallback,Hv=ua.unstable_shouldYield,Gv=ua.unstable_requestPaint,ha=ua.unstable_now,h0=ua.unstable_ImmediatePriority,Vv=ua.unstable_UserBlockingPriority,Rd=ua.unstable_NormalPriority,Bd=ua.unstable_IdlePriority,Xv=ua.log,d0=ua.unstable_setDisableYieldValue,$u=null,Ka=null,vs=typeof Object.is=="function"?Object.is:Z,Dd=new WeakMap,ii=[],pi=0,wf=null,Uf=0,xs=[],_s=0,lr=null,Gr=1,Gs="",na=C(null),Of=C(null),ur=C(null),ec=C(null),Ma=null,da=null,An=!1,ys=null,Vs=!1,Nf=Error(i(519)),bs=[],pl=0,tc=0,nc=null,eu=null,Lf=!1,If=!1,cr=!1,ml=0,zf=null,wd=0,Wa=0,gl=null,bo=!1,ic=!1,Pf=Object.prototype.hasOwnProperty,Gn=Error(i(460)),p0=Error(i(474)),Ud={then:function(){}},tu=null,Vr=null,Xs=0,vl=Fi(!0),m0=Fi(!1),Xr=C(null),As=C(0),Ss=C(null),ks=null,Ni=C(0),kr=0,jt=null,On=null,Ei=null,Ys=!1,ai=!1,Ao=!1,Ff=0,mi=0,ac=null,kv=0,Od=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Sn={readContext:la,use:Ae,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t};Sn.useCacheRefresh=$t,Sn.useMemoCache=$t,Sn.useHostTransitionStatus=$t,Sn.useFormState=$t,Sn.useActionState=$t,Sn.useOptimistic=$t;var Li={readContext:la,use:Ae,useCallback:function(u,f){return Si().memoizedState=[u,f===void 0?null:f],u},useContext:la,useEffect:im,useImperativeHandle:function(u,f,x){x=x!=null?x.concat([u]):null,Ps(4194308,4,Qc.bind(null,f,u),x)},useLayoutEffect:function(u,f){return Ps(4194308,4,u,f)},useInsertionEffect:function(u,f){Ps(4,2,u,f)},useMemo:function(u,f){var x=Si();f=f===void 0?null:f;var A=u();if(Ao){J(!0);try{u()}finally{J(!1)}}return x.memoizedState=[A,f],A},useReducer:function(u,f,x){var A=Si();if(x!==void 0){var R=x(f);if(Ao){J(!0);try{x(f)}finally{J(!1)}}}else R=f;return A.memoizedState=A.baseState=R,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:R},A.queue=u,u=u.dispatch=Yo.bind(null,jt,u),[A.memoizedState,u]},useRef:function(u){var f=Si();return u={current:u},f.memoizedState=u},useState:function(u){u=vn(u);var f=u.queue,x=kh.bind(null,jt,f);return f.dispatch=x,[u.memoizedState,x]},useDebugValue:$c,useDeferredValue:function(u,f){var x=Si();return ko(x,u,f)},useTransition:function(){var u=vn(!1);return u=Vh.bind(null,jt,u.queue,!0,!1),Si().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,f,x){var A=jt,R=Si();if(An){if(x===void 0)throw Error(i(407));x=x()}else{if(x=f(),on===null)throw Error(i(349));(tn&60)!==0||Ut(A,f,x)}R.memoizedState=x;var U={value:x,getSnapshot:f};return R.queue=U,im(Rt.bind(null,A,U,u),[u]),A.flags|=2048,fi(9,Nt.bind(null,A,U,x,f),{destroy:void 0},null),x},useId:function(){var u=Si(),f=on.identifierPrefix;if(An){var x=Gs,A=Gr;x=(A&~(1<<32-Ja(A)-1)).toString(32)+x,f=":"+f+"R"+x,x=Ff++,0<x&&(f+="H"+x.toString(32)),f+=":"}else x=kv++,f=":"+f+"r"+x.toString(32)+":";return u.memoizedState=f},useCacheRefresh:function(){return Si().memoizedState=ef.bind(null,jt)}};Li.useMemoCache=ve,Li.useHostTransitionStatus=zl,Li.useFormState=Rr,Li.useActionState=Rr,Li.useOptimistic=function(u){var f=Si();f.memoizedState=f.baseState=u;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=x,f=Yh.bind(null,jt,!0,x),x.dispatch=f,[u,f]};var Ea={readContext:la,use:Ae,useCallback:Gh,useContext:la,useEffect:Zc,useImperativeHandle:Br,useInsertionEffect:qg,useLayoutEffect:Jg,useMemo:Il,useReducer:tt,useRef:nr,useState:function(){return tt(ce)},useDebugValue:$c,useDeferredValue:function(u,f){var x=V();return am(x,On.memoizedState,u,f)},useTransition:function(){var u=tt(ce)[0],f=V().memoizedState;return[typeof u=="boolean"?u:ue(u),f]},useSyncExternalStore:gt,useId:Dr};Ea.useCacheRefresh=Xh,Ea.useMemoCache=ve,Ea.useHostTransitionStatus=zl,Ea.useFormState=Jn,Ea.useActionState=Jn,Ea.useOptimistic=function(u,f){var x=V();return un(x,On,u,f)};var xl={readContext:la,use:Ae,useCallback:Gh,useContext:la,useEffect:Zc,useImperativeHandle:Br,useInsertionEffect:qg,useLayoutEffect:Jg,useMemo:Il,useReducer:mt,useRef:nr,useState:function(){return mt(ce)},useDebugValue:$c,useDeferredValue:function(u,f){var x=V();return On===null?ko(x,u,f):am(x,On.memoizedState,u,f)},useTransition:function(){var u=mt(ce)[0],f=V().memoizedState;return[typeof u=="boolean"?u:ue(u),f]},useSyncExternalStore:gt,useId:Dr};xl.useCacheRefresh=Xh,xl.useMemoCache=ve,xl.useHostTransitionStatus=zl,xl.useFormState=Vi,xl.useActionState=Vi,xl.useOptimistic=function(u,f){var x=V();return On!==null?un(x,On,u,f):(x.baseState=u,[u,x.queue.dispatch])};var Nd={isMounted:function(u){return(u=u._reactInternals)?v(u)===u:!1},enqueueSetState:function(u,f,x){u=u._reactInternals;var A=La(),R=Ie(A);R.payload=f,x!=null&&(R.callback=x),f=Ge(u,R,A),f!==null&&(ba(f,u,A),_t(f,u,A))},enqueueReplaceState:function(u,f,x){u=u._reactInternals;var A=La(),R=Ie(A);R.tag=1,R.payload=f,x!=null&&(R.callback=x),f=Ge(u,R,A),f!==null&&(ba(f,u,A),_t(f,u,A))},enqueueForceUpdate:function(u,f){u=u._reactInternals;var x=La(),A=Ie(x);A.tag=2,f!=null&&(A.callback=f),f=Ge(u,A,x),f!==null&&(ba(f,u,x),_t(f,u,x))}},g0=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)},Yv=Error(i(461)),Ti=!1,Ta={dehydrated:null,treeContext:null,retryLane:0},ja=C(null),_l=null,gi=null,qv=typeof AbortController<"u"?AbortController:function(){var u=[],f=this.signal={aborted:!1,addEventListener:function(x,A){u.push(A)}};this.abort=function(){f.aborted=!0,u.forEach(function(x){return x()})}},So=ua.unstable_scheduleCallback,nu=ua.unstable_NormalPriority,Ln={$$typeof:Ir,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},Ld=Lt.S;Lt.S=function(u,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&Te(u,f),Ld!==null&&Ld(u,f)};var Mo=C(null),ki=!1,ui=!1,yl=!1,sc=typeof WeakSet=="function"?WeakSet:Set,vi=null,iu=!1,Ci=null,Za=!1,Pa=null,au=8192,Id={getCacheForType:function(u){var f=la(Ln),x=f.data.get(u);return x===void 0&&(x=u(),f.data.set(u,x)),x}},Hf=0,zd=1,Pd=2,xn=3,In=4;if(typeof Symbol=="function"&&Symbol.for){var Zt=Symbol.for;Hf=Zt("selector.component"),zd=Zt("selector.has_pseudo_class"),Pd=Zt("selector.role"),xn=Zt("selector.test_id"),In=Zt("selector.text")}var hn=typeof WeakMap=="function"?WeakMap:Map,Dt=0,on=null,Yt=null,tn=0,Yn=0,Ri=null,zn=!1,Ms=!1,Eo=!1,fr=0,_n=0,Es=0,hr=0,Ca=0,Qa=0,To=0,rc=null,Ts=null,oc=!1,Yr=0,ci=1/0,dr=null,Cs=null,qs=!1,Co=null,su=0,Fd=0,ru=null,ou=0,Fa=null;return Bt.attemptContinuousHydration=function(u){if(u.tag===13){var f=ke(u,67108864);f!==null&&ba(f,u,67108864),Dm(u,67108864)}},Bt.attemptHydrationAtCurrentPriority=function(u){if(u.tag===13){var f=La(),x=ke(u,f);x!==null&&ba(x,u,f),Dm(u,f)}},Bt.attemptSynchronousHydration=function(u){switch(u.tag){case 3:if(u=u.stateNode,u.current.memoizedState.isDehydrated){var f=w(u.pendingLanes);if(f!==0){for(u.pendingLanes|=2,u.entangledLanes|=2;f;){var x=1<<31-Ja(f);u.entanglements[1]|=x,f&=~x}ot(u),(Dt&6)===0&&(ci=ha()+500,it(0))}}break;case 13:f=ke(u,2),f!==null&&ba(f,u,2),Em(),Dm(u,2)}},Bt.batchedUpdates=function(u,f){return u(f)},Bt.createComponentSelector=function(u){return{$$typeof:Hf,value:u}},Bt.createContainer=function(u,f,x,A,R,U,k,ne,de,Oe){return ta(u,f,!1,null,x,A,U,k,ne,de,Oe,null)},Bt.createHasPseudoClassSelector=function(u){return{$$typeof:zd,value:u}},Bt.createHydrationContainer=function(u,f,x,A,R,U,k,ne,de,Oe,nt,ct,pt){return u=ta(x,A,!0,u,R,U,ne,de,Oe,nt,ct,pt),u.context=vf(null),x=u.current,A=La(),R=Ie(A),R.callback=f??null,Ge(x,R,A),u.current.lanes=A,Y(u,A),ot(u),u},Bt.createPortal=function(u,f,x){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rr,key:A==null?null:""+A,children:u,containerInfo:f,implementation:x}},Bt.createRoleSelector=function(u){return{$$typeof:Pd,value:u}},Bt.createTestNameSelector=function(u){return{$$typeof:xn,value:u}},Bt.createTextSelector=function(u){return{$$typeof:In,value:u}},Bt.defaultOnCaughtError=function(u){console.error(u)},Bt.defaultOnRecoverableError=function(u){g0(u)},Bt.defaultOnUncaughtError=function(u){g0(u)},Bt.deferredUpdates=function(u){var f=Lt.T,x=Xi();try{return Sa(32),Lt.T=null,u()}finally{Sa(x),Lt.T=f}},Bt.discreteUpdates=function(u,f,x,A,R){var U=Lt.T,k=Xi();try{return Sa(2),Lt.T=null,u(f,x,A,R)}finally{Sa(k),Lt.T=U,Dt===0&&(ci=ha()+500)}},Bt.findAllNodes=Na,Bt.findBoundingRects=function(u,f){if(!Fr)throw Error(i(363));f=Na(u,f),u=[];for(var x=0;x<f.length;x++)u.push(xd(f[x]));for(f=u.length-1;0<f;f--){x=u[f];for(var A=x.x,R=A+x.width,U=x.y,k=U+x.height,ne=f-1;0<=ne;ne--)if(f!==ne){var de=u[ne],Oe=de.x,nt=Oe+de.width,ct=de.y,pt=ct+de.height;if(A>=Oe&&U>=ct&&R<=nt&&k<=pt){u.splice(f,1);break}else if(A!==Oe||x.width!==de.width||pt<U||ct>k){if(!(U!==ct||x.height!==de.height||nt<A||Oe>R)){Oe>A&&(de.width+=Oe-A,de.x=A),nt<R&&(de.width=R-Oe),u.splice(f,1);break}}else{ct>U&&(de.height+=ct-U,de.y=U),pt<k&&(de.height=k-ct),u.splice(f,1);break}}}return u},Bt.findHostInstance=Bm,Bt.findHostInstanceWithNoPortals=function(u){return u=y(u),u=u!==null?E(u):null,u===null?null:Ku(u.stateNode)},Bt.findHostInstanceWithWarning=function(u){return Bm(u)},Bt.flushPassiveEffects=ea,Bt.flushSyncFromReconciler=function(u){var f=Dt;Dt|=1;var x=Lt.T,A=Xi();try{if(Sa(2),Lt.T=null,u)return u()}finally{Sa(A),Lt.T=x,Dt=f,(Dt&6)===0&&it(0)}},Bt.flushSyncWork=Em,Bt.focusWithin=function(u,f){if(!Fr)throw Error(i(363));for(u=rd(u),f=fv(u,f),f=Array.from(f),u=0;u<f.length;){var x=f[u++],A=x.tag;if(!Hr(x)){if((A===5||A===26||A===27)&&di(x.stateNode))return!0;for(x=x.child;x!==null;)f.push(x),x=x.sibling}}return!1},Bt.getFindAllNodesFailureDescription=function(u,f){if(!Fr)throw Error(i(363));var x=0,A=[];u=[rd(u),0];for(var R=0;R<u.length;){var U=u[R++],k=U.tag,ne=u[R++],de=f[ne];if((k!==5&&k!==26&&k!==27||!Hr(U))&&(Xu(U,de)&&(A.push(al(de)),ne++,ne>x&&(x=ne)),ne<f.length))for(U=U.child;U!==null;)u.push(U,ne),U=U.sibling}if(x<f.length){for(u=[];x<f.length;x++)u.push(al(f[x]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+u.join(" > ")}return null},Bt.getPublicRootInstance=function(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 27:case 5:return Ku(u.child.stateNode);default:return u.child.stateNode}},Bt.injectIntoDevTools=function(){var u={bundleType:0,version:pd,rendererPackageName:yf,currentDispatcherRef:Lt,findFiberByHostInstance:Hm,reconcilerVersion:"19.0.0"};if(bf!==null&&(u.rendererConfig=bf),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")u=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)u=!0;else{try{$u=f.inject(u),Ka=f}catch{}u=!!f.checkDCE}}return u},Bt.isAlreadyRendering=function(){return!1},Bt.observeVisibleRects=function(u,f,x,A){if(!Fr)throw Error(i(363));u=Na(u,f);var R=Xm(u,x,A).disconnect;return{disconnect:function(){R()}}},Bt.shouldError=function(){return null},Bt.shouldSuspend=function(){return!1},Bt.startHostTransition=function(u,f,x,A){if(u.tag!==5)throw Error(i(476));var R=sm(u).queue;Vh(u,R,f,qa,x===null?n:function(){var U=sm(u).next.queue;return qo(u,U,{},La()),x(A)})},Bt.updateContainer=function(u,f,x,A){var R=f.current,U=La();return pv(R,U,u,f,x,A),U},Bt.updateContainerSync=function(u,f,x,A){return f.tag===0&&ea(),pv(f.current,2,u,f,x,A),2},Bt},a.exports.default=a.exports,Object.defineProperty(a.exports,"__esModule",{value:!0})})(IA)),IA.exports}var cC;function y4(){return cC||(cC=1,LA.exports=_4()),LA.exports}var b4=y4();const A4=Ug(b4);var FA={exports:{}},HA={};var fC;function S4(){return fC||(fC=1,(function(a){function e(F,J){var Z=F.length;F.push(J);e:for(;0<Z;){var oe=Z-1>>>1,pe=F[oe];if(0<i(pe,J))F[oe]=J,F[Z]=pe,Z=oe;else break e}}function t(F){return F.length===0?null:F[0]}function n(F){if(F.length===0)return null;var J=F[0],Z=F.pop();if(Z!==J){F[0]=Z;e:for(var oe=0,pe=F.length,q=pe>>>1;oe<q;){var se=2*(oe+1)-1,Ce=F[se],Ee=se+1,Ye=F[Ee];if(0>i(Ce,Z))Ee<pe&&0>i(Ye,Ce)?(F[oe]=Ye,F[Ee]=Z,oe=Ee):(F[oe]=Ce,F[se]=Z,oe=se);else if(Ee<pe&&0>i(Ye,Z))F[oe]=Ye,F[Ee]=Z,oe=Ee;else break e}}return J}function i(F,J){var Z=F.sortIndex-J.sortIndex;return Z!==0?Z:F.id-J.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var r=performance;a.unstable_now=function(){return r.now()}}else{var l=Date,c=l.now();a.unstable_now=function(){return l.now()-c}}var d=[],p=[],g=1,v=null,_=3,y=!1,S=!1,E=!1,C=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function D(F){for(var J=t(p);J!==null;){if(J.callback===null)n(p);else if(J.startTime<=F)n(p),J.sortIndex=J.expirationTime,e(d,J);else break;J=t(p)}}function w(F){if(E=!1,D(F),!S)if(t(d)!==null)S=!0,le();else{var J=t(p);J!==null&&re(w,J.startTime-F)}}var z=!1,O=-1,P=5,G=-1;function L(){return!(a.unstable_now()-G<P)}function I(){if(z){var F=a.unstable_now();G=F;var J=!0;try{e:{S=!1,E&&(E=!1,M(O),O=-1),y=!0;var Z=_;try{t:{for(D(F),v=t(d);v!==null&&!(v.expirationTime>F&&L());){var oe=v.callback;if(typeof oe=="function"){v.callback=null,_=v.priorityLevel;var pe=oe(v.expirationTime<=F);if(F=a.unstable_now(),typeof pe=="function"){v.callback=pe,D(F),J=!0;break t}v===t(d)&&n(d),D(F)}else n(d);v=t(d)}if(v!==null)J=!0;else{var q=t(p);q!==null&&re(w,q.startTime-F),J=!1}}break e}finally{v=null,_=Z,y=!1}J=void 0}}finally{J?Y():z=!1}}}var Y;if(typeof B=="function")Y=function(){B(I)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,te=ee.port2;ee.port1.onmessage=I,Y=function(){te.postMessage(null)}}else Y=function(){C(I,0)};function le(){z||(z=!0,Y())}function re(F,J){O=C(function(){F(a.unstable_now())},J)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(F){F.callback=null},a.unstable_continueExecution=function(){S||y||(S=!0,le())},a.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<F?Math.floor(1e3/F):5},a.unstable_getCurrentPriorityLevel=function(){return _},a.unstable_getFirstCallbackNode=function(){return t(d)},a.unstable_next=function(F){switch(_){case 1:case 2:case 3:var J=3;break;default:J=_}var Z=_;_=J;try{return F()}finally{_=Z}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(F,J){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Z=_;_=F;try{return J()}finally{_=Z}},a.unstable_scheduleCallback=function(F,J,Z){var oe=a.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?oe+Z:oe):Z=oe,F){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=Z+pe,F={id:g++,callback:J,priorityLevel:F,startTime:Z,expirationTime:pe,sortIndex:-1},Z>oe?(F.sortIndex=Z,e(p,F),t(d)===null&&F===t(p)&&(E?(M(O),O=-1):E=!0,re(w,Z-oe))):(F.sortIndex=pe,e(d,F),S||y||(S=!0,le())),F},a.unstable_shouldYield=L,a.unstable_wrapCallback=function(F){var J=_;return function(){var Z=_;_=J;try{return F.apply(this,arguments)}finally{_=Z}}}})(HA)),HA}var hC;function M4(){return hC||(hC=1,FA.exports=S4()),FA.exports}var dC=M4();function q1(a,e,t){if(!a)return;if(t(a)===!0)return a;let n=e?a.return:a.child;for(;n;){const i=q1(n,e,t);if(i)return i;n=e?null:n.sibling}}function aR(a){try{return Object.defineProperties(a,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return a}}const J1=aR(Qe.createContext(null));class sR extends Qe.Component{render(){return Qe.createElement(J1.Provider,{value:this._reactInternals},this.props.children)}}function rR(){const a=Qe.useContext(J1);if(a===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Qe.useId();return Qe.useMemo(()=>{for(const t of[a,a?.alternate]){if(!t)continue;const n=q1(t,!1,i=>{let r=i.memoizedState;for(;r;){if(r.memoizedState===e)return!0;r=r.next}});if(n)return n}},[a,e])}const E4=Symbol.for("react.context"),T4=a=>a!==null&&typeof a=="object"&&"$$typeof"in a&&a.$$typeof===E4;function C4(){const a=rR(),[e]=Qe.useState(()=>new Map);e.clear();let t=a;for(;t;){const n=t.type;T4(n)&&n!==J1&&!e.has(n)&&e.set(n,Qe.use(aR(n))),t=t.return}return e}function R4(){const a=C4();return Qe.useMemo(()=>Array.from(a.keys()).reduce((e,t)=>n=>Qe.createElement(e,null,Qe.createElement(t.Provider,{...n,value:a.get(t)})),e=>Qe.createElement(sR,{...e})),[a])}function oR(a){let e=a.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const lR=a=>a&&a.isOrthographicCamera,B4=a=>a&&a.hasOwnProperty("current"),D4=a=>a!=null&&(typeof a=="string"||typeof a=="number"||a.isColor),Xg=((a,e)=>typeof window<"u"&&(((a=window.document)==null?void 0:a.createElement)||((e=window.navigator)==null?void 0:e.product)==="ReactNative"))()?Qe.useLayoutEffect:Qe.useEffect;function uR(a){const e=Qe.useRef(a);return Xg(()=>void(e.current=a),[a]),e}function w4(){const a=rR(),e=R4();return Qe.useMemo(()=>({children:t})=>{const i=!!q1(a,!0,r=>r.type===Qe.StrictMode)?Qe.StrictMode:Qe.Fragment;return Ke.jsx(i,{children:Ke.jsx(e,{children:t})})},[a,e])}function U4({set:a}){return Xg(()=>(a(new Promise(()=>null)),()=>a(!1)),[a]),null}const O4=(a=>(a=class extends Qe.Component{constructor(...t){super(...t),this.state={error:!1}}componentDidCatch(t){this.props.set(t)}render(){return this.state.error?null:this.props.children}},a.getDerivedStateFromError=()=>({error:!0}),a))();function cR(a){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(a)?Math.min(Math.max(a[0],t),a[1]):a}function dp(a){var e;return(e=a.__r3f)==null?void 0:e.root.getState()}const xi={obj:a=>a===Object(a)&&!xi.arr(a)&&typeof a!="function",fun:a=>typeof a=="function",str:a=>typeof a=="string",num:a=>typeof a=="number",boo:a=>typeof a=="boolean",und:a=>a===void 0,nul:a=>a===null,arr:a=>Array.isArray(a),equ(a,e,{arrays:t="shallow",objects:n="reference",strict:i=!0}={}){if(typeof a!=typeof e||!!a!=!!e)return!1;if(xi.str(a)||xi.num(a)||xi.boo(a))return a===e;const r=xi.obj(a);if(r&&n==="reference")return a===e;const l=xi.arr(a);if(l&&t==="reference")return a===e;if((l||r)&&a===e)return!0;let c;for(c in a)if(!(c in e))return!1;if(r&&t==="shallow"&&n==="shallow"){for(c in i?e:a)if(!xi.equ(a[c],e[c],{strict:i,objects:"reference"}))return!1}else for(c in i?e:a)if(a[c]!==e[c])return!1;if(xi.und(c)){if(l&&a.length===0&&e.length===0||r&&Object.keys(a).length===0&&Object.keys(e).length===0)return!0;if(a!==e)return!1}return!0}};function N4(a){const e={nodes:{},materials:{},meshes:{}};return a&&a.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material),t.isMesh&&!e.meshes[t.name]&&(e.meshes[t.name]=t)}),e}function L4(a){a.type!=="Scene"&&(a.dispose==null||a.dispose());for(const e in a){const t=a[e];t?.type!=="Scene"&&(t==null||t.dispose==null||t.dispose())}}const fR=["children","key","ref"];function I4(a){const e={};for(const t in a)fR.includes(t)||(e[t]=a[t]);return e}function $_(a,e,t,n){const i=a;let r=i?.__r3f;return r||(r={root:e,type:t,parent:null,children:[],props:I4(n),object:i,eventCount:0,handlers:{},isHidden:!1},i&&(i.__r3f=r)),r}function Mg(a,e){if(!e.includes("-"))return{root:a,key:e,target:a[e]};if(e in a)return{root:a,key:e,target:a[e]};let t=a;const n=e.split("-");for(const i of n){if(typeof t!="object"||t===null){if(t!==void 0){const r=n.slice(n.indexOf(i)).join("-");return{root:t,key:r,target:void 0}}return{root:a,key:e,target:void 0}}e=i,a=t,t=t[e]}return{root:a,key:e,target:t}}const pC=/-\d+$/;function ey(a,e){if(xi.str(e.props.attach)){if(pC.test(e.props.attach)){const i=e.props.attach.replace(pC,""),{root:r,key:l}=Mg(a.object,i);Array.isArray(r[l])||(r[l]=[])}const{root:t,key:n}=Mg(a.object,e.props.attach);e.previousAttach=t[n],t[n]=e.object}else xi.fun(e.props.attach)&&(e.previousAttach=e.props.attach(a.object,e.object))}function ty(a,e){if(xi.str(e.props.attach)){const{root:t,key:n}=Mg(a.object,e.props.attach),i=e.previousAttach;i===void 0?delete t[n]:t[n]=i}else e.previousAttach==null||e.previousAttach(a.object,e.object);delete e.previousAttach}const US=[...fR,"args","dispose","attach","object","onUpdate","dispose"],mC=new Map;function z4(a){let e=mC.get(a.constructor);try{e||(e=new a.constructor,mC.set(a.constructor,e))}catch{}return e}function P4(a,e){const t={};for(const n in e)if(!US.includes(n)&&!xi.equ(e[n],a.props[n])){t[n]=e[n];for(const i in e)i.startsWith(`${n}-`)&&(t[i]=e[i])}for(const n in a.props){if(US.includes(n)||e.hasOwnProperty(n))continue;const{root:i,key:r}=Mg(a.object,n);if(i.constructor&&i.constructor.length===0){const l=z4(i);xi.und(l)||(t[r]=l[r])}else t[r]=0}return t}const F4=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],H4=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function Tc(a,e){var t;const n=a.__r3f,i=n&&oR(n).getState(),r=n?.eventCount;for(const c in e){let d=e[c];if(US.includes(c))continue;if(n&&H4.test(c)){typeof d=="function"?n.handlers[c]=d:delete n.handlers[c],n.eventCount=Object.keys(n.handlers).length;continue}if(d===void 0)continue;let{root:p,key:g,target:v}=Mg(a,c);if(v===void 0&&(typeof p!="object"||p===null))throw Error(`R3F: Cannot set "${c}". Ensure it is an object before setting "${g}".`);if(v instanceof zp&&d instanceof zp)v.mask=d.mask;else if(v instanceof rt&&D4(d))v.set(d);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&typeof v.copy=="function"&&d!=null&&d.constructor&&v.constructor===d.constructor)v.copy(d);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&Array.isArray(d))typeof v.fromArray=="function"?v.fromArray(d):v.set(...d);else if(v!==null&&typeof v=="object"&&typeof v.set=="function"&&typeof d=="number")typeof v.setScalar=="function"?v.setScalar(d):v.set(d);else{var l;p[g]=d,i&&!i.linear&&F4.includes(g)&&(l=p[g])!=null&&l.isTexture&&p[g].format===ss&&p[g].type===ra&&(p[g].colorSpace=Un)}}if(n!=null&&n.parent&&i!=null&&i.internal&&(t=n.object)!=null&&t.isObject3D&&r!==n.eventCount){const c=n.object,d=i.internal.interaction.indexOf(c);d>-1&&i.internal.interaction.splice(d,1),n.eventCount&&c.raycast!==null&&i.internal.interaction.push(c)}return n&&n.props.attach===void 0&&(n.object.isBufferGeometry?n.props.attach="geometry":n.object.isMaterial&&(n.props.attach="material")),n&&tm(n),a}function tm(a){var e;if(!a.parent)return;a.props.onUpdate==null||a.props.onUpdate(a.object);const t=(e=a.root)==null||e.getState==null?void 0:e.getState();t&&t.internal.frames===0&&t.invalidate()}function G4(a,e){a.manual||(lR(a)?(a.left=e.width/-2,a.right=e.width/2,a.top=e.height/2,a.bottom=e.height/-2):a.aspect=e.width/e.height,a.updateProjectionMatrix())}const ws=a=>a?.isObject3D;function t_(a){return(a.eventObject||a.object).uuid+"/"+a.index+a.instanceId}function hR(a,e,t,n){const i=t.get(e);i&&(t.delete(e),t.size===0&&(a.delete(n),i.target.releasePointerCapture(n)))}function V4(a,e){const{internal:t}=a.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,i)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((n,i)=>{hR(t.capturedMap,e,n,i)})}function X4(a){function e(d){const{internal:p}=a.getState(),g=d.offsetX-p.initialClick[0],v=d.offsetY-p.initialClick[1];return Math.round(Math.sqrt(g*g+v*v))}function t(d){return d.filter(p=>["Move","Over","Enter","Out","Leave"].some(g=>{var v;return(v=p.__r3f)==null?void 0:v.handlers["onPointer"+g]}))}function n(d,p){const g=a.getState(),v=new Set,_=[],y=p?p(g.internal.interaction):g.internal.interaction;for(let M=0;M<y.length;M++){const B=dp(y[M]);B&&(B.raycaster.camera=void 0)}g.previousRoot||g.events.compute==null||g.events.compute(d,g);function S(M){const B=dp(M);if(!B||!B.events.enabled||B.raycaster.camera===null)return[];if(B.raycaster.camera===void 0){var D;B.events.compute==null||B.events.compute(d,B,(D=B.previousRoot)==null?void 0:D.getState()),B.raycaster.camera===void 0&&(B.raycaster.camera=null)}return B.raycaster.camera?B.raycaster.intersectObject(M,!0):[]}let E=y.flatMap(S).sort((M,B)=>{const D=dp(M.object),w=dp(B.object);return!D||!w?M.distance-B.distance:w.events.priority-D.events.priority||M.distance-B.distance}).filter(M=>{const B=t_(M);return v.has(B)?!1:(v.add(B),!0)});g.events.filter&&(E=g.events.filter(E,g));for(const M of E){let B=M.object;for(;B;){var C;(C=B.__r3f)!=null&&C.eventCount&&_.push({...M,eventObject:B}),B=B.parent}}if("pointerId"in d&&g.internal.capturedMap.has(d.pointerId))for(let M of g.internal.capturedMap.get(d.pointerId).values())v.has(t_(M.intersection))||_.push(M.intersection);return _}function i(d,p,g,v){if(d.length){const _={stopped:!1};for(const y of d){let S=dp(y.object);if(S||y.object.traverseAncestors(E=>{const C=dp(E);if(C)return S=C,!1}),S){const{raycaster:E,pointer:C,camera:M,internal:B}=S,D=new j(C.x,C.y,0).unproject(M),w=L=>{var I,Y;return(I=(Y=B.capturedMap.get(L))==null?void 0:Y.has(y.eventObject))!=null?I:!1},z=L=>{const I={intersection:y,target:p.target};B.capturedMap.has(L)?B.capturedMap.get(L).set(y.eventObject,I):B.capturedMap.set(L,new Map([[y.eventObject,I]])),p.target.setPointerCapture(L)},O=L=>{const I=B.capturedMap.get(L);I&&hR(B.capturedMap,y.eventObject,I,L)};let P={};for(let L in p){let I=p[L];typeof I!="function"&&(P[L]=I)}let G={...y,...P,pointer:C,intersections:d,stopped:_.stopped,delta:g,unprojectedPoint:D,ray:E.ray,camera:M,stopPropagation(){const L="pointerId"in p&&B.capturedMap.get(p.pointerId);if((!L||L.has(y.eventObject))&&(G.stopped=_.stopped=!0,B.hovered.size&&Array.from(B.hovered.values()).find(I=>I.eventObject===y.eventObject))){const I=d.slice(0,d.indexOf(y));r([...I,y])}},target:{hasPointerCapture:w,setPointerCapture:z,releasePointerCapture:O},currentTarget:{hasPointerCapture:w,setPointerCapture:z,releasePointerCapture:O},nativeEvent:p};if(v(G),_.stopped===!0)break}}}return d}function r(d){const{internal:p}=a.getState();for(const g of p.hovered.values())if(!d.length||!d.find(v=>v.object===g.object&&v.index===g.index&&v.instanceId===g.instanceId)){const _=g.eventObject.__r3f;if(p.hovered.delete(t_(g)),_!=null&&_.eventCount){const y=_.handlers,S={...g,intersections:d};y.onPointerOut==null||y.onPointerOut(S),y.onPointerLeave==null||y.onPointerLeave(S)}}}function l(d,p){for(let g=0;g<p.length;g++){const v=p[g].__r3f;v==null||v.handlers.onPointerMissed==null||v.handlers.onPointerMissed(d)}}function c(d){switch(d){case"onPointerLeave":case"onPointerCancel":return()=>r([]);case"onLostPointerCapture":return p=>{const{internal:g}=a.getState();"pointerId"in p&&g.capturedMap.has(p.pointerId)&&requestAnimationFrame(()=>{g.capturedMap.has(p.pointerId)&&(g.capturedMap.delete(p.pointerId),r([]))})}}return function(g){const{onPointerMissed:v,internal:_}=a.getState();_.lastEvent.current=g;const y=d==="onPointerMove",S=d==="onClick"||d==="onContextMenu"||d==="onDoubleClick",C=n(g,y?t:void 0),M=S?e(g):0;d==="onPointerDown"&&(_.initialClick=[g.offsetX,g.offsetY],_.initialHits=C.map(D=>D.eventObject)),S&&!C.length&&M<=2&&(l(g,_.interaction),v&&v(g)),y&&r(C);function B(D){const w=D.eventObject,z=w.__r3f;if(!(z!=null&&z.eventCount))return;const O=z.handlers;if(y){if(O.onPointerOver||O.onPointerEnter||O.onPointerOut||O.onPointerLeave){const P=t_(D),G=_.hovered.get(P);G?G.stopped&&D.stopPropagation():(_.hovered.set(P,D),O.onPointerOver==null||O.onPointerOver(D),O.onPointerEnter==null||O.onPointerEnter(D))}O.onPointerMove==null||O.onPointerMove(D)}else{const P=O[d];P?(!S||_.initialHits.includes(w))&&(l(g,_.interaction.filter(G=>!_.initialHits.includes(G))),P(D)):S&&_.initialHits.includes(w)&&l(g,_.interaction.filter(G=>!_.initialHits.includes(G)))}}i(C,g,M,B)}}return{handlePointer:c}}const gC=a=>!!(a!=null&&a.render),dR=Qe.createContext(null),k4=(a,e)=>{const t=h4((c,d)=>{const p=new j,g=new j,v=new j;function _(M=d().camera,B=g,D=d().size){const{width:w,height:z,top:O,left:P}=D,G=w/z;B.isVector3?v.copy(B):v.set(...B);const L=M.getWorldPosition(p).distanceTo(v);if(lR(M))return{width:w/M.zoom,height:z/M.zoom,top:O,left:P,factor:1,distance:L,aspect:G};{const I=M.fov*Math.PI/180,Y=2*Math.tan(I/2)*L,ee=Y*(w/z);return{width:ee,height:Y,top:O,left:P,factor:w/ee,distance:L,aspect:G}}}let y;const S=M=>c(B=>({performance:{...B.performance,current:M}})),E=new De;return{set:c,get:d,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(M=1)=>a(d(),M),advance:(M,B)=>e(M,B,d()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new V1,pointer:E,mouse:E,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=d();y&&clearTimeout(y),M.performance.current!==M.performance.min&&S(M.performance.min),y=setTimeout(()=>S(d().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:_},setEvents:M=>c(B=>({...B,events:{...B.events,...M}})),setSize:(M,B,D=0,w=0)=>{const z=d().camera,O={width:M,height:B,top:D,left:w};c(P=>({size:O,viewport:{...P.viewport,..._(z,g,O)}}))},setDpr:M=>c(B=>{const D=cR(M);return{viewport:{...B.viewport,dpr:D,initialDpr:B.viewport.initialDpr||D}}}),setFrameloop:(M="always")=>{const B=d().clock;B.stop(),B.elapsedTime=0,M!=="never"&&(B.start(),B.elapsedTime=0),c(()=>({frameloop:M}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:Qe.createRef(),active:!1,frames:0,priority:0,subscribe:(M,B,D)=>{const w=d().internal;return w.priority=w.priority+(B>0?1:0),w.subscribers.push({ref:M,priority:B,store:D}),w.subscribers=w.subscribers.sort((z,O)=>z.priority-O.priority),()=>{const z=d().internal;z!=null&&z.subscribers&&(z.priority=z.priority-(B>0?1:0),z.subscribers=z.subscribers.filter(O=>O.ref!==M))}}}}}),n=t.getState();let i=n.size,r=n.viewport.dpr,l=n.camera;return t.subscribe(()=>{const{camera:c,size:d,viewport:p,gl:g,set:v}=t.getState();if(d.width!==i.width||d.height!==i.height||p.dpr!==r){i=d,r=p.dpr,G4(c,d),p.dpr>0&&g.setPixelRatio(p.dpr);const _=typeof HTMLCanvasElement<"u"&&g.domElement instanceof HTMLCanvasElement;g.setSize(d.width,d.height,_)}c!==l&&(l=c,v(_=>({viewport:{..._.viewport,..._.viewport.getCurrentViewport(c)}})))}),t.subscribe(c=>a(c)),t};function pR(){const a=Qe.useContext(dR);if(!a)throw new Error("R3F: Hooks can only be used within the Canvas component!");return a}function Oo(a=t=>t,e){return pR()(a,e)}function K1(a,e=0){const t=pR(),n=t.getState().internal.subscribe,i=uR(a);return Xg(()=>n(i,e,t),[e,n,t]),null}const vC=new WeakMap,Y4=a=>{var e;return typeof a=="function"&&(a==null||(e=a.prototype)==null?void 0:e.constructor)===a};function mR(a,e){return function(t,...n){let i;return Y4(t)?(i=vC.get(t),i||(i=new t,vC.set(t,i))):i=t,a&&a(i),Promise.all(n.map(r=>new Promise((l,c)=>i.load(r,d=>{ws(d?.scene)&&Object.assign(d,N4(d.scene)),l(d)},e,d=>c(new Error(`Could not load ${r}: ${d?.message}`))))))}}function Jc(a,e,t,n){const i=Array.isArray(e)?e:[e],r=p4(mR(t,n),[a,...i],{equal:xi.equ});return Array.isArray(e)?r:r[0]}Jc.preload=function(a,e,t){const n=Array.isArray(e)?e:[e];return m4(mR(t),[a,...n])};Jc.clear=function(a,e){const t=Array.isArray(e)?e:[e];return g4([a,...t])};function q4(a){const e=A4(a);return e.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Qe.version}),e}const gR=0,Gp={},J4=/^three(?=[A-Z])/,jy=a=>`${a[0].toUpperCase()}${a.slice(1)}`;let K4=0;const W4=a=>typeof a=="function";function j4(a){if(W4(a)){const e=`${K4++}`;return Gp[e]=a,e}else Object.assign(Gp,a)}function vR(a,e){const t=jy(a),n=Gp[t];if(a!=="primitive"&&!n)throw new Error(`R3F: ${t} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(a==="primitive"&&!e.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(e.args!==void 0&&!Array.isArray(e.args))throw new Error("R3F: The args prop must be an array!")}function Z4(a,e,t){var n;return a=jy(a)in Gp?a:a.replace(J4,""),vR(a,e),a==="primitive"&&(n=e.object)!=null&&n.__r3f&&delete e.object.__r3f,$_(e.object,t,a,e)}function Q4(a){if(!a.isHidden){var e;a.props.attach&&(e=a.parent)!=null&&e.object?ty(a.parent,a):ws(a.object)&&(a.object.visible=!1),a.isHidden=!0,tm(a)}}function xR(a){if(a.isHidden){var e;a.props.attach&&(e=a.parent)!=null&&e.object?ey(a.parent,a):ws(a.object)&&a.props.visible!==!1&&(a.object.visible=!0),a.isHidden=!1,tm(a)}}function W1(a,e,t){const n=e.root.getState();if(!(!a.parent&&a.object!==n.scene)){if(!e.object){var i,r;const l=Gp[jy(e.type)];e.object=(i=e.props.object)!=null?i:new l(...(r=e.props.args)!=null?r:[]),e.object.__r3f=e}if(Tc(e.object,e.props),e.props.attach)ey(a,e);else if(ws(e.object)&&ws(a.object)){const l=a.object.children.indexOf(t?.object);if(t&&l!==-1){const c=a.object.children.indexOf(e.object);if(c!==-1){a.object.children.splice(c,1);const d=c<l?l-1:l;a.object.children.splice(d,0,e.object)}else e.object.parent=a.object,a.object.children.splice(l,0,e.object),e.object.dispatchEvent({type:"added"}),a.object.dispatchEvent({type:"childadded",child:e.object})}else a.object.add(e.object)}for(const l of e.children)W1(e,l);tm(e)}}function GA(a,e){e&&(e.parent=a,a.children.push(e),W1(a,e))}function xC(a,e,t){if(!e||!t)return;e.parent=a;const n=a.children.indexOf(t);n!==-1?a.children.splice(n,0,e):a.children.push(e),W1(a,e,t)}function _R(a){if(typeof a.dispose=="function"){const e=()=>{try{a.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?e():dC.unstable_scheduleCallback(dC.unstable_IdlePriority,e)}}function OS(a,e,t){if(!e)return;e.parent=null;const n=a.children.indexOf(e);n!==-1&&a.children.splice(n,1),e.props.attach?ty(a,e):ws(e.object)&&ws(a.object)&&(a.object.remove(e.object),V4(oR(e),e.object));const i=e.props.dispose!==null&&t!==!1;for(let r=e.children.length-1;r>=0;r--){const l=e.children[r];OS(e,l,i)}e.children.length=0,delete e.object.__r3f,i&&e.type!=="primitive"&&e.object.type!=="Scene"&&_R(e.object),t===void 0&&tm(e)}function $4(a,e){for(const t of[a,a.alternate])if(t!==null)if(typeof t.ref=="function"){t.refCleanup==null||t.refCleanup();const n=t.ref(e);typeof n=="function"&&(t.refCleanup=n)}else t.ref&&(t.ref.current=e)}const p_=[];function eF(){for(const[t]of p_){const n=t.parent;if(n){t.props.attach?ty(n,t):ws(t.object)&&ws(n.object)&&n.object.remove(t.object);for(const i of t.children)i.props.attach?ty(t,i):ws(i.object)&&ws(t.object)&&t.object.remove(i.object)}t.isHidden&&xR(t),t.object.__r3f&&delete t.object.__r3f,t.type!=="primitive"&&_R(t.object)}for(const[t,n,i]of p_){t.props=n;const r=t.parent;if(r){var a,e;const l=Gp[jy(t.type)];t.object=(a=t.props.object)!=null?a:new l(...(e=t.props.args)!=null?e:[]),t.object.__r3f=t,$4(i,t.object),Tc(t.object,t.props),t.props.attach?ey(r,t):ws(t.object)&&ws(r.object)&&r.object.add(t.object);for(const c of t.children)c.props.attach?ey(t,c):ws(c.object)&&ws(t.object)&&t.object.add(c.object);tm(t)}}p_.length=0}const VA=()=>{},_C={};let n_=gR;const tF=0,nF=4,NS=q4({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance:Z4,removeChild:OS,appendChild:GA,appendInitialChild:GA,insertBefore:xC,appendChildToContainer(a,e){const t=a.getState().scene.__r3f;!e||!t||GA(t,e)},removeChildFromContainer(a,e){const t=a.getState().scene.__r3f;!e||!t||OS(t,e)},insertInContainerBefore(a,e,t){const n=a.getState().scene.__r3f;!e||!t||!n||xC(n,e,t)},getRootHostContext:()=>_C,getChildHostContext:()=>_C,commitUpdate(a,e,t,n,i){var r,l,c;vR(e,n);let d=!1;if((a.type==="primitive"&&t.object!==n.object||((r=n.args)==null?void 0:r.length)!==((l=t.args)==null?void 0:l.length)||(c=n.args)!=null&&c.some((g,v)=>{var _;return g!==((_=t.args)==null?void 0:_[v])}))&&(d=!0),d)p_.push([a,{...n},i]);else{const g=P4(a,n);Object.keys(g).length&&(Object.assign(a.props,g),Tc(a.object,g))}(i.sibling===null||(i.flags&nF)===tF)&&eF()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:a=>a?.object,prepareForCommit:()=>null,preparePortalMount:a=>$_(a.getState().scene,a,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance:Q4,unhideInstance:xR,createTextInstance:VA,hideTextInstance:VA,unhideTextInstance:VA,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:Qe.createContext(null),setCurrentUpdatePriority(a){n_=a},getCurrentUpdatePriority(){return n_},resolveUpdatePriority(){var a;if(n_!==gR)return n_;switch(typeof window<"u"&&((a=window.event)==null?void 0:a.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return c_.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return c_.ContinuousEventPriority;default:return c_.DefaultEventPriority}},resetFormInstance(){}}),Uh=new Map,pp={objects:"shallow",strict:!1};function iF(a,e){if(!e&&typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement&&a.parentElement){const{width:t,height:n,top:i,left:r}=a.parentElement.getBoundingClientRect();return{width:t,height:n,top:i,left:r}}else if(!e&&typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas)return{width:a.width,height:a.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...e}}function aF(a){const e=Uh.get(a),t=e?.fiber,n=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,r=n||k4(zS,bC),l=t||NS.createContainer(r,c_.ConcurrentRoot,null,!1,null,"",i,i,i,null);e||Uh.set(a,{fiber:l,store:r});let c,d,p=!1,g=null;return{async configure(v={}){let _;g=new Promise(q=>_=q);let{gl:y,size:S,scene:E,events:C,onCreated:M,shadows:B=!1,linear:D=!1,flat:w=!1,legacy:z=!1,orthographic:O=!1,frameloop:P="always",dpr:G=[1,2],performance:L,raycaster:I,camera:Y,onPointerMissed:ee}=v,te=r.getState(),le=te.gl;if(!te.gl){const q={canvas:a,powerPreference:"high-performance",antialias:!0,alpha:!0},se=typeof y=="function"?await y(q):y;gC(se)?le=se:le=new tR({...q,...y}),te.set({gl:le})}let re=te.raycaster;re||te.set({raycaster:re=new J3});const{params:F,...J}=I||{};if(xi.equ(J,re,pp)||Tc(re,{...J}),xi.equ(F,re.params,pp)||Tc(re,{params:{...re.params,...F}}),!te.camera||te.camera===d&&!xi.equ(d,Y,pp)){d=Y;const q=Y?.isCamera,se=q?Y:O?new Rl(0,0,0,0,.1,1e3):new _i(75,0,.1,1e3);q||(se.position.z=5,Y&&(Tc(se,Y),se.manual||("aspect"in Y||"left"in Y||"right"in Y||"bottom"in Y||"top"in Y)&&(se.manual=!0,se.updateProjectionMatrix())),!te.camera&&!(Y!=null&&Y.rotation)&&se.lookAt(0,0,0)),te.set({camera:se}),re.camera=se}if(!te.scene){let q;E!=null&&E.isScene?(q=E,$_(q,r,"",{})):(q=new _g,$_(q,r,"",{}),E&&Tc(q,E)),te.set({scene:q})}C&&!te.events.handlers&&te.set({events:C(r)});const Z=iF(a,S);if(xi.equ(Z,te.size,pp)||te.setSize(Z.width,Z.height,Z.top,Z.left),G&&te.viewport.dpr!==cR(G)&&te.setDpr(G),te.frameloop!==P&&te.setFrameloop(P),te.onPointerMissed||te.set({onPointerMissed:ee}),L&&!xi.equ(L,te.performance,pp)&&te.set(q=>({performance:{...q.performance,...L}})),!te.xr){var oe;const q=(Ee,Ye)=>{const ge=r.getState();ge.frameloop!=="never"&&bC(Ee,!0,ge,Ye)},se=()=>{const Ee=r.getState();Ee.gl.xr.enabled=Ee.gl.xr.isPresenting,Ee.gl.xr.setAnimationLoop(Ee.gl.xr.isPresenting?q:null),Ee.gl.xr.isPresenting||zS(Ee)},Ce={connect(){const Ee=r.getState().gl;Ee.xr.addEventListener("sessionstart",se),Ee.xr.addEventListener("sessionend",se)},disconnect(){const Ee=r.getState().gl;Ee.xr.removeEventListener("sessionstart",se),Ee.xr.removeEventListener("sessionend",se)}};typeof((oe=le.xr)==null?void 0:oe.addEventListener)=="function"&&Ce.connect(),te.set({xr:Ce})}if(le.shadowMap){const q=le.shadowMap.enabled,se=le.shadowMap.type;if(le.shadowMap.enabled=!!B,xi.boo(B))le.shadowMap.type=W0;else if(xi.str(B)){var pe;const Ce={basic:d2,percentage:fy,soft:W0,variance:Uo};le.shadowMap.type=(pe=Ce[B])!=null?pe:W0}else xi.obj(B)&&Object.assign(le.shadowMap,B);(q!==le.shadowMap.enabled||se!==le.shadowMap.type)&&(le.shadowMap.needsUpdate=!0)}return Tn.enabled=!z,p||(le.outputColorSpace=D?Dl:Un,le.toneMapping=w?zo:a1),te.legacy!==z&&te.set(()=>({legacy:z})),te.linear!==D&&te.set(()=>({linear:D})),te.flat!==w&&te.set(()=>({flat:w})),y&&!xi.fun(y)&&!gC(y)&&!xi.equ(y,le,pp)&&Tc(le,y),c=M,p=!0,_(),this},render(v){return!p&&!g&&this.configure(),g.then(()=>{NS.updateContainer(Ke.jsx(sF,{store:r,children:v,onCreated:c,rootElement:a}),l,null,()=>{})}),r},unmount(){yR(a)}}}function sF({store:a,children:e,onCreated:t,rootElement:n}){return Xg(()=>{const i=a.getState();i.set(r=>({internal:{...r.internal,active:!0}})),t&&t(i),a.getState().events.connected||i.events.connect==null||i.events.connect(n)},[]),Ke.jsx(dR.Provider,{value:a,children:e})}function yR(a,e){const t=Uh.get(a),n=t?.fiber;if(n){const i=t?.store.getState();i&&(i.internal.active=!1),NS.updateContainer(null,n,null,()=>{i&&setTimeout(()=>{try{var r,l,c,d;i.events.disconnect==null||i.events.disconnect(),(r=i.gl)==null||(l=r.renderLists)==null||l.dispose==null||l.dispose(),(c=i.gl)==null||c.forceContextLoss==null||c.forceContextLoss(),(d=i.gl)!=null&&d.xr&&i.xr.disconnect(),L4(i.scene),Uh.delete(a)}catch{}},500)})}}const rF=new Set,oF=new Set,lF=new Set;function XA(a,e){if(a.size)for(const{callback:t}of a.values())t(e)}function ig(a,e){switch(a){case"before":return XA(rF,e);case"after":return XA(oF,e);case"tail":return XA(lF,e)}}let kA,YA;function LS(a,e,t){let n=e.clock.getDelta();e.frameloop==="never"&&typeof a=="number"&&(n=a-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=a),kA=e.internal.subscribers;for(let i=0;i<kA.length;i++)YA=kA[i],YA.ref.current(YA.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}let ny=!1,IS=!1,qA,yC,mp;function bR(a){yC=requestAnimationFrame(bR),ny=!0,qA=0,ig("before",a),IS=!0;for(const t of Uh.values()){var e;mp=t.store.getState(),mp.internal.active&&(mp.frameloop==="always"||mp.internal.frames>0)&&!((e=mp.gl.xr)!=null&&e.isPresenting)&&(qA+=LS(a,mp))}if(IS=!1,ig("after",a),qA===0)return ig("tail",a),ny=!1,cancelAnimationFrame(yC)}function zS(a,e=1){var t;if(!a)return Uh.forEach(n=>zS(n.store.getState(),e));(t=a.gl.xr)!=null&&t.isPresenting||!a.internal.active||a.frameloop==="never"||(e>1?a.internal.frames=Math.min(60,a.internal.frames+e):IS?a.internal.frames=2:a.internal.frames=1,ny||(ny=!0,requestAnimationFrame(bR)))}function bC(a,e=!0,t,n){if(e&&ig("before",a),t)LS(a,t,n);else for(const i of Uh.values())LS(a,i.store.getState());e&&ig("after",a)}const JA={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function uF(a){const{handlePointer:e}=X4(a);return{priority:1,enabled:!0,compute(t,n,i){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(JA).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:i}=a.getState();(t=i.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{const{set:n,events:i}=a.getState();if(i.disconnect==null||i.disconnect(),n(r=>({events:{...r.events,connected:t}})),i.handlers)for(const r in i.handlers){const l=i.handlers[r],[c,d]=JA[r];t.addEventListener(c,l,{passive:d})}},disconnect:()=>{const{set:t,events:n}=a.getState();if(n.connected){if(n.handlers)for(const i in n.handlers){const r=n.handlers[i],[l]=JA[i];n.connected.removeEventListener(l,r)}t(i=>({events:{...i.events,connected:void 0}}))}}}}function AC(a,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>a(...n),e)}}function cF({debounce:a,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[r,l]=Qe.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=Qe.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:r,orientationHandler:null}),d=a?typeof a=="number"?a:a.scroll:null,p=a?typeof a=="number"?a:a.resize:null,g=Qe.useRef(!1);Qe.useEffect(()=>(g.current=!0,()=>void(g.current=!1)));const[v,_,y]=Qe.useMemo(()=>{const M=()=>{if(!c.current.element)return;const{left:B,top:D,width:w,height:z,bottom:O,right:P,x:G,y:L}=c.current.element.getBoundingClientRect(),I={left:B,top:D,width:w,height:z,bottom:O,right:P,x:G,y:L};c.current.element instanceof HTMLElement&&n&&(I.height=c.current.element.offsetHeight,I.width=c.current.element.offsetWidth),Object.freeze(I),g.current&&!pF(c.current.lastBounds,I)&&l(c.current.lastBounds=I)};return[M,p?AC(M,p):M,d?AC(M,d):M]},[l,n,d,p]);function S(){c.current.scrollContainers&&(c.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",y,!0)),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null),c.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",c.current.orientationHandler))}function E(){c.current.element&&(c.current.resizeObserver=new i(y),c.current.resizeObserver.observe(c.current.element),e&&c.current.scrollContainers&&c.current.scrollContainers.forEach(M=>M.addEventListener("scroll",y,{capture:!0,passive:!0})),c.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",c.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",c.current.orientationHandler))}const C=M=>{!M||M===c.current.element||(S(),c.current.element=M,c.current.scrollContainers=AR(M),E())};return hF(y,!!e),fF(_),Qe.useEffect(()=>{S(),E()},[e,y,_]),Qe.useEffect(()=>S,[]),[C,r,v]}function fF(a){Qe.useEffect(()=>{const e=a;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[a])}function hF(a,e){Qe.useEffect(()=>{if(e){const t=a;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[a,e])}function AR(a){const e=[];if(!a||a===document.body)return e;const{overflow:t,overflowX:n,overflowY:i}=window.getComputedStyle(a);return[t,n,i].some(r=>r==="auto"||r==="scroll")&&e.push(a),[...e,...AR(a.parentElement)]}const dF=["x","y","top","bottom","left","right","width","height"],pF=(a,e)=>dF.every(t=>a[t]===e[t]);function mF({ref:a,children:e,fallback:t,resize:n,style:i,gl:r,events:l=uF,eventSource:c,eventPrefix:d,shadows:p,linear:g,flat:v,legacy:_,orthographic:y,frameloop:S,dpr:E,performance:C,raycaster:M,camera:B,scene:D,onPointerMissed:w,onCreated:z,...O}){Qe.useMemo(()=>j4(t4),[]);const P=w4(),[G,L]=cF({scroll:!0,debounce:{scroll:50,resize:0},...n}),I=Qe.useRef(null),Y=Qe.useRef(null);Qe.useImperativeHandle(a,()=>I.current);const ee=uR(w),[te,le]=Qe.useState(!1),[re,F]=Qe.useState(!1);if(te)throw te;if(re)throw re;const J=Qe.useRef(null);Xg(()=>{const oe=I.current;if(L.width>0&&L.height>0&&oe){J.current||(J.current=aF(oe));async function pe(){await J.current.configure({gl:r,scene:D,events:l,shadows:p,linear:g,flat:v,legacy:_,orthographic:y,frameloop:S,dpr:E,performance:C,raycaster:M,camera:B,size:L,onPointerMissed:(...q)=>ee.current==null?void 0:ee.current(...q),onCreated:q=>{q.events.connect==null||q.events.connect(c?B4(c)?c.current:c:Y.current),d&&q.setEvents({compute:(se,Ce)=>{const Ee=se[d+"X"],Ye=se[d+"Y"];Ce.pointer.set(Ee/Ce.size.width*2-1,-(Ye/Ce.size.height)*2+1),Ce.raycaster.setFromCamera(Ce.pointer,Ce.camera)}}),z?.(q)}}),J.current.render(Ke.jsx(P,{children:Ke.jsx(O4,{set:F,children:Ke.jsx(Qe.Suspense,{fallback:Ke.jsx(U4,{set:le}),children:e??null})})}))}pe()}}),Qe.useEffect(()=>{const oe=I.current;if(oe)return()=>yR(oe)},[]);const Z=c?"none":"auto";return Ke.jsx("div",{ref:Y,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Z,...i},...O,children:Ke.jsx("div",{ref:G,style:{width:"100%",height:"100%"},children:Ke.jsx("canvas",{ref:I,style:{display:"block"},children:t})})})}function gF(a){return Ke.jsx(sR,{children:Ke.jsx(mF,{...a})})}function PS(){return PS=Object.assign?Object.assign.bind():function(a){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(a[n]=t[n])}return a},PS.apply(null,arguments)}const vF=parseInt(Nh.replace(/\D+/g,""));function SC(a,e){if(e===k2)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),a;if(e===K_||e===h1){let t=a.getIndex();if(t===null){const l=[],c=a.getAttribute("position");if(c!==void 0){for(let d=0;d<c.count;d++)l.push(d);a.setIndex(l),t=a.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),a}const n=t.count-2,i=[];if(t)if(e===K_)for(let l=1;l<=n;l++)i.push(t.getX(0)),i.push(t.getX(l)),i.push(t.getX(l+1));else for(let l=0;l<n;l++)l%2===0?(i.push(t.getX(l)),i.push(t.getX(l+1)),i.push(t.getX(l+2))):(i.push(t.getX(l+2)),i.push(t.getX(l+1)),i.push(t.getX(l)));i.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const r=a.clone();return r.setIndex(i),r.clearGroups(),r}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),a}var xF=Object.defineProperty,_F=(a,e,t)=>e in a?xF(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,yF=(a,e,t)=>(_F(a,e+"",t),t);class bF{constructor(){yF(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const r=i.indexOf(t);r!==-1&&i.splice(r,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const i=n.slice(0);for(let r=0,l=i.length;r<l;r++)i[r].call(this,e);e.target=null}}}var AF=Object.defineProperty,SF=(a,e,t)=>e in a?AF(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t,It=(a,e,t)=>(SF(a,typeof e!="symbol"?e+"":e,t),t);const i_=new Lh,MC=new yu,MF=Math.cos(70*(Math.PI/180)),EC=(a,e)=>(a%e+e)%e;let EF=class extends bF{constructor(e,t){super(),It(this,"object"),It(this,"domElement"),It(this,"enabled",!0),It(this,"target",new j),It(this,"minDistance",0),It(this,"maxDistance",1/0),It(this,"minZoom",0),It(this,"maxZoom",1/0),It(this,"minPolarAngle",0),It(this,"maxPolarAngle",Math.PI),It(this,"minAzimuthAngle",-1/0),It(this,"maxAzimuthAngle",1/0),It(this,"enableDamping",!1),It(this,"dampingFactor",.05),It(this,"enableZoom",!0),It(this,"zoomSpeed",1),It(this,"enableRotate",!0),It(this,"rotateSpeed",1),It(this,"enablePan",!0),It(this,"panSpeed",1),It(this,"screenSpacePanning",!0),It(this,"keyPanSpeed",7),It(this,"zoomToCursor",!1),It(this,"autoRotate",!1),It(this,"autoRotateSpeed",2),It(this,"reverseOrbit",!1),It(this,"reverseHorizontalOrbit",!1),It(this,"reverseVerticalOrbit",!1),It(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),It(this,"mouseButtons",{LEFT:sh.ROTATE,MIDDLE:sh.DOLLY,RIGHT:sh.PAN}),It(this,"touches",{ONE:rh.ROTATE,TWO:rh.DOLLY_PAN}),It(this,"target0"),It(this,"position0"),It(this,"zoom0"),It(this,"_domElementKeyEvents",null),It(this,"getPolarAngle"),It(this,"getAzimuthalAngle"),It(this,"setPolarAngle"),It(this,"setAzimuthalAngle"),It(this,"getDistance"),It(this,"getZoomScale"),It(this,"listenToKeyEvents"),It(this,"stopListenToKeyEvents"),It(this,"saveState"),It(this,"reset"),It(this,"update"),It(this,"connect"),It(this,"dispose"),It(this,"dollyIn"),It(this,"dollyOut"),It(this,"getScale"),It(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>g.phi,this.getAzimuthalAngle=()=>g.theta,this.setPolarAngle=$=>{let ye=EC($,2*Math.PI),qe=g.phi;qe<0&&(qe+=2*Math.PI),ye<0&&(ye+=2*Math.PI);let Q=Math.abs(ye-qe);2*Math.PI-Q<Q&&(ye<qe?ye+=2*Math.PI:qe+=2*Math.PI),v.phi=ye-qe,n.update()},this.setAzimuthalAngle=$=>{let ye=EC($,2*Math.PI),qe=g.theta;qe<0&&(qe+=2*Math.PI),ye<0&&(ye+=2*Math.PI);let Q=Math.abs(ye-qe);2*Math.PI-Q<Q&&(ye<qe?ye+=2*Math.PI:qe+=2*Math.PI),v.theta=ye-qe,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=$=>{$.addEventListener("keydown",Te),this._domElementKeyEvents=$},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Te),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),d=c.NONE},this.update=(()=>{const $=new j,ye=new j(0,1,0),qe=new Da().setFromUnitVectors(e.up,ye),Q=qe.clone().invert(),Je=new j,We=new Da,Ze=2*Math.PI;return function(){const Ne=n.object.position;qe.setFromUnitVectors(e.up,ye),Q.copy(qe).invert(),$.copy(Ne).sub(n.target),$.applyQuaternion(qe),g.setFromVector3($),n.autoRotate&&d===c.NONE&&le(ee()),n.enableDamping?(g.theta+=v.theta*n.dampingFactor,g.phi+=v.phi*n.dampingFactor):(g.theta+=v.theta,g.phi+=v.phi);let lt=n.minAzimuthAngle,Mt=n.maxAzimuthAngle;isFinite(lt)&&isFinite(Mt)&&(lt<-Math.PI?lt+=Ze:lt>Math.PI&&(lt-=Ze),Mt<-Math.PI?Mt+=Ze:Mt>Math.PI&&(Mt-=Ze),lt<=Mt?g.theta=Math.max(lt,Math.min(Mt,g.theta)):g.theta=g.theta>(lt+Mt)/2?Math.max(lt,g.theta):Math.min(Mt,g.theta)),g.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,g.phi)),g.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(y,n.dampingFactor):n.target.add(y),n.zoomToCursor&&L||n.object.isOrthographicCamera?g.radius=Ce(g.radius):g.radius=Ce(g.radius*_),$.setFromSpherical(g),$.applyQuaternion(Q),Ne.copy(n.target).add($),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(v.theta*=1-n.dampingFactor,v.phi*=1-n.dampingFactor,y.multiplyScalar(1-n.dampingFactor)):(v.set(0,0,0),y.set(0,0,0));let rn=!1;if(n.zoomToCursor&&L){let Wt=null;if(n.object instanceof _i&&n.object.isPerspectiveCamera){const li=$.length();Wt=Ce(li*_);const Fi=li-Wt;n.object.position.addScaledVector(P,Fi),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const li=new j(G.x,G.y,0);li.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/_)),n.object.updateProjectionMatrix(),rn=!0;const Fi=new j(G.x,G.y,0);Fi.unproject(n.object),n.object.position.sub(Fi).add(li),n.object.updateMatrixWorld(),Wt=$.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;Wt!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Wt).add(n.object.position):(i_.origin.copy(n.object.position),i_.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(i_.direction))<MF?e.lookAt(n.target):(MC.setFromNormalAndCoplanarPoint(n.object.up,n.target),i_.intersectPlane(MC,n.target))))}else n.object instanceof Rl&&n.object.isOrthographicCamera&&(rn=_!==1,rn&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/_)),n.object.updateProjectionMatrix()));return _=1,L=!1,rn||Je.distanceToSquared(n.object.position)>p||8*(1-We.dot(n.object.quaternion))>p?(n.dispatchEvent(i),Je.copy(n.object.position),We.copy(n.object.quaternion),rn=!1,!0):!1}})(),this.connect=$=>{n.domElement=$,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",St),n.domElement.addEventListener("pointerdown",dt),n.domElement.addEventListener("pointercancel",H),n.domElement.addEventListener("wheel",Fe)},this.dispose=()=>{var $,ye,qe,Q,Je,We;n.domElement&&(n.domElement.style.touchAction="auto"),($=n.domElement)==null||$.removeEventListener("contextmenu",St),(ye=n.domElement)==null||ye.removeEventListener("pointerdown",dt),(qe=n.domElement)==null||qe.removeEventListener("pointercancel",H),(Q=n.domElement)==null||Q.removeEventListener("wheel",Fe),(Je=n.domElement)==null||Je.ownerDocument.removeEventListener("pointermove",K),(We=n.domElement)==null||We.ownerDocument.removeEventListener("pointerup",H),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",Te)};const n=this,i={type:"change"},r={type:"start"},l={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let d=c.NONE;const p=1e-6,g=new RS,v=new RS;let _=1;const y=new j,S=new De,E=new De,C=new De,M=new De,B=new De,D=new De,w=new De,z=new De,O=new De,P=new j,G=new De;let L=!1;const I=[],Y={};function ee(){return 2*Math.PI/60/60*n.autoRotateSpeed}function te(){return Math.pow(.95,n.zoomSpeed)}function le($){n.reverseOrbit||n.reverseHorizontalOrbit?v.theta+=$:v.theta-=$}function re($){n.reverseOrbit||n.reverseVerticalOrbit?v.phi+=$:v.phi-=$}const F=(()=>{const $=new j;return function(qe,Q){$.setFromMatrixColumn(Q,0),$.multiplyScalar(-qe),y.add($)}})(),J=(()=>{const $=new j;return function(qe,Q){n.screenSpacePanning===!0?$.setFromMatrixColumn(Q,1):($.setFromMatrixColumn(Q,0),$.crossVectors(n.object.up,$)),$.multiplyScalar(qe),y.add($)}})(),Z=(()=>{const $=new j;return function(qe,Q){const Je=n.domElement;if(Je&&n.object instanceof _i&&n.object.isPerspectiveCamera){const We=n.object.position;$.copy(We).sub(n.target);let Ze=$.length();Ze*=Math.tan(n.object.fov/2*Math.PI/180),F(2*qe*Ze/Je.clientHeight,n.object.matrix),J(2*Q*Ze/Je.clientHeight,n.object.matrix)}else Je&&n.object instanceof Rl&&n.object.isOrthographicCamera?(F(qe*(n.object.right-n.object.left)/n.object.zoom/Je.clientWidth,n.object.matrix),J(Q*(n.object.top-n.object.bottom)/n.object.zoom/Je.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function oe($){n.object instanceof _i&&n.object.isPerspectiveCamera||n.object instanceof Rl&&n.object.isOrthographicCamera?_=$:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function pe($){oe(_/$)}function q($){oe(_*$)}function se($){if(!n.zoomToCursor||!n.domElement)return;L=!0;const ye=n.domElement.getBoundingClientRect(),qe=$.clientX-ye.left,Q=$.clientY-ye.top,Je=ye.width,We=ye.height;G.x=qe/Je*2-1,G.y=-(Q/We)*2+1,P.set(G.x,G.y,1).unproject(n.object).sub(n.object.position).normalize()}function Ce($){return Math.max(n.minDistance,Math.min(n.maxDistance,$))}function Ee($){S.set($.clientX,$.clientY)}function Ye($){se($),w.set($.clientX,$.clientY)}function ge($){M.set($.clientX,$.clientY)}function Re($){E.set($.clientX,$.clientY),C.subVectors(E,S).multiplyScalar(n.rotateSpeed);const ye=n.domElement;ye&&(le(2*Math.PI*C.x/ye.clientHeight),re(2*Math.PI*C.y/ye.clientHeight)),S.copy(E),n.update()}function $e($){z.set($.clientX,$.clientY),O.subVectors(z,w),O.y>0?pe(te()):O.y<0&&q(te()),w.copy(z),n.update()}function ut($){B.set($.clientX,$.clientY),D.subVectors(B,M).multiplyScalar(n.panSpeed),Z(D.x,D.y),M.copy(B),n.update()}function vt($){se($),$.deltaY<0?q(te()):$.deltaY>0&&pe(te()),n.update()}function Pt($){let ye=!1;switch($.code){case n.keys.UP:Z(0,n.keyPanSpeed),ye=!0;break;case n.keys.BOTTOM:Z(0,-n.keyPanSpeed),ye=!0;break;case n.keys.LEFT:Z(n.keyPanSpeed,0),ye=!0;break;case n.keys.RIGHT:Z(-n.keyPanSpeed,0),ye=!0;break}ye&&($.preventDefault(),n.update())}function sn(){if(I.length==1)S.set(I[0].pageX,I[0].pageY);else{const $=.5*(I[0].pageX+I[1].pageX),ye=.5*(I[0].pageY+I[1].pageY);S.set($,ye)}}function Ct(){if(I.length==1)M.set(I[0].pageX,I[0].pageY);else{const $=.5*(I[0].pageX+I[1].pageX),ye=.5*(I[0].pageY+I[1].pageY);M.set($,ye)}}function ze(){const $=I[0].pageX-I[1].pageX,ye=I[0].pageY-I[1].pageY,qe=Math.sqrt($*$+ye*ye);w.set(0,qe)}function W(){n.enableZoom&&ze(),n.enablePan&&Ct()}function He(){n.enableZoom&&ze(),n.enableRotate&&sn()}function ke($){if(I.length==1)E.set($.pageX,$.pageY);else{const qe=_t($),Q=.5*($.pageX+qe.x),Je=.5*($.pageY+qe.y);E.set(Q,Je)}C.subVectors(E,S).multiplyScalar(n.rotateSpeed);const ye=n.domElement;ye&&(le(2*Math.PI*C.x/ye.clientHeight),re(2*Math.PI*C.y/ye.clientHeight)),S.copy(E)}function et($){if(I.length==1)B.set($.pageX,$.pageY);else{const ye=_t($),qe=.5*($.pageX+ye.x),Q=.5*($.pageY+ye.y);B.set(qe,Q)}D.subVectors(B,M).multiplyScalar(n.panSpeed),Z(D.x,D.y),M.copy(B)}function Ve($){const ye=_t($),qe=$.pageX-ye.x,Q=$.pageY-ye.y,Je=Math.sqrt(qe*qe+Q*Q);z.set(0,Je),O.set(0,Math.pow(z.y/w.y,n.zoomSpeed)),pe(O.y),w.copy(z)}function ot($){n.enableZoom&&Ve($),n.enablePan&&et($)}function it($){n.enableZoom&&Ve($),n.enableRotate&&ke($)}function dt($){var ye,qe;n.enabled!==!1&&(I.length===0&&((ye=n.domElement)==null||ye.ownerDocument.addEventListener("pointermove",K),(qe=n.domElement)==null||qe.ownerDocument.addEventListener("pointerup",H)),xt($),$.pointerType==="touch"?yt($):me($))}function K($){n.enabled!==!1&&($.pointerType==="touch"?at($):we($))}function H($){var ye,qe,Q;Ie($),I.length===0&&((ye=n.domElement)==null||ye.releasePointerCapture($.pointerId),(qe=n.domElement)==null||qe.ownerDocument.removeEventListener("pointermove",K),(Q=n.domElement)==null||Q.ownerDocument.removeEventListener("pointerup",H)),n.dispatchEvent(l),d=c.NONE}function me($){let ye;switch($.button){case 0:ye=n.mouseButtons.LEFT;break;case 1:ye=n.mouseButtons.MIDDLE;break;case 2:ye=n.mouseButtons.RIGHT;break;default:ye=-1}switch(ye){case sh.DOLLY:if(n.enableZoom===!1)return;Ye($),d=c.DOLLY;break;case sh.ROTATE:if($.ctrlKey||$.metaKey||$.shiftKey){if(n.enablePan===!1)return;ge($),d=c.PAN}else{if(n.enableRotate===!1)return;Ee($),d=c.ROTATE}break;case sh.PAN:if($.ctrlKey||$.metaKey||$.shiftKey){if(n.enableRotate===!1)return;Ee($),d=c.ROTATE}else{if(n.enablePan===!1)return;ge($),d=c.PAN}break;default:d=c.NONE}d!==c.NONE&&n.dispatchEvent(r)}function we($){if(n.enabled!==!1)switch(d){case c.ROTATE:if(n.enableRotate===!1)return;Re($);break;case c.DOLLY:if(n.enableZoom===!1)return;$e($);break;case c.PAN:if(n.enablePan===!1)return;ut($);break}}function Fe($){n.enabled===!1||n.enableZoom===!1||d!==c.NONE&&d!==c.ROTATE||($.preventDefault(),n.dispatchEvent(r),vt($),n.dispatchEvent(l))}function Te($){n.enabled===!1||n.enablePan===!1||Pt($)}function yt($){switch(Ge($),I.length){case 1:switch(n.touches.ONE){case rh.ROTATE:if(n.enableRotate===!1)return;sn(),d=c.TOUCH_ROTATE;break;case rh.PAN:if(n.enablePan===!1)return;Ct(),d=c.TOUCH_PAN;break;default:d=c.NONE}break;case 2:switch(n.touches.TWO){case rh.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;W(),d=c.TOUCH_DOLLY_PAN;break;case rh.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;He(),d=c.TOUCH_DOLLY_ROTATE;break;default:d=c.NONE}break;default:d=c.NONE}d!==c.NONE&&n.dispatchEvent(r)}function at($){switch(Ge($),d){case c.TOUCH_ROTATE:if(n.enableRotate===!1)return;ke($),n.update();break;case c.TOUCH_PAN:if(n.enablePan===!1)return;et($),n.update();break;case c.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;ot($),n.update();break;case c.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;it($),n.update();break;default:d=c.NONE}}function St($){n.enabled!==!1&&$.preventDefault()}function xt($){I.push($)}function Ie($){delete Y[$.pointerId];for(let ye=0;ye<I.length;ye++)if(I[ye].pointerId==$.pointerId){I.splice(ye,1);return}}function Ge($){let ye=Y[$.pointerId];ye===void 0&&(ye=new De,Y[$.pointerId]=ye),ye.set($.pageX,$.pageY)}function _t($){const ye=$.pointerId===I[0].pointerId?I[1]:I[0];return Y[ye.pointerId]}this.dollyIn=($=te())=>{q($),n.update()},this.dollyOut=($=te())=>{pe($),n.update()},this.getScale=()=>_,this.setScale=$=>{oe($),n.update()},this.getZoomScale=()=>te(),t!==void 0&&this.connect(t),this.update()}};function iy(a){if(typeof TextDecoder<"u")return new TextDecoder().decode(a);let e="";for(let t=0,n=a.length;t<n;t++)e+=String.fromCharCode(a[t]);try{return decodeURIComponent(escape(e))}catch{return e}}const mh="srgb",Eu="srgb-linear",TC=3001,TF=3e3;class j1 extends ls{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(t){return new wF(t)}),this.register(function(t){return new UF(t)}),this.register(function(t){return new GF(t)}),this.register(function(t){return new VF(t)}),this.register(function(t){return new XF(t)}),this.register(function(t){return new NF(t)}),this.register(function(t){return new LF(t)}),this.register(function(t){return new IF(t)}),this.register(function(t){return new zF(t)}),this.register(function(t){return new DF(t)}),this.register(function(t){return new PF(t)}),this.register(function(t){return new OF(t)}),this.register(function(t){return new HF(t)}),this.register(function(t){return new FF(t)}),this.register(function(t){return new RF(t)}),this.register(function(t){return new kF(t)}),this.register(function(t){return new YF(t)})}load(e,t,n,i){const r=this;let l;if(this.resourcePath!=="")l=this.resourcePath;else if(this.path!==""){const p=Uc.extractUrlBase(e);l=Uc.resolveURL(p,this.path)}else l=Uc.extractUrlBase(e);this.manager.itemStart(e);const c=function(p){i?i(p):console.error(p),r.manager.itemError(e),r.manager.itemEnd(e)},d=new Mr(this.manager);d.setPath(this.path),d.setResponseType("arraybuffer"),d.setRequestHeader(this.requestHeader),d.setWithCredentials(this.withCredentials),d.load(e,function(p){try{r.parse(p,l,function(g){t(g),r.manager.itemEnd(e)},c)}catch(g){c(g)}},n,c)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,i){let r;const l={},c={};if(typeof e=="string")r=JSON.parse(e);else if(e instanceof ArrayBuffer)if(iy(new Uint8Array(e.slice(0,4)))===SR){try{l[mn.KHR_BINARY_GLTF]=new qF(e)}catch(g){i&&i(g);return}r=JSON.parse(l[mn.KHR_BINARY_GLTF].content)}else r=JSON.parse(iy(new Uint8Array(e)));else r=e;if(r.asset===void 0||r.asset.version[0]<2){i&&i(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const d=new sH(r,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});d.fileLoader.setRequestHeader(this.requestHeader);for(let p=0;p<this.pluginCallbacks.length;p++){const g=this.pluginCallbacks[p](d);g.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),c[g.name]=g,l[g.name]=!0}if(r.extensionsUsed)for(let p=0;p<r.extensionsUsed.length;++p){const g=r.extensionsUsed[p],v=r.extensionsRequired||[];switch(g){case mn.KHR_MATERIALS_UNLIT:l[g]=new BF;break;case mn.KHR_DRACO_MESH_COMPRESSION:l[g]=new JF(r,this.dracoLoader);break;case mn.KHR_TEXTURE_TRANSFORM:l[g]=new KF;break;case mn.KHR_MESH_QUANTIZATION:l[g]=new WF;break;default:v.indexOf(g)>=0&&c[g]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+g+'".')}}d.setExtensions(l),d.setPlugins(c),d.parse(n,i)}parseAsync(e,t){const n=this;return new Promise(function(i,r){n.parse(e,t,i,r)})}}function CF(){let a={};return{get:function(e){return a[e]},add:function(e,t){a[e]=t},remove:function(e){delete a[e]},removeAll:function(){a={}}}}const mn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class RF{constructor(e){this.parser=e,this.name=mn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,i=t.length;n<i;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&r.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const r=t.json,d=((r.extensions&&r.extensions[this.name]||{}).lights||[])[e];let p;const g=new rt(16777215);d.color!==void 0&&g.setRGB(d.color[0],d.color[1],d.color[2],Eu);const v=d.range!==void 0?d.range:0;switch(d.type){case"directional":p=new F1(g),p.target.position.set(0,0,-1),p.add(p.target);break;case"point":p=new P1(g),p.distance=v;break;case"spot":p=new z1(g),p.distance=v,d.spot=d.spot||{},d.spot.innerConeAngle=d.spot.innerConeAngle!==void 0?d.spot.innerConeAngle:0,d.spot.outerConeAngle=d.spot.outerConeAngle!==void 0?d.spot.outerConeAngle:Math.PI/4,p.angle=d.spot.outerConeAngle,p.penumbra=1-d.spot.innerConeAngle/d.spot.outerConeAngle,p.target.position.set(0,0,-1),p.add(p.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+d.type)}return p.position.set(0,0,0),p.decay=2,xu(p,d),d.intensity!==void 0&&(p.intensity=d.intensity),p.name=t.createUniqueName(d.name||"light_"+e),i=Promise.resolve(p),t.cache.add(n,i),i}getDependency(e,t){if(e==="light")return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],c=(r.extensions&&r.extensions[this.name]||{}).light;return c===void 0?null:this._loadLight(c).then(function(d){return n._getNodeRef(t.cache,c,d)})}}class BF{constructor(){this.name=mn.KHR_MATERIALS_UNLIT}getMaterialType(){return _r}extendParams(e,t,n){const i=[];e.color=new rt(1,1,1),e.opacity=1;const r=t.pbrMetallicRoughness;if(r){if(Array.isArray(r.baseColorFactor)){const l=r.baseColorFactor;e.color.setRGB(l[0],l[1],l[2],Eu),e.opacity=l[3]}r.baseColorTexture!==void 0&&i.push(n.assignTexture(e,"map",r.baseColorTexture,mh))}return Promise.all(i)}}class DF{constructor(e){this.parser=e,this.name=mn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name].emissiveStrength;return r!==void 0&&(t.emissiveIntensity=r),Promise.resolve()}}class wF{constructor(e){this.parser=e,this.name=mn.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:no}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],l=i.extensions[this.name];if(l.clearcoatFactor!==void 0&&(t.clearcoat=l.clearcoatFactor),l.clearcoatTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatMap",l.clearcoatTexture)),l.clearcoatRoughnessFactor!==void 0&&(t.clearcoatRoughness=l.clearcoatRoughnessFactor),l.clearcoatRoughnessTexture!==void 0&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",l.clearcoatRoughnessTexture)),l.clearcoatNormalTexture!==void 0&&(r.push(n.assignTexture(t,"clearcoatNormalMap",l.clearcoatNormalTexture)),l.clearcoatNormalTexture.scale!==void 0)){const c=l.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new De(c,c)}return Promise.all(r)}}class UF{constructor(e){this.parser=e,this.name=mn.KHR_MATERIALS_DISPERSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:no}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name];return t.dispersion=r.dispersion!==void 0?r.dispersion:0,Promise.resolve()}}class OF{constructor(e){this.parser=e,this.name=mn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:no}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],l=i.extensions[this.name];return l.iridescenceFactor!==void 0&&(t.iridescence=l.iridescenceFactor),l.iridescenceTexture!==void 0&&r.push(n.assignTexture(t,"iridescenceMap",l.iridescenceTexture)),l.iridescenceIor!==void 0&&(t.iridescenceIOR=l.iridescenceIor),t.iridescenceThicknessRange===void 0&&(t.iridescenceThicknessRange=[100,400]),l.iridescenceThicknessMinimum!==void 0&&(t.iridescenceThicknessRange[0]=l.iridescenceThicknessMinimum),l.iridescenceThicknessMaximum!==void 0&&(t.iridescenceThicknessRange[1]=l.iridescenceThicknessMaximum),l.iridescenceThicknessTexture!==void 0&&r.push(n.assignTexture(t,"iridescenceThicknessMap",l.iridescenceThicknessTexture)),Promise.all(r)}}class NF{constructor(e){this.parser=e,this.name=mn.KHR_MATERIALS_SHEEN}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:no}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[];t.sheenColor=new rt(0,0,0),t.sheenRoughness=0,t.sheen=1;const l=i.extensions[this.name];if(l.sheenColorFactor!==void 0){const c=l.sheenColorFactor;t.sheenColor.setRGB(c[0],c[1],c[2],Eu)}return l.sheenRoughnessFactor!==void 0&&(t.sheenRoughness=l.sheenRoughnessFactor),l.sheenColorTexture!==void 0&&r.push(n.assignTexture(t,"sheenColorMap",l.sheenColorTexture,mh)),l.sheenRoughnessTexture!==void 0&&r.push(n.assignTexture(t,"sheenRoughnessMap",l.sheenRoughnessTexture)),Promise.all(r)}}class LF{constructor(e){this.parser=e,this.name=mn.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:no}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],l=i.extensions[this.name];return l.transmissionFactor!==void 0&&(t.transmission=l.transmissionFactor),l.transmissionTexture!==void 0&&r.push(n.assignTexture(t,"transmissionMap",l.transmissionTexture)),Promise.all(r)}}class IF{constructor(e){this.parser=e,this.name=mn.KHR_MATERIALS_VOLUME}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:no}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],l=i.extensions[this.name];t.thickness=l.thicknessFactor!==void 0?l.thicknessFactor:0,l.thicknessTexture!==void 0&&r.push(n.assignTexture(t,"thicknessMap",l.thicknessTexture)),t.attenuationDistance=l.attenuationDistance||1/0;const c=l.attenuationColor||[1,1,1];return t.attenuationColor=new rt().setRGB(c[0],c[1],c[2],Eu),Promise.all(r)}}class zF{constructor(e){this.parser=e,this.name=mn.KHR_MATERIALS_IOR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:no}extendMaterialParams(e,t){const i=this.parser.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=i.extensions[this.name];return t.ior=r.ior!==void 0?r.ior:1.5,Promise.resolve()}}class PF{constructor(e){this.parser=e,this.name=mn.KHR_MATERIALS_SPECULAR}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:no}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],l=i.extensions[this.name];t.specularIntensity=l.specularFactor!==void 0?l.specularFactor:1,l.specularTexture!==void 0&&r.push(n.assignTexture(t,"specularIntensityMap",l.specularTexture));const c=l.specularColorFactor||[1,1,1];return t.specularColor=new rt().setRGB(c[0],c[1],c[2],Eu),l.specularColorTexture!==void 0&&r.push(n.assignTexture(t,"specularColorMap",l.specularColorTexture,mh)),Promise.all(r)}}class FF{constructor(e){this.parser=e,this.name=mn.EXT_MATERIALS_BUMP}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:no}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],l=i.extensions[this.name];return t.bumpScale=l.bumpFactor!==void 0?l.bumpFactor:1,l.bumpTexture!==void 0&&r.push(n.assignTexture(t,"bumpMap",l.bumpTexture)),Promise.all(r)}}class HF{constructor(e){this.parser=e,this.name=mn.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const n=this.parser.json.materials[e];return!n.extensions||!n.extensions[this.name]?null:no}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const r=[],l=i.extensions[this.name];return l.anisotropyStrength!==void 0&&(t.anisotropy=l.anisotropyStrength),l.anisotropyRotation!==void 0&&(t.anisotropyRotation=l.anisotropyRotation),l.anisotropyTexture!==void 0&&r.push(n.assignTexture(t,"anisotropyMap",l.anisotropyTexture)),Promise.all(r)}}class GF{constructor(e){this.parser=e,this.name=mn.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,i=n.textures[e];if(!i.extensions||!i.extensions[this.name])return null;const r=i.extensions[this.name],l=t.options.ktx2Loader;if(!l){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,r.source,l)}}class VF{constructor(e){this.parser=e,this.name=mn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const l=r.extensions[t],c=i.images[l.source];let d=n.textureLoader;if(c.uri){const p=n.options.manager.getHandler(c.uri);p!==null&&(d=p)}return this.detectSupport().then(function(p){if(p)return n.loadTextureImage(e,l.source,d);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class XF{constructor(e){this.parser=e,this.name=mn.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,i=n.json,r=i.textures[e];if(!r.extensions||!r.extensions[t])return null;const l=r.extensions[t],c=i.images[l.source];let d=n.textureLoader;if(c.uri){const p=n.options.manager.getHandler(c.uri);p!==null&&(d=p)}return this.detectSupport().then(function(p){if(p)return n.loadTextureImage(e,l.source,d);if(i.extensionsRequired&&i.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(t.height===1)}})),this.isSupported}}class kF{constructor(e){this.name=mn.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const i=n.extensions[this.name],r=this.parser.getDependency("buffer",i.buffer),l=this.parser.options.meshoptDecoder;if(!l||!l.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then(function(c){const d=i.byteOffset||0,p=i.byteLength||0,g=i.count,v=i.byteStride,_=new Uint8Array(c,d,p);return l.decodeGltfBufferAsync?l.decodeGltfBufferAsync(g,v,_,i.mode,i.filter).then(function(y){return y.buffer}):l.ready.then(function(){const y=new ArrayBuffer(g*v);return l.decodeGltfBuffer(new Uint8Array(y),g,v,_,i.mode,i.filter),y})})}else return null}}class YF{constructor(e){this.name=mn.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||n.mesh===void 0)return null;const i=t.meshes[n.mesh];for(const p of i.primitives)if(p.mode!==Zr.TRIANGLES&&p.mode!==Zr.TRIANGLE_STRIP&&p.mode!==Zr.TRIANGLE_FAN&&p.mode!==void 0)return null;const l=n.extensions[this.name].attributes,c=[],d={};for(const p in l)c.push(this.parser.getDependency("accessor",l[p]).then(g=>(d[p]=g,d[p])));return c.length<1?null:(c.push(this.parser.createNodeMesh(e)),Promise.all(c).then(p=>{const g=p.pop(),v=g.isGroup?g.children:[g],_=p[0].count,y=[];for(const S of v){const E=new zt,C=new j,M=new Da,B=new j(1,1,1),D=new y1(S.geometry,S.material,_);for(let w=0;w<_;w++)d.TRANSLATION&&C.fromBufferAttribute(d.TRANSLATION,w),d.ROTATION&&M.fromBufferAttribute(d.ROTATION,w),d.SCALE&&B.fromBufferAttribute(d.SCALE,w),D.setMatrixAt(w,E.compose(C,M,B));for(const w in d)if(w==="_COLOR_0"){const z=d[w];D.instanceColor=new Ch(z.array,z.itemSize,z.normalized)}else w!=="TRANSLATION"&&w!=="ROTATION"&&w!=="SCALE"&&S.geometry.setAttribute(w,d[w]);Bn.prototype.copy.call(D,S),this.parser.assignFinalMaterial(D),y.push(D)}return g.isGroup?(g.clear(),g.add(...y),g):y[0]}))}}const SR="glTF",V0=12,CC={JSON:1313821514,BIN:5130562};class qF{constructor(e){this.name=mn.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,V0);if(this.header={magic:iy(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==SR)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-V0,i=new DataView(e,V0);let r=0;for(;r<n;){const l=i.getUint32(r,!0);r+=4;const c=i.getUint32(r,!0);if(r+=4,c===CC.JSON){const d=new Uint8Array(e,V0+r,l);this.content=iy(d)}else if(c===CC.BIN){const d=V0+r;this.body=e.slice(d,d+l)}r+=l}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class JF{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=mn.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,r=e.extensions[this.name].bufferView,l=e.extensions[this.name].attributes,c={},d={},p={};for(const g in l){const v=FS[g]||g.toLowerCase();c[v]=l[g]}for(const g in e.attributes){const v=FS[g]||g.toLowerCase();if(l[g]!==void 0){const _=n.accessors[e.attributes[g]],y=Ap[_.componentType];p[v]=y.name,d[v]=_.normalized===!0}}return t.getDependency("bufferView",r).then(function(g){return new Promise(function(v,_){i.decodeDracoFile(g,function(y){for(const S in y.attributes){const E=y.attributes[S],C=d[S];C!==void 0&&(E.normalized=C)}v(y)},c,p,Eu,_)})})}}class KF{constructor(){this.name=mn.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return(t.texCoord===void 0||t.texCoord===e.channel)&&t.offset===void 0&&t.rotation===void 0&&t.scale===void 0||(e=e.clone(),t.texCoord!==void 0&&(e.channel=t.texCoord),t.offset!==void 0&&e.offset.fromArray(t.offset),t.rotation!==void 0&&(e.rotation=t.rotation),t.scale!==void 0&&e.repeat.fromArray(t.scale),e.needsUpdate=!0),e}}class WF{constructor(){this.name=mn.KHR_MESH_QUANTIZATION}}class MR extends $p{constructor(e,t,n,i){super(e,t,n,i)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i*3+i;for(let l=0;l!==i;l++)t[l]=n[r+l];return t}interpolate_(e,t,n,i){const r=this.resultBuffer,l=this.sampleValues,c=this.valueSize,d=c*2,p=c*3,g=i-t,v=(n-t)/g,_=v*v,y=_*v,S=e*p,E=S-p,C=-2*y+3*_,M=y-_,B=1-C,D=M-_+v;for(let w=0;w!==c;w++){const z=l[E+w+c],O=l[E+w+d]*g,P=l[S+w+c],G=l[S+w]*g;r[w]=B*z+D*O+C*P+M*G}return r}}const jF=new Da;class ZF extends MR{interpolate_(e,t,n,i){const r=super.interpolate_(e,t,n,i);return jF.fromArray(r).normalize().toArray(r),r}}const Zr={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Ap={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},RC={9728:bi,9729:oi,9984:dy,9985:yp,9986:ch,9987:Qr},BC={33071:Ls,33648:Bp,10497:Pc},KA={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},FS={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...vF>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Ac={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},QF={CUBICSPLINE:void 0,LINEAR:Op,STEP:Up},WA={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function $F(a){return a.DefaultMaterial===void 0&&(a.DefaultMaterial=new Qp({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Fo})),a.DefaultMaterial}function nh(a,e,t){for(const n in t.extensions)a[n]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[n]=t.extensions[n])}function xu(a,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(a.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function eH(a,e,t){let n=!1,i=!1,r=!1;for(let p=0,g=e.length;p<g;p++){const v=e[p];if(v.POSITION!==void 0&&(n=!0),v.NORMAL!==void 0&&(i=!0),v.COLOR_0!==void 0&&(r=!0),n&&i&&r)break}if(!n&&!i&&!r)return Promise.resolve(a);const l=[],c=[],d=[];for(let p=0,g=e.length;p<g;p++){const v=e[p];if(n){const _=v.POSITION!==void 0?t.getDependency("accessor",v.POSITION):a.attributes.position;l.push(_)}if(i){const _=v.NORMAL!==void 0?t.getDependency("accessor",v.NORMAL):a.attributes.normal;c.push(_)}if(r){const _=v.COLOR_0!==void 0?t.getDependency("accessor",v.COLOR_0):a.attributes.color;d.push(_)}}return Promise.all([Promise.all(l),Promise.all(c),Promise.all(d)]).then(function(p){const g=p[0],v=p[1],_=p[2];return n&&(a.morphAttributes.position=g),i&&(a.morphAttributes.normal=v),r&&(a.morphAttributes.color=_),a.morphTargetsRelative=!0,a})}function tH(a,e){if(a.updateMorphTargets(),e.weights!==void 0)for(let t=0,n=e.weights.length;t<n;t++)a.morphTargetInfluences[t]=e.weights[t];if(e.extras&&Array.isArray(e.extras.targetNames)){const t=e.extras.targetNames;if(a.morphTargetInfluences.length===t.length){a.morphTargetDictionary={};for(let n=0,i=t.length;n<i;n++)a.morphTargetDictionary[t[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function nH(a){let e;const t=a.extensions&&a.extensions[mn.KHR_DRACO_MESH_COMPRESSION];if(t?e="draco:"+t.bufferView+":"+t.indices+":"+jA(t.attributes):e=a.indices+":"+jA(a.attributes)+":"+a.mode,a.targets!==void 0)for(let n=0,i=a.targets.length;n<i;n++)e+=":"+jA(a.targets[n]);return e}function jA(a){let e="";const t=Object.keys(a).sort();for(let n=0,i=t.length;n<i;n++)e+=t[n]+":"+a[t[n]]+";";return e}function HS(a){switch(a){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function iH(a){return a.search(/\.jpe?g($|\?)/i)>0||a.search(/^data\:image\/jpeg/)===0?"image/jpeg":a.search(/\.webp($|\?)/i)>0||a.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const aH=new zt;class sH{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new CF,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,r=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(n=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,i=navigator.userAgent.indexOf("Firefox")>-1,r=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||n||i&&r<98?this.textureLoader=new Vg(this.options.manager):this.textureLoader=new V3(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new Mr(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,i=this.json,r=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(l){return l._markDefs&&l._markDefs()}),Promise.all(this._invokeAll(function(l){return l.beforeRoot&&l.beforeRoot()})).then(function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])}).then(function(l){const c={scene:l[0][i.scene||0],scenes:l[0],animations:l[1],cameras:l[2],asset:i.asset,parser:n,userData:{}};return nh(r,c,i),xu(c,i),Promise.all(n._invokeAll(function(d){return d.afterRoot&&d.afterRoot(c)})).then(function(){for(const d of c.scenes)d.updateMatrixWorld();e(c)})}).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let i=0,r=t.length;i<r;i++){const l=t[i].joints;for(let c=0,d=l.length;c<d;c++)e[l[c]].isBone=!0}for(let i=0,r=e.length;i<r;i++){const l=e[i];l.mesh!==void 0&&(this._addNodeRef(this.meshCache,l.mesh),l.skin!==void 0&&(n[l.mesh].isSkinnedMesh=!0)),l.camera!==void 0&&this._addNodeRef(this.cameraCache,l.camera)}}_addNodeRef(e,t){t!==void 0&&(e.refs[t]===void 0&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const i=n.clone(),r=(l,c)=>{const d=this.associations.get(l);d!=null&&this.associations.set(c,d);for(const[p,g]of l.children.entries())r(g,c.children[p])};return r(n,i),i.name+="_instance_"+e.uses[t]++,i}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const i=e(t[n]);if(i)return i}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let i=0;i<t.length;i++){const r=e(t[i]);r&&n.push(r)}return n}getDependency(e,t){const n=e+":"+t;let i=this.cache.get(n);if(!i){switch(e){case"scene":i=this.loadScene(t);break;case"node":i=this._invokeOne(function(r){return r.loadNode&&r.loadNode(t)});break;case"mesh":i=this._invokeOne(function(r){return r.loadMesh&&r.loadMesh(t)});break;case"accessor":i=this.loadAccessor(t);break;case"bufferView":i=this._invokeOne(function(r){return r.loadBufferView&&r.loadBufferView(t)});break;case"buffer":i=this.loadBuffer(t);break;case"material":i=this._invokeOne(function(r){return r.loadMaterial&&r.loadMaterial(t)});break;case"texture":i=this._invokeOne(function(r){return r.loadTexture&&r.loadTexture(t)});break;case"skin":i=this.loadSkin(t);break;case"animation":i=this._invokeOne(function(r){return r.loadAnimation&&r.loadAnimation(t)});break;case"camera":i=this.loadCamera(t);break;default:if(i=this._invokeOne(function(r){return r!=this&&r.getDependency&&r.getDependency(e,t)}),!i)throw new Error("Unknown type: "+e);break}this.cache.add(n,i)}return i}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,i=this.json[e+(e==="mesh"?"es":"s")]||[];t=Promise.all(i.map(function(r,l){return n.getDependency(e,l)})),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&t.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(t.uri===void 0&&e===0)return Promise.resolve(this.extensions[mn.KHR_BINARY_GLTF].body);const i=this.options;return new Promise(function(r,l){n.load(Uc.resolveURL(t.uri,i.path),r,void 0,function(){l(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))})})}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(n){const i=t.byteLength||0,r=t.byteOffset||0;return n.slice(r,r+i)})}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(i.bufferView===void 0&&i.sparse===void 0){const l=KA[i.type],c=Ap[i.componentType],d=i.normalized===!0,p=new c(i.count*l);return Promise.resolve(new Dn(p,l,d))}const r=[];return i.bufferView!==void 0?r.push(this.getDependency("bufferView",i.bufferView)):r.push(null),i.sparse!==void 0&&(r.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(r).then(function(l){const c=l[0],d=KA[i.type],p=Ap[i.componentType],g=p.BYTES_PER_ELEMENT,v=g*d,_=i.byteOffset||0,y=i.bufferView!==void 0?n.bufferViews[i.bufferView].byteStride:void 0,S=i.normalized===!0;let E,C;if(y&&y!==v){const M=Math.floor(_/y),B="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+M+":"+i.count;let D=t.cache.get(B);D||(E=new p(c,M*y,i.count*y/g),D=new Ig(E,y/g),t.cache.add(B,D)),C=new Hc(D,d,_%y/g,S)}else c===null?E=new p(i.count*d):E=new p(c,_,i.count*d),C=new Dn(E,d,S);if(i.sparse!==void 0){const M=KA.SCALAR,B=Ap[i.sparse.indices.componentType],D=i.sparse.indices.byteOffset||0,w=i.sparse.values.byteOffset||0,z=new B(l[1],D,i.sparse.count*M),O=new p(l[2],w,i.sparse.count*d);c!==null&&(C=new Dn(C.array.slice(),C.itemSize,C.normalized));for(let P=0,G=z.length;P<G;P++){const L=z[P];if(C.setX(L,O[P*d]),d>=2&&C.setY(L,O[P*d+1]),d>=3&&C.setZ(L,O[P*d+2]),d>=4&&C.setW(L,O[P*d+3]),d>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return C})}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,l=t.images[r];let c=this.textureLoader;if(l.uri){const d=n.manager.getHandler(l.uri);d!==null&&(c=d)}return this.loadTextureImage(e,r,c)}loadTextureImage(e,t,n){const i=this,r=this.json,l=r.textures[e],c=r.images[t],d=(c.uri||c.bufferView)+":"+l.sampler;if(this.textureCache[d])return this.textureCache[d];const p=this.loadImageSource(t,n).then(function(g){g.flipY=!1,g.name=l.name||c.name||"",g.name===""&&typeof c.uri=="string"&&c.uri.startsWith("data:image/")===!1&&(g.name=c.uri);const _=(r.samplers||{})[l.sampler]||{};return g.magFilter=RC[_.magFilter]||oi,g.minFilter=RC[_.minFilter]||Qr,g.wrapS=BC[_.wrapS]||Pc,g.wrapT=BC[_.wrapT]||Pc,i.associations.set(g,{textures:e}),g}).catch(function(){return null});return this.textureCache[d]=p,p}loadImageSource(e,t){const n=this,i=this.json,r=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(v=>v.clone());const l=i.images[e],c=self.URL||self.webkitURL;let d=l.uri||"",p=!1;if(l.bufferView!==void 0)d=n.getDependency("bufferView",l.bufferView).then(function(v){p=!0;const _=new Blob([v],{type:l.mimeType});return d=c.createObjectURL(_),d});else if(l.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const g=Promise.resolve(d).then(function(v){return new Promise(function(_,y){let S=_;t.isImageBitmapLoader===!0&&(S=function(E){const C=new ei(E);C.needsUpdate=!0,_(C)}),t.load(Uc.resolveURL(v,r.path),S,void 0,y)})}).then(function(v){return p===!0&&c.revokeObjectURL(d),xu(v,l),v.userData.mimeType=l.mimeType||iH(l.uri),v}).catch(function(v){throw console.error("THREE.GLTFLoader: Couldn't load texture",d),v});return this.sourceCache[e]=g,g}assignTexture(e,t,n,i){const r=this;return this.getDependency("texture",n.index).then(function(l){if(!l)return null;if(n.texCoord!==void 0&&n.texCoord>0&&(l=l.clone(),l.channel=n.texCoord),r.extensions[mn.KHR_TEXTURE_TRANSFORM]){const c=n.extensions!==void 0?n.extensions[mn.KHR_TEXTURE_TRANSFORM]:void 0;if(c){const d=r.associations.get(l);l=r.extensions[mn.KHR_TEXTURE_TRANSFORM].extendTexture(l,c),r.associations.set(l,d)}}return i!==void 0&&(typeof i=="number"&&(i=i===TC?mh:Eu),"colorSpace"in l?l.colorSpace=i:l.encoding=i===mh?TC:TF),e[t]=l,l})}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=t.attributes.tangent===void 0,r=t.attributes.color!==void 0,l=t.attributes.normal===void 0;if(e.isPoints){const c="PointsMaterial:"+n.uuid;let d=this.cache.get(c);d||(d=new Dy,Ki.prototype.copy.call(d,n),d.color.copy(n.color),d.map=n.map,d.sizeAttenuation=!1,this.cache.add(c,d)),n=d}else if(e.isLine){const c="LineBasicMaterial:"+n.uuid;let d=this.cache.get(c);d||(d=new os,Ki.prototype.copy.call(d,n),d.color.copy(n.color),d.map=n.map,this.cache.add(c,d)),n=d}if(i||r||l){let c="ClonedMaterial:"+n.uuid+":";i&&(c+="derivative-tangents:"),r&&(c+="vertex-colors:"),l&&(c+="flat-shading:");let d=this.cache.get(c);d||(d=n.clone(),r&&(d.vertexColors=!0),l&&(d.flatShading=!0),i&&(d.normalScale&&(d.normalScale.y*=-1),d.clearcoatNormalScale&&(d.clearcoatNormalScale.y*=-1)),this.cache.add(c,d),this.associations.set(d,this.associations.get(n))),n=d}e.material=n}getMaterialType(){return Qp}loadMaterial(e){const t=this,n=this.json,i=this.extensions,r=n.materials[e];let l;const c={},d=r.extensions||{},p=[];if(d[mn.KHR_MATERIALS_UNLIT]){const v=i[mn.KHR_MATERIALS_UNLIT];l=v.getMaterialType(),p.push(v.extendParams(c,r,t))}else{const v=r.pbrMetallicRoughness||{};if(c.color=new rt(1,1,1),c.opacity=1,Array.isArray(v.baseColorFactor)){const _=v.baseColorFactor;c.color.setRGB(_[0],_[1],_[2],Eu),c.opacity=_[3]}v.baseColorTexture!==void 0&&p.push(t.assignTexture(c,"map",v.baseColorTexture,mh)),c.metalness=v.metallicFactor!==void 0?v.metallicFactor:1,c.roughness=v.roughnessFactor!==void 0?v.roughnessFactor:1,v.metallicRoughnessTexture!==void 0&&(p.push(t.assignTexture(c,"metalnessMap",v.metallicRoughnessTexture)),p.push(t.assignTexture(c,"roughnessMap",v.metallicRoughnessTexture))),l=this._invokeOne(function(_){return _.getMaterialType&&_.getMaterialType(e)}),p.push(Promise.all(this._invokeAll(function(_){return _.extendMaterialParams&&_.extendMaterialParams(e,c)})))}r.doubleSided===!0&&(c.side=Us);const g=r.alphaMode||WA.OPAQUE;if(g===WA.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,g===WA.MASK&&(c.alphaTest=r.alphaCutoff!==void 0?r.alphaCutoff:.5)),r.normalTexture!==void 0&&l!==_r&&(p.push(t.assignTexture(c,"normalMap",r.normalTexture)),c.normalScale=new De(1,1),r.normalTexture.scale!==void 0)){const v=r.normalTexture.scale;c.normalScale.set(v,v)}if(r.occlusionTexture!==void 0&&l!==_r&&(p.push(t.assignTexture(c,"aoMap",r.occlusionTexture)),r.occlusionTexture.strength!==void 0&&(c.aoMapIntensity=r.occlusionTexture.strength)),r.emissiveFactor!==void 0&&l!==_r){const v=r.emissiveFactor;c.emissive=new rt().setRGB(v[0],v[1],v[2],Eu)}return r.emissiveTexture!==void 0&&l!==_r&&p.push(t.assignTexture(c,"emissiveMap",r.emissiveTexture,mh)),Promise.all(p).then(function(){const v=new l(c);return r.name&&(v.name=r.name),xu(v,r),t.associations.set(v,{materials:e}),r.extensions&&nh(i,v,r),v})}createUniqueName(e){const t=wn.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function r(c){return n[mn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(c,t).then(function(d){return DC(d,c,t)})}const l=[];for(let c=0,d=e.length;c<d;c++){const p=e[c],g=nH(p),v=i[g];if(v)l.push(v.promise);else{let _;p.extensions&&p.extensions[mn.KHR_DRACO_MESH_COMPRESSION]?_=r(p):_=DC(new qt,p,t),i[g]={primitive:p,promise:_},l.push(_)}}return Promise.all(l)}loadMesh(e){const t=this,n=this.json,i=this.extensions,r=n.meshes[e],l=r.primitives,c=[];for(let d=0,p=l.length;d<p;d++){const g=l[d].material===void 0?$F(this.cache):this.getDependency("material",l[d].material);c.push(g)}return c.push(t.loadGeometries(l)),Promise.all(c).then(function(d){const p=d.slice(0,d.length-1),g=d[d.length-1],v=[];for(let y=0,S=g.length;y<S;y++){const E=g[y],C=l[y];let M;const B=p[y];if(C.mode===Zr.TRIANGLES||C.mode===Zr.TRIANGLE_STRIP||C.mode===Zr.TRIANGLE_FAN||C.mode===void 0)M=r.isSkinnedMesh===!0?new _1(E,B):new Wi(E,B),M.isSkinnedMesh===!0&&M.normalizeSkinWeights(),C.mode===Zr.TRIANGLE_STRIP?M.geometry=SC(M.geometry,h1):C.mode===Zr.TRIANGLE_FAN&&(M.geometry=SC(M.geometry,K_));else if(C.mode===Zr.LINES)M=new Go(E,B);else if(C.mode===Zr.LINE_STRIP)M=new Cu(E,B);else if(C.mode===Zr.LINE_LOOP)M=new b1(E,B);else if(C.mode===Zr.POINTS)M=new A1(E,B);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+C.mode);Object.keys(M.geometry.morphAttributes).length>0&&tH(M,r),M.name=t.createUniqueName(r.name||"mesh_"+e),xu(M,r),C.extensions&&nh(i,M,C),t.assignFinalMaterial(M),v.push(M)}for(let y=0,S=v.length;y<S;y++)t.associations.set(v[y],{meshes:e,primitives:y});if(v.length===1)return r.extensions&&nh(i,v[0],r),v[0];const _=new Su;r.extensions&&nh(i,_,r),t.associations.set(_,{meshes:e});for(let y=0,S=v.length;y<S;y++)_.add(v[y]);return _})}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(!i){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return n.type==="perspective"?t=new _i(t3.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):n.type==="orthographic"&&(t=new Rl(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),xu(t,n),Promise.resolve(t)}loadSkin(e){const t=this.json.skins[e],n=[];for(let i=0,r=t.joints.length;i<r;i++)n.push(this._loadNodeShallow(t.joints[i]));return t.inverseBindMatrices!==void 0?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then(function(i){const r=i.pop(),l=i,c=[],d=[];for(let p=0,g=l.length;p<g;p++){const v=l[p];if(v){c.push(v);const _=new zt;r!==null&&_.fromArray(r.array,p*16),d.push(_)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[p])}return new zg(c,d)})}loadAnimation(e){const t=this.json,n=this,i=t.animations[e],r=i.name?i.name:"animation_"+e,l=[],c=[],d=[],p=[],g=[];for(let v=0,_=i.channels.length;v<_;v++){const y=i.channels[v],S=i.samplers[y.sampler],E=y.target,C=E.node,M=i.parameters!==void 0?i.parameters[S.input]:S.input,B=i.parameters!==void 0?i.parameters[S.output]:S.output;E.node!==void 0&&(l.push(this.getDependency("node",C)),c.push(this.getDependency("accessor",M)),d.push(this.getDependency("accessor",B)),p.push(S),g.push(E))}return Promise.all([Promise.all(l),Promise.all(c),Promise.all(d),Promise.all(p),Promise.all(g)]).then(function(v){const _=v[0],y=v[1],S=v[2],E=v[3],C=v[4],M=[];for(let B=0,D=_.length;B<D;B++){const w=_[B],z=y[B],O=S[B],P=E[B],G=C[B];if(w===void 0)continue;w.updateMatrix&&w.updateMatrix();const L=n._createAnimationTracks(w,z,O,P,G);if(L)for(let I=0;I<L.length;I++)M.push(L[I])}return new Hp(r,void 0,M)})}createNodeMesh(e){const t=this.json,n=this,i=t.nodes[e];return i.mesh===void 0?null:n.getDependency("mesh",i.mesh).then(function(r){const l=n._getNodeRef(n.meshCache,i.mesh,r);return i.weights!==void 0&&l.traverse(function(c){if(c.isMesh)for(let d=0,p=i.weights.length;d<p;d++)c.morphTargetInfluences[d]=i.weights[d]}),l})}loadNode(e){const t=this.json,n=this,i=t.nodes[e],r=n._loadNodeShallow(e),l=[],c=i.children||[];for(let p=0,g=c.length;p<g;p++)l.push(n.getDependency("node",c[p]));const d=i.skin===void 0?Promise.resolve(null):n.getDependency("skin",i.skin);return Promise.all([r,Promise.all(l),d]).then(function(p){const g=p[0],v=p[1],_=p[2];_!==null&&g.traverse(function(y){y.isSkinnedMesh&&y.bind(_,aH)});for(let y=0,S=v.length;y<S;y++)g.add(v[y]);return g})}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const r=t.nodes[e],l=r.name?i.createUniqueName(r.name):"",c=[],d=i._invokeOne(function(p){return p.createNodeMesh&&p.createNodeMesh(e)});return d&&c.push(d),r.camera!==void 0&&c.push(i.getDependency("camera",r.camera).then(function(p){return i._getNodeRef(i.cameraCache,r.camera,p)})),i._invokeAll(function(p){return p.createNodeAttachment&&p.createNodeAttachment(e)}).forEach(function(p){c.push(p)}),this.nodeCache[e]=Promise.all(c).then(function(p){let g;if(r.isBone===!0?g=new Ry:p.length>1?g=new Su:p.length===1?g=p[0]:g=new Bn,g!==p[0])for(let v=0,_=p.length;v<_;v++)g.add(p[v]);if(r.name&&(g.userData.name=r.name,g.name=l),xu(g,r),r.extensions&&nh(n,g,r),r.matrix!==void 0){const v=new zt;v.fromArray(r.matrix),g.applyMatrix4(v)}else r.translation!==void 0&&g.position.fromArray(r.translation),r.rotation!==void 0&&g.quaternion.fromArray(r.rotation),r.scale!==void 0&&g.scale.fromArray(r.scale);return i.associations.has(g)||i.associations.set(g,{}),i.associations.get(g).nodes=e,g}),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,r=new Su;n.name&&(r.name=i.createUniqueName(n.name)),xu(r,n),n.extensions&&nh(t,r,n);const l=n.nodes||[],c=[];for(let d=0,p=l.length;d<p;d++)c.push(i.getDependency("node",l[d]));return Promise.all(c).then(function(d){for(let g=0,v=d.length;g<v;g++)r.add(d[g]);const p=g=>{const v=new Map;for(const[_,y]of i.associations)(_ instanceof Ki||_ instanceof ei)&&v.set(_,y);return g.traverse(_=>{const y=i.associations.get(_);y!=null&&v.set(_,y)}),v};return i.associations=p(r),r})}_createAnimationTracks(e,t,n,i,r){const l=[],c=e.name?e.name:e.uuid,d=[];Ac[r.path]===Ac.weights?e.traverse(function(_){_.morphTargetInfluences&&d.push(_.name?_.name:_.uuid)}):d.push(c);let p;switch(Ac[r.path]){case Ac.weights:p=Bh;break;case Ac.rotation:p=Dh;break;case Ac.position:case Ac.scale:p=wh;break;default:switch(n.itemSize){case 1:p=Bh;break;case 2:case 3:default:p=wh;break}break}const g=i.interpolation!==void 0?QF[i.interpolation]:Op,v=this._getArrayFromAccessor(n);for(let _=0,y=d.length;_<y;_++){const S=new p(d[_]+"."+Ac[r.path],t.array,v,g);i.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(S),l.push(S)}return l}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const n=HS(t.constructor),i=new Float32Array(t.length);for(let r=0,l=t.length;r<l;r++)i[r]=t[r]*n;t=i}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(n){const i=this instanceof Dh?ZF:MR;return new i(this.times,this.values,this.getValueSize()/3,n)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function rH(a,e,t){const n=e.attributes,i=new Ga;if(n.POSITION!==void 0){const c=t.json.accessors[n.POSITION],d=c.min,p=c.max;if(d!==void 0&&p!==void 0){if(i.set(new j(d[0],d[1],d[2]),new j(p[0],p[1],p[2])),c.normalized){const g=HS(Ap[c.componentType]);i.min.multiplyScalar(g),i.max.multiplyScalar(g)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const r=e.targets;if(r!==void 0){const c=new j,d=new j;for(let p=0,g=r.length;p<g;p++){const v=r[p];if(v.POSITION!==void 0){const _=t.json.accessors[v.POSITION],y=_.min,S=_.max;if(y!==void 0&&S!==void 0){if(d.setX(Math.max(Math.abs(y[0]),Math.abs(S[0]))),d.setY(Math.max(Math.abs(y[1]),Math.abs(S[1]))),d.setZ(Math.max(Math.abs(y[2]),Math.abs(S[2]))),_.normalized){const E=HS(Ap[_.componentType]);d.multiplyScalar(E)}c.max(d)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(c)}a.boundingBox=i;const l=new wa;i.getCenter(l.center),l.radius=i.min.distanceTo(i.max)/2,a.boundingSphere=l}function DC(a,e,t){const n=e.attributes,i=[];function r(l,c){return t.getDependency("accessor",l).then(function(d){a.setAttribute(c,d)})}for(const l in n){const c=FS[l]||l.toLowerCase();c in a.attributes||i.push(r(n[l],c))}if(e.indices!==void 0&&!a.index){const l=t.getDependency("accessor",e.indices).then(function(c){a.setIndex(c)});i.push(l)}return xu(a,e),rH(a,e,t),Promise.all(i).then(function(){return e.targets!==void 0?eH(a,e.targets,t):a})}const ZA=new WeakMap;class oH extends ls{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,i){const r=new Mr(this.manager);r.setPath(this.path),r.setResponseType("arraybuffer"),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials),r.load(e,l=>{const c={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(l,c).then(t).catch(i)},n,i)}decodeDracoFile(e,t,n,i){const r={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,r).then(t)}decodeGeometry(e,t){for(const d in t.attributeTypes){const p=t.attributeTypes[d];p.BYTES_PER_ELEMENT!==void 0&&(t.attributeTypes[d]=p.name)}const n=JSON.stringify(t);if(ZA.has(e)){const d=ZA.get(e);if(d.key===n)return d.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let i;const r=this.workerNextTaskID++,l=e.byteLength,c=this._getWorker(r,l).then(d=>(i=d,new Promise((p,g)=>{i._callbacks[r]={resolve:p,reject:g},i.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(d=>this._createGeometry(d.geometry));return c.catch(()=>!0).then(()=>{i&&r&&this._releaseTask(i,r)}),ZA.set(e,{key:n,promise:c}),c}_createGeometry(e){const t=new qt;e.index&&t.setIndex(new Dn(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n],r=i.name,l=i.array,c=i.itemSize;t.setAttribute(r,new Dn(l,c))}return t}_loadLibrary(e,t){const n=new Mr(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise((i,r)=>{n.load(e,i,void 0,r)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(n=>{const i=n[0];e||(this.decoderConfig.wasmBinary=n[1]);const r=lH.toString(),l=["/* draco decoder */",i,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([l]))}),this.decoderPending}_getWorker(e,t){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const i=new Worker(this.workerSourceURL);i._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(r){const l=r.data;switch(l.type){case"decode":i._callbacks[l.id].resolve(l);break;case"error":i._callbacks[l.id].reject(l);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+l.type+'"')}},this.workerPool.push(i)}else this.workerPool.sort(function(i,r){return i._taskLoad>r._taskLoad?-1:1});const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n})}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function lH(){let a,e;onmessage=function(l){const c=l.data;switch(c.type){case"init":a=c.decoderConfig,e=new Promise(function(g){a.onModuleLoaded=function(v){g({draco:v})},DracoDecoderModule(a)});break;case"decode":const d=c.buffer,p=c.taskConfig;e.then(g=>{const v=g.draco,_=new v.Decoder,y=new v.DecoderBuffer;y.Init(new Int8Array(d),d.byteLength);try{const S=t(v,_,y,p),E=S.attributes.map(C=>C.array.buffer);S.index&&E.push(S.index.array.buffer),self.postMessage({type:"decode",id:c.id,geometry:S},E)}catch(S){console.error(S),self.postMessage({type:"error",id:c.id,error:S.message})}finally{v.destroy(y),v.destroy(_)}});break}};function t(l,c,d,p){const g=p.attributeIDs,v=p.attributeTypes;let _,y;const S=c.GetEncodedGeometryType(d);if(S===l.TRIANGULAR_MESH)_=new l.Mesh,y=c.DecodeBufferToMesh(d,_);else if(S===l.POINT_CLOUD)_=new l.PointCloud,y=c.DecodeBufferToPointCloud(d,_);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!y.ok()||_.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+y.error_msg());const E={index:null,attributes:[]};for(const C in g){const M=self[v[C]];let B,D;if(p.useUniqueIDs)D=g[C],B=c.GetAttributeByUniqueId(_,D);else{if(D=c.GetAttributeId(_,l[g[C]]),D===-1)continue;B=c.GetAttribute(_,D)}E.attributes.push(i(l,c,_,C,M,B))}return S===l.TRIANGULAR_MESH&&(E.index=n(l,c,_)),l.destroy(_),E}function n(l,c,d){const g=d.num_faces()*3,v=g*4,_=l._malloc(v);c.GetTrianglesUInt32Array(d,v,_);const y=new Uint32Array(l.HEAPF32.buffer,_,g).slice();return l._free(_),{array:y,itemSize:1}}function i(l,c,d,p,g,v){const _=v.num_components(),S=d.num_points()*_,E=S*g.BYTES_PER_ELEMENT,C=r(l,g),M=l._malloc(E);c.GetAttributeDataArrayForAllPoints(d,v,C,E,M);const B=new g(l.HEAPF32.buffer,M,S).slice();return l._free(M),{name:p,array:B,itemSize:_}}function r(l,c){switch(c){case Float32Array:return l.DT_FLOAT32;case Int8Array:return l.DT_INT8;case Int16Array:return l.DT_INT16;case Int32Array:return l.DT_INT32;case Uint8Array:return l.DT_UINT8;case Uint16Array:return l.DT_UINT16;case Uint32Array:return l.DT_UINT32}}}let a_;const QA=()=>{if(a_)return a_;const a="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",e="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",t=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),n=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let i=a;WebAssembly.validate(t)&&(i=e);let r;const l=WebAssembly.instantiate(c(i),{}).then(v=>{r=v.instance,r.exports.__wasm_call_ctors()});function c(v){const _=new Uint8Array(v.length);for(let S=0;S<v.length;++S){const E=v.charCodeAt(S);_[S]=E>96?E-71:E>64?E-65:E>47?E+4:E>46?63:62}let y=0;for(let S=0;S<v.length;++S)_[y++]=_[S]<60?n[_[S]]:(_[S]-60)*64+_[++S];return _.buffer.slice(0,y)}function d(v,_,y,S,E,C){const M=r.exports.sbrk,B=y+3&-4,D=M(B*S),w=M(E.length),z=new Uint8Array(r.exports.memory.buffer);z.set(E,w);const O=v(D,y,S,w,E.length);if(O===0&&C&&C(D,B,S),_.set(z.subarray(D,D+y*S)),M(D-M(0)),O!==0)throw new Error(`Malformed buffer data: ${O}`)}const p={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},g={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return a_={ready:l,supported:!0,decodeVertexBuffer(v,_,y,S,E){d(r.exports.meshopt_decodeVertexBuffer,v,_,y,S,r.exports[p[E]])},decodeIndexBuffer(v,_,y,S){d(r.exports.meshopt_decodeIndexBuffer,v,_,y,S)},decodeIndexSequence(v,_,y,S){d(r.exports.meshopt_decodeIndexSequence,v,_,y,S)},decodeGltfBuffer(v,_,y,S,E,C){d(r.exports[g[E]],v,_,y,S,r.exports[p[C]])}},a_},$A=a=>a===Object(a)&&!Array.isArray(a)&&typeof a!="function";function Z1(a,e){const t=Oo(r=>r.gl),n=Jc(Vg,$A(a)?Object.values(a):a);return Qe.useLayoutEffect(()=>{e?.(n)},[e]),Qe.useEffect(()=>{if("initTexture"in t){let r=[];Array.isArray(n)?r=n:n instanceof ei?r=[n]:$A(n)&&(r=Object.values(n)),r.forEach(l=>{l instanceof ei&&t.initTexture(l)})}},[t,n]),Qe.useMemo(()=>{if($A(a)){const r={};let l=0;for(const c in a)r[c]=n[l++];return r}else return n},[a,n])}Z1.preload=a=>Jc.preload(Vg,a);Z1.clear=a=>Jc.clear(Vg,a);let s_=null,ER="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function TR(a=!0,e=!0,t){return n=>{t&&t(n),a&&(s_||(s_=new oH),s_.setDecoderPath(typeof a=="string"?a:ER),n.setDRACOLoader(s_)),e&&n.setMeshoptDecoder(typeof QA=="function"?QA():QA)}}const kg=(a,e,t,n)=>Jc(j1,a,TR(e,t,n));kg.preload=(a,e,t,n)=>Jc.preload(j1,a,TR(e,t,n));kg.clear=a=>Jc.clear(j1,a);kg.setDecoderPath=a=>{ER=a};const uH=Qe.forwardRef(({makeDefault:a,camera:e,regress:t,domElement:n,enableDamping:i=!0,keyEvents:r=!1,onChange:l,onStart:c,onEnd:d,...p},g)=>{const v=Oo(O=>O.invalidate),_=Oo(O=>O.camera),y=Oo(O=>O.gl),S=Oo(O=>O.events),E=Oo(O=>O.setEvents),C=Oo(O=>O.set),M=Oo(O=>O.get),B=Oo(O=>O.performance),D=e||_,w=n||S.connected||y.domElement,z=Qe.useMemo(()=>new EF(D),[D]);return K1(()=>{z.enabled&&z.update()},-1),Qe.useEffect(()=>(r&&z.connect(r===!0?w:r),z.connect(w),()=>void z.dispose()),[r,w,t,z,v]),Qe.useEffect(()=>{const O=L=>{v(),t&&B.regress(),l&&l(L)},P=L=>{c&&c(L)},G=L=>{d&&d(L)};return z.addEventListener("change",O),z.addEventListener("start",P),z.addEventListener("end",G),()=>{z.removeEventListener("start",P),z.removeEventListener("end",G),z.removeEventListener("change",O)}},[l,c,d,z,v,E]),Qe.useEffect(()=>{if(a){const O=M().controls;return C({controls:z}),()=>C({controls:O})}},[a,z]),Qe.createElement("primitive",PS({ref:g,object:z,enableDamping:i},p))});var r_={},wC;function cH(){if(wC)return r_;wC=1,r_.match=r,r_.parse=l;var a=/(?:(only|not)?\s*([^\s\(\)]+)(?:\s*and)?\s*)?(.+)?/i,e=/\(\s*([^\s\:\)]+)\s*(?:\:\s*([^\s\)]+))?\s*\)/,t=/^(?:(min|max)-)?(.+)/,n=/(em|rem|px|cm|mm|in|pt|pc)?$/,i=/(dpi|dpcm|dppx)?$/;function r(g,v){return l(g).some(function(_){var y=_.inverse,S=_.type==="all"||v.type===_.type;if(S&&y||!(S||y))return!1;var E=_.expressions.every(function(C){var M=C.feature,B=C.modifier,D=C.value,w=v[M];if(!w)return!1;switch(M){case"orientation":case"scan":return w.toLowerCase()===D.toLowerCase();case"width":case"height":case"device-width":case"device-height":D=p(D),w=p(w);break;case"resolution":D=d(D),w=d(w);break;case"aspect-ratio":case"device-aspect-ratio":case"device-pixel-ratio":D=c(D),w=c(w);break;case"grid":case"color":case"color-index":case"monochrome":D=parseInt(D,10)||1,w=parseInt(w,10)||0;break}switch(B){case"min":return w>=D;case"max":return w<=D;default:return w===D}});return E&&!y||!E&&y})}function l(g){return g.split(",").map(function(v){v=v.trim();var _=v.match(a),y=_[1],S=_[2],E=_[3]||"",C={};return C.inverse=!!y&&y.toLowerCase()==="not",C.type=S?S.toLowerCase():"all",E=E.match(/\([^\)]+\)/g)||[],C.expressions=E.map(function(M){var B=M.match(e),D=B[1].toLowerCase().match(t);return{modifier:D[1],feature:D[2],value:B[2]}}),C})}function c(g){var v=Number(g),_;return v||(_=g.match(/^(\d+)\s*\/\s*(\d+)$/),v=_[1]/_[2]),v}function d(g){var v=parseFloat(g),_=String(g).match(i)[1];switch(_){case"dpcm":return v/2.54;case"dppx":return v*96;default:return v}}function p(g){var v=parseFloat(g),_=String(g).match(n)[1];switch(_){case"em":return v*16;case"rem":return v*16;case"cm":return v*96/2.54;case"mm":return v*96/2.54/10;case"in":return v*96;case"pt":return v*72;case"pc":return v*72/12;default:return v}}return r_}var eS,UC;function fH(){if(UC)return eS;UC=1;var a=cH().match,e=typeof window<"u"?window.matchMedia:null;function t(i,r,l){var c=this,d;e&&!l&&(d=e.call(window,i)),d?(this.matches=d.matches,this.media=d.media,d.addListener(v)):(this.matches=a(i,r),this.media=i),this.addListener=p,this.removeListener=g,this.dispose=_;function p(y){d&&d.addListener(y)}function g(y){d&&d.removeListener(y)}function v(y){c.matches=y.matches,c.media=y.media}function _(){d&&d.removeListener(v)}}function n(i,r,l){return new t(i,r,l)}return eS=n,eS}var hH=fH();const dH=Ug(hH);var pH=/[A-Z]/g,mH=/^ms-/,tS={};function gH(a){return"-"+a.toLowerCase()}function CR(a){if(tS.hasOwnProperty(a))return tS[a];var e=a.replace(pH,gH);return tS[a]=mH.test(e)?"-"+e:e}function vH(a,e){if(a===e)return!0;if(!a||!e)return!1;const t=Object.keys(a),n=Object.keys(e),i=t.length;if(n.length!==i)return!1;for(let r=0;r<i;r++){const l=t[r];if(a[l]!==e[l]||!Object.prototype.hasOwnProperty.call(e,l))return!1}return!0}var nS={exports:{}},iS,OC;function xH(){if(OC)return iS;OC=1;var a="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return iS=a,iS}var aS,NC;function _H(){if(NC)return aS;NC=1;var a=xH();function e(){}function t(){}return t.resetWarningCache=e,aS=function(){function n(l,c,d,p,g,v){if(v!==a){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}n.isRequired=n;function i(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:i,element:n,elementType:n,instanceOf:i,node:n,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:t,resetWarningCache:e};return r.PropTypes=r,r},aS}var LC;function yH(){return LC||(LC=1,nS.exports=_H()()),nS.exports}var bH=yH();const Vn=Ug(bH),Ds=Vn.oneOfType([Vn.string,Vn.number]),RR={all:Vn.bool,grid:Vn.bool,aural:Vn.bool,braille:Vn.bool,handheld:Vn.bool,print:Vn.bool,projection:Vn.bool,screen:Vn.bool,tty:Vn.bool,tv:Vn.bool,embossed:Vn.bool},AH={orientation:Vn.oneOf(["portrait","landscape"]),scan:Vn.oneOf(["progressive","interlace"]),aspectRatio:Vn.string,deviceAspectRatio:Vn.string,height:Ds,deviceHeight:Ds,width:Ds,deviceWidth:Ds,color:Vn.bool,colorIndex:Vn.bool,monochrome:Vn.bool,resolution:Ds,type:Object.keys(RR)},{type:F8,...SH}=AH,MH={minAspectRatio:Vn.string,maxAspectRatio:Vn.string,minDeviceAspectRatio:Vn.string,maxDeviceAspectRatio:Vn.string,minHeight:Ds,maxHeight:Ds,minDeviceHeight:Ds,maxDeviceHeight:Ds,minWidth:Ds,maxWidth:Ds,minDeviceWidth:Ds,maxDeviceWidth:Ds,minColor:Vn.number,maxColor:Vn.number,minColorIndex:Vn.number,maxColorIndex:Vn.number,minMonochrome:Vn.number,maxMonochrome:Vn.number,minResolution:Ds,maxResolution:Ds,...SH},EH={...RR,...MH};var TH={all:EH};const CH=a=>`not ${a}`,RH=(a,e)=>{const t=CR(a);return typeof e=="number"&&(e=`${e}px`),e===!0?t:e===!1?CH(t):`(${t}: ${e})`},BH=a=>a.join(" and "),DH=a=>{const e=[];return Object.keys(TH.all).forEach(t=>{const n=a[t];n!=null&&e.push(RH(t,n))}),BH(e)},wH=Qe.createContext(void 0),UH=a=>a.query||DH(a),IC=a=>a?Object.keys(a).reduce((t,n)=>(t[CR(n)]=a[n],t),{}):void 0,BR=()=>{const a=Qe.useRef(!1);return Qe.useEffect(()=>{a.current=!0},[]),a.current},OH=a=>{const e=Qe.useContext(wH),t=()=>IC(a)||IC(e),[n,i]=Qe.useState(t);return Qe.useEffect(()=>{const r=t();vH(n,r)||i(r)},[a,e]),n},NH=a=>{const e=()=>UH(a),[t,n]=Qe.useState(e);return Qe.useEffect(()=>{const i=e();t!==i&&n(i)},[a]),t},LH=(a,e)=>{const t=()=>dH(a,e||{},!!e),[n,i]=Qe.useState(t),r=BR();return Qe.useEffect(()=>{if(r){const l=t();return i(l),()=>{l&&l.dispose()}}},[a,e]),n},IH=a=>{const[e,t]=Qe.useState(a.matches);return Qe.useEffect(()=>{const n=i=>{t(i.matches)};return a.addListener(n),t(a.matches),()=>{a.removeListener(n)}},[a]),e},zC=(a,e,t)=>{const n=OH(e),i=NH(a);if(!i)throw new Error("Invalid or missing MediaQuery!");const r=LH(i,n),l=IH(r);return BR(),Qe.useEffect(()=>{},[l]),Qe.useEffect(()=>()=>{r&&r.dispose()},[]),l};var sS=1/1e3,zH=1e3,PH=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(a){typeof document<"u"&&document.hidden!==void 0&&(a?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=a)}get delta(){return this._delta*sS}get fixedDelta(){return this._fixedDelta*sS}set fixedDelta(a){this._fixedDelta=a*zH}get elapsed(){return this._elapsed*sS}update(a){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(a!==void 0?a:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(a){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},FH=(()=>{const a=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]),t=new qt;return t.setAttribute("position",new Dn(a,3)),t.setAttribute("uv",new Dn(e,2)),t})(),us=class GS{static get fullscreenGeometry(){return FH}constructor(e="Pass",t=new _g,n=new Rl){this.name=e,this.renderer=null,this.scene=t,this.camera=n,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new Wi(GS.fullscreenGeometry,e),t.frustumCulled=!1,this.scene===null&&(this.scene=new _g),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Ho){}render(e,t,n,i,r){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,n){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof Pi||t instanceof Ki||t instanceof ei||t instanceof GS)&&this[e].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},HH=class extends us{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(a,e,t,n,i){const r=a.state.buffers.stencil;r.setLocked(!1),r.setTest(!1)}},GH=`#ifdef COLOR_WRITE
#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#endif
#ifdef DEPTH_WRITE
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
#ifdef USE_WEIGHTS
uniform vec4 channelWeights;
#endif
uniform float opacity;varying vec2 vUv;void main(){
#ifdef COLOR_WRITE
vec4 texel=texture2D(inputBuffer,vUv);
#ifdef USE_WEIGHTS
texel*=channelWeights;
#endif
gl_FragColor=opacity*texel;
#ifdef COLOR_SPACE_CONVERSION
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
#else
gl_FragColor=vec4(0.0);
#endif
#ifdef DEPTH_WRITE
gl_FragDepth=readDepth(vUv);
#endif
}`,Q1="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",DR=class extends ji{constructor(){super({name:"CopyMaterial",defines:{DEPTH_PACKING:"0",COLOR_WRITE:"1"},uniforms:{inputBuffer:new ln(null),depthBuffer:new ln(null),channelWeights:new ln(null),opacity:new ln(1)},blending:Ba,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:GH,vertexShader:Q1}),this.depthFunc=Tp}get inputBuffer(){return this.uniforms.inputBuffer.value}set inputBuffer(a){const e=a!==null;this.colorWrite!==e&&(e?this.defines.COLOR_WRITE=!0:delete this.defines.COLOR_WRITE,this.colorWrite=e,this.needsUpdate=!0),this.uniforms.inputBuffer.value=a}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(a){const e=a!==null;this.depthWrite!==e&&(e?this.defines.DEPTH_WRITE=!0:delete this.defines.DEPTH_WRITE,this.depthTest=e,this.depthWrite=e,this.needsUpdate=!0),this.uniforms.depthBuffer.value=a}set depthPacking(a){this.defines.DEPTH_PACKING=a.toFixed(0),this.needsUpdate=!0}get channelWeights(){return this.uniforms.channelWeights.value}set channelWeights(a){a!==null?(this.defines.USE_WEIGHTS="1",this.uniforms.channelWeights.value=a):delete this.defines.USE_WEIGHTS,this.needsUpdate=!0}setInputBuffer(a){this.uniforms.inputBuffer.value=a}getOpacity(a){return this.uniforms.opacity.value}setOpacity(a){this.uniforms.opacity.value=a}},VH=class extends us{constructor(a,e=!0){super("CopyPass"),this.fullscreenMaterial=new DR,this.needsSwap=!1,this.renderTarget=a,a===void 0&&(this.renderTarget=new Pi(1,1,{minFilter:oi,magFilter:oi,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(a){this.autoResize=a}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(a){this.autoResize=a}render(a,e,t,n,i){this.fullscreenMaterial.inputBuffer=e.texture,a.setRenderTarget(this.renderToScreen?null:this.renderTarget),a.render(this.scene,this.camera)}setSize(a,e){this.autoResize&&this.renderTarget.setSize(a,e)}initialize(a,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==ra?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":a!==null&&a.outputColorSpace===Un&&(this.renderTarget.texture.colorSpace=Un))}},PC=new rt,$1=class extends us{constructor(a=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=a,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(a,e,t){this.color=a,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(a){this.overrideClearColor=a}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(a){this.overrideClearAlpha=a}render(a,e,t,n,i){const r=this.overrideClearColor,l=this.overrideClearAlpha,c=a.getClearAlpha(),d=r!==null,p=l>=0;d?(a.getClearColor(PC),a.setClearColor(r,p?l:c)):p&&a.setClearAlpha(l),a.setRenderTarget(this.renderToScreen?null:e),a.clear(this.color,this.depth,this.stencil),d?a.setClearColor(PC,c):p&&a.setClearAlpha(c)}},XH=class extends us{constructor(a,e){super("MaskPass",a,e),this.needsSwap=!1,this.clearPass=new $1(!1,!1,!0),this.inverse=!1}set mainScene(a){this.scene=a}set mainCamera(a){this.camera=a}get inverted(){return this.inverse}set inverted(a){this.inverse=a}get clear(){return this.clearPass.enabled}set clear(a){this.clearPass.enabled=a}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(a){this.inverted=a}render(a,e,t,n,i){const r=a.getContext(),l=a.state.buffers,c=this.scene,d=this.camera,p=this.clearPass,g=this.inverted?0:1,v=1-g;l.color.setMask(!1),l.depth.setMask(!1),l.color.setLocked(!0),l.depth.setLocked(!0),l.stencil.setTest(!0),l.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),l.stencil.setFunc(r.ALWAYS,g,4294967295),l.stencil.setClear(v),l.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?p.render(a,null):(p.render(a,e),p.render(a,t))),this.renderToScreen?(a.setRenderTarget(null),a.render(c,d)):(a.setRenderTarget(e),a.render(c,d),a.setRenderTarget(t),a.render(c,d)),l.color.setLocked(!1),l.depth.setLocked(!1),l.stencil.setLocked(!1),l.stencil.setFunc(r.EQUAL,1,4294967295),l.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),l.stencil.setLocked(!0)}},kH=class{constructor(a=null,{depthBuffer:e=!0,stencilBuffer:t=!1,multisampling:n=0,frameBufferType:i}={}){this.renderer=null,this.inputBuffer=this.createBuffer(e,t,i,n),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new VH,this.depthTexture=null,this.passes=[],this.timer=new PH,this.autoRenderToScreen=!0,this.setRenderer(a)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(a){const e=this.inputBuffer,t=this.multisampling;t>0&&a>0?(this.inputBuffer.samples=a,this.outputBuffer.samples=a,this.inputBuffer.dispose(),this.outputBuffer.dispose()):t!==a&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(e.depthBuffer,e.stencilBuffer,e.texture.type,a),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(a){if(this.renderer=a,a!==null){const e=a.getSize(new De),t=a.getContext().getContextAttributes().alpha,n=this.inputBuffer.texture.type;n===ra&&a.outputColorSpace===Un&&(this.inputBuffer.texture.colorSpace=Un,this.outputBuffer.texture.colorSpace=Un,this.inputBuffer.dispose(),this.outputBuffer.dispose()),a.autoClear=!1,this.setSize(e.width,e.height);for(const i of this.passes)i.initialize(a,t,n)}}replaceRenderer(a,e=!0){const t=this.renderer,n=t.domElement.parentNode;return this.setRenderer(a),e&&n!==null&&(n.removeChild(t.domElement),n.appendChild(a.domElement)),t}createDepthTexture(){const a=this.depthTexture=new Uy;return this.inputBuffer.depthTexture=a,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(a.format=Th,a.type=Eh):a.type=Bl,a}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const a of this.passes)a.setDepthTexture(null)}}createBuffer(a,e,t,n){const i=this.renderer,r=i===null?new De:i.getDrawingBufferSize(new De),l={minFilter:oi,magFilter:oi,stencilBuffer:e,depthBuffer:a,type:t},c=new Pi(r.width,r.height,l);return n>0&&(c.samples=n),t===ra&&i!==null&&i.outputColorSpace===Un&&(c.texture.colorSpace=Un),c.texture.name="EffectComposer.Buffer",c.texture.generateMipmaps=!1,c}setMainScene(a){for(const e of this.passes)e.mainScene=a}setMainCamera(a){for(const e of this.passes)e.mainCamera=a}addPass(a,e){const t=this.passes,n=this.renderer,i=n.getDrawingBufferSize(new De),r=n.getContext().getContextAttributes().alpha,l=this.inputBuffer.texture.type;if(a.setRenderer(n),a.setSize(i.width,i.height),a.initialize(n,r,l),this.autoRenderToScreen&&(t.length>0&&(t[t.length-1].renderToScreen=!1),a.renderToScreen&&(this.autoRenderToScreen=!1)),e!==void 0?t.splice(e,0,a):t.push(a),this.autoRenderToScreen&&(t[t.length-1].renderToScreen=!0),a.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const c=this.createDepthTexture();for(a of t)a.setDepthTexture(c)}else a.setDepthTexture(this.depthTexture)}removePass(a){const e=this.passes,t=e.indexOf(a);if(t!==-1&&e.splice(t,1).length>0){if(this.depthTexture!==null){const r=(c,d)=>c||d.needsDepthTexture;e.reduce(r,!1)||(a.getDepthTexture()===this.depthTexture&&a.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&t===e.length&&(a.renderToScreen=!1,e.length>0&&(e[e.length-1].renderToScreen=!0))}}removeAllPasses(){const a=this.passes;this.deleteDepthTexture(),a.length>0&&(this.autoRenderToScreen&&(a[a.length-1].renderToScreen=!1),this.passes=[])}render(a){const e=this.renderer,t=this.copyPass;let n=this.inputBuffer,i=this.outputBuffer,r=!1,l,c,d;a===void 0&&(this.timer.update(),a=this.timer.getDelta());for(const p of this.passes)p.enabled&&(p.render(e,n,i,a,r),p.needsSwap&&(r&&(t.renderToScreen=p.renderToScreen,l=e.getContext(),c=e.state.buffers.stencil,c.setFunc(l.NOTEQUAL,1,4294967295),t.render(e,n,i,a,r),c.setFunc(l.EQUAL,1,4294967295)),d=n,n=i,i=d),p instanceof XH?r=!0:p instanceof HH&&(r=!1))}setSize(a,e,t){const n=this.renderer,i=n.getSize(new De);(a===void 0||e===void 0)&&(a=i.width,e=i.height),(i.width!==a||i.height!==e)&&n.setSize(a,e,t);const r=n.getDrawingBufferSize(new De);this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);for(const l of this.passes)l.setSize(r.width,r.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const a of this.passes)a.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),us.fullscreenGeometry.dispose()}},Oc={NONE:0,DEPTH:1,CONVOLUTION:2},Hn={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},YH=class{constructor(){this.shaderParts=new Map([[Hn.FRAGMENT_HEAD,null],[Hn.FRAGMENT_MAIN_UV,null],[Hn.FRAGMENT_MAIN_IMAGE,null],[Hn.VERTEX_HEAD,null],[Hn.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=Oc.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Dl}},rS=!1,FC=class{constructor(a=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(a),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case Us:t=this.materialsFlatShadedDoubleSide;break;case pa:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case Us:t=this.materialsDoubleSide;break;case pa:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(a){if(!(a instanceof ji))return a.clone();const e=a.uniforms,t=new Map;for(const i in e){const r=e[i].value;r.isRenderTargetTexture&&(e[i].value=null,t.set(i,r))}const n=a.clone();for(const i of t)e[i[0]].value=i[1],n.uniforms[i[0]].value=i[1];return n}setMaterial(a){if(this.disposeMaterials(),this.material=a,a!==null){const e=this.materials=[this.cloneMaterial(a),this.cloneMaterial(a),this.cloneMaterial(a)];for(const t of e)t.uniforms=Object.assign({},a.uniforms),t.side=Fo;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},a.uniforms),n.side=pa,n}),this.materialsDoubleSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},a.uniforms),n.side=Us,n}),this.materialsFlatShaded=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},a.uniforms),n.flatShading=!0,n}),this.materialsFlatShadedBackSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},a.uniforms),n.flatShading=!0,n.side=pa,n}),this.materialsFlatShadedDoubleSide=e.map(t=>{const n=this.cloneMaterial(t);return n.uniforms=Object.assign({},a.uniforms),n.flatShading=!0,n.side=Us,n})}}render(a,e,t){const n=a.shadowMap.enabled;if(a.shadowMap.enabled=!1,rS){const i=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),a.render(e,t);for(const r of i)r[0].material=r[1];this.meshCount!==i.size&&i.clear()}else{const i=e.overrideMaterial;e.overrideMaterial=this.material,a.render(e,t),e.overrideMaterial=i}a.shadowMap.enabled=n}disposeMaterials(){if(this.material!==null){const a=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of a)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return rS}static set workaroundEnabled(a){rS=a}},Sc=-1,ma=class extends Cr{constructor(a,e=Sc,t=Sc,n=1){super(),this.resizable=a,this.baseSize=new De(1,1),this.preferredSize=new De(e,t),this.target=this.preferredSize,this.s=n,this.effectiveSize=new De,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const a=this.baseSize,e=this.preferredSize,t=this.effectiveSize,n=this.scale;e.width!==Sc?t.width=e.width:e.height!==Sc?t.width=Math.round(e.height*(a.width/Math.max(a.height,1))):t.width=Math.round(a.width*n),e.height!==Sc?t.height=e.height:e.width!==Sc?t.height=Math.round(e.width/Math.max(a.width/Math.max(a.height,1),1)):t.height=Math.round(a.height*n)}get width(){return this.effectiveSize.width}set width(a){this.preferredWidth=a}get height(){return this.effectiveSize.height}set height(a){this.preferredHeight=a}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(a){this.s!==a&&(this.s=a,this.preferredSize.setScalar(Sc),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(a){this.scale=a}get baseWidth(){return this.baseSize.width}set baseWidth(a){this.baseSize.width!==a&&(this.baseSize.width=a,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(a){this.baseWidth=a}get baseHeight(){return this.baseSize.height}set baseHeight(a){this.baseSize.height!==a&&(this.baseSize.height=a,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(a){this.baseHeight=a}setBaseSize(a,e){(this.baseSize.width!==a||this.baseSize.height!==e)&&(this.baseSize.set(a,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(a){this.preferredSize.width!==a&&(this.preferredSize.width=a,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(a){this.preferredWidth=a}get preferredHeight(){return this.preferredSize.height}set preferredHeight(a){this.preferredSize.height!==a&&(this.preferredSize.height=a,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(a){this.preferredHeight=a}setPreferredSize(a,e){(this.preferredSize.width!==a||this.preferredSize.height!==e)&&(this.preferredSize.set(a,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(a){this.s=a.scale,this.baseSize.set(a.baseWidth,a.baseHeight),this.preferredSize.set(a.preferredWidth,a.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Sc}},qH=class{constructor(a=0){this.nextId=a}getNextId(){return this.nextId++}reset(a=0){return this.nextId=a,this}},oS=new qH(2),JH=class extends Set{constructor(a,e=oS.getNextId()){super(),this.exclusive=!1,this._layer=e,(this._layer<1||this._layer>31)&&(console.warn("Layer out of range, resetting to 2"),oS.reset(2),this._layer=oS.getNextId()),a!==void 0&&this.set(a)}get layer(){return this._layer}set layer(a){const e=this._layer;for(const t of this)t.layers.disable(e),t.layers.enable(a);this._layer=a}getLayer(){return this.layer}setLayer(a){this.layer=a}isExclusive(){return this.exclusive}setExclusive(a){this.exclusive=a}clear(){const a=this.layer;for(const e of this)e.layers.disable(a);return super.clear()}set(a){this.clear();for(const e of a)this.add(e);return this}indexOf(a){return this.has(a)?0:-1}add(a){return this.exclusive?a.layers.set(this.layer):a.layers.enable(this.layer),super.add(a)}delete(a){return this.has(a)&&a.layers.disable(this.layer),super.delete(a)}toggle(a){let e;return this.has(a)?(this.delete(a),e=!1):(this.add(a),e=!0),e}setVisible(a){for(const e of this)a?e.layers.enable(0):e.layers.disable(0);return this}},bn={ADD:0,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},KH="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb,y.a),y.a*opacity);}",WH="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb)*0.5,y.a),y.a*opacity);}",jH="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.xy,xHSL.z));return mix(x,vec4(z,y.a),y.a*opacity);}",ZH="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=mix(step(0.0,b)*(1.0-min(vec3(1.0),(1.0-a)/b)),vec3(1.0),step(1.0,a));return mix(x,vec4(z,y.a),y.a*opacity);}",QH="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb,b=y.rgb;vec3 z=step(0.0,a)*mix(min(vec3(1.0),a/max(1.0-b,1e-9)),vec3(1.0),step(1.0,b));return mix(x,vec4(z,y.a),y.a*opacity);}",$H="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb,y.rgb),y.a),y.a*opacity);}",eG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(abs(x.rgb-y.rgb),y.a),y.a*opacity);}",tG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb/max(y.rgb,1e-12),y.a),y.a*opacity);}",nG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4((x.rgb+y.rgb-2.0*x.rgb*y.rgb),y.a),y.a*opacity);}",iG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=min(x.rgb,1.0);vec3 b=min(y.rgb,1.0);vec3 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,b));return mix(x,vec4(z,y.a),y.a*opacity);}",aG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(step(1.0,x.rgb+y.rgb),y.a),y.a*opacity);}",sG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.x,xHSL.yz));return mix(x,vec4(z,y.a),y.a*opacity);}",rG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-y.rgb,y.a),y.a*opacity);}",oG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(y.rgb*(1.0-x.rgb),y.a),y.a*opacity);}",lG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb,y.rgb),y.a),y.a*opacity);}",uG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(y.rgb+x.rgb-1.0,0.0,1.0),y.a),y.a*opacity);}",cG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(min(x.rgb+y.rgb,1.0),y.a),y.a*opacity);}",fG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(clamp(2.0*y.rgb+x.rgb-1.0,0.0,1.0),y.a),y.a*opacity);}",hG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.xy,yHSL.z));return mix(x,vec4(z,y.a),y.a*opacity);}",dG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb*y.rgb,y.a),y.a*opacity);}",pG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(1.0-abs(1.0-x.rgb-y.rgb),y.a),y.a*opacity);}",mG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,y.a*opacity);}",gG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(2.0*y.rgb*x.rgb,1.0-2.0*(1.0-y.rgb)*(1.0-x.rgb),step(0.5,x.rgb));return mix(x,vec4(z,y.a),y.a*opacity);}",vG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 y2=2.0*y.rgb;vec3 z=mix(mix(y2,x.rgb,step(0.5*x.rgb,y.rgb)),max(y2-1.0,vec3(0.0)),step(x.rgb,y2-1.0));return mix(x,vec4(z,y.a),y.a*opacity);}",xG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(min(x.rgb*x.rgb/max(1.0-y.rgb,1e-12),1.0),y.rgb,step(1.0,y.rgb));return mix(x,vec4(z,y.a),y.a*opacity);}",_G="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.x,yHSL.y,xHSL.z));return mix(x,vec4(z,y.a),y.a*opacity);}",yG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(x.rgb+y.rgb-min(x.rgb*y.rgb,1.0),y.a),y.a*opacity);}",bG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 a=x.rgb;vec3 b=y.rgb;vec3 y2=2.0*b;vec3 w=step(0.5,b);vec3 c=a-(1.0-y2)*a*(1.0-a);vec3 d=mix(a+(y2-1.0)*(sqrt(a)-a),a+(y2-1.0)*a*((16.0*a-12.0)*a+3.0),w*(1.0-step(0.25,a)));vec3 z=mix(c,d,w);return mix(x,vec4(z,y.a),y.a*opacity);}",AG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",SG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,vec4(max(x.rgb+y.rgb-1.0,0.0),y.a),y.a*opacity);}",MG="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 z=mix(max(1.0-min((1.0-x.rgb)/(2.0*y.rgb),1.0),0.0),min(x.rgb/(2.0*(1.0-y.rgb)),1.0),step(0.5,y.rgb));return mix(x,vec4(z,y.a),y.a*opacity);}",EG=new Map([[bn.ADD,KH],[bn.AVERAGE,WH],[bn.COLOR,jH],[bn.COLOR_BURN,ZH],[bn.COLOR_DODGE,QH],[bn.DARKEN,$H],[bn.DIFFERENCE,eG],[bn.DIVIDE,tG],[bn.DST,null],[bn.EXCLUSION,nG],[bn.HARD_LIGHT,iG],[bn.HARD_MIX,aG],[bn.HUE,sG],[bn.INVERT,rG],[bn.INVERT_RGB,oG],[bn.LIGHTEN,lG],[bn.LINEAR_BURN,uG],[bn.LINEAR_DODGE,cG],[bn.LINEAR_LIGHT,fG],[bn.LUMINOSITY,hG],[bn.MULTIPLY,dG],[bn.NEGATION,pG],[bn.NORMAL,mG],[bn.OVERLAY,gG],[bn.PIN_LIGHT,vG],[bn.REFLECT,xG],[bn.SATURATION,_G],[bn.SCREEN,yG],[bn.SOFT_LIGHT,bG],[bn.SRC,AG],[bn.SUBTRACT,SG],[bn.VIVID_LIGHT,MG]]),TG=class extends Cr{constructor(a,e=1){super(),this._blendFunction=a,this.opacity=new ln(e)}getOpacity(){return this.opacity.value}setOpacity(a){this.opacity.value=a}get blendFunction(){return this._blendFunction}set blendFunction(a){this._blendFunction=a,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(a){this.blendFunction=a}getShaderCode(){return EG.get(this.blendFunction)}},VS=class extends Cr{constructor(a,e,{attributes:t=Oc.NONE,blendFunction:n=bn.NORMAL,defines:i=new Map,uniforms:r=new Map,extensions:l=null,vertexShader:c=null}={}){super(),this.name=a,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=c,this.defines=i,this.uniforms=r,this.extensions=l,this.blendMode=new TG(n),this.blendMode.addEventListener("change",d=>this.setChanged()),this._inputColorSpace=Dl,this._outputColorSpace=Lo}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(a){this._inputColorSpace=a,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(a){this._outputColorSpace=a,this.setChanged()}set mainScene(a){}set mainCamera(a){}getName(){return this.name}setRenderer(a){this.renderer=a}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(a){this.attributes=a,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(a){this.fragmentShader=a,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(a){this.vertexShader=a,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(a,e=Ho){}update(a,e,t){}setSize(a,e){}initialize(a,e,t){}dispose(){for(const a of Object.keys(this)){const e=this[a];(e instanceof Pi||e instanceof Ki||e instanceof ei||e instanceof us)&&this[a].dispose()}}},eM={MEDIUM:2,LARGE:3},CG=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,RG="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",BG=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],DG=class extends ji{constructor(a=new Cn){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new ln(null),texelSize:new ln(new Cn),scale:new ln(1),kernel:new ln(0)},blending:Ba,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:CG,vertexShader:RG}),this.setTexelSize(a.x,a.y),this.kernelSize=eM.MEDIUM}set inputBuffer(a){this.uniforms.inputBuffer.value=a}setInputBuffer(a){this.inputBuffer=a}get kernelSequence(){return BG[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(a){this.uniforms.scale.value=a}getScale(){return this.uniforms.scale.value}setScale(a){this.uniforms.scale.value=a}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(a){this.uniforms.kernel.value=a}setKernel(a){this.kernel=a}setTexelSize(a,e){this.uniforms.texelSize.value.set(a,e,a*.5,e*.5)}setSize(a,e){const t=1/a,n=1/e;this.uniforms.texelSize.value.set(t,n,t*.5,n*.5)}},wG=class extends us{constructor({kernelSize:a=eM.MEDIUM,resolutionScale:e=.5,width:t=ma.AUTO_SIZE,height:n=ma.AUTO_SIZE,resolutionX:i=t,resolutionY:r=n}={}){super("KawaseBlurPass"),this.renderTargetA=new Pi(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const l=this.resolution=new ma(this,i,r,e);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight)),this._blurMaterial=new DG,this._blurMaterial.kernelSize=a,this.copyMaterial=new DR}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(a){this._blurMaterial=a}get dithering(){return this.copyMaterial.dithering}set dithering(a){this.copyMaterial.dithering=a}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(a){this.blurMaterial.kernelSize=a}get width(){return this.resolution.width}set width(a){this.resolution.preferredWidth=a}get height(){return this.resolution.height}set height(a){this.resolution.preferredHeight=a}get scale(){return this.blurMaterial.scale}set scale(a){this.blurMaterial.scale=a}getScale(){return this.blurMaterial.scale}setScale(a){this.blurMaterial.scale=a}getKernelSize(){return this.kernelSize}setKernelSize(a){this.kernelSize=a}getResolutionScale(){return this.resolution.scale}setResolutionScale(a){this.resolution.scale=a}render(a,e,t,n,i){const r=this.scene,l=this.camera,c=this.renderTargetA,d=this.renderTargetB,p=this.blurMaterial,g=p.kernelSequence;let v=e;this.fullscreenMaterial=p;for(let _=0,y=g.length;_<y;++_){const S=(_&1)===0?c:d;p.kernel=g[_],p.inputBuffer=v.texture,a.setRenderTarget(S),a.render(r,l),v=S}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=v.texture,a.setRenderTarget(this.renderToScreen?null:t),a.render(r,l)}setSize(a,e){const t=this.resolution;t.setBaseSize(a,e);const n=t.width,i=t.height;this.renderTargetA.setSize(n,i),this.renderTargetB.setSize(n,i),this.blurMaterial.setSize(a,e)}initialize(a,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==ra?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):a!==null&&a.outputColorSpace===Un&&(this.renderTargetA.texture.colorSpace=Un,this.renderTargetB.texture.colorSpace=Un))}static get AUTO_SIZE(){return ma.AUTO_SIZE}},UG=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);float mask=1.0;
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);mask=low*high;
#elif defined(THRESHOLD)
mask=smoothstep(threshold,threshold+smoothing,l);
#endif
#ifdef COLOR
gl_FragColor=texel*mask;
#else
gl_FragColor=vec4(l*mask);
#endif
}`,OG=class extends ji{constructor(a=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:Nh.replace(/\D+/g,"")},uniforms:{inputBuffer:new ln(null),threshold:new ln(0),smoothing:new ln(1),range:new ln(null)},blending:Ba,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:UG,vertexShader:Q1}),this.colorOutput=a,this.luminanceRange=e}set inputBuffer(a){this.uniforms.inputBuffer.value=a}setInputBuffer(a){this.uniforms.inputBuffer.value=a}get threshold(){return this.uniforms.threshold.value}set threshold(a){this.smoothing>0||a>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=a}getThreshold(){return this.threshold}setThreshold(a){this.threshold=a}get smoothing(){return this.uniforms.smoothing.value}set smoothing(a){this.threshold>0||a>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=a}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(a){this.smoothing=a}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(a){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(a){a?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(a){return this.colorOutput}setColorOutputEnabled(a){this.colorOutput=a}get useRange(){return this.luminanceRange!==null}set useRange(a){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(a){a!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=a,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(a){this.luminanceRange=a}},NG=class extends us{constructor({renderTarget:a,luminanceRange:e,colorOutput:t,resolutionScale:n=1,width:i=ma.AUTO_SIZE,height:r=ma.AUTO_SIZE,resolutionX:l=i,resolutionY:c=r}={}){super("LuminancePass"),this.fullscreenMaterial=new OG(t,e),this.needsSwap=!1,this.renderTarget=a,this.renderTarget===void 0&&(this.renderTarget=new Pi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const d=this.resolution=new ma(this,l,c,n);d.addEventListener("change",p=>this.setSize(d.baseWidth,d.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(a,e,t,n,i){const r=this.fullscreenMaterial;r.inputBuffer=e.texture,a.setRenderTarget(this.renderToScreen?null:this.renderTarget),a.render(this.scene,this.camera)}setSize(a,e){const t=this.resolution;t.setBaseSize(a,e),this.renderTarget.setSize(t.width,t.height)}initialize(a,e,t){t!==void 0&&t!==ra&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},LG=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,IG="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",zG=class extends ji{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new ln(null),texelSize:new ln(new De)},blending:Ba,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:LG,vertexShader:IG})}set inputBuffer(a){this.uniforms.inputBuffer.value=a}setSize(a,e){this.uniforms.texelSize.value.set(1/a,1/e)}},PG=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,FG="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",HG=class extends ji{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new ln(null),supportBuffer:new ln(null),texelSize:new ln(new De),radius:new ln(.85)},blending:Ba,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:PG,vertexShader:FG})}set inputBuffer(a){this.uniforms.inputBuffer.value=a}set supportBuffer(a){this.uniforms.supportBuffer.value=a}get radius(){return this.uniforms.radius.value}set radius(a){this.uniforms.radius.value=a}setSize(a,e){this.uniforms.texelSize.value.set(1/a,1/e)}},GG=class extends us{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new Pi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new zG,this.upsamplingMaterial=new HG,this.resolution=new De}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(a){if(this.levels!==a){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<a;++t){const n=e.clone();n.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(n)}this.upsamplingMipmaps.push(e);for(let t=1,n=a-1;t<n;++t){const i=e.clone();i.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(i)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(a){this.upsamplingMaterial.radius=a}render(a,e,t,n,i){const{scene:r,camera:l}=this,{downsamplingMaterial:c,upsamplingMaterial:d}=this,{downsamplingMipmaps:p,upsamplingMipmaps:g}=this;let v=e;this.fullscreenMaterial=c;for(let _=0,y=p.length;_<y;++_){const S=p[_];c.setSize(v.width,v.height),c.inputBuffer=v.texture,a.setRenderTarget(S),a.render(r,l),v=S}this.fullscreenMaterial=d;for(let _=g.length-1;_>=0;--_){const y=g[_];d.setSize(v.width,v.height),d.inputBuffer=v.texture,d.supportBuffer=p[_].texture,a.setRenderTarget(y),a.render(r,l),v=y}}setSize(a,e){const t=this.resolution;t.set(a,e);let n=t.width,i=t.height;for(let r=0,l=this.downsamplingMipmaps.length;r<l;++r)n=Math.round(n*.5),i=Math.round(i*.5),this.downsamplingMipmaps[r].setSize(n,i),r<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[r].setSize(n,i)}initialize(a,e,t){if(t!==void 0){const n=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const i of n)i.texture.type=t;if(t!==ra)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(a!==null&&a.outputColorSpace===Un)for(const i of n)i.texture.colorSpace=Un}}dispose(){super.dispose();for(const a of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))a.dispose()}},VG=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,max(inputColor.a,texel.a));}`,XG=class extends VS{constructor({blendFunction:a=bn.SCREEN,luminanceThreshold:e=1,luminanceSmoothing:t=.03,mipmapBlur:n=!0,intensity:i=1,radius:r=.85,levels:l=8,kernelSize:c=eM.LARGE,resolutionScale:d=.5,width:p=ma.AUTO_SIZE,height:g=ma.AUTO_SIZE,resolutionX:v=p,resolutionY:_=g}={}){super("BloomEffect",VG,{blendFunction:a,uniforms:new Map([["map",new ln(null)],["intensity",new ln(i)]])}),this.renderTarget=new Pi(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new wG({kernelSize:c}),this.luminancePass=new NG({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new GG,this.mipmapBlurPass.enabled=n,this.mipmapBlurPass.radius=r,this.mipmapBlurPass.levels=l,this.uniforms.get("map").value=n?this.mipmapBlurPass.texture:this.renderTarget.texture;const y=this.resolution=new ma(this,v,_,d);y.addEventListener("change",S=>this.setSize(y.baseWidth,y.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(a){this.resolution.preferredWidth=a}get height(){return this.resolution.height}set height(a){this.resolution.preferredHeight=a}get dithering(){return this.blurPass.dithering}set dithering(a){this.blurPass.dithering=a}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(a){this.blurPass.kernelSize=a}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(a){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(a){this.uniforms.get("intensity").value=a}getIntensity(){return this.intensity}setIntensity(a){this.intensity=a}getResolutionScale(){return this.resolution.scale}setResolutionScale(a){this.resolution.scale=a}update(a,e,t){const n=this.renderTarget,i=this.luminancePass;i.enabled?(i.render(a,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(a,i.renderTarget):this.blurPass.render(a,i.renderTarget,n)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(a,e):this.blurPass.render(a,e,n)}setSize(a,e){const t=this.resolution;t.setBaseSize(a,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(a,e),this.mipmapBlurPass.setSize(a,e)}initialize(a,e,t){this.blurPass.initialize(a,e,t),this.luminancePass.initialize(a,e,t),this.mipmapBlurPass.initialize(a,e,t),t!==void 0&&(this.renderTarget.texture.type=t,a!==null&&a.outputColorSpace===Un&&(this.renderTarget.texture.colorSpace=Un))}},kG=class extends us{constructor(a,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=a,this.input=e}setInput(a){this.input=a}render(a,e,t,n,i){const r=this.fullscreenMaterial.uniforms;e!==null&&r!==void 0&&r[this.input]!==void 0&&(r[this.input].value=e.texture),a.setRenderTarget(this.renderToScreen?null:t),a.render(this.scene,this.camera)}initialize(a,e,t){t!==void 0&&t!==ra&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},tM=class extends us{constructor(a,e,t=null){super("RenderPass",a,e),this.needsSwap=!1,this.clearPass=new $1,this.overrideMaterialManager=t===null?null:new FC(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(a){this.scene=a}set mainCamera(a){this.camera=a}get renderToScreen(){return super.renderToScreen}set renderToScreen(a){super.renderToScreen=a,this.clearPass.renderToScreen=a}get overrideMaterial(){const a=this.overrideMaterialManager;return a!==null?a.material:null}set overrideMaterial(a){const e=this.overrideMaterialManager;a!==null?e!==null?e.setMaterial(a):this.overrideMaterialManager=new FC(a):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(a){this.overrideMaterial=a}get clear(){return this.clearPass.enabled}set clear(a){this.clearPass.enabled=a}getSelection(){return this.selection}setSelection(a){this.selection=a}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(a){this.ignoreBackground=a}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(a){this.skipShadowMapUpdate=a}getClearPass(){return this.clearPass}render(a,e,t,n,i){const r=this.scene,l=this.camera,c=this.selection,d=l.layers.mask,p=r.background,g=a.shadowMap.autoUpdate,v=this.renderToScreen?null:e;c!==null&&l.layers.set(c.getLayer()),this.skipShadowMapUpdate&&(a.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(r.background=null),this.clearPass.enabled&&this.clearPass.render(a,e),a.setRenderTarget(v),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(a,r,l):a.render(r,l),l.layers.mask=d,r.background=p,a.shadowMap.autoUpdate=g}},ag={KEEP_MAX_DEPTH:1,DISCARD_MAX_DEPTH:2},YG=class extends us{constructor(a,e,{renderTarget:t,resolutionScale:n=1,width:i=ma.AUTO_SIZE,height:r=ma.AUTO_SIZE,resolutionX:l=i,resolutionY:c=r}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new tM(a,e,new qy({depthPacking:Ay}));const d=this.renderPass;d.skipShadowMapUpdate=!0,d.ignoreBackground=!0,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Pi(1,1,{minFilter:bi,magFilter:bi}),this.renderTarget.texture.name="DepthPass.Target");const p=this.resolution=new ma(this,l,c,n);p.addEventListener("change",g=>this.setSize(p.baseWidth,p.baseHeight))}set mainScene(a){this.renderPass.mainScene=a}set mainCamera(a){this.renderPass.mainCamera=a}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(a){this.resolution.scale=a}render(a,e,t,n,i){const r=this.renderToScreen?null:this.renderTarget;this.renderPass.render(a,r)}setSize(a,e){const t=this.resolution;t.setBaseSize(a,e),this.renderTarget.setSize(t.width,t.height)}initialize(a,e,t){const n=a.capabilities.reversedDepthBuffer?0:16777215,i=this.renderPass.clearPass;i.overrideClearColor=new rt(n),i.overrideClearAlpha=1}},qG=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer0;uniform highp sampler2D depthBuffer1;
#else
uniform mediump sampler2D depthBuffer0;uniform mediump sampler2D depthBuffer1;
#endif
uniform sampler2D inputBuffer;uniform vec2 cameraNearFar;float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#else
return orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#endif
}varying vec2 vUv;void main(){vec2 depth;
#if DEPTH_PACKING_0 == 3201
depth.x=unpackRGBAToDepth(texture2D(depthBuffer0,vUv));
#else
depth.x=texture2D(depthBuffer0,vUv).r;
#endif
#if DEPTH_PACKING_1 == 3201
depth.y=unpackRGBAToDepth(texture2D(depthBuffer1,vUv));
#else
depth.y=texture2D(depthBuffer1,vUv).r;
#endif
#if defined(USE_LOGARITHMIC_DEPTH_BUFFER) || defined(LOG_DEPTH)
float a=cameraNearFar.y/(cameraNearFar.y-cameraNearFar.x);float b=cameraNearFar.y*cameraNearFar.x/(cameraNearFar.x-cameraNearFar.y);float c=log2(cameraNearFar.y+1.0);float d=pow(2.0,depth.x*c)-1.0;depth.x=a+b/d;d=pow(2.0,depth.y*c)-1.0;depth.y=a+b/d;
#elif defined(USE_REVERSED_DEPTH_BUFFER)
depth.x=1.0-depth.x;depth.y=1.0-depth.y;
#endif
bool isMaxDepth=(depth.x==1.0);
#ifdef PERSPECTIVE_CAMERA
depth.x=viewZToOrthographicDepth(getViewZ(depth.x),cameraNearFar.x,cameraNearFar.y);depth.y=viewZToOrthographicDepth(getViewZ(depth.y),cameraNearFar.x,cameraNearFar.y);
#endif
#if DEPTH_TEST_STRATEGY == 0
bool keep=depthTest(depth.x,depth.y);
#elif DEPTH_TEST_STRATEGY == 1
bool keep=isMaxDepth||depthTest(depth.x,depth.y);
#else
bool keep=!isMaxDepth&&depthTest(depth.x,depth.y);
#endif
if(keep){gl_FragColor=texture2D(inputBuffer,vUv);}else{discard;}}`,JG=class extends ji{constructor(){super({name:"DepthMaskMaterial",defines:{DEPTH_EPSILON:"0.0001",DEPTH_PACKING_0:"0",DEPTH_PACKING_1:"0",DEPTH_TEST_STRATEGY:ag.KEEP_MAX_DEPTH},uniforms:{inputBuffer:new ln(null),depthBuffer0:new ln(null),depthBuffer1:new ln(null),cameraNearFar:new ln(new De(1,1))},blending:Ba,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:qG,vertexShader:Q1}),this.depthMode=Cp}set depthBuffer0(a){this.uniforms.depthBuffer0.value=a}set depthPacking0(a){this.defines.DEPTH_PACKING_0=a.toFixed(0),this.needsUpdate=!0}setDepthBuffer0(a,e=Ho){this.depthBuffer0=a,this.depthPacking0=e}set depthBuffer1(a){this.uniforms.depthBuffer1.value=a}set depthPacking1(a){this.defines.DEPTH_PACKING_1=a.toFixed(0),this.needsUpdate=!0}setDepthBuffer1(a,e=Ho){this.depthBuffer1=a,this.depthPacking1=e}get maxDepthStrategy(){return Number(this.defines.DEPTH_TEST_STRATEGY)}set maxDepthStrategy(a){this.defines.DEPTH_TEST_STRATEGY=a.toFixed(0),this.needsUpdate=!0}get keepFar(){return this.maxDepthStrategy}set keepFar(a){this.maxDepthStrategy=a?ag.KEEP_MAX_DEPTH:ag.DISCARD_MAX_DEPTH}getMaxDepthStrategy(){return this.maxDepthStrategy}setMaxDepthStrategy(a){this.maxDepthStrategy=a}get epsilon(){return Number(this.defines.DEPTH_EPSILON)}set epsilon(a){this.defines.DEPTH_EPSILON=a.toFixed(16),this.needsUpdate=!0}getEpsilon(){return this.epsilon}setEpsilon(a){this.epsilon=a}get depthMode(){return Number(this.defines.DEPTH_MODE)}set depthMode(a){let e;switch(a){case ug:e="false";break;case Tp:e="true";break;case Mh:e="abs(d1 - d0) <= DEPTH_EPSILON";break;case Rp:e="abs(d1 - d0) > DEPTH_EPSILON";break;case Cp:e="d0 > d1";break;case Ic:e="d0 >= d1";break;case cg:e="d0 <= d1";break;case fg:default:e="d0 < d1";break}this.defines.DEPTH_MODE=a.toFixed(0),this.defines["depthTest(d0, d1)"]=e,this.needsUpdate=!0}getDepthMode(){return this.depthMode}setDepthMode(a){this.depthMode=a}adoptCameraSettings(a){this.copyCameraSettings(a)}copyCameraSettings(a){a&&(this.uniforms.cameraNearFar.value.set(a.near,a.far),a instanceof _i?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},KG=class extends XG{constructor(a,e,t){super(t),this.setAttributes(this.getAttributes()|Oc.DEPTH),this.camera=e,this.depthPass=new YG(a,e),this.clearPass=new $1(!0,!1,!1),this.clearPass.overrideClearColor=new rt(0),this.depthMaskPass=new kG(new JG);const n=this.depthMaskMaterial;n.copyCameraSettings(e),n.depthBuffer1=this.depthPass.texture,n.depthPacking1=Ay,n.depthMode=Mh,this.renderTargetMasked=new Pi(1,1,{depthBuffer:!1}),this.renderTargetMasked.texture.name="Bloom.Masked",this.selection=new JH,this._inverted=!1,this._ignoreBackground=!1}set mainScene(a){this.depthPass.mainScene=a}set mainCamera(a){this.camera=a,this.depthPass.mainCamera=a,this.depthMaskMaterial.copyCameraSettings(a)}getSelection(){return this.selection}get depthMaskMaterial(){return this.depthMaskPass.fullscreenMaterial}get inverted(){return this._inverted}set inverted(a){this._inverted=a,this.depthMaskMaterial.depthMode=a?Rp:Mh}isInverted(){return this.inverted}setInverted(a){this.inverted=a}get ignoreBackground(){return this._ignoreBackground}set ignoreBackground(a){this._ignoreBackground=a,this.depthMaskMaterial.maxDepthStrategy=a?ag.DISCARD_MAX_DEPTH:ag.KEEP_MAX_DEPTH}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(a){this.ignoreBackground=a}setDepthTexture(a,e=Ho){this.depthMaskMaterial.depthBuffer0=a,this.depthMaskMaterial.depthPacking0=e}update(a,e,t){const n=this.camera,i=this.selection,r=this.inverted;let l=e;if(this.ignoreBackground||!r||i.size>0){const c=n.layers.mask;n.layers.set(i.layer),this.depthPass.render(a),n.layers.mask=c,l=this.renderTargetMasked,this.clearPass.render(a,l),this.depthMaskPass.render(a,e,l)}super.update(a,l,t)}setSize(a,e){super.setSize(a,e),this.renderTargetMasked.setSize(a,e),this.depthPass.setSize(a,e)}initialize(a,e,t){super.initialize(a,e,t),this.clearPass.initialize(a,e,t),this.depthPass.initialize(a,e,t),this.depthMaskPass.initialize(a,e,t),a!==null&&a.capabilities.logarithmicDepthBuffer&&(this.depthMaskPass.fullscreenMaterial.defines.LOG_DEPTH="1"),t!==void 0&&(this.renderTargetMasked.texture.type=t,a!==null&&a.outputColorSpace===Un&&(this.renderTargetMasked.texture.colorSpace=Un))}},WG=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,jG="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",ZG=class extends ji{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new ln(null),normalBuffer:new ln(null),texelSize:new ln(new De)},blending:Ba,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:WG,vertexShader:jG})}set depthBuffer(a){this.uniforms.depthBuffer.value=a}set depthPacking(a){this.defines.DEPTH_PACKING=a.toFixed(0),this.needsUpdate=!0}setDepthBuffer(a,e=Ho){this.depthBuffer=a,this.depthPacking=e}set normalBuffer(a){this.uniforms.normalBuffer.value=a,a!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(a){this.normalBuffer=a}setTexelSize(a,e){this.uniforms.texelSize.value.set(a,e)}setSize(a,e){this.uniforms.texelSize.value.set(1/a,1/e)}},QG=class extends us{constructor({normalBuffer:a=null,resolutionScale:e=.5,width:t=ma.AUTO_SIZE,height:n=ma.AUTO_SIZE,resolutionX:i=t,resolutionY:r=n}={}){super("DepthDownsamplingPass");const l=new ZG;l.normalBuffer=a,this.fullscreenMaterial=l,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new Pi(1,1,{minFilter:bi,magFilter:bi,depthBuffer:!1,type:Is}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const c=this.resolution=new ma(this,i,r,e);c.addEventListener("change",d=>this.setSize(c.baseWidth,c.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(a,e=Ho){this.fullscreenMaterial.depthBuffer=a,this.fullscreenMaterial.depthPacking=e}render(a,e,t,n,i){a.setRenderTarget(this.renderToScreen?null:this.renderTarget),a.render(this.scene,this.camera)}setSize(a,e){const t=this.resolution;t.setBaseSize(a,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(a,e)}initialize(a,e,t){const n=a.getContext();if(!(n.getExtension("EXT_color_buffer_float")||n.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},$G=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#if defined(USE_LOGARITHMIC_DEPTH_BUFFER) || defined(LOG_DEPTH)
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#elif defined(USE_REVERSED_DEPTH_BUFFER)
depth=1.0-depth;
#endif
return depth;}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,e9="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",t9=class extends ji{constructor(a,e,t,n,i=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:Nh.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new ln(null),depthBuffer:new ln(null),resolution:new ln(new De),texelSize:new ln(new De),cameraNear:new ln(.3),cameraFar:new ln(1e3),aspect:new ln(1),time:new ln(0)},blending:Ba,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:i}),a&&this.setShaderParts(a),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(n)}set inputBuffer(a){this.uniforms.inputBuffer.value=a}setInputBuffer(a){this.uniforms.inputBuffer.value=a}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(a){this.uniforms.depthBuffer.value=a}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(a){this.defines.DEPTH_PACKING=a.toFixed(0),this.needsUpdate=!0}setDepthBuffer(a,e=Ho){this.depthBuffer=a,this.depthPacking=e}setShaderData(a){this.setShaderParts(a.shaderParts),this.setDefines(a.defines),this.setUniforms(a.uniforms),this.setExtensions(a.extensions)}setShaderParts(a){return this.fragmentShader=$G.replace(Hn.FRAGMENT_HEAD,a.get(Hn.FRAGMENT_HEAD)||"").replace(Hn.FRAGMENT_MAIN_UV,a.get(Hn.FRAGMENT_MAIN_UV)||"").replace(Hn.FRAGMENT_MAIN_IMAGE,a.get(Hn.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=e9.replace(Hn.VERTEX_HEAD,a.get(Hn.VERTEX_HEAD)||"").replace(Hn.VERTEX_MAIN_SUPPORT,a.get(Hn.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(a){for(const e of a.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(a){for(const e of a.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(a){this.extensions={};for(const e of a)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(a){this.encodeOutput!==a&&(a?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(a){return this.encodeOutput}setOutputEncodingEnabled(a){this.encodeOutput=a}get time(){return this.uniforms.time.value}set time(a){this.uniforms.time.value=a}setDeltaTime(a){this.uniforms.time.value+=a}adoptCameraSettings(a){this.copyCameraSettings(a)}copyCameraSettings(a){a&&(this.uniforms.cameraNear.value=a.near,this.uniforms.cameraFar.value=a.far,a instanceof _i?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(a,e){const t=this.uniforms;t.resolution.value.set(a,e),t.texelSize.value.set(1/a,1/e),t.aspect.value=a/e}static get Section(){return Hn}};function HC(a,e,t){for(const n of e){const i="$1"+a+n.charAt(0).toUpperCase()+n.slice(1),r=new RegExp("([^\\.])(\\b"+n+"\\b)","g");for(const l of t.entries())l[1]!==null&&t.set(l[0],l[1].replace(r,i))}}function n9(a,e,t){let n=e.getFragmentShader(),i=e.getVertexShader();const r=n!==void 0&&/mainImage/.test(n),l=n!==void 0&&/mainUv/.test(n);if(t.attributes|=e.getAttributes(),n===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(l&&(t.attributes&Oc.CONVOLUTION)!==0)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!r&&!l)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const c=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,d=t.shaderParts;let p=d.get(Hn.FRAGMENT_HEAD)||"",g=d.get(Hn.FRAGMENT_MAIN_UV)||"",v=d.get(Hn.FRAGMENT_MAIN_IMAGE)||"",_=d.get(Hn.VERTEX_HEAD)||"",y=d.get(Hn.VERTEX_MAIN_SUPPORT)||"";const S=new Set,E=new Set;if(l&&(g+=`	${a}MainUv(UV);
`,t.uvTransformation=!0),i!==null&&/mainSupport/.test(i)){const B=/mainSupport *\([\w\s]*?uv\s*?\)/.test(i);y+=`	${a}MainSupport(`,y+=B?`vUv);
`:`);
`;for(const D of i.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const w of D[1].split(/\s*,\s*/))t.varyings.add(w),S.add(w),E.add(w);for(const D of i.matchAll(c))E.add(D[1])}for(const B of n.matchAll(c))E.add(B[1]);for(const B of e.defines.keys())E.add(B.replace(/\([\w\s,]*\)/g,""));for(const B of e.uniforms.keys())E.add(B);E.delete("while"),E.delete("for"),E.delete("if"),e.uniforms.forEach((B,D)=>t.uniforms.set(a+D.charAt(0).toUpperCase()+D.slice(1),B)),e.defines.forEach((B,D)=>t.defines.set(a+D.charAt(0).toUpperCase()+D.slice(1),B));const C=new Map([["fragment",n],["vertex",i]]);HC(a,E,t.defines),HC(a,E,C),n=C.get("fragment"),i=C.get("vertex");const M=e.blendMode;if(t.blendModes.set(M.blendFunction,M),r){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(v+=e.inputColorSpace===Un?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==Lo?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const B=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;v+=`${a}MainImage(color0, UV, `,(t.attributes&Oc.DEPTH)!==0&&B.test(n)&&(v+="depth, ",t.readDepth=!0),v+=`color1);
	`;const D=a+"BlendOpacity";t.uniforms.set(D,M.opacity),v+=`color0 = blend${M.blendFunction}(color0, color1, ${D});

	`,p+=`uniform float ${D};

`}if(p+=n+`
`,i!==null&&(_+=i+`
`),d.set(Hn.FRAGMENT_HEAD,p),d.set(Hn.FRAGMENT_MAIN_UV,g),d.set(Hn.FRAGMENT_MAIN_IMAGE,v),d.set(Hn.VERTEX_HEAD,_),d.set(Hn.VERTEX_MAIN_SUPPORT,y),e.extensions!==null)for(const B of e.extensions)t.extensions.add(B)}}var i9=class extends us{constructor(a,...e){super("EffectPass"),this.fullscreenMaterial=new t9(null,null,null,a),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(a){for(const e of this.effects)e.mainScene=a}set mainCamera(a){this.fullscreenMaterial.copyCameraSettings(a);for(const e of this.effects)e.mainCamera=a}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(a){this.fullscreenMaterial.encodeOutput=a}get dithering(){return this.fullscreenMaterial.dithering}set dithering(a){const e=this.fullscreenMaterial;e.dithering=a,e.needsUpdate=!0}setEffects(a){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=a.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const a=new YH;let e=0;for(const l of this.effects)if(l.blendMode.blendFunction===bn.DST)a.attributes|=l.getAttributes()&Oc.DEPTH;else{if((a.attributes&l.getAttributes()&Oc.CONVOLUTION)!==0)throw new Error(`Convolution effects cannot be merged (${l.name})`);n9("e"+e++,l,a)}let t=a.shaderParts.get(Hn.FRAGMENT_HEAD),n=a.shaderParts.get(Hn.FRAGMENT_MAIN_IMAGE),i=a.shaderParts.get(Hn.FRAGMENT_MAIN_UV);const r=/\bblend\b/g;for(const l of a.blendModes.values())t+=l.getShaderCode().replace(r,`blend${l.blendFunction}`)+`
`;(a.attributes&Oc.DEPTH)!==0?(a.readDepth&&(n=`float depth = readDepth(UV);

	`+n),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,a.colorSpace===Un&&(n+=`color0 = sRGBToLinear(color0);
	`),a.uvTransformation?(i=`vec2 transformedUv = vUv;
`+i,a.defines.set("UV","transformedUv")):a.defines.set("UV","vUv"),a.shaderParts.set(Hn.FRAGMENT_HEAD,t),a.shaderParts.set(Hn.FRAGMENT_MAIN_IMAGE,n),a.shaderParts.set(Hn.FRAGMENT_MAIN_UV,i);for(const[l,c]of a.shaderParts)c!==null&&a.shaderParts.set(l,c.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(a)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(a,e=Ho){this.fullscreenMaterial.depthBuffer=a,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(a,e)}render(a,e,t,n,i){for(const r of this.effects)r.update(a,e,n);if(!this.skipRendering||this.renderToScreen){const r=this.fullscreenMaterial;r.inputBuffer=e.texture,r.time+=n*this.timeScale,a.setRenderTarget(this.renderToScreen?null:t),a.render(this.scene,this.camera)}}setSize(a,e){this.fullscreenMaterial.setSize(a,e);for(const t of this.effects)t.setSize(a,e)}initialize(a,e,t){this.renderer=a;for(const n of this.effects)n.initialize(a,e,t);this.updateMaterial(),t!==void 0&&t!==ra&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const a of this.effects)a.removeEventListener("change",this.listener),a.dispose()}handleEvent(a){switch(a.type){case"change":this.recompile();break}}},a9=class extends us{constructor(a,e,{renderTarget:t,resolutionScale:n=1,width:i=ma.AUTO_SIZE,height:r=ma.AUTO_SIZE,resolutionX:l=i,resolutionY:c=r}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new tM(a,e,new D1);const d=this.renderPass;d.ignoreBackground=!0,d.skipShadowMapUpdate=!0;const p=d.getClearPass();p.overrideClearColor=new rt(7829503),p.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new Pi(1,1,{minFilter:bi,magFilter:bi}),this.renderTarget.texture.name="NormalPass.Target");const g=this.resolution=new ma(this,l,c,n);g.addEventListener("change",v=>this.setSize(g.baseWidth,g.baseHeight))}set mainScene(a){this.renderPass.mainScene=a}set mainCamera(a){this.renderPass.mainCamera=a}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(a){this.resolution.scale=a}render(a,e,t,n,i){const r=this.renderToScreen?null:this.renderTarget;this.renderPass.render(a,r,r)}setSize(a,e){const t=this.resolution;t.setBaseSize(a,e),this.renderTarget.setSize(t.width,t.height)}};function sg(a,e,t){return e in a?Object.defineProperty(a,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[e]=t,a}new De;new De;function wR(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}var Wr=function a(e,t,n){var i=this;wR(this,a),sg(this,"dot2",function(r,l){return i.x*r+i.y*l}),sg(this,"dot3",function(r,l,c){return i.x*r+i.y*l+i.z*c}),this.x=e,this.y=t,this.z=n},s9=[new Wr(1,1,0),new Wr(-1,1,0),new Wr(1,-1,0),new Wr(-1,-1,0),new Wr(1,0,1),new Wr(-1,0,1),new Wr(1,0,-1),new Wr(-1,0,-1),new Wr(0,1,1),new Wr(0,-1,1),new Wr(0,1,-1),new Wr(0,-1,-1)],GC=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],VC=new Array(512),XC=new Array(512),r9=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var n;t&1?n=GC[t]^e&255:n=GC[t]^e>>8&255,VC[t]=VC[t+256]=n,XC[t]=XC[t+256]=s9[n%12]}};r9(0);function o9(a){if(typeof a=="number")a=Math.abs(a);else if(typeof a=="string"){var e=a;a=0;for(var t=0;t<e.length;t++)a=(a+(t+1)*(e.charCodeAt(t)%96))%2147483647}return a===0&&(a=311),a}function kC(a){var e=o9(a);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var l9=function a(e){var t=this;wR(this,a),sg(this,"seed",0),sg(this,"init",function(n){t.seed=n,t.value=kC(n)}),sg(this,"value",kC(this.seed)),this.init(e)};new l9(Math.random());const u9=Qe.createContext(null),UR=Qe.createContext(null),YC=a=>(a.getAttributes()&2)===2,c9=Qe.memo(Qe.forwardRef(({children:a,camera:e,scene:t,resolutionScale:n,enabled:i=!0,renderPriority:r=1,autoClear:l=!0,depthBuffer:c,enableNormalPass:d,stencilBuffer:p,multisampling:g=8,frameBufferType:v=Xc},_)=>{const{gl:y,scene:S,camera:E,size:C}=Oo(),M=t||S,B=e||E,[D,w,z]=Qe.useMemo(()=>{const G=new kH(y,{depthBuffer:c,stencilBuffer:p,multisampling:g,frameBufferType:v});G.addPass(new tM(M,B));let L=null,I=null;return d&&(I=new a9(M,B),I.enabled=!1,G.addPass(I),n!==void 0&&(L=new QG({normalBuffer:I.texture,resolutionScale:n}),L.enabled=!1,G.addPass(L))),[G,I,L]},[B,y,c,p,g,v,M,d,n]);Qe.useEffect(()=>D?.setSize(C.width,C.height),[D,C]),K1((G,L)=>{if(i){const I=y.autoClear;y.autoClear=l,p&&!l&&y.clearStencil(),D.render(L),y.autoClear=I}},i?r:0);const O=Qe.useRef(null);Qe.useLayoutEffect(()=>{const G=[],L=O.current.__r3f;if(L&&D){const I=L.children;for(let Y=0;Y<I.length;Y++){const ee=I[Y].object;if(ee instanceof VS){const te=[ee];if(!YC(ee)){let re=null;for(;(re=I[Y+1]?.object)instanceof VS&&!YC(re);)te.push(re),Y++}const le=new i9(B,...te);G.push(le)}else ee instanceof us&&G.push(ee)}for(const Y of G)D?.addPass(Y);w&&(w.enabled=!0),z&&(z.enabled=!0)}return()=>{for(const I of G)D?.removePass(I);w&&(w.enabled=!1),z&&(z.enabled=!1)}},[D,a,B,w,z]),Qe.useEffect(()=>{const G=y.toneMapping;return y.toneMapping=zo,()=>{y.toneMapping=G}},[y]);const P=Qe.useMemo(()=>({composer:D,normalPass:w,downSamplingPass:z,resolutionScale:n,camera:B,scene:M}),[D,w,z,n,B,M]);return Qe.useImperativeHandle(_,()=>D,[D]),Ke.jsx(UR.Provider,{value:P,children:Ke.jsx("group",{ref:O,children:a})})})),o_=a=>typeof a=="object"&&a!=null&&"current"in a?a.current:a,f9=(a,e)=>a.layers.enable(e.selection.layer),h9=(a,e)=>a.layers.disable(e.selection.layer),d9=Qe.forwardRef(function({selection:a=[],selectionLayer:e=10,lights:t=[],inverted:n=!1,ignoreBackground:i=!1,luminanceThreshold:r,luminanceSmoothing:l,intensity:c,width:d,height:p,kernelSize:g,mipmapBlur:v,..._},y){t.length===0&&console.warn("SelectiveBloom requires lights to work.");const S=Oo(D=>D.invalidate),{scene:E,camera:C}=Qe.useContext(UR),M=Qe.useMemo(()=>{const D=new KG(E,C,{blendFunction:0,luminanceThreshold:r,luminanceSmoothing:l,intensity:c,width:d,height:p,kernelSize:g,mipmapBlur:v,..._});return D.inverted=n,D.ignoreBackground=i,D},[E,C,r,l,c,d,p,g,v,n,i,_]),B=Qe.useContext(u9);return Qe.useEffect(()=>{if(!B&&a)return M.selection.set(Array.isArray(a)?a.map(o_):[o_(a)]),S(),()=>{M.selection.clear(),S()}},[M,a,B,S]),Qe.useEffect(()=>{M.selection.layer=e,S()},[M,S,e]),Qe.useEffect(()=>{if(t&&t.length>0)return t.forEach(D=>f9(o_(D),M)),S(),()=>{t.forEach(D=>h9(o_(D),M)),S()}},[M,S,t,e]),Qe.useEffect(()=>{if(B&&B.enabled&&B.selected?.length)return M.selection.set(B.selected),S(),()=>{M.selection.clear(),S()}},[B,M.selection,S]),Ke.jsx("primitive",{ref:y,object:M,dispose:null})});function p9(a){const{nodes:e,materials:t}=kg("/models/optimized-room.glb"),n=Qe.useRef(),i=Z1("/images/textures/mat1.png"),r=new Mc({color:"#d90429"}),l=new Mc({map:i}),c=new Mc({color:"#582f0e"}),d=new Mc({color:"#fff"}),p=new Qp({color:"#fff"}),g=new Mc({color:"#8338ec"}),v=new Mc({color:"#000"});return Ke.jsxs("group",{...a,dispose:null,children:[Ke.jsx(c9,{children:Ke.jsx(d9,{selection:n,intensity:1.5,luminanceThreshold:.2,luminanceSmoothing:.9,blendFunction:bn.ADD})}),Ke.jsx("mesh",{geometry:e._________6_blinn1_0.geometry,material:r}),Ke.jsx("mesh",{geometry:e.body1_blinn1_0.geometry,material:l}),Ke.jsx("mesh",{geometry:e.cabin_blinn1_0.geometry,material:c}),Ke.jsx("mesh",{geometry:e.chair_body_blinn1_0.geometry,material:v}),Ke.jsx("mesh",{geometry:e.comp_blinn1_0.geometry,material:p}),Ke.jsx("mesh",{ref:n,geometry:e.emis_lambert1_0.geometry,material:t.lambert1}),Ke.jsx("mesh",{geometry:e.handls_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.keyboard_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.kovrik_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.lamp_bl_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.lamp_white_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.miuse_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.monitor2_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.monitor3_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.pCylinder5_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.pillows_blinn1_0.geometry,material:g}),Ke.jsx("mesh",{geometry:e.polySurface53_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.radiator_blinn1_0.geometry,material:d}),Ke.jsx("mesh",{geometry:e.radiator_blinn1_0001.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.railing_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.red_bttns_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.red_vac_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.stylus_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.table_blinn1_0.geometry,material:c}),Ke.jsx("mesh",{geometry:e.tablet_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.triangle_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.vac_black_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.vacuum1_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.vacuumgrey_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.vires_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.window_blinn1_0.geometry,material:t.blinn1}),Ke.jsx("mesh",{geometry:e.window4_phong1_0.geometry,material:t.phong1})]})}kg.preload("/models/optimized-room.glb");const m9=()=>Ke.jsxs(Ke.Fragment,{children:[Ke.jsx("spotLight",{position:[2,5,6],angle:.15,intensity:100,penumbra:.2,color:"white"}),Ke.jsx("spotLight",{position:[4,5,4],angle:.3,intensity:40,penumbra:.5,color:"#4CC9F0"}),Ke.jsx("spotLight",{position:[-3,5,5],angle:.4,intensity:60,penumbra:1,color:"#9d4edd"}),Ke.jsx("primitive",{object:new H1("#A259FF",8,3,2),position:[1,3,5],intensity:15,rotation:[-Math.PI/4,Math.PI/4,0]}),Ke.jsx("pointLight",{position:[0,1,0],intensity:10,color:"#7209b7"}),Ke.jsx("pointLight",{position:[1,2,-2],intensity:10,color:"#0d00a4"})]}),g9=({count:a=200})=>{const e=Qe.useRef(),t=Qe.useMemo(()=>{const i=[];for(let r=0;r<a;r++)i.push({position:[(Math.random()-.5)*10,Math.random()*10+5,(Math.random()-.5)*10],speed:.005+Math.random()*.001});return i},[a]);K1(()=>{const i=e.current.geometry.attributes.position.array;for(let r=0;r<a;r++){let l=i[r*3+1];l-=t[r].speed,l<-2&&(l=Math.random()*10+5),i[r*3+1]=l}e.current.geometry.attributes.position.needsUpdate=!0});const n=new Float32Array(a*3);return t.forEach((i,r)=>{n[r*3]=i.position[0],n[r*3+1]=i.position[1],n[r*3+2]=i.position[2]}),Ke.jsxs("points",{ref:e,children:[Ke.jsx("bufferGeometry",{children:Ke.jsx("bufferAttribute",{attach:"attributes-position",count:a,array:n,itemSize:3})}),Ke.jsx("pointsMaterial",{color:"#ffffff",size:.05,transparent:!0,opacity:.9,depthWrite:!1})]})},v9=()=>{const a=zC({query:"(max-width: 1024px)"}),e=zC({query:"(max-width: 768px)"});return Ke.jsxs(gF,{camera:{position:[0,0,15],fov:45},children:[Ke.jsx(uH,{enablePan:!1,enableZoom:!a,maxDistance:20,minDistance:5,minPolarAngle:Math.PI/5,maxPolarAngle:Math.PI/2}),Ke.jsx(m9,{}),Ke.jsx(g9,{count:250}),Ke.jsx("group",{scale:e?.7:a?.9:1,position:[0,-3.5,0],rotation:[0,-Math.PI/4,0],children:Ke.jsx(p9,{})})]})};function _u(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function OR(a,e){a.prototype=Object.create(e.prototype),a.prototype.constructor=a,a.__proto__=e}var Ar={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Vp={duration:.5,overwrite:!1,delay:0},nM,Va,yi,$r=1e8,ri=1/$r,XS=Math.PI*2,x9=XS/4,_9=0,NR=Math.sqrt,y9=Math.cos,b9=Math.sin,Ua=function(e){return typeof e=="string"},zi=function(e){return typeof e=="function"},Ru=function(e){return typeof e=="number"},iM=function(e){return typeof e>"u"},wl=function(e){return typeof e=="object"},js=function(e){return e!==!1},aM=function(){return typeof window<"u"},l_=function(e){return zi(e)||Ua(e)},LR=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},rs=Array.isArray,kS=/(?:-?\.?\d|\.)+/gi,IR=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,xp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,lS=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,zR=/[+-]=-?[.\d]+/,PR=/[^,'"\[\]\s]+/gi,A9=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Bi,Ml,YS,sM,Er={},ay={},FR,HR=function(e){return(ay=Xp(e,Er))&&er},rM=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Eg=function(e,t){return!t&&console.warn(e)},GR=function(e,t){return e&&(Er[e]=t)&&ay&&(ay[e]=t)||Er},Tg=function(){return 0},S9={suppressEvents:!0,isStart:!0,kill:!1},m_={suppressEvents:!0,kill:!1},M9={suppressEvents:!0},oM={},Nc=[],qS={},VR,gr={},uS={},qC=30,g_=[],lM="",uM=function(e){var t=e[0],n,i;if(wl(t)||zi(t)||(e=[e]),!(n=(t._gsap||{}).harness)){for(i=g_.length;i--&&!g_[i].targetTest(t););n=g_[i]}for(i=e.length;i--;)e[i]&&(e[i]._gsap||(e[i]._gsap=new hB(e[i],n)))||e.splice(i,1);return e},yh=function(e){return e._gsap||uM(eo(e))[0]._gsap},XR=function(e,t,n){return(n=e[t])&&zi(n)?e[t]():iM(n)&&e.getAttribute&&e.getAttribute(t)||n},Zs=function(e,t){return(e=e.split(",")).forEach(t)||e},Ji=function(e){return Math.round(e*1e5)/1e5||0},sa=function(e){return Math.round(e*1e7)/1e7||0},Sp=function(e,t){var n=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),n==="+"?e+i:n==="-"?e-i:n==="*"?e*i:e/i},E9=function(e,t){for(var n=t.length,i=0;e.indexOf(t[i])<0&&++i<n;);return i<n},sy=function(){var e=Nc.length,t=Nc.slice(0),n,i;for(qS={},Nc.length=0,n=0;n<e;n++)i=t[n],i&&i._lazy&&(i.render(i._lazy[0],i._lazy[1],!0)._lazy=0)},cM=function(e){return!!(e._initted||e._startAt||e.add)},kR=function(e,t,n,i){Nc.length&&!Va&&sy(),e.render(t,n,!!(Va&&t<0&&cM(e))),Nc.length&&!Va&&sy()},YR=function(e){var t=parseFloat(e);return(t||t===0)&&(e+"").match(PR).length<2?t:Ua(e)?e.trim():e},qR=function(e){return e},Tr=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},T9=function(e){return function(t,n){for(var i in n)i in t||i==="duration"&&e||i==="ease"||(t[i]=n[i])}},Xp=function(e,t){for(var n in t)e[n]=t[n];return e},JC=function a(e,t){for(var n in t)n!=="__proto__"&&n!=="constructor"&&n!=="prototype"&&(e[n]=wl(t[n])?a(e[n]||(e[n]={}),t[n]):t[n]);return e},ry=function(e,t){var n={},i;for(i in e)i in t||(n[i]=e[i]);return n},rg=function(e){var t=e.parent||Bi,n=e.keyframes?T9(rs(e.keyframes)):Tr;if(js(e.inherit))for(;t;)n(e,t.vars.defaults),t=t.parent||t._dp;return e},C9=function(e,t){for(var n=e.length,i=n===t.length;i&&n--&&e[n]===t[n];);return n<0},JR=function(e,t,n,i,r){var l=e[i],c;if(r)for(c=t[r];l&&l[r]>c;)l=l._prev;return l?(t._next=l._next,l._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[i]=t,t._prev=l,t.parent=t._dp=e,t},Zy=function(e,t,n,i){n===void 0&&(n="_first"),i===void 0&&(i="_last");var r=t._prev,l=t._next;r?r._next=l:e[n]===t&&(e[n]=l),l?l._prev=r:e[i]===t&&(e[i]=r),t._next=t._prev=t.parent=null},Gc=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},bh=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},R9=function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e},JS=function(e,t,n,i){return e._startAt&&(Va?e._startAt.revert(m_):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},B9=function a(e){return!e||e._ts&&a(e.parent)},KC=function(e){return e._repeat?kp(e._tTime,e=e.duration()+e._rDelay)*e:0},kp=function(e,t){var n=Math.floor(e=sa(e/t));return e&&n===e?n-1:n},oy=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Qy=function(e){return e._end=sa(e._start+(e._tDur/Math.abs(e._ts||e._rts||ri)||0))},$y=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=sa(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Qy(e),n._dirty||bh(n,e)),e},KR=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=oy(e.rawTime(),t),(!t._dur||Yg(0,t.totalDuration(),n)-t._tTime>ri)&&t.render(n,!0)),bh(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-ri}},El=function(e,t,n,i){return t.parent&&Gc(t),t._start=sa((Ru(n)?n:n||e!==Bi?jr(e,n,t):e._time)+t._delay),t._end=sa(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),JR(e,t,"_first","_last",e._sort?"_start":0),KS(t)||(e._recent=t),i||KR(e,t),e._ts<0&&$y(e,e._tTime),e},WR=function(e,t){return(Er.ScrollTrigger||rM("scrollTrigger",t))&&Er.ScrollTrigger.create(t,e)},jR=function(e,t,n,i,r){if(hM(e,t,r),!e._initted)return 1;if(!n&&e._pt&&!Va&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&VR!==vr.frame)return Nc.push(e),e._lazy=[r,i],1},D9=function a(e){var t=e.parent;return t&&t._ts&&t._initted&&!t._lock&&(t.rawTime()<0||a(t))},KS=function(e){var t=e.data;return t==="isFromStart"||t==="isStart"},w9=function(e,t,n,i){var r=e.ratio,l=t<0||!t&&(!e._start&&D9(e)&&!(!e._initted&&KS(e))||(e._ts<0||e._dp._ts<0)&&!KS(e))?0:1,c=e._rDelay,d=0,p,g,v;if(c&&e._repeat&&(d=Yg(0,e._tDur,t),g=kp(d,c),e._yoyo&&g&1&&(l=1-l),g!==kp(e._tTime,c)&&(r=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==r||Va||i||e._zTime===ri||!t&&e._zTime){if(!e._initted&&jR(e,t,i,n,d))return;for(v=e._zTime,e._zTime=t||(n?ri:0),n||(n=t&&!v),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=d,p=e._pt;p;)p.r(l,p.d),p=p._next;t<0&&JS(e,t,n,!0),e._onUpdate&&!n&&yr(e,"onUpdate"),d&&e._repeat&&!n&&e.parent&&yr(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&Gc(e,1),!n&&!Va&&(yr(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)},U9=function(e,t,n){var i;if(n>t)for(i=e._first;i&&i._start<=n;){if(i.data==="isPause"&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if(i.data==="isPause"&&i._start<t)return i;i=i._prev}},Yp=function(e,t,n,i){var r=e._repeat,l=sa(t)||0,c=e._tTime/e._tDur;return c&&!i&&(e._time*=l/e._dur),e._dur=l,e._tDur=r?r<0?1e10:sa(l*(r+1)+e._rDelay*r):l,c>0&&!i&&$y(e,e._tTime=e._tDur*c),e.parent&&Qy(e),n||bh(e.parent,e),e},WC=function(e){return e instanceof Ns?bh(e):Yp(e,e._dur)},O9={_start:0,endTime:Tg,totalDuration:Tg},jr=function a(e,t,n){var i=e.labels,r=e._recent||O9,l=e.duration()>=$r?r.endTime(!1):e._dur,c,d,p;return Ua(t)&&(isNaN(t)||t in i)?(d=t.charAt(0),p=t.substr(-1)==="%",c=t.indexOf("="),d==="<"||d===">"?(c>=0&&(t=t.replace(/=/,"")),(d==="<"?r._start:r.endTime(r._repeat>=0))+(parseFloat(t.substr(1))||0)*(p?(c<0?r:n).totalDuration()/100:1)):c<0?(t in i||(i[t]=l),i[t]):(d=parseFloat(t.charAt(c-1)+t.substr(c+1)),p&&n&&(d=d/100*(rs(n)?n[0]:n).totalDuration()),c>1?a(e,t.substr(0,c-1),n)+d:l+d)):t==null?l:+t},og=function(e,t,n){var i=Ru(t[1]),r=(i?2:1)+(e<2?0:1),l=t[r],c,d;if(i&&(l.duration=t[1]),l.parent=n,e){for(c=l,d=n;d&&!("immediateRender"in c);)c=d.vars.defaults||{},d=js(d.vars.inherit)&&d.parent;l.immediateRender=js(c.immediateRender),e<2?l.runBackwards=1:l.startAt=t[r-1]}return new aa(t[0],l,t[r+1])},Kc=function(e,t){return e||e===0?t(e):t},Yg=function(e,t,n){return n<e?e:n>t?t:n},as=function(e,t){return!Ua(e)||!(t=A9.exec(e))?"":t[1]},N9=function(e,t,n){return Kc(n,function(i){return Yg(e,t,i)})},WS=[].slice,ZR=function(e,t){return e&&wl(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&wl(e[0]))&&!e.nodeType&&e!==Ml},L9=function(e,t,n){return n===void 0&&(n=[]),e.forEach(function(i){var r;return Ua(i)&&!t||ZR(i,1)?(r=n).push.apply(r,eo(i)):n.push(i)})||n},eo=function(e,t,n){return yi&&!t&&yi.selector?yi.selector(e):Ua(e)&&!n&&(YS||!qp())?WS.call((t||sM).querySelectorAll(e),0):rs(e)?L9(e,n):ZR(e)?WS.call(e,0):e?[e]:[]},jS=function(e){return e=eo(e)[0]||Eg("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return eo(t,n.querySelectorAll?n:n===e?Eg("Invalid scope")||sM.createElement("div"):e)}},QR=function(e){return e.sort(function(){return .5-Math.random()})},$R=function(e){if(zi(e))return e;var t=wl(e)?e:{each:e},n=Ah(t.ease),i=t.from||0,r=parseFloat(t.base)||0,l={},c=i>0&&i<1,d=isNaN(i)||c,p=t.axis,g=i,v=i;return Ua(i)?g=v={center:.5,edges:.5,end:1}[i]||0:!c&&d&&(g=i[0],v=i[1]),function(_,y,S){var E=(S||t).length,C=l[E],M,B,D,w,z,O,P,G,L;if(!C){if(L=t.grid==="auto"?0:(t.grid||[1,$r])[1],!L){for(P=-$r;P<(P=S[L++].getBoundingClientRect().left)&&L<E;);L<E&&L--}for(C=l[E]=[],M=d?Math.min(L,E)*g-.5:i%L,B=L===$r?0:d?E*v/L-.5:i/L|0,P=0,G=$r,O=0;O<E;O++)D=O%L-M,w=B-(O/L|0),C[O]=z=p?Math.abs(p==="y"?w:D):NR(D*D+w*w),z>P&&(P=z),z<G&&(G=z);i==="random"&&QR(C),C.max=P-G,C.min=G,C.v=E=(parseFloat(t.amount)||parseFloat(t.each)*(L>E?E-1:p?p==="y"?E/L:L:Math.max(L,E/L))||0)*(i==="edges"?-1:1),C.b=E<0?r-E:r,C.u=as(t.amount||t.each)||0,n=n&&E<0?uB(n):n}return E=(C[_]-C.min)/C.max||0,sa(C.b+(n?n(E):E)*C.v)+C.u}},ZS=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var i=sa(Math.round(parseFloat(n)/e)*e*t);return(i-i%1)/t+(Ru(n)?0:as(n))}},eB=function(e,t){var n=rs(e),i,r;return!n&&wl(e)&&(i=n=e.radius||$r,e.values?(e=eo(e.values),(r=!Ru(e[0]))&&(i*=i)):e=ZS(e.increment)),Kc(t,n?zi(e)?function(l){return r=e(l),Math.abs(r-l)<=i?r:l}:function(l){for(var c=parseFloat(r?l.x:l),d=parseFloat(r?l.y:0),p=$r,g=0,v=e.length,_,y;v--;)r?(_=e[v].x-c,y=e[v].y-d,_=_*_+y*y):_=Math.abs(e[v]-c),_<p&&(p=_,g=v);return g=!i||p<=i?e[g]:l,r||g===l||Ru(l)?g:g+as(l)}:ZS(e))},tB=function(e,t,n,i){return Kc(rs(e)?!t:n===!0?!!(n=0):!i,function(){return rs(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+n*.99))/n)*n*i)/i})},I9=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(i){return t.reduce(function(r,l){return l(r)},i)}},z9=function(e,t){return function(n){return e(parseFloat(n))+(t||as(n))}},P9=function(e,t,n){return iB(e,t,0,1,n)},nB=function(e,t,n){return Kc(n,function(i){return e[~~t(i)]})},F9=function a(e,t,n){var i=t-e;return rs(e)?nB(e,a(0,e.length),t):Kc(n,function(r){return(i+(r-e)%i)%i+e})},H9=function a(e,t,n){var i=t-e,r=i*2;return rs(e)?nB(e,a(0,e.length-1),t):Kc(n,function(l){return l=(r+(l-e)%r)%r||0,e+(l>i?r-l:l)})},Cg=function(e){for(var t=0,n="",i,r,l,c;~(i=e.indexOf("random(",t));)l=e.indexOf(")",i),c=e.charAt(i+7)==="[",r=e.substr(i+7,l-i-7).match(c?PR:kS),n+=e.substr(t,i-t)+tB(c?r:+r[0],c?0:+r[1],+r[2]||1e-5),t=l+1;return n+e.substr(t,e.length-t)},iB=function(e,t,n,i,r){var l=t-e,c=i-n;return Kc(r,function(d){return n+((d-e)/l*c||0)})},G9=function a(e,t,n,i){var r=isNaN(e+t)?0:function(y){return(1-y)*e+y*t};if(!r){var l=Ua(e),c={},d,p,g,v,_;if(n===!0&&(i=1)&&(n=null),l)e={p:e},t={p:t};else if(rs(e)&&!rs(t)){for(g=[],v=e.length,_=v-2,p=1;p<v;p++)g.push(a(e[p-1],e[p]));v--,r=function(S){S*=v;var E=Math.min(_,~~S);return g[E](S-E)},n=t}else i||(e=Xp(rs(e)?[]:{},e));if(!g){for(d in t)fM.call(c,e,d,"get",t[d]);r=function(S){return mM(S,c)||(l?e.p:e)}}}return Kc(n,r)},jC=function(e,t,n){var i=e.labels,r=$r,l,c,d;for(l in i)c=i[l]-t,c<0==!!n&&c&&r>(c=Math.abs(c))&&(d=l,r=c);return d},yr=function(e,t,n){var i=e.vars,r=i[t],l=yi,c=e._ctx,d,p,g;if(r)return d=i[t+"Params"],p=i.callbackScope||e,n&&Nc.length&&sy(),c&&(yi=c),g=d?r.apply(p,d):r.call(p),yi=l,g},J0=function(e){return Gc(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Va),e.progress()<1&&yr(e,"onInterrupt"),e},_p,aB=[],sB=function(e){if(e)if(e=!e.name&&e.default||e,aM()||e.headless){var t=e.name,n=zi(e),i=t&&!n&&e.init?function(){this._props=[]}:e,r={init:Tg,render:mM,add:fM,kill:i8,modifier:n8,rawVars:0},l={targetTest:0,get:0,getSetter:pM,aliases:{},register:0};if(qp(),e!==i){if(gr[t])return;Tr(i,Tr(ry(e,r),l)),Xp(i.prototype,Xp(r,ry(e,l))),gr[i.prop=t]=i,e.targetTest&&(g_.push(i),oM[t]=1),t=(t==="css"?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}GR(t,i),e.register&&e.register(er,i,Qs)}else aB.push(e)},si=255,K0={aqua:[0,si,si],lime:[0,si,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,si],navy:[0,0,128],white:[si,si,si],olive:[128,128,0],yellow:[si,si,0],orange:[si,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[si,0,0],pink:[si,192,203],cyan:[0,si,si],transparent:[si,si,si,0]},cS=function(e,t,n){return e+=e<0?1:e>1?-1:0,(e*6<1?t+(n-t)*e*6:e<.5?n:e*3<2?t+(n-t)*(2/3-e)*6:t)*si+.5|0},rB=function(e,t,n){var i=e?Ru(e)?[e>>16,e>>8&si,e&si]:0:K0.black,r,l,c,d,p,g,v,_,y,S;if(!i){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),K0[e])i=K0[e];else if(e.charAt(0)==="#"){if(e.length<6&&(r=e.charAt(1),l=e.charAt(2),c=e.charAt(3),e="#"+r+r+l+l+c+c+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return i=parseInt(e.substr(1,6),16),[i>>16,i>>8&si,i&si,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),i=[e>>16,e>>8&si,e&si]}else if(e.substr(0,3)==="hsl"){if(i=S=e.match(kS),!t)d=+i[0]%360/360,p=+i[1]/100,g=+i[2]/100,l=g<=.5?g*(p+1):g+p-g*p,r=g*2-l,i.length>3&&(i[3]*=1),i[0]=cS(d+1/3,r,l),i[1]=cS(d,r,l),i[2]=cS(d-1/3,r,l);else if(~e.indexOf("="))return i=e.match(IR),n&&i.length<4&&(i[3]=1),i}else i=e.match(kS)||K0.transparent;i=i.map(Number)}return t&&!S&&(r=i[0]/si,l=i[1]/si,c=i[2]/si,v=Math.max(r,l,c),_=Math.min(r,l,c),g=(v+_)/2,v===_?d=p=0:(y=v-_,p=g>.5?y/(2-v-_):y/(v+_),d=v===r?(l-c)/y+(l<c?6:0):v===l?(c-r)/y+2:(r-l)/y+4,d*=60),i[0]=~~(d+.5),i[1]=~~(p*100+.5),i[2]=~~(g*100+.5)),n&&i.length<4&&(i[3]=1),i},oB=function(e){var t=[],n=[],i=-1;return e.split(Lc).forEach(function(r){var l=r.match(xp)||[];t.push.apply(t,l),n.push(i+=l.length+1)}),t.c=n,t},ZC=function(e,t,n){var i="",r=(e+i).match(Lc),l=t?"hsla(":"rgba(",c=0,d,p,g,v;if(!r)return e;if(r=r.map(function(_){return(_=rB(_,t,1))&&l+(t?_[0]+","+_[1]+"%,"+_[2]+"%,"+_[3]:_.join(","))+")"}),n&&(g=oB(e),d=n.c,d.join(i)!==g.c.join(i)))for(p=e.replace(Lc,"1").split(xp),v=p.length-1;c<v;c++)i+=p[c]+(~d.indexOf(c)?r.shift()||l+"0,0,0,0)":(g.length?g:r.length?r:n).shift());if(!p)for(p=e.split(Lc),v=p.length-1;c<v;c++)i+=p[c]+r[c];return i+p[v]},Lc=(function(){var a="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in K0)a+="|"+e+"\\b";return new RegExp(a+")","gi")})(),V9=/hsl[a]?\(/,lB=function(e){var t=e.join(" "),n;if(Lc.lastIndex=0,Lc.test(t))return n=V9.test(t),e[1]=ZC(e[1],n),e[0]=ZC(e[0],n,oB(e[1])),!0},Rg,vr=(function(){var a=Date.now,e=500,t=33,n=a(),i=n,r=1e3/240,l=r,c=[],d,p,g,v,_,y,S=function E(C){var M=a()-i,B=C===!0,D,w,z,O;if((M>e||M<0)&&(n+=M-t),i+=M,z=i-n,D=z-l,(D>0||B)&&(O=++v.frame,_=z-v.time*1e3,v.time=z=z/1e3,l+=D+(D>=r?4:r-D),w=1),B||(d=p(E)),w)for(y=0;y<c.length;y++)c[y](z,_,O,C)};return v={time:0,frame:0,tick:function(){S(!0)},deltaRatio:function(C){return _/(1e3/(C||60))},wake:function(){FR&&(!YS&&aM()&&(Ml=YS=window,sM=Ml.document||{},Er.gsap=er,(Ml.gsapVersions||(Ml.gsapVersions=[])).push(er.version),HR(ay||Ml.GreenSockGlobals||!Ml.gsap&&Ml||{}),aB.forEach(sB)),g=typeof requestAnimationFrame<"u"&&requestAnimationFrame,d&&v.sleep(),p=g||function(C){return setTimeout(C,l-v.time*1e3+1|0)},Rg=1,S(2))},sleep:function(){(g?cancelAnimationFrame:clearTimeout)(d),Rg=0,p=Tg},lagSmoothing:function(C,M){e=C||1/0,t=Math.min(M||33,e)},fps:function(C){r=1e3/(C||240),l=v.time*1e3+r},add:function(C,M,B){var D=M?function(w,z,O,P){C(w,z,O,P),v.remove(D)}:C;return v.remove(C),c[B?"unshift":"push"](D),qp(),D},remove:function(C,M){~(M=c.indexOf(C))&&c.splice(M,1)&&y>=M&&y--},_listeners:c},v})(),qp=function(){return!Rg&&vr.wake()},Rn={},X9=/^[\d.\-M][\d.\-,\s]/,k9=/["']/g,Y9=function(e){for(var t={},n=e.substr(1,e.length-3).split(":"),i=n[0],r=1,l=n.length,c,d,p;r<l;r++)d=n[r],c=r!==l-1?d.lastIndexOf(","):d.length,p=d.substr(0,c),t[i]=isNaN(p)?p.replace(k9,"").trim():+p,i=d.substr(c+1).trim();return t},q9=function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<n?e.indexOf(")",n+1):n)},J9=function(e){var t=(e+"").split("("),n=Rn[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[Y9(t[1])]:q9(e).split(",").map(YR)):Rn._CE&&X9.test(e)?Rn._CE("",e):n},uB=function(e){return function(t){return 1-e(1-t)}},cB=function a(e,t){for(var n=e._first,i;n;)n instanceof Ns?a(n,t):n.vars.yoyoEase&&(!n._yoyo||!n._repeat)&&n._yoyo!==t&&(n.timeline?a(n.timeline,t):(i=n._ease,n._ease=n._yEase,n._yEase=i,n._yoyo=t)),n=n._next},Ah=function(e,t){return e&&(zi(e)?e:Rn[e]||J9(e))||t},Fh=function(e,t,n,i){n===void 0&&(n=function(d){return 1-t(1-d)}),i===void 0&&(i=function(d){return d<.5?t(d*2)/2:1-t((1-d)*2)/2});var r={easeIn:t,easeOut:n,easeInOut:i},l;return Zs(e,function(c){Rn[c]=Er[c]=r,Rn[l=c.toLowerCase()]=n;for(var d in r)Rn[l+(d==="easeIn"?".in":d==="easeOut"?".out":".inOut")]=Rn[c+"."+d]=r[d]}),r},fB=function(e){return function(t){return t<.5?(1-e(1-t*2))/2:.5+e((t-.5)*2)/2}},fS=function a(e,t,n){var i=t>=1?t:1,r=(n||(e?.3:.45))/(t<1?t:1),l=r/XS*(Math.asin(1/i)||0),c=function(g){return g===1?1:i*Math.pow(2,-10*g)*b9((g-l)*r)+1},d=e==="out"?c:e==="in"?function(p){return 1-c(1-p)}:fB(c);return r=XS/r,d.config=function(p,g){return a(e,p,g)},d},hS=function a(e,t){t===void 0&&(t=1.70158);var n=function(l){return l?--l*l*((t+1)*l+t)+1:0},i=e==="out"?n:e==="in"?function(r){return 1-n(1-r)}:fB(n);return i.config=function(r){return a(e,r)},i};Zs("Linear,Quad,Cubic,Quart,Quint,Strong",function(a,e){var t=e<5?e+1:e;Fh(a+",Power"+(t-1),e?function(n){return Math.pow(n,t)}:function(n){return n},function(n){return 1-Math.pow(1-n,t)},function(n){return n<.5?Math.pow(n*2,t)/2:1-Math.pow((1-n)*2,t)/2})});Rn.Linear.easeNone=Rn.none=Rn.Linear.easeIn;Fh("Elastic",fS("in"),fS("out"),fS());(function(a,e){var t=1/e,n=2*t,i=2.5*t,r=function(c){return c<t?a*c*c:c<n?a*Math.pow(c-1.5/e,2)+.75:c<i?a*(c-=2.25/e)*c+.9375:a*Math.pow(c-2.625/e,2)+.984375};Fh("Bounce",function(l){return 1-r(1-l)},r)})(7.5625,2.75);Fh("Expo",function(a){return Math.pow(2,10*(a-1))*a+a*a*a*a*a*a*(1-a)});Fh("Circ",function(a){return-(NR(1-a*a)-1)});Fh("Sine",function(a){return a===1?1:-y9(a*x9)+1});Fh("Back",hS("in"),hS("out"),hS());Rn.SteppedEase=Rn.steps=Er.SteppedEase={config:function(e,t){e===void 0&&(e=1);var n=1/e,i=e+(t?0:1),r=t?1:0,l=1-ri;return function(c){return((i*Yg(0,l,c)|0)+r)*n}}};Vp.ease=Rn["quad.out"];Zs("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(a){return lM+=a+","+a+"Params,"});var hB=function(e,t){this.id=_9++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:XR,this.set=t?t.getSetter:pM},Bg=(function(){function a(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Yp(this,+t.duration,1,1),this.data=t.data,yi&&(this._ctx=yi,yi.data.push(this)),Rg||vr.wake()}var e=a.prototype;return e.delay=function(n){return n||n===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+n-this._delay),this._delay=n,this):this._delay},e.duration=function(n){return arguments.length?this.totalDuration(this._repeat>0?n+(n+this._rDelay)*this._repeat:n):this.totalDuration()&&this._dur},e.totalDuration=function(n){return arguments.length?(this._dirty=0,Yp(this,this._repeat<0?n:(n-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(n,i){if(qp(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for($y(this,n),!r._dp||r.parent||KR(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&n<this._tDur||this._ts<0&&n>0||!this._tDur&&!n)&&El(this._dp,this,this._start-this._delay)}return(this._tTime!==n||!this._dur&&!i||this._initted&&Math.abs(this._zTime)===ri||!n&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=n),kR(this,n,i)),this},e.time=function(n,i){return arguments.length?this.totalTime(Math.min(this.totalDuration(),n+KC(this))%(this._dur+this._rDelay)||(n?this._dur:0),i):this._time},e.totalProgress=function(n,i){return arguments.length?this.totalTime(this.totalDuration()*n,i):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(n,i){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-n:n)+KC(this),i):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(n,i){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(n-1)*r,i):this._repeat?kp(this._tTime,r)+1:1},e.timeScale=function(n,i){if(!arguments.length)return this._rts===-ri?0:this._rts;if(this._rts===n)return this;var r=this.parent&&this._ts?oy(this.parent._time,this):this._tTime;return this._rts=+n||0,this._ts=this._ps||n===-ri?0:this._rts,this.totalTime(Yg(-Math.abs(this._delay),this.totalDuration(),r),i!==!1),Qy(this),R9(this)},e.paused=function(n){return arguments.length?(this._ps!==n&&(this._ps=n,n?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(qp(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==ri&&(this._tTime-=ri)))),this):this._ps},e.startTime=function(n){if(arguments.length){this._start=n;var i=this.parent||this._dp;return i&&(i._sort||!this.parent)&&El(i,this,n-this._delay),this}return this._start},e.endTime=function(n){return this._start+(js(n)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(n){var i=this.parent||this._dp;return i?n&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?oy(i.rawTime(n),this):this._tTime:this._tTime},e.revert=function(n){n===void 0&&(n=M9);var i=Va;return Va=n,cM(this)&&(this.timeline&&this.timeline.revert(n),this.totalTime(-.01,n.suppressEvents)),this.data!=="nested"&&n.kill!==!1&&this.kill(),Va=i,this},e.globalTime=function(n){for(var i=this,r=arguments.length?n:i.rawTime();i;)r=i._start+r/(Math.abs(i._ts)||1),i=i._dp;return!this.parent&&this._sat?this._sat.globalTime(n):r},e.repeat=function(n){return arguments.length?(this._repeat=n===1/0?-2:n,WC(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(n){if(arguments.length){var i=this._time;return this._rDelay=n,WC(this),i?this.time(i):this}return this._rDelay},e.yoyo=function(n){return arguments.length?(this._yoyo=n,this):this._yoyo},e.seek=function(n,i){return this.totalTime(jr(this,n),js(i))},e.restart=function(n,i){return this.play().totalTime(n?-this._delay:0,js(i)),this._dur||(this._zTime=-ri),this},e.play=function(n,i){return n!=null&&this.seek(n,i),this.reversed(!1).paused(!1)},e.reverse=function(n,i){return n!=null&&this.seek(n||this.totalDuration(),i),this.reversed(!0).paused(!1)},e.pause=function(n,i){return n!=null&&this.seek(n,i),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(n){return arguments.length?(!!n!==this.reversed()&&this.timeScale(-this._rts||(n?-ri:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-ri,this},e.isActive=function(){var n=this.parent||this._dp,i=this._start,r;return!!(!n||this._ts&&this._initted&&n.isActive()&&(r=n.rawTime(!0))>=i&&r<this.endTime(!0)-ri)},e.eventCallback=function(n,i,r){var l=this.vars;return arguments.length>1?(i?(l[n]=i,r&&(l[n+"Params"]=r),n==="onUpdate"&&(this._onUpdate=i)):delete l[n],this):l[n]},e.then=function(n){var i=this;return new Promise(function(r){var l=zi(n)?n:qR,c=function(){var p=i.then;i.then=null,zi(l)&&(l=l(i))&&(l.then||l===i)&&(i.then=p),r(l),i.then=p};i._initted&&i.totalProgress()===1&&i._ts>=0||!i._tTime&&i._ts<0?c():i._prom=c})},e.kill=function(){J0(this)},a})();Tr(Bg.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-ri,_prom:0,_ps:!1,_rts:1});var Ns=(function(a){OR(e,a);function e(n,i){var r;return n===void 0&&(n={}),r=a.call(this,n)||this,r.labels={},r.smoothChildTiming=!!n.smoothChildTiming,r.autoRemoveChildren=!!n.autoRemoveChildren,r._sort=js(n.sortChildren),Bi&&El(n.parent||Bi,_u(r),i),n.reversed&&r.reverse(),n.paused&&r.paused(!0),n.scrollTrigger&&WR(_u(r),n.scrollTrigger),r}var t=e.prototype;return t.to=function(i,r,l){return og(0,arguments,this),this},t.from=function(i,r,l){return og(1,arguments,this),this},t.fromTo=function(i,r,l,c){return og(2,arguments,this),this},t.set=function(i,r,l){return r.duration=0,r.parent=this,rg(r).repeatDelay||(r.repeat=0),r.immediateRender=!!r.immediateRender,new aa(i,r,jr(this,l),1),this},t.call=function(i,r,l){return El(this,aa.delayedCall(0,i,r),l)},t.staggerTo=function(i,r,l,c,d,p,g){return l.duration=r,l.stagger=l.stagger||c,l.onComplete=p,l.onCompleteParams=g,l.parent=this,new aa(i,l,jr(this,d)),this},t.staggerFrom=function(i,r,l,c,d,p,g){return l.runBackwards=1,rg(l).immediateRender=js(l.immediateRender),this.staggerTo(i,r,l,c,d,p,g)},t.staggerFromTo=function(i,r,l,c,d,p,g,v){return c.startAt=l,rg(c).immediateRender=js(c.immediateRender),this.staggerTo(i,r,c,d,p,g,v)},t.render=function(i,r,l){var c=this._time,d=this._dirty?this.totalDuration():this._tDur,p=this._dur,g=i<=0?0:sa(i),v=this._zTime<0!=i<0&&(this._initted||!p),_,y,S,E,C,M,B,D,w,z,O,P;if(this!==Bi&&g>d&&i>=0&&(g=d),g!==this._tTime||l||v){if(c!==this._time&&p&&(g+=this._time-c,i+=this._time-c),_=g,w=this._start,D=this._ts,M=!D,v&&(p||(c=this._zTime),(i||!r)&&(this._zTime=i)),this._repeat){if(O=this._yoyo,C=p+this._rDelay,this._repeat<-1&&i<0)return this.totalTime(C*100+i,r,l);if(_=sa(g%C),g===d?(E=this._repeat,_=p):(z=sa(g/C),E=~~z,E&&E===z&&(_=p,E--),_>p&&(_=p)),z=kp(this._tTime,C),!c&&this._tTime&&z!==E&&this._tTime-z*C-this._dur<=0&&(z=E),O&&E&1&&(_=p-_,P=1),E!==z&&!this._lock){var G=O&&z&1,L=G===(O&&E&1);if(E<z&&(G=!G),c=G?0:g%p?p:g,this._lock=1,this.render(c||(P?0:sa(E*C)),r,!p)._lock=0,this._tTime=g,!r&&this.parent&&yr(this,"onRepeat"),this.vars.repeatRefresh&&!P&&(this.invalidate()._lock=1),c&&c!==this._time||M!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(p=this._dur,d=this._tDur,L&&(this._lock=2,c=G?p:-1e-4,this.render(c,!0),this.vars.repeatRefresh&&!P&&this.invalidate()),this._lock=0,!this._ts&&!M)return this;cB(this,P)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(B=U9(this,sa(c),sa(_)),B&&(g-=_-(_=B._start))),this._tTime=g,this._time=_,this._act=!D,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=i,c=0),!c&&g&&!r&&!z&&(yr(this,"onStart"),this._tTime!==g))return this;if(_>=c&&i>=0)for(y=this._first;y;){if(S=y._next,(y._act||_>=y._start)&&y._ts&&B!==y){if(y.parent!==this)return this.render(i,r,l);if(y.render(y._ts>0?(_-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(_-y._start)*y._ts,r,l),_!==this._time||!this._ts&&!M){B=0,S&&(g+=this._zTime=-ri);break}}y=S}else{y=this._last;for(var I=i<0?i:_;y;){if(S=y._prev,(y._act||I<=y._end)&&y._ts&&B!==y){if(y.parent!==this)return this.render(i,r,l);if(y.render(y._ts>0?(I-y._start)*y._ts:(y._dirty?y.totalDuration():y._tDur)+(I-y._start)*y._ts,r,l||Va&&cM(y)),_!==this._time||!this._ts&&!M){B=0,S&&(g+=this._zTime=I?-ri:ri);break}}y=S}}if(B&&!r&&(this.pause(),B.render(_>=c?0:-ri)._zTime=_>=c?1:-1,this._ts))return this._start=w,Qy(this),this.render(i,r,l);this._onUpdate&&!r&&yr(this,"onUpdate",!0),(g===d&&this._tTime>=this.totalDuration()||!g&&c)&&(w===this._start||Math.abs(D)!==Math.abs(this._ts))&&(this._lock||((i||!p)&&(g===d&&this._ts>0||!g&&this._ts<0)&&Gc(this,1),!r&&!(i<0&&!c)&&(g||c||!d)&&(yr(this,g===d&&i>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(g<d&&this.timeScale()>0)&&this._prom())))}return this},t.add=function(i,r){var l=this;if(Ru(r)||(r=jr(this,r,i)),!(i instanceof Bg)){if(rs(i))return i.forEach(function(c){return l.add(c,r)}),this;if(Ua(i))return this.addLabel(i,r);if(zi(i))i=aa.delayedCall(0,i);else return this}return this!==i?El(this,i,r):this},t.getChildren=function(i,r,l,c){i===void 0&&(i=!0),r===void 0&&(r=!0),l===void 0&&(l=!0),c===void 0&&(c=-$r);for(var d=[],p=this._first;p;)p._start>=c&&(p instanceof aa?r&&d.push(p):(l&&d.push(p),i&&d.push.apply(d,p.getChildren(!0,r,l)))),p=p._next;return d},t.getById=function(i){for(var r=this.getChildren(1,1,1),l=r.length;l--;)if(r[l].vars.id===i)return r[l]},t.remove=function(i){return Ua(i)?this.removeLabel(i):zi(i)?this.killTweensOf(i):(i.parent===this&&Zy(this,i),i===this._recent&&(this._recent=this._last),bh(this))},t.totalTime=function(i,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=sa(vr.time-(this._ts>0?i/this._ts:(this.totalDuration()-i)/-this._ts))),a.prototype.totalTime.call(this,i,r),this._forcing=0,this):this._tTime},t.addLabel=function(i,r){return this.labels[i]=jr(this,r),this},t.removeLabel=function(i){return delete this.labels[i],this},t.addPause=function(i,r,l){var c=aa.delayedCall(0,r||Tg,l);return c.data="isPause",this._hasPause=1,El(this,c,jr(this,i))},t.removePause=function(i){var r=this._first;for(i=jr(this,i);r;)r._start===i&&r.data==="isPause"&&Gc(r),r=r._next},t.killTweensOf=function(i,r,l){for(var c=this.getTweensOf(i,l),d=c.length;d--;)Bc!==c[d]&&c[d].kill(i,r);return this},t.getTweensOf=function(i,r){for(var l=[],c=eo(i),d=this._first,p=Ru(r),g;d;)d instanceof aa?E9(d._targets,c)&&(p?(!Bc||d._initted&&d._ts)&&d.globalTime(0)<=r&&d.globalTime(d.totalDuration())>r:!r||d.isActive())&&l.push(d):(g=d.getTweensOf(c,r)).length&&l.push.apply(l,g),d=d._next;return l},t.tweenTo=function(i,r){r=r||{};var l=this,c=jr(l,i),d=r,p=d.startAt,g=d.onStart,v=d.onStartParams,_=d.immediateRender,y,S=aa.to(l,Tr({ease:r.ease||"none",lazy:!1,immediateRender:!1,time:c,overwrite:"auto",duration:r.duration||Math.abs((c-(p&&"time"in p?p.time:l._time))/l.timeScale())||ri,onStart:function(){if(l.pause(),!y){var C=r.duration||Math.abs((c-(p&&"time"in p?p.time:l._time))/l.timeScale());S._dur!==C&&Yp(S,C,0,1).render(S._time,!0,!0),y=1}g&&g.apply(S,v||[])}},r));return _?S.render(0):S},t.tweenFromTo=function(i,r,l){return this.tweenTo(r,Tr({startAt:{time:jr(this,i)}},l))},t.recent=function(){return this._recent},t.nextLabel=function(i){return i===void 0&&(i=this._time),jC(this,jr(this,i))},t.previousLabel=function(i){return i===void 0&&(i=this._time),jC(this,jr(this,i),1)},t.currentLabel=function(i){return arguments.length?this.seek(i,!0):this.previousLabel(this._time+ri)},t.shiftChildren=function(i,r,l){l===void 0&&(l=0);for(var c=this._first,d=this.labels,p;c;)c._start>=l&&(c._start+=i,c._end+=i),c=c._next;if(r)for(p in d)d[p]>=l&&(d[p]+=i);return bh(this)},t.invalidate=function(i){var r=this._first;for(this._lock=0;r;)r.invalidate(i),r=r._next;return a.prototype.invalidate.call(this,i)},t.clear=function(i){i===void 0&&(i=!0);for(var r=this._first,l;r;)l=r._next,this.remove(r),r=l;return this._dp&&(this._time=this._tTime=this._pTime=0),i&&(this.labels={}),bh(this)},t.totalDuration=function(i){var r=0,l=this,c=l._last,d=$r,p,g,v;if(arguments.length)return l.timeScale((l._repeat<0?l.duration():l.totalDuration())/(l.reversed()?-i:i));if(l._dirty){for(v=l.parent;c;)p=c._prev,c._dirty&&c.totalDuration(),g=c._start,g>d&&l._sort&&c._ts&&!l._lock?(l._lock=1,El(l,c,g-c._delay,1)._lock=0):d=g,g<0&&c._ts&&(r-=g,(!v&&!l._dp||v&&v.smoothChildTiming)&&(l._start+=g/l._ts,l._time-=g,l._tTime-=g),l.shiftChildren(-g,!1,-1/0),d=0),c._end>r&&c._ts&&(r=c._end),c=p;Yp(l,l===Bi&&l._time>r?l._time:r,1,1),l._dirty=0}return l._tDur},e.updateRoot=function(i){if(Bi._ts&&(kR(Bi,oy(i,Bi)),VR=vr.frame),vr.frame>=qC){qC+=Ar.autoSleep||120;var r=Bi._first;if((!r||!r._ts)&&Ar.autoSleep&&vr._listeners.length<2){for(;r&&!r._ts;)r=r._next;r||vr.sleep()}}},e})(Bg);Tr(Ns.prototype,{_lock:0,_hasPause:0,_forcing:0});var K9=function(e,t,n,i,r,l,c){var d=new Qs(this._pt,e,t,0,1,xB,null,r),p=0,g=0,v,_,y,S,E,C,M,B;for(d.b=n,d.e=i,n+="",i+="",(M=~i.indexOf("random("))&&(i=Cg(i)),l&&(B=[n,i],l(B,e,t),n=B[0],i=B[1]),_=n.match(lS)||[];v=lS.exec(i);)S=v[0],E=i.substring(p,v.index),y?y=(y+1)%5:E.substr(-5)==="rgba("&&(y=1),S!==_[g++]&&(C=parseFloat(_[g-1])||0,d._pt={_next:d._pt,p:E||g===1?E:",",s:C,c:S.charAt(1)==="="?Sp(C,S)-C:parseFloat(S)-C,m:y&&y<4?Math.round:0},p=lS.lastIndex);return d.c=p<i.length?i.substring(p,i.length):"",d.fp=c,(zR.test(i)||M)&&(d.e=0),this._pt=d,d},fM=function(e,t,n,i,r,l,c,d,p,g){zi(i)&&(i=i(r||0,e,l));var v=e[t],_=n!=="get"?n:zi(v)?p?e[t.indexOf("set")||!zi(e["get"+t.substr(3)])?t:"get"+t.substr(3)](p):e[t]():v,y=zi(v)?p?$9:gB:dM,S;if(Ua(i)&&(~i.indexOf("random(")&&(i=Cg(i)),i.charAt(1)==="="&&(S=Sp(_,i)+(as(_)||0),(S||S===0)&&(i=S))),!g||_!==i||QS)return!isNaN(_*i)&&i!==""?(S=new Qs(this._pt,e,t,+_||0,i-(_||0),typeof v=="boolean"?t8:vB,0,y),p&&(S.fp=p),c&&S.modifier(c,this,e),this._pt=S):(!v&&!(t in e)&&rM(t,i),K9.call(this,e,t,_,i,y,d||Ar.stringFilter,p))},W9=function(e,t,n,i,r){if(zi(e)&&(e=lg(e,r,t,n,i)),!wl(e)||e.style&&e.nodeType||rs(e)||LR(e))return Ua(e)?lg(e,r,t,n,i):e;var l={},c;for(c in e)l[c]=lg(e[c],r,t,n,i);return l},dB=function(e,t,n,i,r,l){var c,d,p,g;if(gr[e]&&(c=new gr[e]).init(r,c.rawVars?t[e]:W9(t[e],i,r,l,n),n,i,l)!==!1&&(n._pt=d=new Qs(n._pt,r,e,0,1,c.render,c,0,c.priority),n!==_p))for(p=n._ptLookup[n._targets.indexOf(r)],g=c._props.length;g--;)p[c._props[g]]=d;return c},Bc,QS,hM=function a(e,t,n){var i=e.vars,r=i.ease,l=i.startAt,c=i.immediateRender,d=i.lazy,p=i.onUpdate,g=i.runBackwards,v=i.yoyoEase,_=i.keyframes,y=i.autoRevert,S=e._dur,E=e._startAt,C=e._targets,M=e.parent,B=M&&M.data==="nested"?M.vars.targets:C,D=e._overwrite==="auto"&&!nM,w=e.timeline,z,O,P,G,L,I,Y,ee,te,le,re,F,J;if(w&&(!_||!r)&&(r="none"),e._ease=Ah(r,Vp.ease),e._yEase=v?uB(Ah(v===!0?r:v,Vp.ease)):0,v&&e._yoyo&&!e._repeat&&(v=e._yEase,e._yEase=e._ease,e._ease=v),e._from=!w&&!!i.runBackwards,!w||_&&!i.stagger){if(ee=C[0]?yh(C[0]).harness:0,F=ee&&i[ee.prop],z=ry(i,oM),E&&(E._zTime<0&&E.progress(1),t<0&&g&&c&&!y?E.render(-1,!0):E.revert(g&&S?m_:S9),E._lazy=0),l){if(Gc(e._startAt=aa.set(C,Tr({data:"isStart",overwrite:!1,parent:M,immediateRender:!0,lazy:!E&&js(d),startAt:null,delay:0,onUpdate:p&&function(){return yr(e,"onUpdate")},stagger:0},l))),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Va||!c&&!y)&&e._startAt.revert(m_),c&&S&&t<=0&&n<=0){t&&(e._zTime=t);return}}else if(g&&S&&!E){if(t&&(c=!1),P=Tr({overwrite:!1,data:"isFromStart",lazy:c&&!E&&js(d),immediateRender:c,stagger:0,parent:M},z),F&&(P[ee.prop]=F),Gc(e._startAt=aa.set(C,P)),e._startAt._dp=0,e._startAt._sat=e,t<0&&(Va?e._startAt.revert(m_):e._startAt.render(-1,!0)),e._zTime=t,!c)a(e._startAt,ri,ri);else if(!t)return}for(e._pt=e._ptCache=0,d=S&&js(d)||d&&!S,O=0;O<C.length;O++){if(L=C[O],Y=L._gsap||uM(C)[O]._gsap,e._ptLookup[O]=le={},qS[Y.id]&&Nc.length&&sy(),re=B===C?O:B.indexOf(L),ee&&(te=new ee).init(L,F||z,e,re,B)!==!1&&(e._pt=G=new Qs(e._pt,L,te.name,0,1,te.render,te,0,te.priority),te._props.forEach(function(Z){le[Z]=G}),te.priority&&(I=1)),!ee||F)for(P in z)gr[P]&&(te=dB(P,z,e,re,L,B))?te.priority&&(I=1):le[P]=G=fM.call(e,L,P,"get",z[P],re,B,0,i.stringFilter);e._op&&e._op[O]&&e.kill(L,e._op[O]),D&&e._pt&&(Bc=e,Bi.killTweensOf(L,le,e.globalTime(t)),J=!e.parent,Bc=0),e._pt&&d&&(qS[Y.id]=1)}I&&_B(e),e._onInit&&e._onInit(e)}e._onUpdate=p,e._initted=(!e._op||e._pt)&&!J,_&&t<=0&&w.render($r,!0,!0)},j9=function(e,t,n,i,r,l,c,d){var p=(e._pt&&e._ptCache||(e._ptCache={}))[t],g,v,_,y;if(!p)for(p=e._ptCache[t]=[],_=e._ptLookup,y=e._targets.length;y--;){if(g=_[y][t],g&&g.d&&g.d._pt)for(g=g.d._pt;g&&g.p!==t&&g.fp!==t;)g=g._next;if(!g)return QS=1,e.vars[t]="+=0",hM(e,c),QS=0,d?Eg(t+" not eligible for reset"):1;p.push(g)}for(y=p.length;y--;)v=p[y],g=v._pt||v,g.s=(i||i===0)&&!r?i:g.s+(i||0)+l*g.c,g.c=n-g.s,v.e&&(v.e=Ji(n)+as(v.e)),v.b&&(v.b=g.s+as(v.b))},Z9=function(e,t){var n=e[0]?yh(e[0]).harness:0,i=n&&n.aliases,r,l,c,d;if(!i)return t;r=Xp({},t);for(l in i)if(l in r)for(d=i[l].split(","),c=d.length;c--;)r[d[c]]=r[l];return r},Q9=function(e,t,n,i){var r=t.ease||i||"power1.inOut",l,c;if(rs(t))c=n[e]||(n[e]=[]),t.forEach(function(d,p){return c.push({t:p/(t.length-1)*100,v:d,e:r})});else for(l in t)c=n[l]||(n[l]=[]),l==="ease"||c.push({t:parseFloat(e),v:t[l],e:r})},lg=function(e,t,n,i,r){return zi(e)?e.call(t,n,i,r):Ua(e)&&~e.indexOf("random(")?Cg(e):e},pB=lM+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",mB={};Zs(pB+",id,stagger,delay,duration,paused,scrollTrigger",function(a){return mB[a]=1});var aa=(function(a){OR(e,a);function e(n,i,r,l){var c;typeof i=="number"&&(r.duration=i,i=r,r=null),c=a.call(this,l?i:rg(i))||this;var d=c.vars,p=d.duration,g=d.delay,v=d.immediateRender,_=d.stagger,y=d.overwrite,S=d.keyframes,E=d.defaults,C=d.scrollTrigger,M=d.yoyoEase,B=i.parent||Bi,D=(rs(n)||LR(n)?Ru(n[0]):"length"in i)?[n]:eo(n),w,z,O,P,G,L,I,Y;if(c._targets=D.length?uM(D):Eg("GSAP target "+n+" not found. https://gsap.com",!Ar.nullTargetWarn)||[],c._ptLookup=[],c._overwrite=y,S||_||l_(p)||l_(g)){if(i=c.vars,w=c.timeline=new Ns({data:"nested",defaults:E||{},targets:B&&B.data==="nested"?B.vars.targets:D}),w.kill(),w.parent=w._dp=_u(c),w._start=0,_||l_(p)||l_(g)){if(P=D.length,I=_&&$R(_),wl(_))for(G in _)~pB.indexOf(G)&&(Y||(Y={}),Y[G]=_[G]);for(z=0;z<P;z++)O=ry(i,mB),O.stagger=0,M&&(O.yoyoEase=M),Y&&Xp(O,Y),L=D[z],O.duration=+lg(p,_u(c),z,L,D),O.delay=(+lg(g,_u(c),z,L,D)||0)-c._delay,!_&&P===1&&O.delay&&(c._delay=g=O.delay,c._start+=g,O.delay=0),w.to(L,O,I?I(z,L,D):0),w._ease=Rn.none;w.duration()?p=g=0:c.timeline=0}else if(S){rg(Tr(w.vars.defaults,{ease:"none"})),w._ease=Ah(S.ease||i.ease||"none");var ee=0,te,le,re;if(rs(S))S.forEach(function(F){return w.to(D,F,">")}),w.duration();else{O={};for(G in S)G==="ease"||G==="easeEach"||Q9(G,S[G],O,S.easeEach);for(G in O)for(te=O[G].sort(function(F,J){return F.t-J.t}),ee=0,z=0;z<te.length;z++)le=te[z],re={ease:le.e,duration:(le.t-(z?te[z-1].t:0))/100*p},re[G]=le.v,w.to(D,re,ee),ee+=re.duration;w.duration()<p&&w.to({},{duration:p-w.duration()})}}p||c.duration(p=w.duration())}else c.timeline=0;return y===!0&&!nM&&(Bc=_u(c),Bi.killTweensOf(D),Bc=0),El(B,_u(c),r),i.reversed&&c.reverse(),i.paused&&c.paused(!0),(v||!p&&!S&&c._start===sa(B._time)&&js(v)&&B9(_u(c))&&B.data!=="nested")&&(c._tTime=-ri,c.render(Math.max(0,-g)||0)),C&&WR(_u(c),C),c}var t=e.prototype;return t.render=function(i,r,l){var c=this._time,d=this._tDur,p=this._dur,g=i<0,v=i>d-ri&&!g?d:i<ri?0:i,_,y,S,E,C,M,B,D,w;if(!p)w9(this,i,r,l);else if(v!==this._tTime||!i||l||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==g||this._lazy){if(_=v,D=this.timeline,this._repeat){if(E=p+this._rDelay,this._repeat<-1&&g)return this.totalTime(E*100+i,r,l);if(_=sa(v%E),v===d?(S=this._repeat,_=p):(C=sa(v/E),S=~~C,S&&S===C?(_=p,S--):_>p&&(_=p)),M=this._yoyo&&S&1,M&&(w=this._yEase,_=p-_),C=kp(this._tTime,E),_===c&&!l&&this._initted&&S===C)return this._tTime=v,this;S!==C&&(D&&this._yEase&&cB(D,M),this.vars.repeatRefresh&&!M&&!this._lock&&_!==E&&this._initted&&(this._lock=l=1,this.render(sa(E*S),!0).invalidate()._lock=0))}if(!this._initted){if(jR(this,g?i:_,l,r,v))return this._tTime=0,this;if(c!==this._time&&!(l&&this.vars.repeatRefresh&&S!==C))return this;if(p!==this._dur)return this.render(i,r,l)}if(this._tTime=v,this._time=_,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=B=(w||this._ease)(_/p),this._from&&(this.ratio=B=1-B),!c&&v&&!r&&!C&&(yr(this,"onStart"),this._tTime!==v))return this;for(y=this._pt;y;)y.r(B,y.d),y=y._next;D&&D.render(i<0?i:D._dur*D._ease(_/this._dur),r,l)||this._startAt&&(this._zTime=i),this._onUpdate&&!r&&(g&&JS(this,i,r,l),yr(this,"onUpdate")),this._repeat&&S!==C&&this.vars.onRepeat&&!r&&this.parent&&yr(this,"onRepeat"),(v===this._tDur||!v)&&this._tTime===v&&(g&&!this._onUpdate&&JS(this,i,!0,!0),(i||!p)&&(v===this._tDur&&this._ts>0||!v&&this._ts<0)&&Gc(this,1),!r&&!(g&&!c)&&(v||c||M)&&(yr(this,v===d?"onComplete":"onReverseComplete",!0),this._prom&&!(v<d&&this.timeScale()>0)&&this._prom()))}return this},t.targets=function(){return this._targets},t.invalidate=function(i){return(!i||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(i),a.prototype.invalidate.call(this,i)},t.resetTo=function(i,r,l,c,d){Rg||vr.wake(),this._ts||this.play();var p=Math.min(this._dur,(this._dp._time-this._start)*this._ts),g;return this._initted||hM(this,p),g=this._ease(p/this._dur),j9(this,i,r,l,c,g,p,d)?this.resetTo(i,r,l,c,1):($y(this,0),this.parent||JR(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},t.kill=function(i,r){if(r===void 0&&(r="all"),!i&&(!r||r==="all"))return this._lazy=this._pt=0,this.parent?J0(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Va),this;if(this.timeline){var l=this.timeline.totalDuration();return this.timeline.killTweensOf(i,r,Bc&&Bc.vars.overwrite!==!0)._first||J0(this),this.parent&&l!==this.timeline.totalDuration()&&Yp(this,this._dur*this.timeline._tDur/l,0,1),this}var c=this._targets,d=i?eo(i):c,p=this._ptLookup,g=this._pt,v,_,y,S,E,C,M;if((!r||r==="all")&&C9(c,d))return r==="all"&&(this._pt=0),J0(this);for(v=this._op=this._op||[],r!=="all"&&(Ua(r)&&(E={},Zs(r,function(B){return E[B]=1}),r=E),r=Z9(c,r)),M=c.length;M--;)if(~d.indexOf(c[M])){_=p[M],r==="all"?(v[M]=r,S=_,y={}):(y=v[M]=v[M]||{},S=r);for(E in S)C=_&&_[E],C&&((!("kill"in C.d)||C.d.kill(E)===!0)&&Zy(this,C,"_pt"),delete _[E]),y!=="all"&&(y[E]=1)}return this._initted&&!this._pt&&g&&J0(this),this},e.to=function(i,r){return new e(i,r,arguments[2])},e.from=function(i,r){return og(1,arguments)},e.delayedCall=function(i,r,l,c){return new e(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:i,onComplete:r,onReverseComplete:r,onCompleteParams:l,onReverseCompleteParams:l,callbackScope:c})},e.fromTo=function(i,r,l){return og(2,arguments)},e.set=function(i,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new e(i,r)},e.killTweensOf=function(i,r,l){return Bi.killTweensOf(i,r,l)},e})(Bg);Tr(aa.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Zs("staggerTo,staggerFrom,staggerFromTo",function(a){aa[a]=function(){var e=new Ns,t=WS.call(arguments,0);return t.splice(a==="staggerFromTo"?5:4,0,0),e[a].apply(e,t)}});var dM=function(e,t,n){return e[t]=n},gB=function(e,t,n){return e[t](n)},$9=function(e,t,n,i){return e[t](i.fp,n)},e8=function(e,t,n){return e.setAttribute(t,n)},pM=function(e,t){return zi(e[t])?gB:iM(e[t])&&e.setAttribute?e8:dM},vB=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e6)/1e6,t)},t8=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},xB=function(e,t){var n=t._pt,i="";if(!e&&t.b)i=t.b;else if(e===1&&t.e)i=t.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round((n.s+n.c*e)*1e4)/1e4)+i,n=n._next;i+=t.c}t.set(t.t,t.p,i,t)},mM=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},n8=function(e,t,n,i){for(var r=this._pt,l;r;)l=r._next,r.p===i&&r.modifier(e,t,n),r=l},i8=function(e){for(var t=this._pt,n,i;t;)i=t._next,t.p===e&&!t.op||t.op===e?Zy(this,t,"_pt"):t.dep||(n=1),t=i;return!n},a8=function(e,t,n,i){i.mSet(e,t,i.m.call(i.tween,n,i.mt),i)},_B=function(e){for(var t=e._pt,n,i,r,l;t;){for(n=t._next,i=r;i&&i.pr>t.pr;)i=i._next;(t._prev=i?i._prev:l)?t._prev._next=t:r=t,(t._next=i)?i._prev=t:l=t,t=n}e._pt=r},Qs=(function(){function a(t,n,i,r,l,c,d,p,g){this.t=n,this.s=r,this.c=l,this.p=i,this.r=c||vB,this.d=d||this,this.set=p||dM,this.pr=g||0,this._next=t,t&&(t._prev=this)}var e=a.prototype;return e.modifier=function(n,i,r){this.mSet=this.mSet||this.set,this.set=a8,this.m=n,this.mt=r,this.tween=i},a})();Zs(lM+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(a){return oM[a]=1});Er.TweenMax=Er.TweenLite=aa;Er.TimelineLite=Er.TimelineMax=Ns;Bi=new Ns({sortChildren:!1,defaults:Vp,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});Ar.stringFilter=lB;var Sh=[],v_={},s8=[],QC=0,r8=0,dS=function(e){return(v_[e]||s8).map(function(t){return t()})},$S=function(){var e=Date.now(),t=[];e-QC>2&&(dS("matchMediaInit"),Sh.forEach(function(n){var i=n.queries,r=n.conditions,l,c,d,p;for(c in i)l=Ml.matchMedia(i[c]).matches,l&&(d=1),l!==r[c]&&(r[c]=l,p=1);p&&(n.revert(),d&&t.push(n))}),dS("matchMediaRevert"),t.forEach(function(n){return n.onMatch(n,function(i){return n.add(null,i)})}),QC=e,dS("matchMedia"))},yB=(function(){function a(t,n){this.selector=n&&jS(n),this.data=[],this._r=[],this.isReverted=!1,this.id=r8++,t&&this.add(t)}var e=a.prototype;return e.add=function(n,i,r){zi(n)&&(r=i,i=n,n=zi);var l=this,c=function(){var p=yi,g=l.selector,v;return p&&p!==l&&p.data.push(l),r&&(l.selector=jS(r)),yi=l,v=i.apply(l,arguments),zi(v)&&l._r.push(v),yi=p,l.selector=g,l.isReverted=!1,v};return l.last=c,n===zi?c(l,function(d){return l.add(null,d)}):n?l[n]=c:c},e.ignore=function(n){var i=yi;yi=null,n(this),yi=i},e.getTweens=function(){var n=[];return this.data.forEach(function(i){return i instanceof a?n.push.apply(n,i.getTweens()):i instanceof aa&&!(i.parent&&i.parent.data==="nested")&&n.push(i)}),n},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(n,i){var r=this;if(n?(function(){for(var c=r.getTweens(),d=r.data.length,p;d--;)p=r.data[d],p.data==="isFlip"&&(p.revert(),p.getChildren(!0,!0,!1).forEach(function(g){return c.splice(c.indexOf(g),1)}));for(c.map(function(g){return{g:g._dur||g._delay||g._sat&&!g._sat.vars.immediateRender?g.globalTime(0):-1/0,t:g}}).sort(function(g,v){return v.g-g.g||-1/0}).forEach(function(g){return g.t.revert(n)}),d=r.data.length;d--;)p=r.data[d],p instanceof Ns?p.data!=="nested"&&(p.scrollTrigger&&p.scrollTrigger.revert(),p.kill()):!(p instanceof aa)&&p.revert&&p.revert(n);r._r.forEach(function(g){return g(n,r)}),r.isReverted=!0})():this.data.forEach(function(c){return c.kill&&c.kill()}),this.clear(),i)for(var l=Sh.length;l--;)Sh[l].id===this.id&&Sh.splice(l,1)},e.revert=function(n){this.kill(n||{})},a})(),o8=(function(){function a(t){this.contexts=[],this.scope=t,yi&&yi.data.push(this)}var e=a.prototype;return e.add=function(n,i,r){wl(n)||(n={matches:n});var l=new yB(0,r||this.scope),c=l.conditions={},d,p,g;yi&&!l.selector&&(l.selector=yi.selector),this.contexts.push(l),i=l.add("onMatch",i),l.queries=n;for(p in n)p==="all"?g=1:(d=Ml.matchMedia(n[p]),d&&(Sh.indexOf(l)<0&&Sh.push(l),(c[p]=d.matches)&&(g=1),d.addListener?d.addListener($S):d.addEventListener("change",$S)));return g&&i(l,function(v){return l.add(null,v)}),this},e.revert=function(n){this.kill(n||{})},e.kill=function(n){this.contexts.forEach(function(i){return i.kill(n,!0)})},a})(),ly={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(i){return sB(i)})},timeline:function(e){return new Ns(e)},getTweensOf:function(e,t){return Bi.getTweensOf(e,t)},getProperty:function(e,t,n,i){Ua(e)&&(e=eo(e)[0]);var r=yh(e||{}).get,l=n?qR:YR;return n==="native"&&(n=""),e&&(t?l((gr[t]&&gr[t].get||r)(e,t,n,i)):function(c,d,p){return l((gr[c]&&gr[c].get||r)(e,c,d,p))})},quickSetter:function(e,t,n){if(e=eo(e),e.length>1){var i=e.map(function(g){return er.quickSetter(g,t,n)}),r=i.length;return function(g){for(var v=r;v--;)i[v](g)}}e=e[0]||{};var l=gr[t],c=yh(e),d=c.harness&&(c.harness.aliases||{})[t]||t,p=l?function(g){var v=new l;_p._pt=0,v.init(e,n?g+n:g,_p,0,[e]),v.render(1,v),_p._pt&&mM(1,_p)}:c.set(e,d);return l?p:function(g){return p(e,d,n?g+n:g,c,1)}},quickTo:function(e,t,n){var i,r=er.to(e,Tr((i={},i[t]="+=0.1",i.paused=!0,i.stagger=0,i),n||{})),l=function(d,p,g){return r.resetTo(t,d,p,g)};return l.tween=r,l},isTweening:function(e){return Bi.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=Ah(e.ease,Vp.ease)),JC(Vp,e||{})},config:function(e){return JC(Ar,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,i=e.plugins,r=e.defaults,l=e.extendTimeline;(i||"").split(",").forEach(function(c){return c&&!gr[c]&&!Er[c]&&Eg(t+" effect requires "+c+" plugin.")}),uS[t]=function(c,d,p){return n(eo(c),Tr(d||{},r),p)},l&&(Ns.prototype[t]=function(c,d,p){return this.add(uS[t](c,wl(d)?d:(p=d)&&{},this),p)})},registerEase:function(e,t){Rn[e]=Ah(t)},parseEase:function(e,t){return arguments.length?Ah(e,t):Rn},getById:function(e){return Bi.getById(e)},exportRoot:function(e,t){e===void 0&&(e={});var n=new Ns(e),i,r;for(n.smoothChildTiming=js(e.smoothChildTiming),Bi.remove(n),n._dp=0,n._time=n._tTime=Bi._time,i=Bi._first;i;)r=i._next,(t||!(!i._dur&&i instanceof aa&&i.vars.onComplete===i._targets[0]))&&El(n,i,i._start-i._delay),i=r;return El(Bi,n,0),n},context:function(e,t){return e?new yB(e,t):yi},matchMedia:function(e){return new o8(e)},matchMediaRefresh:function(){return Sh.forEach(function(e){var t=e.conditions,n,i;for(i in t)t[i]&&(t[i]=!1,n=1);n&&e.revert()})||$S()},addEventListener:function(e,t){var n=v_[e]||(v_[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=v_[e],i=n&&n.indexOf(t);i>=0&&n.splice(i,1)},utils:{wrap:F9,wrapYoyo:H9,distribute:$R,random:tB,snap:eB,normalize:P9,getUnit:as,clamp:N9,splitColor:rB,toArray:eo,selector:jS,mapRange:iB,pipe:I9,unitize:z9,interpolate:G9,shuffle:QR},install:HR,effects:uS,ticker:vr,updateRoot:Ns.updateRoot,plugins:gr,globalTimeline:Bi,core:{PropTween:Qs,globals:GR,Tween:aa,Timeline:Ns,Animation:Bg,getCache:yh,_removeLinkedListItem:Zy,reverting:function(){return Va},context:function(e){return e&&yi&&(yi.data.push(e),e._ctx=yi),yi},suppressOverwrites:function(e){return nM=e}}};Zs("to,from,fromTo,delayedCall,set,killTweensOf",function(a){return ly[a]=aa[a]});vr.add(Ns.updateRoot);_p=ly.to({},{duration:0});var l8=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},u8=function(e,t){var n=e._targets,i,r,l;for(i in t)for(r=n.length;r--;)l=e._ptLookup[r][i],l&&(l=l.d)&&(l._pt&&(l=l8(l,i)),l&&l.modifier&&l.modifier(t[i],e,n[r],i))},pS=function(e,t){return{name:e,headless:1,rawVars:1,init:function(i,r,l){l._onInit=function(c){var d,p;if(Ua(r)&&(d={},Zs(r,function(g){return d[g]=1}),r=d),t){d={};for(p in r)d[p]=t(r[p]);r=d}u8(c,r)}}}},er=ly.registerPlugin({name:"attr",init:function(e,t,n,i,r){var l,c,d;this.tween=n;for(l in t)d=e.getAttribute(l)||"",c=this.add(e,"setAttribute",(d||0)+"",t[l],i,r,0,0,l),c.op=l,c.b=d,this._props.push(l)},render:function(e,t){for(var n=t._pt;n;)Va?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",headless:1,init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},pS("roundProps",ZS),pS("modifiers"),pS("snap",eB))||ly;aa.version=Ns.version=er.version="3.13.0";FR=1;aM()&&qp();Rn.Power0;Rn.Power1;Rn.Power2;Rn.Power3;Rn.Power4;Rn.Linear;Rn.Quad;Rn.Cubic;Rn.Quart;Rn.Quint;Rn.Strong;Rn.Elastic;Rn.Back;Rn.SteppedEase;Rn.Bounce;Rn.Sine;Rn.Expo;Rn.Circ;var $C,Dc,Mp,gM,gh,e2,vM,c8=function(){return typeof window<"u"},Bu={},lh=180/Math.PI,Ep=Math.PI/180,gp=Math.atan2,t2=1e8,xM=/([A-Z])/g,f8=/(left|right|width|margin|padding|x)/i,h8=/[\s,\(]\S/,Cl={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},e1=function(e,t){return t.set(t.t,t.p,Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},d8=function(e,t){return t.set(t.t,t.p,e===1?t.e:Math.round((t.s+t.c*e)*1e4)/1e4+t.u,t)},p8=function(e,t){return t.set(t.t,t.p,e?Math.round((t.s+t.c*e)*1e4)/1e4+t.u:t.b,t)},m8=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},bB=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},AB=function(e,t){return t.set(t.t,t.p,e!==1?t.b:t.e,t)},g8=function(e,t,n){return e.style[t]=n},v8=function(e,t,n){return e.style.setProperty(t,n)},x8=function(e,t,n){return e._gsap[t]=n},_8=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},y8=function(e,t,n,i,r){var l=e._gsap;l.scaleX=l.scaleY=n,l.renderTransform(r,l)},b8=function(e,t,n,i,r){var l=e._gsap;l[t]=n,l.renderTransform(r,l)},wi="transform",$s=wi+"Origin",A8=function a(e,t){var n=this,i=this.target,r=i.style,l=i._gsap;if(e in Bu&&r){if(this.tfm=this.tfm||{},e!=="transform")e=Cl[e]||e,~e.indexOf(",")?e.split(",").forEach(function(c){return n.tfm[c]=bu(i,c)}):this.tfm[e]=l.x?l[e]:bu(i,e),e===$s&&(this.tfm.zOrigin=l.zOrigin);else return Cl.transform.split(",").forEach(function(c){return a.call(n,c,t)});if(this.props.indexOf(wi)>=0)return;l.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push($s,t,"")),e=wi}(r||t)&&this.props.push(e,t,r[e])},SB=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},S8=function(){var e=this.props,t=this.target,n=t.style,i=t._gsap,r,l;for(r=0;r<e.length;r+=3)e[r+1]?e[r+1]===2?t[e[r]](e[r+2]):t[e[r]]=e[r+2]:e[r+2]?n[e[r]]=e[r+2]:n.removeProperty(e[r].substr(0,2)==="--"?e[r]:e[r].replace(xM,"-$1").toLowerCase());if(this.tfm){for(l in this.tfm)i[l]=this.tfm[l];i.svg&&(i.renderTransform(),t.setAttribute("data-svg-origin",this.svgo||"")),r=vM(),(!r||!r.isStart)&&!n[wi]&&(SB(n),i.zOrigin&&n[$s]&&(n[$s]+=" "+i.zOrigin+"px",i.zOrigin=0,i.renderTransform()),i.uncache=1)}},MB=function(e,t){var n={target:e,props:[],revert:S8,save:A8};return e._gsap||er.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(i){return n.save(i)}),n},EB,t1=function(e,t){var n=Dc.createElementNS?Dc.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):Dc.createElement(e);return n&&n.style?n:Dc.createElement(e)},to=function a(e,t,n){var i=getComputedStyle(e);return i[t]||i.getPropertyValue(t.replace(xM,"-$1").toLowerCase())||i.getPropertyValue(t)||!n&&a(e,Jp(t)||t,1)||""},n2="O,Moz,ms,Ms,Webkit".split(","),Jp=function(e,t,n){var i=t||gh,r=i.style,l=5;if(e in r&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);l--&&!(n2[l]+e in r););return l<0?null:(l===3?"ms":l>=0?n2[l]:"")+e},n1=function(){c8()&&window.document&&($C=window,Dc=$C.document,Mp=Dc.documentElement,gh=t1("div")||{style:{}},t1("div"),wi=Jp(wi),$s=wi+"Origin",gh.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",EB=!!Jp("perspective"),vM=er.core.reverting,gM=1)},i2=function(e){var t=e.ownerSVGElement,n=t1("svg",t&&t.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0),r;i.style.display="block",n.appendChild(i),Mp.appendChild(n);try{r=i.getBBox()}catch{}return n.removeChild(i),Mp.removeChild(n),r},a2=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},TB=function(e){var t,n;try{t=e.getBBox()}catch{t=i2(e),n=1}return t&&(t.width||t.height)||n||(t=i2(e)),t&&!t.width&&!t.x&&!t.y?{x:+a2(e,["x","cx","x1"])||0,y:+a2(e,["y","cy","y1"])||0,width:0,height:0}:t},CB=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&TB(e))},Oh=function(e,t){if(t){var n=e.style,i;t in Bu&&t!==$s&&(t=wi),n.removeProperty?(i=t.substr(0,2),(i==="ms"||t.substr(0,6)==="webkit")&&(t="-"+t),n.removeProperty(i==="--"?t:t.replace(xM,"-$1").toLowerCase())):n.removeAttribute(t)}},wc=function(e,t,n,i,r,l){var c=new Qs(e._pt,t,n,0,1,l?AB:bB);return e._pt=c,c.b=i,c.e=r,e._props.push(n),c},s2={deg:1,rad:1,turn:1},M8={grid:1,flex:1},Vc=function a(e,t,n,i){var r=parseFloat(n)||0,l=(n+"").trim().substr((r+"").length)||"px",c=gh.style,d=f8.test(t),p=e.tagName.toLowerCase()==="svg",g=(p?"client":"offset")+(d?"Width":"Height"),v=100,_=i==="px",y=i==="%",S,E,C,M;if(i===l||!r||s2[i]||s2[l])return r;if(l!=="px"&&!_&&(r=a(e,t,n,"px")),M=e.getCTM&&CB(e),(y||l==="%")&&(Bu[t]||~t.indexOf("adius")))return S=M?e.getBBox()[d?"width":"height"]:e[g],Ji(y?r/S*v:r/100*S);if(c[d?"width":"height"]=v+(_?l:i),E=i!=="rem"&&~t.indexOf("adius")||i==="em"&&e.appendChild&&!p?e:e.parentNode,M&&(E=(e.ownerSVGElement||{}).parentNode),(!E||E===Dc||!E.appendChild)&&(E=Dc.body),C=E._gsap,C&&y&&C.width&&d&&C.time===vr.time&&!C.uncache)return Ji(r/C.width*v);if(y&&(t==="height"||t==="width")){var B=e.style[t];e.style[t]=v+i,S=e[g],B?e.style[t]=B:Oh(e,t)}else(y||l==="%")&&!M8[to(E,"display")]&&(c.position=to(e,"position")),E===e&&(c.position="static"),E.appendChild(gh),S=gh[g],E.removeChild(gh),c.position="absolute";return d&&y&&(C=yh(E),C.time=vr.time,C.width=E[g]),Ji(_?S*r/v:S&&r?v/S*r:0)},bu=function(e,t,n,i){var r;return gM||n1(),t in Cl&&t!=="transform"&&(t=Cl[t],~t.indexOf(",")&&(t=t.split(",")[0])),Bu[t]&&t!=="transform"?(r=wg(e,i),r=t!=="transformOrigin"?r[t]:r.svg?r.origin:cy(to(e,$s))+" "+r.zOrigin+"px"):(r=e.style[t],(!r||r==="auto"||i||~(r+"").indexOf("calc("))&&(r=uy[t]&&uy[t](e,t,n)||to(e,t)||XR(e,t)||(t==="opacity"?1:0))),n&&!~(r+"").trim().indexOf(" ")?Vc(e,t,r,n)+n:r},E8=function(e,t,n,i){if(!n||n==="none"){var r=Jp(t,e,1),l=r&&to(e,r,1);l&&l!==n?(t=r,n=l):t==="borderColor"&&(n=to(e,"borderTopColor"))}var c=new Qs(this._pt,e.style,t,0,1,xB),d=0,p=0,g,v,_,y,S,E,C,M,B,D,w,z;if(c.b=n,c.e=i,n+="",i+="",i.substring(0,6)==="var(--"&&(i=to(e,i.substring(4,i.indexOf(")")))),i==="auto"&&(E=e.style[t],e.style[t]=i,i=to(e,t)||i,E?e.style[t]=E:Oh(e,t)),g=[n,i],lB(g),n=g[0],i=g[1],_=n.match(xp)||[],z=i.match(xp)||[],z.length){for(;v=xp.exec(i);)C=v[0],B=i.substring(d,v.index),S?S=(S+1)%5:(B.substr(-5)==="rgba("||B.substr(-5)==="hsla(")&&(S=1),C!==(E=_[p++]||"")&&(y=parseFloat(E)||0,w=E.substr((y+"").length),C.charAt(1)==="="&&(C=Sp(y,C)+w),M=parseFloat(C),D=C.substr((M+"").length),d=xp.lastIndex-D.length,D||(D=D||Ar.units[t]||w,d===i.length&&(i+=D,c.e+=D)),w!==D&&(y=Vc(e,t,E,D)||0),c._pt={_next:c._pt,p:B||p===1?B:",",s:y,c:M-y,m:S&&S<4||t==="zIndex"?Math.round:0});c.c=d<i.length?i.substring(d,i.length):""}else c.r=t==="display"&&i==="none"?AB:bB;return zR.test(i)&&(c.e=0),this._pt=c,c},r2={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},T8=function(e){var t=e.split(" "),n=t[0],i=t[1]||"50%";return(n==="top"||n==="bottom"||i==="left"||i==="right")&&(e=n,n=i,i=e),t[0]=r2[n]||n,t[1]=r2[i]||i,t.join(" ")},C8=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n=t.t,i=n.style,r=t.u,l=n._gsap,c,d,p;if(r==="all"||r===!0)i.cssText="",d=1;else for(r=r.split(","),p=r.length;--p>-1;)c=r[p],Bu[c]&&(d=1,c=c==="transformOrigin"?$s:wi),Oh(n,c);d&&(Oh(n,wi),l&&(l.svg&&n.removeAttribute("transform"),i.scale=i.rotate=i.translate="none",wg(n,1),l.uncache=1,SB(i)))}},uy={clearProps:function(e,t,n,i,r){if(r.data!=="isFromStart"){var l=e._pt=new Qs(e._pt,t,n,0,0,C8);return l.u=i,l.pr=-10,l.tween=r,e._props.push(n),1}}},Dg=[1,0,0,1,0,0],RB={},BB=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},o2=function(e){var t=to(e,wi);return BB(t)?Dg:t.substr(7).match(IR).map(Ji)},_M=function(e,t){var n=e._gsap||yh(e),i=e.style,r=o2(e),l,c,d,p;return n.svg&&e.getAttribute("transform")?(d=e.transform.baseVal.consolidate().matrix,r=[d.a,d.b,d.c,d.d,d.e,d.f],r.join(",")==="1,0,0,1,0,0"?Dg:r):(r===Dg&&!e.offsetParent&&e!==Mp&&!n.svg&&(d=i.display,i.display="block",l=e.parentNode,(!l||!e.offsetParent&&!e.getBoundingClientRect().width)&&(p=1,c=e.nextElementSibling,Mp.appendChild(e)),r=o2(e),d?i.display=d:Oh(e,"display"),p&&(c?l.insertBefore(e,c):l?l.appendChild(e):Mp.removeChild(e))),t&&r.length>6?[r[0],r[1],r[4],r[5],r[12],r[13]]:r)},i1=function(e,t,n,i,r,l){var c=e._gsap,d=r||_M(e,!0),p=c.xOrigin||0,g=c.yOrigin||0,v=c.xOffset||0,_=c.yOffset||0,y=d[0],S=d[1],E=d[2],C=d[3],M=d[4],B=d[5],D=t.split(" "),w=parseFloat(D[0])||0,z=parseFloat(D[1])||0,O,P,G,L;n?d!==Dg&&(P=y*C-S*E)&&(G=w*(C/P)+z*(-E/P)+(E*B-C*M)/P,L=w*(-S/P)+z*(y/P)-(y*B-S*M)/P,w=G,z=L):(O=TB(e),w=O.x+(~D[0].indexOf("%")?w/100*O.width:w),z=O.y+(~(D[1]||D[0]).indexOf("%")?z/100*O.height:z)),i||i!==!1&&c.smooth?(M=w-p,B=z-g,c.xOffset=v+(M*y+B*E)-M,c.yOffset=_+(M*S+B*C)-B):c.xOffset=c.yOffset=0,c.xOrigin=w,c.yOrigin=z,c.smooth=!!i,c.origin=t,c.originIsAbsolute=!!n,e.style[$s]="0px 0px",l&&(wc(l,c,"xOrigin",p,w),wc(l,c,"yOrigin",g,z),wc(l,c,"xOffset",v,c.xOffset),wc(l,c,"yOffset",_,c.yOffset)),e.setAttribute("data-svg-origin",w+" "+z)},wg=function(e,t){var n=e._gsap||new hB(e);if("x"in n&&!t&&!n.uncache)return n;var i=e.style,r=n.scaleX<0,l="px",c="deg",d=getComputedStyle(e),p=to(e,$s)||"0",g,v,_,y,S,E,C,M,B,D,w,z,O,P,G,L,I,Y,ee,te,le,re,F,J,Z,oe,pe,q,se,Ce,Ee,Ye;return g=v=_=E=C=M=B=D=w=0,y=S=1,n.svg=!!(e.getCTM&&CB(e)),d.translate&&((d.translate!=="none"||d.scale!=="none"||d.rotate!=="none")&&(i[wi]=(d.translate!=="none"?"translate3d("+(d.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(d.rotate!=="none"?"rotate("+d.rotate+") ":"")+(d.scale!=="none"?"scale("+d.scale.split(" ").join(",")+") ":"")+(d[wi]!=="none"?d[wi]:"")),i.scale=i.rotate=i.translate="none"),P=_M(e,n.svg),n.svg&&(n.uncache?(Z=e.getBBox(),p=n.xOrigin-Z.x+"px "+(n.yOrigin-Z.y)+"px",J=""):J=!t&&e.getAttribute("data-svg-origin"),i1(e,J||p,!!J||n.originIsAbsolute,n.smooth!==!1,P)),z=n.xOrigin||0,O=n.yOrigin||0,P!==Dg&&(Y=P[0],ee=P[1],te=P[2],le=P[3],g=re=P[4],v=F=P[5],P.length===6?(y=Math.sqrt(Y*Y+ee*ee),S=Math.sqrt(le*le+te*te),E=Y||ee?gp(ee,Y)*lh:0,B=te||le?gp(te,le)*lh+E:0,B&&(S*=Math.abs(Math.cos(B*Ep))),n.svg&&(g-=z-(z*Y+O*te),v-=O-(z*ee+O*le))):(Ye=P[6],Ce=P[7],pe=P[8],q=P[9],se=P[10],Ee=P[11],g=P[12],v=P[13],_=P[14],G=gp(Ye,se),C=G*lh,G&&(L=Math.cos(-G),I=Math.sin(-G),J=re*L+pe*I,Z=F*L+q*I,oe=Ye*L+se*I,pe=re*-I+pe*L,q=F*-I+q*L,se=Ye*-I+se*L,Ee=Ce*-I+Ee*L,re=J,F=Z,Ye=oe),G=gp(-te,se),M=G*lh,G&&(L=Math.cos(-G),I=Math.sin(-G),J=Y*L-pe*I,Z=ee*L-q*I,oe=te*L-se*I,Ee=le*I+Ee*L,Y=J,ee=Z,te=oe),G=gp(ee,Y),E=G*lh,G&&(L=Math.cos(G),I=Math.sin(G),J=Y*L+ee*I,Z=re*L+F*I,ee=ee*L-Y*I,F=F*L-re*I,Y=J,re=Z),C&&Math.abs(C)+Math.abs(E)>359.9&&(C=E=0,M=180-M),y=Ji(Math.sqrt(Y*Y+ee*ee+te*te)),S=Ji(Math.sqrt(F*F+Ye*Ye)),G=gp(re,F),B=Math.abs(G)>2e-4?G*lh:0,w=Ee?1/(Ee<0?-Ee:Ee):0),n.svg&&(J=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!BB(to(e,wi)),J&&e.setAttribute("transform",J))),Math.abs(B)>90&&Math.abs(B)<270&&(r?(y*=-1,B+=E<=0?180:-180,E+=E<=0?180:-180):(S*=-1,B+=B<=0?180:-180)),t=t||n.uncache,n.x=g-((n.xPercent=g&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-g)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+l,n.y=v-((n.yPercent=v&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-v)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+l,n.z=_+l,n.scaleX=Ji(y),n.scaleY=Ji(S),n.rotation=Ji(E)+c,n.rotationX=Ji(C)+c,n.rotationY=Ji(M)+c,n.skewX=B+c,n.skewY=D+c,n.transformPerspective=w+l,(n.zOrigin=parseFloat(p.split(" ")[2])||!t&&n.zOrigin||0)&&(i[$s]=cy(p)),n.xOffset=n.yOffset=0,n.force3D=Ar.force3D,n.renderTransform=n.svg?B8:EB?DB:R8,n.uncache=0,n},cy=function(e){return(e=e.split(" "))[0]+" "+e[1]},mS=function(e,t,n){var i=as(t);return Ji(parseFloat(t)+parseFloat(Vc(e,"x",n+"px",i)))+i},R8=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,DB(e,t)},ih="0deg",X0="0px",ah=") ",DB=function(e,t){var n=t||this,i=n.xPercent,r=n.yPercent,l=n.x,c=n.y,d=n.z,p=n.rotation,g=n.rotationY,v=n.rotationX,_=n.skewX,y=n.skewY,S=n.scaleX,E=n.scaleY,C=n.transformPerspective,M=n.force3D,B=n.target,D=n.zOrigin,w="",z=M==="auto"&&e&&e!==1||M===!0;if(D&&(v!==ih||g!==ih)){var O=parseFloat(g)*Ep,P=Math.sin(O),G=Math.cos(O),L;O=parseFloat(v)*Ep,L=Math.cos(O),l=mS(B,l,P*L*-D),c=mS(B,c,-Math.sin(O)*-D),d=mS(B,d,G*L*-D+D)}C!==X0&&(w+="perspective("+C+ah),(i||r)&&(w+="translate("+i+"%, "+r+"%) "),(z||l!==X0||c!==X0||d!==X0)&&(w+=d!==X0||z?"translate3d("+l+", "+c+", "+d+") ":"translate("+l+", "+c+ah),p!==ih&&(w+="rotate("+p+ah),g!==ih&&(w+="rotateY("+g+ah),v!==ih&&(w+="rotateX("+v+ah),(_!==ih||y!==ih)&&(w+="skew("+_+", "+y+ah),(S!==1||E!==1)&&(w+="scale("+S+", "+E+ah),B.style[wi]=w||"translate(0, 0)"},B8=function(e,t){var n=t||this,i=n.xPercent,r=n.yPercent,l=n.x,c=n.y,d=n.rotation,p=n.skewX,g=n.skewY,v=n.scaleX,_=n.scaleY,y=n.target,S=n.xOrigin,E=n.yOrigin,C=n.xOffset,M=n.yOffset,B=n.forceCSS,D=parseFloat(l),w=parseFloat(c),z,O,P,G,L;d=parseFloat(d),p=parseFloat(p),g=parseFloat(g),g&&(g=parseFloat(g),p+=g,d+=g),d||p?(d*=Ep,p*=Ep,z=Math.cos(d)*v,O=Math.sin(d)*v,P=Math.sin(d-p)*-_,G=Math.cos(d-p)*_,p&&(g*=Ep,L=Math.tan(p-g),L=Math.sqrt(1+L*L),P*=L,G*=L,g&&(L=Math.tan(g),L=Math.sqrt(1+L*L),z*=L,O*=L)),z=Ji(z),O=Ji(O),P=Ji(P),G=Ji(G)):(z=v,G=_,O=P=0),(D&&!~(l+"").indexOf("px")||w&&!~(c+"").indexOf("px"))&&(D=Vc(y,"x",l,"px"),w=Vc(y,"y",c,"px")),(S||E||C||M)&&(D=Ji(D+S-(S*z+E*P)+C),w=Ji(w+E-(S*O+E*G)+M)),(i||r)&&(L=y.getBBox(),D=Ji(D+i/100*L.width),w=Ji(w+r/100*L.height)),L="matrix("+z+","+O+","+P+","+G+","+D+","+w+")",y.setAttribute("transform",L),B&&(y.style[wi]=L)},D8=function(e,t,n,i,r){var l=360,c=Ua(r),d=parseFloat(r)*(c&&~r.indexOf("rad")?lh:1),p=d-i,g=i+p+"deg",v,_;return c&&(v=r.split("_")[1],v==="short"&&(p%=l,p!==p%(l/2)&&(p+=p<0?l:-l)),v==="cw"&&p<0?p=(p+l*t2)%l-~~(p/l)*l:v==="ccw"&&p>0&&(p=(p-l*t2)%l-~~(p/l)*l)),e._pt=_=new Qs(e._pt,t,n,i,p,d8),_.e=g,_.u="deg",e._props.push(n),_},l2=function(e,t){for(var n in t)e[n]=t[n];return e},w8=function(e,t,n){var i=l2({},n._gsap),r="perspective,force3D,transformOrigin,svgOrigin",l=n.style,c,d,p,g,v,_,y,S;i.svg?(p=n.getAttribute("transform"),n.setAttribute("transform",""),l[wi]=t,c=wg(n,1),Oh(n,wi),n.setAttribute("transform",p)):(p=getComputedStyle(n)[wi],l[wi]=t,c=wg(n,1),l[wi]=p);for(d in Bu)p=i[d],g=c[d],p!==g&&r.indexOf(d)<0&&(y=as(p),S=as(g),v=y!==S?Vc(n,d,p,S):parseFloat(p),_=parseFloat(g),e._pt=new Qs(e._pt,c,d,v,_-v,e1),e._pt.u=S||0,e._props.push(d));l2(c,i)};Zs("padding,margin,Width,Radius",function(a,e){var t="Top",n="Right",i="Bottom",r="Left",l=(e<3?[t,n,i,r]:[t+r,t+n,i+n,i+r]).map(function(c){return e<2?a+c:"border"+c+a});uy[e>1?"border"+a:a]=function(c,d,p,g,v){var _,y;if(arguments.length<4)return _=l.map(function(S){return bu(c,S,p)}),y=_.join(" "),y.split(_[0]).length===5?_[0]:y;_=(g+"").split(" "),y={},l.forEach(function(S,E){return y[S]=_[E]=_[E]||_[(E-1)/2|0]}),c.init(d,y,v)}});var wB={name:"css",register:n1,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,i,r){var l=this._props,c=e.style,d=n.vars.startAt,p,g,v,_,y,S,E,C,M,B,D,w,z,O,P,G;gM||n1(),this.styles=this.styles||MB(e),G=this.styles.props,this.tween=n;for(E in t)if(E!=="autoRound"&&(g=t[E],!(gr[E]&&dB(E,t,n,i,e,r)))){if(y=typeof g,S=uy[E],y==="function"&&(g=g.call(n,i,e,r),y=typeof g),y==="string"&&~g.indexOf("random(")&&(g=Cg(g)),S)S(this,e,E,g,n)&&(P=1);else if(E.substr(0,2)==="--")p=(getComputedStyle(e).getPropertyValue(E)+"").trim(),g+="",Lc.lastIndex=0,Lc.test(p)||(C=as(p),M=as(g)),M?C!==M&&(p=Vc(e,E,p,M)+M):C&&(g+=C),this.add(c,"setProperty",p,g,i,r,0,0,E),l.push(E),G.push(E,0,c[E]);else if(y!=="undefined"){if(d&&E in d?(p=typeof d[E]=="function"?d[E].call(n,i,e,r):d[E],Ua(p)&&~p.indexOf("random(")&&(p=Cg(p)),as(p+"")||p==="auto"||(p+=Ar.units[E]||as(bu(e,E))||""),(p+"").charAt(1)==="="&&(p=bu(e,E))):p=bu(e,E),_=parseFloat(p),B=y==="string"&&g.charAt(1)==="="&&g.substr(0,2),B&&(g=g.substr(2)),v=parseFloat(g),E in Cl&&(E==="autoAlpha"&&(_===1&&bu(e,"visibility")==="hidden"&&v&&(_=0),G.push("visibility",0,c.visibility),wc(this,c,"visibility",_?"inherit":"hidden",v?"inherit":"hidden",!v)),E!=="scale"&&E!=="transform"&&(E=Cl[E],~E.indexOf(",")&&(E=E.split(",")[0]))),D=E in Bu,D){if(this.styles.save(E),y==="string"&&g.substring(0,6)==="var(--"&&(g=to(e,g.substring(4,g.indexOf(")"))),v=parseFloat(g)),w||(z=e._gsap,z.renderTransform&&!t.parseTransform||wg(e,t.parseTransform),O=t.smoothOrigin!==!1&&z.smooth,w=this._pt=new Qs(this._pt,c,wi,0,1,z.renderTransform,z,0,-1),w.dep=1),E==="scale")this._pt=new Qs(this._pt,z,"scaleY",z.scaleY,(B?Sp(z.scaleY,B+v):v)-z.scaleY||0,e1),this._pt.u=0,l.push("scaleY",E),E+="X";else if(E==="transformOrigin"){G.push($s,0,c[$s]),g=T8(g),z.svg?i1(e,g,0,O,0,this):(M=parseFloat(g.split(" ")[2])||0,M!==z.zOrigin&&wc(this,z,"zOrigin",z.zOrigin,M),wc(this,c,E,cy(p),cy(g)));continue}else if(E==="svgOrigin"){i1(e,g,1,O,0,this);continue}else if(E in RB){D8(this,z,E,_,B?Sp(_,B+g):g);continue}else if(E==="smoothOrigin"){wc(this,z,"smooth",z.smooth,g);continue}else if(E==="force3D"){z[E]=g;continue}else if(E==="transform"){w8(this,g,e);continue}}else E in c||(E=Jp(E)||E);if(D||(v||v===0)&&(_||_===0)&&!h8.test(g)&&E in c)C=(p+"").substr((_+"").length),v||(v=0),M=as(g)||(E in Ar.units?Ar.units[E]:C),C!==M&&(_=Vc(e,E,p,M)),this._pt=new Qs(this._pt,D?z:c,E,_,(B?Sp(_,B+v):v)-_,!D&&(M==="px"||E==="zIndex")&&t.autoRound!==!1?m8:e1),this._pt.u=M||0,C!==M&&M!=="%"&&(this._pt.b=p,this._pt.r=p8);else if(E in c)E8.call(this,e,E,p,B?B+g:g);else if(E in e)this.add(e,E,p||e[E],B?B+g:g,i,r);else if(E!=="parseTransform"){rM(E,g);continue}D||(E in c?G.push(E,0,c[E]):typeof e[E]=="function"?G.push(E,2,e[E]()):G.push(E,1,p||e[E])),l.push(E)}}P&&_B(this)},render:function(e,t){if(t.tween._time||!vM())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:bu,aliases:Cl,getSetter:function(e,t,n){var i=Cl[t];return i&&i.indexOf(",")<0&&(t=i),t in Bu&&t!==$s&&(e._gsap.x||bu(e,"x"))?n&&e2===n?t==="scale"?_8:x8:(e2=n||{})&&(t==="scale"?y8:b8):e.style&&!iM(e.style[t])?g8:~t.indexOf("-")?v8:pM(e,t)},core:{_removeProperty:Oh,_getMatrix:_M}};er.utils.checkPrefix=Jp;er.core.getStyleSaver=MB;(function(a,e,t,n){var i=Zs(a+","+e+","+t,function(r){Bu[r]=1});Zs(e,function(r){Ar.units[r]="deg",RB[r]=1}),Cl[i[13]]=a+","+e,Zs(n,function(r){var l=r.split(":");Cl[l[1]]=i[l[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Zs("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(a){Ar.units[a]="px"});er.registerPlugin(wB);var yM=er.registerPlugin(wB)||er;yM.core.Tween;let u2=typeof document<"u"?Qe.useLayoutEffect:Qe.useEffect,c2=a=>a&&!Array.isArray(a)&&typeof a=="object",u_=[],U8={},UB=yM;const bM=(a,e=u_)=>{let t=U8;c2(a)?(t=a,a=null,e="dependencies"in t?t.dependencies:u_):c2(e)&&(t=e,e="dependencies"in t?t.dependencies:u_),a&&typeof a!="function"&&console.warn("First parameter must be a function or config object");const{scope:n,revertOnUpdate:i}=t,r=Qe.useRef(!1),l=Qe.useRef(UB.context(()=>{},n)),c=Qe.useRef(p=>l.current.add(null,p)),d=e&&e.length&&!i;return d&&u2(()=>(r.current=!0,()=>l.current.revert()),u_),u2(()=>{if(a&&l.current.add(a,n),!d||!r.current)return()=>l.current.revert()},e),{context:l.current,contextSafe:c.current}};bM.register=a=>{UB=a};bM.headless=!0;const O8=()=>(bM(()=>{yM.fromTo(".hero-text h1",{y:50,opacity:0},{y:0,opacity:1,duration:1,ease:"power2.inOut",stagger:.2})}),Ke.jsxs("section",{id:"Hero",className:"relative overflow-hidden",children:[Ke.jsx("div",{className:"absolute top-0 left-0 z-10",children:Ke.jsx("img",{src:"/images/bg.png",alt:"Background"})}),Ke.jsxs("div",{className:"hero-layout",children:[Ke.jsx("header",{className:"flex flex-col justify-center md:w-full w-screen md:px-20 px-5",children:Ke.jsxs("div",{className:"flex flex-col gap-7",children:[Ke.jsxs("div",{className:"hero-text",children:[Ke.jsxs("h1",{children:["Shaping",Ke.jsx("span",{className:"slide",children:Ke.jsx("span",{className:"wrapper",children:ND.map(a=>Ke.jsxs("span",{className:"flex items-center md:gap-3 gap-1 pb-2",children:[Ke.jsx("img",{src:a.imgPath,alt:a.text,className:"xl:size-12 md:size-10 size-7 md:p-2 p-1 rounded-full bg-white-50"}),Ke.jsx("span",{children:a.text})]},a.text))})})]}),Ke.jsx("h1",{children:"into real projects"}),Ke.jsx("h1",{children:"that deliver results"})]}),Ke.jsx("p",{className:"text-white-50 md:text-xl relative z-10 pointer-events-none",children:"Hi. I'm Sohrab Sheikh, a developer based in India, with a passion to code."}),Ke.jsx(LD,{className:"md:w-80 md:h-16 w-60 h-12",id:"button",text:"See my work"})]})}),Ke.jsx("figure",{children:Ke.jsx("div",{className:"hero-3d-layout",children:Ke.jsx(v9,{})})})]})]})),N8=()=>Ke.jsx(Ke.Fragment,{children:Ke.jsx(O8,{})});OD.createRoot(document.getElementById("root")).render(Ke.jsx(Qe.StrictMode,{children:Ke.jsx(N8,{})}));
